function VG(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function dM(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function r3(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var s3={exports:{}},jv={},o3={exports:{}},Ut={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nm=Symbol.for("react.element"),zG=Symbol.for("react.portal"),GG=Symbol.for("react.fragment"),HG=Symbol.for("react.strict_mode"),WG=Symbol.for("react.profiler"),jG=Symbol.for("react.provider"),XG=Symbol.for("react.context"),JG=Symbol.for("react.forward_ref"),KG=Symbol.for("react.suspense"),$G=Symbol.for("react.memo"),YG=Symbol.for("react.lazy"),xb=Symbol.iterator;function qG(n){return n===null||typeof n!="object"?null:(n=xb&&n[xb]||n["@@iterator"],typeof n=="function"?n:null)}var a3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},l3=Object.assign,c3={};function uf(n,e,t){this.props=n,this.context=e,this.refs=c3,this.updater=t||a3}uf.prototype.isReactComponent={};uf.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};uf.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function u3(){}u3.prototype=uf.prototype;function pM(n,e,t){this.props=n,this.context=e,this.refs=c3,this.updater=t||a3}var mM=pM.prototype=new u3;mM.constructor=pM;l3(mM,uf.prototype);mM.isPureReactComponent=!0;var Ab=Array.isArray,h3=Object.prototype.hasOwnProperty,gM={current:null},f3={key:!0,ref:!0,__self:!0,__source:!0};function d3(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)h3.call(e,i)&&!f3.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:nm,type:n,key:s,ref:o,props:r,_owner:gM.current}}function QG(n,e){return{$$typeof:nm,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function yM(n){return typeof n=="object"&&n!==null&&n.$$typeof===nm}function ZG(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var Sb=/\/+/g;function C1(n,e){return typeof n=="object"&&n!==null&&n.key!=null?ZG(""+n.key):e.toString(36)}function py(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case nm:case zG:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+C1(o,0):i,Ab(r)?(t="",n!=null&&(t=n.replace(Sb,"$&/")+"/"),py(r,e,t,"",function(c){return c})):r!=null&&(yM(r)&&(r=QG(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(Sb,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",Ab(n))for(var a=0;a<n.length;a++){s=n[a];var l=i+C1(s,a);o+=py(s,e,t,l,r)}else if(l=qG(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=i+C1(s,a++),o+=py(s,e,t,l,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function kg(n,e,t){if(n==null)return n;var i=[],r=0;return py(n,i,"","",function(s){return e.call(t,s,r++)}),i}function eH(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var yr={current:null},my={transition:null},tH={ReactCurrentDispatcher:yr,ReactCurrentBatchConfig:my,ReactCurrentOwner:gM};Ut.Children={map:kg,forEach:function(n,e,t){kg(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return kg(n,function(){e++}),e},toArray:function(n){return kg(n,function(e){return e})||[]},only:function(n){if(!yM(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Ut.Component=uf;Ut.Fragment=GG;Ut.Profiler=WG;Ut.PureComponent=pM;Ut.StrictMode=HG;Ut.Suspense=KG;Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tH;Ut.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=l3({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=gM.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)h3.call(e,l)&&!f3.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:nm,type:n.type,key:r,ref:s,props:i,_owner:o}};Ut.createContext=function(n){return n={$$typeof:XG,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:jG,_context:n},n.Consumer=n};Ut.createElement=d3;Ut.createFactory=function(n){var e=d3.bind(null,n);return e.type=n,e};Ut.createRef=function(){return{current:null}};Ut.forwardRef=function(n){return{$$typeof:JG,render:n}};Ut.isValidElement=yM;Ut.lazy=function(n){return{$$typeof:YG,_payload:{_status:-1,_result:n},_init:eH}};Ut.memo=function(n,e){return{$$typeof:$G,type:n,compare:e===void 0?null:e}};Ut.startTransition=function(n){var e=my.transition;my.transition={};try{n()}finally{my.transition=e}};Ut.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ut.useCallback=function(n,e){return yr.current.useCallback(n,e)};Ut.useContext=function(n){return yr.current.useContext(n)};Ut.useDebugValue=function(){};Ut.useDeferredValue=function(n){return yr.current.useDeferredValue(n)};Ut.useEffect=function(n,e){return yr.current.useEffect(n,e)};Ut.useId=function(){return yr.current.useId()};Ut.useImperativeHandle=function(n,e,t){return yr.current.useImperativeHandle(n,e,t)};Ut.useInsertionEffect=function(n,e){return yr.current.useInsertionEffect(n,e)};Ut.useLayoutEffect=function(n,e){return yr.current.useLayoutEffect(n,e)};Ut.useMemo=function(n,e){return yr.current.useMemo(n,e)};Ut.useReducer=function(n,e,t){return yr.current.useReducer(n,e,t)};Ut.useRef=function(n){return yr.current.useRef(n)};Ut.useState=function(n){return yr.current.useState(n)};Ut.useSyncExternalStore=function(n,e,t){return yr.current.useSyncExternalStore(n,e,t)};Ut.useTransition=function(){return yr.current.useTransition()};Ut.version="18.2.0";o3.exports=Ut;var W=o3.exports;const Bc=dM(W),nH=VG({__proto__:null,default:Bc},[W]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iH=W,rH=Symbol.for("react.element"),sH=Symbol.for("react.fragment"),oH=Object.prototype.hasOwnProperty,aH=iH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,lH={key:!0,ref:!0,__self:!0,__source:!0};function p3(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)oH.call(e,i)&&!lH.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:rH,type:n,key:s,ref:o,props:r,_owner:aH.current}}jv.Fragment=sH;jv.jsx=p3;jv.jsxs=p3;s3.exports=jv;var Y=s3.exports,RS={},m3={exports:{}},$r={},g3={exports:{}},y3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(L,k){var z=L.length;L.push(k);e:for(;0<z;){var j=z-1>>>1,te=L[j];if(0<r(te,k))L[j]=k,L[z]=te,z=j;else break e}}function t(L){return L.length===0?null:L[0]}function i(L){if(L.length===0)return null;var k=L[0],z=L.pop();if(z!==k){L[0]=z;e:for(var j=0,te=L.length,Z=te>>>1;j<Z;){var ce=2*(j+1)-1,Se=L[ce],Te=ce+1,be=L[Te];if(0>r(Se,z))Te<te&&0>r(be,Se)?(L[j]=be,L[Te]=z,j=Te):(L[j]=Se,L[ce]=z,j=ce);else if(Te<te&&0>r(be,z))L[j]=be,L[Te]=z,j=Te;else break e}}return k}function r(L,k){var z=L.sortIndex-k.sortIndex;return z!==0?z:L.id-k.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,p=3,m=!1,y=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(L){for(var k=t(c);k!==null;){if(k.callback===null)i(c);else if(k.startTime<=L)i(c),k.sortIndex=k.expirationTime,e(l,k);else break;k=t(c)}}function w(L){if(x=!1,S(L),!y)if(t(l)!==null)y=!0,Q(R);else{var k=t(c);k!==null&&se(w,k.startTime-L)}}function R(L,k){y=!1,x&&(x=!1,g(B),B=-1),m=!0;var z=p;try{for(S(k),d=t(l);d!==null&&(!(d.expirationTime>k)||L&&!U());){var j=d.callback;if(typeof j=="function"){d.callback=null,p=d.priorityLevel;var te=j(d.expirationTime<=k);k=n.unstable_now(),typeof te=="function"?d.callback=te:d===t(l)&&i(l),S(k)}else i(l);d=t(l)}if(d!==null)var Z=!0;else{var ce=t(c);ce!==null&&se(w,ce.startTime-k),Z=!1}return Z}finally{d=null,p=z,m=!1}}var T=!1,P=null,B=-1,b=5,I=-1;function U(){return!(n.unstable_now()-I<b)}function K(){if(P!==null){var L=n.unstable_now();I=L;var k=!0;try{k=P(!0,L)}finally{k?re():(T=!1,P=null)}}else T=!1}var re;if(typeof A=="function")re=function(){A(K)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,$=G.port2;G.port1.onmessage=K,re=function(){$.postMessage(null)}}else re=function(){_(K,0)};function Q(L){P=L,T||(T=!0,re())}function se(L,k){B=_(function(){L(n.unstable_now())},k)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(L){L.callback=null},n.unstable_continueExecution=function(){y||m||(y=!0,Q(R))},n.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<L?Math.floor(1e3/L):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(L){switch(p){case 1:case 2:case 3:var k=3;break;default:k=p}var z=p;p=k;try{return L()}finally{p=z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(L,k){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var z=p;p=L;try{return k()}finally{p=z}},n.unstable_scheduleCallback=function(L,k,z){var j=n.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?j+z:j):z=j,L){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=z+te,L={id:h++,callback:k,priorityLevel:L,startTime:z,expirationTime:te,sortIndex:-1},z>j?(L.sortIndex=z,e(c,L),t(l)===null&&L===t(c)&&(x?(g(B),B=-1):x=!0,se(w,z-j))):(L.sortIndex=te,e(l,L),y||m||(y=!0,Q(R))),L},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(L){var k=p;return function(){var z=p;p=k;try{return L.apply(this,arguments)}finally{p=z}}}})(y3);g3.exports=y3;var cH=g3.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v3=W,jr=cH;function Ce(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _3=new Set,sp={};function Jc(n,e){Fh(n,e),Fh(n+"Capture",e)}function Fh(n,e){for(sp[n]=e,n=0;n<e.length;n++)_3.add(e[n])}var sa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bS=Object.prototype.hasOwnProperty,uH=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Eb={},wb={};function hH(n){return bS.call(wb,n)?!0:bS.call(Eb,n)?!1:uH.test(n)?wb[n]=!0:(Eb[n]=!0,!1)}function fH(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function dH(n,e,t,i){if(e===null||typeof e>"u"||fH(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function vr(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Oi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Oi[n]=new vr(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Oi[e]=new vr(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Oi[n]=new vr(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Oi[n]=new vr(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Oi[n]=new vr(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Oi[n]=new vr(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Oi[n]=new vr(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Oi[n]=new vr(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Oi[n]=new vr(n,5,!1,n.toLowerCase(),null,!1,!1)});var vM=/[\-:]([a-z])/g;function _M(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(vM,_M);Oi[e]=new vr(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(vM,_M);Oi[e]=new vr(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(vM,_M);Oi[e]=new vr(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Oi[n]=new vr(n,1,!1,n.toLowerCase(),null,!1,!1)});Oi.xlinkHref=new vr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Oi[n]=new vr(n,1,!1,n.toLowerCase(),null,!0,!0)});function xM(n,e,t,i){var r=Oi.hasOwnProperty(e)?Oi[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(dH(e,t,r,i)&&(t=null),i||r===null?hH(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var da=v3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vg=Symbol.for("react.element"),Yu=Symbol.for("react.portal"),qu=Symbol.for("react.fragment"),AM=Symbol.for("react.strict_mode"),PS=Symbol.for("react.profiler"),x3=Symbol.for("react.provider"),A3=Symbol.for("react.context"),SM=Symbol.for("react.forward_ref"),IS=Symbol.for("react.suspense"),DS=Symbol.for("react.suspense_list"),EM=Symbol.for("react.memo"),Na=Symbol.for("react.lazy"),S3=Symbol.for("react.offscreen"),Mb=Symbol.iterator;function Jf(n){return n===null||typeof n!="object"?null:(n=Mb&&n[Mb]||n["@@iterator"],typeof n=="function"?n:null)}var In=Object.assign,R1;function Md(n){if(R1===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);R1=e&&e[1]||""}return`
`+R1+n}var b1=!1;function P1(n,e){if(!n||b1)return"";b1=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{b1=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Md(n):""}function pH(n){switch(n.tag){case 5:return Md(n.type);case 16:return Md("Lazy");case 13:return Md("Suspense");case 19:return Md("SuspenseList");case 0:case 2:case 15:return n=P1(n.type,!1),n;case 11:return n=P1(n.type.render,!1),n;case 1:return n=P1(n.type,!0),n;default:return""}}function LS(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case qu:return"Fragment";case Yu:return"Portal";case PS:return"Profiler";case AM:return"StrictMode";case IS:return"Suspense";case DS:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case A3:return(n.displayName||"Context")+".Consumer";case x3:return(n._context.displayName||"Context")+".Provider";case SM:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case EM:return e=n.displayName||null,e!==null?e:LS(n.type)||"Memo";case Na:e=n._payload,n=n._init;try{return LS(n(e))}catch{}}return null}function mH(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return LS(e);case 8:return e===AM?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function al(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function E3(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function gH(n){var e=E3(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function zg(n){n._valueTracker||(n._valueTracker=gH(n))}function w3(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=E3(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function zy(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function BS(n,e){var t=e.checked;return In({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function Tb(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=al(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function M3(n,e){e=e.checked,e!=null&&xM(n,"checked",e,!1)}function NS(n,e){M3(n,e);var t=al(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?FS(n,e.type,t):e.hasOwnProperty("defaultValue")&&FS(n,e.type,al(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Cb(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function FS(n,e,t){(e!=="number"||zy(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Td=Array.isArray;function Ah(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+al(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function OS(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ce(91));return In({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Rb(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Ce(92));if(Td(t)){if(1<t.length)throw Error(Ce(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:al(t)}}function T3(n,e){var t=al(e.value),i=al(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function bb(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function C3(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function US(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?C3(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Gg,R3=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Gg=Gg||document.createElement("div"),Gg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Gg.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function op(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Nd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yH=["Webkit","ms","Moz","O"];Object.keys(Nd).forEach(function(n){yH.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Nd[e]=Nd[n]})});function b3(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Nd.hasOwnProperty(n)&&Nd[n]?(""+e).trim():e+"px"}function P3(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=b3(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var vH=In({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kS(n,e){if(e){if(vH[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ce(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ce(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ce(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ce(62))}}function VS(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zS=null;function wM(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var GS=null,Sh=null,Eh=null;function Pb(n){if(n=sm(n)){if(typeof GS!="function")throw Error(Ce(280));var e=n.stateNode;e&&(e=Yv(e),GS(n.stateNode,n.type,e))}}function I3(n){Sh?Eh?Eh.push(n):Eh=[n]:Sh=n}function D3(){if(Sh){var n=Sh,e=Eh;if(Eh=Sh=null,Pb(n),e)for(n=0;n<e.length;n++)Pb(e[n])}}function L3(n,e){return n(e)}function B3(){}var I1=!1;function N3(n,e,t){if(I1)return n(e,t);I1=!0;try{return L3(n,e,t)}finally{I1=!1,(Sh!==null||Eh!==null)&&(B3(),D3())}}function ap(n,e){var t=n.stateNode;if(t===null)return null;var i=Yv(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Ce(231,e,typeof t));return t}var HS=!1;if(sa)try{var Kf={};Object.defineProperty(Kf,"passive",{get:function(){HS=!0}}),window.addEventListener("test",Kf,Kf),window.removeEventListener("test",Kf,Kf)}catch{HS=!1}function _H(n,e,t,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(h){this.onError(h)}}var Fd=!1,Gy=null,Hy=!1,WS=null,xH={onError:function(n){Fd=!0,Gy=n}};function AH(n,e,t,i,r,s,o,a,l){Fd=!1,Gy=null,_H.apply(xH,arguments)}function SH(n,e,t,i,r,s,o,a,l){if(AH.apply(this,arguments),Fd){if(Fd){var c=Gy;Fd=!1,Gy=null}else throw Error(Ce(198));Hy||(Hy=!0,WS=c)}}function Kc(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function F3(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Ib(n){if(Kc(n)!==n)throw Error(Ce(188))}function EH(n){var e=n.alternate;if(!e){if(e=Kc(n),e===null)throw Error(Ce(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return Ib(r),n;if(s===i)return Ib(r),e;s=s.sibling}throw Error(Ce(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o)throw Error(Ce(189))}}if(t.alternate!==i)throw Error(Ce(190))}if(t.tag!==3)throw Error(Ce(188));return t.stateNode.current===t?n:e}function O3(n){return n=EH(n),n!==null?U3(n):null}function U3(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=U3(n);if(e!==null)return e;n=n.sibling}return null}var k3=jr.unstable_scheduleCallback,Db=jr.unstable_cancelCallback,wH=jr.unstable_shouldYield,MH=jr.unstable_requestPaint,jn=jr.unstable_now,TH=jr.unstable_getCurrentPriorityLevel,MM=jr.unstable_ImmediatePriority,V3=jr.unstable_UserBlockingPriority,Wy=jr.unstable_NormalPriority,CH=jr.unstable_LowPriority,z3=jr.unstable_IdlePriority,Xv=null,mo=null;function RH(n){if(mo&&typeof mo.onCommitFiberRoot=="function")try{mo.onCommitFiberRoot(Xv,n,void 0,(n.current.flags&128)===128)}catch{}}var Us=Math.clz32?Math.clz32:IH,bH=Math.log,PH=Math.LN2;function IH(n){return n>>>=0,n===0?32:31-(bH(n)/PH|0)|0}var Hg=64,Wg=4194304;function Cd(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function jy(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?i=Cd(a):(s&=o,s!==0&&(i=Cd(s)))}else o=t&~r,o!==0?i=Cd(o):s!==0&&(i=Cd(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-Us(e),r=1<<t,i|=n[t],e&=~r;return i}function DH(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function LH(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Us(s),a=1<<o,l=r[o];l===-1?(!(a&t)||a&i)&&(r[o]=DH(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function jS(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function G3(){var n=Hg;return Hg<<=1,!(Hg&4194240)&&(Hg=64),n}function D1(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function im(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Us(e),n[e]=t}function BH(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-Us(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function TM(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-Us(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var sn=0;function H3(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var W3,CM,j3,X3,J3,XS=!1,jg=[],Xa=null,Ja=null,Ka=null,lp=new Map,cp=new Map,ka=[],NH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lb(n,e){switch(n){case"focusin":case"focusout":Xa=null;break;case"dragenter":case"dragleave":Ja=null;break;case"mouseover":case"mouseout":Ka=null;break;case"pointerover":case"pointerout":lp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":cp.delete(e.pointerId)}}function $f(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=sm(e),e!==null&&CM(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function FH(n,e,t,i,r){switch(e){case"focusin":return Xa=$f(Xa,n,e,t,i,r),!0;case"dragenter":return Ja=$f(Ja,n,e,t,i,r),!0;case"mouseover":return Ka=$f(Ka,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return lp.set(s,$f(lp.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,cp.set(s,$f(cp.get(s)||null,n,e,t,i,r)),!0}return!1}function K3(n){var e=lc(n.target);if(e!==null){var t=Kc(e);if(t!==null){if(e=t.tag,e===13){if(e=F3(t),e!==null){n.blockedOn=e,J3(n.priority,function(){j3(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function gy(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=JS(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);zS=i,t.target.dispatchEvent(i),zS=null}else return e=sm(t),e!==null&&CM(e),n.blockedOn=t,!1;e.shift()}return!0}function Bb(n,e,t){gy(n)&&t.delete(e)}function OH(){XS=!1,Xa!==null&&gy(Xa)&&(Xa=null),Ja!==null&&gy(Ja)&&(Ja=null),Ka!==null&&gy(Ka)&&(Ka=null),lp.forEach(Bb),cp.forEach(Bb)}function Yf(n,e){n.blockedOn===e&&(n.blockedOn=null,XS||(XS=!0,jr.unstable_scheduleCallback(jr.unstable_NormalPriority,OH)))}function up(n){function e(r){return Yf(r,n)}if(0<jg.length){Yf(jg[0],n);for(var t=1;t<jg.length;t++){var i=jg[t];i.blockedOn===n&&(i.blockedOn=null)}}for(Xa!==null&&Yf(Xa,n),Ja!==null&&Yf(Ja,n),Ka!==null&&Yf(Ka,n),lp.forEach(e),cp.forEach(e),t=0;t<ka.length;t++)i=ka[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<ka.length&&(t=ka[0],t.blockedOn===null);)K3(t),t.blockedOn===null&&ka.shift()}var wh=da.ReactCurrentBatchConfig,Xy=!0;function UH(n,e,t,i){var r=sn,s=wh.transition;wh.transition=null;try{sn=1,RM(n,e,t,i)}finally{sn=r,wh.transition=s}}function kH(n,e,t,i){var r=sn,s=wh.transition;wh.transition=null;try{sn=4,RM(n,e,t,i)}finally{sn=r,wh.transition=s}}function RM(n,e,t,i){if(Xy){var r=JS(n,e,t,i);if(r===null)G1(n,e,i,Jy,t),Lb(n,i);else if(FH(r,n,e,t,i))i.stopPropagation();else if(Lb(n,i),e&4&&-1<NH.indexOf(n)){for(;r!==null;){var s=sm(r);if(s!==null&&W3(s),s=JS(n,e,t,i),s===null&&G1(n,e,i,Jy,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else G1(n,e,i,null,t)}}var Jy=null;function JS(n,e,t,i){if(Jy=null,n=wM(i),n=lc(n),n!==null)if(e=Kc(n),e===null)n=null;else if(t=e.tag,t===13){if(n=F3(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Jy=n,null}function $3(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(TH()){case MM:return 1;case V3:return 4;case Wy:case CH:return 16;case z3:return 536870912;default:return 16}default:return 16}}var Ga=null,bM=null,yy=null;function Y3(){if(yy)return yy;var n,e=bM,t=e.length,i,r="value"in Ga?Ga.value:Ga.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return yy=r.slice(n,1<i?1-i:void 0)}function vy(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Xg(){return!0}function Nb(){return!1}function Yr(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Xg:Nb,this.isPropagationStopped=Nb,this}return In(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Xg)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Xg)},persist:function(){},isPersistent:Xg}),e}var hf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},PM=Yr(hf),rm=In({},hf,{view:0,detail:0}),VH=Yr(rm),L1,B1,qf,Jv=In({},rm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:IM,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==qf&&(qf&&n.type==="mousemove"?(L1=n.screenX-qf.screenX,B1=n.screenY-qf.screenY):B1=L1=0,qf=n),L1)},movementY:function(n){return"movementY"in n?n.movementY:B1}}),Fb=Yr(Jv),zH=In({},Jv,{dataTransfer:0}),GH=Yr(zH),HH=In({},rm,{relatedTarget:0}),N1=Yr(HH),WH=In({},hf,{animationName:0,elapsedTime:0,pseudoElement:0}),jH=Yr(WH),XH=In({},hf,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),JH=Yr(XH),KH=In({},hf,{data:0}),Ob=Yr(KH),$H={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},YH={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function QH(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=qH[n])?!!e[n]:!1}function IM(){return QH}var ZH=In({},rm,{key:function(n){if(n.key){var e=$H[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=vy(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?YH[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:IM,charCode:function(n){return n.type==="keypress"?vy(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?vy(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),e5=Yr(ZH),t5=In({},Jv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ub=Yr(t5),n5=In({},rm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:IM}),i5=Yr(n5),r5=In({},hf,{propertyName:0,elapsedTime:0,pseudoElement:0}),s5=Yr(r5),o5=In({},Jv,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),a5=Yr(o5),l5=[9,13,27,32],DM=sa&&"CompositionEvent"in window,Od=null;sa&&"documentMode"in document&&(Od=document.documentMode);var c5=sa&&"TextEvent"in window&&!Od,q3=sa&&(!DM||Od&&8<Od&&11>=Od),kb=" ",Vb=!1;function Q3(n,e){switch(n){case"keyup":return l5.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Z3(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Qu=!1;function u5(n,e){switch(n){case"compositionend":return Z3(e);case"keypress":return e.which!==32?null:(Vb=!0,kb);case"textInput":return n=e.data,n===kb&&Vb?null:n;default:return null}}function h5(n,e){if(Qu)return n==="compositionend"||!DM&&Q3(n,e)?(n=Y3(),yy=bM=Ga=null,Qu=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return q3&&e.locale!=="ko"?null:e.data;default:return null}}var f5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zb(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!f5[n.type]:e==="textarea"}function eN(n,e,t,i){I3(i),e=Ky(e,"onChange"),0<e.length&&(t=new PM("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var Ud=null,hp=null;function d5(n){hN(n,0)}function Kv(n){var e=th(n);if(w3(e))return n}function p5(n,e){if(n==="change")return e}var tN=!1;if(sa){var F1;if(sa){var O1="oninput"in document;if(!O1){var Gb=document.createElement("div");Gb.setAttribute("oninput","return;"),O1=typeof Gb.oninput=="function"}F1=O1}else F1=!1;tN=F1&&(!document.documentMode||9<document.documentMode)}function Hb(){Ud&&(Ud.detachEvent("onpropertychange",nN),hp=Ud=null)}function nN(n){if(n.propertyName==="value"&&Kv(hp)){var e=[];eN(e,hp,n,wM(n)),N3(d5,e)}}function m5(n,e,t){n==="focusin"?(Hb(),Ud=e,hp=t,Ud.attachEvent("onpropertychange",nN)):n==="focusout"&&Hb()}function g5(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Kv(hp)}function y5(n,e){if(n==="click")return Kv(e)}function v5(n,e){if(n==="input"||n==="change")return Kv(e)}function _5(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var zs=typeof Object.is=="function"?Object.is:_5;function fp(n,e){if(zs(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!bS.call(e,r)||!zs(n[r],e[r]))return!1}return!0}function Wb(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function jb(n,e){var t=Wb(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Wb(t)}}function iN(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?iN(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function rN(){for(var n=window,e=zy();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=zy(n.document)}return e}function LM(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function x5(n){var e=rN(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&iN(t.ownerDocument.documentElement,t)){if(i!==null&&LM(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=jb(t,s);var o=jb(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var A5=sa&&"documentMode"in document&&11>=document.documentMode,Zu=null,KS=null,kd=null,$S=!1;function Xb(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;$S||Zu==null||Zu!==zy(i)||(i=Zu,"selectionStart"in i&&LM(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),kd&&fp(kd,i)||(kd=i,i=Ky(KS,"onSelect"),0<i.length&&(e=new PM("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=Zu)))}function Jg(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var eh={animationend:Jg("Animation","AnimationEnd"),animationiteration:Jg("Animation","AnimationIteration"),animationstart:Jg("Animation","AnimationStart"),transitionend:Jg("Transition","TransitionEnd")},U1={},sN={};sa&&(sN=document.createElement("div").style,"AnimationEvent"in window||(delete eh.animationend.animation,delete eh.animationiteration.animation,delete eh.animationstart.animation),"TransitionEvent"in window||delete eh.transitionend.transition);function $v(n){if(U1[n])return U1[n];if(!eh[n])return n;var e=eh[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in sN)return U1[n]=e[t];return n}var oN=$v("animationend"),aN=$v("animationiteration"),lN=$v("animationstart"),cN=$v("transitionend"),uN=new Map,Jb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _l(n,e){uN.set(n,e),Jc(e,[n])}for(var k1=0;k1<Jb.length;k1++){var V1=Jb[k1],S5=V1.toLowerCase(),E5=V1[0].toUpperCase()+V1.slice(1);_l(S5,"on"+E5)}_l(oN,"onAnimationEnd");_l(aN,"onAnimationIteration");_l(lN,"onAnimationStart");_l("dblclick","onDoubleClick");_l("focusin","onFocus");_l("focusout","onBlur");_l(cN,"onTransitionEnd");Fh("onMouseEnter",["mouseout","mouseover"]);Fh("onMouseLeave",["mouseout","mouseover"]);Fh("onPointerEnter",["pointerout","pointerover"]);Fh("onPointerLeave",["pointerout","pointerover"]);Jc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Jc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Jc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Jc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Jc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Jc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),w5=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rd));function Kb(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,SH(i,e,void 0,n),n.currentTarget=null}function hN(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;Kb(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;Kb(r,a,c),s=l}}}if(Hy)throw n=WS,Hy=!1,WS=null,n}function dn(n,e){var t=e[eE];t===void 0&&(t=e[eE]=new Set);var i=n+"__bubble";t.has(i)||(fN(e,n,2,!1),t.add(i))}function z1(n,e,t){var i=0;e&&(i|=4),fN(t,n,i,e)}var Kg="_reactListening"+Math.random().toString(36).slice(2);function dp(n){if(!n[Kg]){n[Kg]=!0,_3.forEach(function(t){t!=="selectionchange"&&(w5.has(t)||z1(t,!1,n),z1(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Kg]||(e[Kg]=!0,z1("selectionchange",!1,e))}}function fN(n,e,t,i){switch($3(e)){case 1:var r=UH;break;case 4:r=kH;break;default:r=RM}t=r.bind(null,e,t,n),r=void 0,!HS||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function G1(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=lc(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}N3(function(){var c=s,h=wM(t),d=[];e:{var p=uN.get(n);if(p!==void 0){var m=PM,y=n;switch(n){case"keypress":if(vy(t)===0)break e;case"keydown":case"keyup":m=e5;break;case"focusin":y="focus",m=N1;break;case"focusout":y="blur",m=N1;break;case"beforeblur":case"afterblur":m=N1;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Fb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=GH;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=i5;break;case oN:case aN:case lN:m=jH;break;case cN:m=s5;break;case"scroll":m=VH;break;case"wheel":m=a5;break;case"copy":case"cut":case"paste":m=JH;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Ub}var x=(e&4)!==0,_=!x&&n==="scroll",g=x?p!==null?p+"Capture":null:p;x=[];for(var A=c,S;A!==null;){S=A;var w=S.stateNode;if(S.tag===5&&w!==null&&(S=w,g!==null&&(w=ap(A,g),w!=null&&x.push(pp(A,w,S)))),_)break;A=A.return}0<x.length&&(p=new m(p,y,null,t,h),d.push({event:p,listeners:x}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==zS&&(y=t.relatedTarget||t.fromElement)&&(lc(y)||y[oa]))break e;if((m||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,m?(y=t.relatedTarget||t.toElement,m=c,y=y?lc(y):null,y!==null&&(_=Kc(y),y!==_||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=c),m!==y)){if(x=Fb,w="onMouseLeave",g="onMouseEnter",A="mouse",(n==="pointerout"||n==="pointerover")&&(x=Ub,w="onPointerLeave",g="onPointerEnter",A="pointer"),_=m==null?p:th(m),S=y==null?p:th(y),p=new x(w,A+"leave",m,t,h),p.target=_,p.relatedTarget=S,w=null,lc(h)===c&&(x=new x(g,A+"enter",y,t,h),x.target=S,x.relatedTarget=_,w=x),_=w,m&&y)t:{for(x=m,g=y,A=0,S=x;S;S=xu(S))A++;for(S=0,w=g;w;w=xu(w))S++;for(;0<A-S;)x=xu(x),A--;for(;0<S-A;)g=xu(g),S--;for(;A--;){if(x===g||g!==null&&x===g.alternate)break t;x=xu(x),g=xu(g)}x=null}else x=null;m!==null&&$b(d,p,m,x,!1),y!==null&&_!==null&&$b(d,_,y,x,!0)}}e:{if(p=c?th(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var R=p5;else if(zb(p))if(tN)R=v5;else{R=g5;var T=m5}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(R=y5);if(R&&(R=R(n,c))){eN(d,R,t,h);break e}T&&T(n,p,c),n==="focusout"&&(T=p._wrapperState)&&T.controlled&&p.type==="number"&&FS(p,"number",p.value)}switch(T=c?th(c):window,n){case"focusin":(zb(T)||T.contentEditable==="true")&&(Zu=T,KS=c,kd=null);break;case"focusout":kd=KS=Zu=null;break;case"mousedown":$S=!0;break;case"contextmenu":case"mouseup":case"dragend":$S=!1,Xb(d,t,h);break;case"selectionchange":if(A5)break;case"keydown":case"keyup":Xb(d,t,h)}var P;if(DM)e:{switch(n){case"compositionstart":var B="onCompositionStart";break e;case"compositionend":B="onCompositionEnd";break e;case"compositionupdate":B="onCompositionUpdate";break e}B=void 0}else Qu?Q3(n,t)&&(B="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(B="onCompositionStart");B&&(q3&&t.locale!=="ko"&&(Qu||B!=="onCompositionStart"?B==="onCompositionEnd"&&Qu&&(P=Y3()):(Ga=h,bM="value"in Ga?Ga.value:Ga.textContent,Qu=!0)),T=Ky(c,B),0<T.length&&(B=new Ob(B,n,null,t,h),d.push({event:B,listeners:T}),P?B.data=P:(P=Z3(t),P!==null&&(B.data=P)))),(P=c5?u5(n,t):h5(n,t))&&(c=Ky(c,"onBeforeInput"),0<c.length&&(h=new Ob("onBeforeInput","beforeinput",null,t,h),d.push({event:h,listeners:c}),h.data=P))}hN(d,e)})}function pp(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Ky(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=ap(n,t),s!=null&&i.unshift(pp(n,s,r)),s=ap(n,e),s!=null&&i.push(pp(n,s,r))),n=n.return}return i}function xu(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function $b(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=ap(t,s),l!=null&&o.unshift(pp(t,l,a))):r||(l=ap(t,s),l!=null&&o.push(pp(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var M5=/\r\n?/g,T5=/\u0000|\uFFFD/g;function Yb(n){return(typeof n=="string"?n:""+n).replace(M5,`
`).replace(T5,"")}function $g(n,e,t){if(e=Yb(e),Yb(n)!==e&&t)throw Error(Ce(425))}function $y(){}var YS=null,qS=null;function QS(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ZS=typeof setTimeout=="function"?setTimeout:void 0,C5=typeof clearTimeout=="function"?clearTimeout:void 0,qb=typeof Promise=="function"?Promise:void 0,R5=typeof queueMicrotask=="function"?queueMicrotask:typeof qb<"u"?function(n){return qb.resolve(null).then(n).catch(b5)}:ZS;function b5(n){setTimeout(function(){throw n})}function H1(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),up(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);up(e)}function $a(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function Qb(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var ff=Math.random().toString(36).slice(2),lo="__reactFiber$"+ff,mp="__reactProps$"+ff,oa="__reactContainer$"+ff,eE="__reactEvents$"+ff,P5="__reactListeners$"+ff,I5="__reactHandles$"+ff;function lc(n){var e=n[lo];if(e)return e;for(var t=n.parentNode;t;){if(e=t[oa]||t[lo]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=Qb(n);n!==null;){if(t=n[lo])return t;n=Qb(n)}return e}n=t,t=n.parentNode}return null}function sm(n){return n=n[lo]||n[oa],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function th(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Ce(33))}function Yv(n){return n[mp]||null}var tE=[],nh=-1;function xl(n){return{current:n}}function yn(n){0>nh||(n.current=tE[nh],tE[nh]=null,nh--)}function un(n,e){nh++,tE[nh]=n.current,n.current=e}var ll={},tr=xl(ll),Cr=xl(!1),Nc=ll;function Oh(n,e){var t=n.type.contextTypes;if(!t)return ll;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function Rr(n){return n=n.childContextTypes,n!=null}function Yy(){yn(Cr),yn(tr)}function Zb(n,e,t){if(tr.current!==ll)throw Error(Ce(168));un(tr,e),un(Cr,t)}function dN(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Ce(108,mH(n)||"Unknown",r));return In({},t,i)}function qy(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ll,Nc=tr.current,un(tr,n),un(Cr,Cr.current),!0}function eP(n,e,t){var i=n.stateNode;if(!i)throw Error(Ce(169));t?(n=dN(n,e,Nc),i.__reactInternalMemoizedMergedChildContext=n,yn(Cr),yn(tr),un(tr,n)):yn(Cr),un(Cr,t)}var jo=null,qv=!1,W1=!1;function pN(n){jo===null?jo=[n]:jo.push(n)}function D5(n){qv=!0,pN(n)}function Al(){if(!W1&&jo!==null){W1=!0;var n=0,e=sn;try{var t=jo;for(sn=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}jo=null,qv=!1}catch(r){throw jo!==null&&(jo=jo.slice(n+1)),k3(MM,Al),r}finally{sn=e,W1=!1}}return null}var ih=[],rh=0,Qy=null,Zy=0,gs=[],ys=0,Fc=null,Ko=1,$o="";function ql(n,e){ih[rh++]=Zy,ih[rh++]=Qy,Qy=n,Zy=e}function mN(n,e,t){gs[ys++]=Ko,gs[ys++]=$o,gs[ys++]=Fc,Fc=n;var i=Ko;n=$o;var r=32-Us(i)-1;i&=~(1<<r),t+=1;var s=32-Us(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Ko=1<<32-Us(e)+r|t<<r|i,$o=s+n}else Ko=1<<s|t<<r|i,$o=n}function BM(n){n.return!==null&&(ql(n,1),mN(n,1,0))}function NM(n){for(;n===Qy;)Qy=ih[--rh],ih[rh]=null,Zy=ih[--rh],ih[rh]=null;for(;n===Fc;)Fc=gs[--ys],gs[ys]=null,$o=gs[--ys],gs[ys]=null,Ko=gs[--ys],gs[ys]=null}var Hr=null,zr=null,An=!1,Bs=null;function gN(n,e){var t=xs(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function tP(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Hr=n,zr=$a(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Hr=n,zr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Fc!==null?{id:Ko,overflow:$o}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=xs(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Hr=n,zr=null,!0):!1;default:return!1}}function nE(n){return(n.mode&1)!==0&&(n.flags&128)===0}function iE(n){if(An){var e=zr;if(e){var t=e;if(!tP(n,e)){if(nE(n))throw Error(Ce(418));e=$a(t.nextSibling);var i=Hr;e&&tP(n,e)?gN(i,t):(n.flags=n.flags&-4097|2,An=!1,Hr=n)}}else{if(nE(n))throw Error(Ce(418));n.flags=n.flags&-4097|2,An=!1,Hr=n}}}function nP(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Hr=n}function Yg(n){if(n!==Hr)return!1;if(!An)return nP(n),An=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!QS(n.type,n.memoizedProps)),e&&(e=zr)){if(nE(n))throw yN(),Error(Ce(418));for(;e;)gN(n,e),e=$a(e.nextSibling)}if(nP(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Ce(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){zr=$a(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}zr=null}}else zr=Hr?$a(n.stateNode.nextSibling):null;return!0}function yN(){for(var n=zr;n;)n=$a(n.nextSibling)}function Uh(){zr=Hr=null,An=!1}function FM(n){Bs===null?Bs=[n]:Bs.push(n)}var L5=da.ReactCurrentBatchConfig;function Is(n,e){if(n&&n.defaultProps){e=In({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var ev=xl(null),tv=null,sh=null,OM=null;function UM(){OM=sh=tv=null}function kM(n){var e=ev.current;yn(ev),n._currentValue=e}function rE(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function Mh(n,e){tv=n,OM=sh=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Tr=!0),n.firstContext=null)}function Es(n){var e=n._currentValue;if(OM!==n)if(n={context:n,memoizedValue:e,next:null},sh===null){if(tv===null)throw Error(Ce(308));sh=n,tv.dependencies={lanes:0,firstContext:n}}else sh=sh.next=n;return e}var cc=null;function VM(n){cc===null?cc=[n]:cc.push(n)}function vN(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,VM(e)):(t.next=r.next,r.next=t),e.interleaved=t,aa(n,i)}function aa(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Fa=!1;function zM(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _N(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ta(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Ya(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,Yt&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,aa(n,t)}return r=i.interleaved,r===null?(e.next=e,VM(i)):(e.next=r.next,r.next=e),i.interleaved=e,aa(n,t)}function _y(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,TM(n,t)}}function iP(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function nv(n,e,t,i){var r=n.updateQueue;Fa=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=n.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,h=c=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((i&p)===p){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=n,x=a;switch(p=e,m=t,x.tag){case 1:if(y=x.payload,typeof y=="function"){d=y.call(m,d,p);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=x.payload,p=typeof y=="function"?y.call(m,d,p):y,p==null)break e;d=In({},d,p);break e;case 2:Fa=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=r.effects,p===null?r.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=m,l=d):h=h.next=m,o|=p;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;p=a,a=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(!0);if(h===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Uc|=o,n.lanes=o,n.memoizedState=d}}function rP(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(Ce(191,r));r.call(i)}}}var xN=new v3.Component().refs;function sE(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:In({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Qv={isMounted:function(n){return(n=n._reactInternals)?Kc(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=mr(),r=Qa(n),s=ta(i,r);s.payload=e,t!=null&&(s.callback=t),e=Ya(n,s,r),e!==null&&(ks(e,n,r,i),_y(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=mr(),r=Qa(n),s=ta(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Ya(n,s,r),e!==null&&(ks(e,n,r,i),_y(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=mr(),i=Qa(n),r=ta(t,i);r.tag=2,e!=null&&(r.callback=e),e=Ya(n,r,i),e!==null&&(ks(e,n,i,t),_y(e,n,i))}};function sP(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!fp(t,i)||!fp(r,s):!0}function AN(n,e,t){var i=!1,r=ll,s=e.contextType;return typeof s=="object"&&s!==null?s=Es(s):(r=Rr(e)?Nc:tr.current,i=e.contextTypes,s=(i=i!=null)?Oh(n,r):ll),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Qv,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function oP(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&Qv.enqueueReplaceState(e,e.state,null)}function oE(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs=xN,zM(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Es(s):(s=Rr(e)?Nc:tr.current,r.context=Oh(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(sE(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Qv.enqueueReplaceState(r,r.state,null),nv(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function Qf(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Ce(309));var i=t.stateNode}if(!i)throw Error(Ce(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;a===xN&&(a=r.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Ce(284));if(!t._owner)throw Error(Ce(290,n))}return n}function qg(n,e){throw n=Object.prototype.toString.call(e),Error(Ce(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function aP(n){var e=n._init;return e(n._payload)}function SN(n){function e(g,A){if(n){var S=g.deletions;S===null?(g.deletions=[A],g.flags|=16):S.push(A)}}function t(g,A){if(!n)return null;for(;A!==null;)e(g,A),A=A.sibling;return null}function i(g,A){for(g=new Map;A!==null;)A.key!==null?g.set(A.key,A):g.set(A.index,A),A=A.sibling;return g}function r(g,A){return g=Za(g,A),g.index=0,g.sibling=null,g}function s(g,A,S){return g.index=S,n?(S=g.alternate,S!==null?(S=S.index,S<A?(g.flags|=2,A):S):(g.flags|=2,A)):(g.flags|=1048576,A)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,A,S,w){return A===null||A.tag!==6?(A=q1(S,g.mode,w),A.return=g,A):(A=r(A,S),A.return=g,A)}function l(g,A,S,w){var R=S.type;return R===qu?h(g,A,S.props.children,w,S.key):A!==null&&(A.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Na&&aP(R)===A.type)?(w=r(A,S.props),w.ref=Qf(g,A,S),w.return=g,w):(w=My(S.type,S.key,S.props,null,g.mode,w),w.ref=Qf(g,A,S),w.return=g,w)}function c(g,A,S,w){return A===null||A.tag!==4||A.stateNode.containerInfo!==S.containerInfo||A.stateNode.implementation!==S.implementation?(A=Q1(S,g.mode,w),A.return=g,A):(A=r(A,S.children||[]),A.return=g,A)}function h(g,A,S,w,R){return A===null||A.tag!==7?(A=Ec(S,g.mode,w,R),A.return=g,A):(A=r(A,S),A.return=g,A)}function d(g,A,S){if(typeof A=="string"&&A!==""||typeof A=="number")return A=q1(""+A,g.mode,S),A.return=g,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Vg:return S=My(A.type,A.key,A.props,null,g.mode,S),S.ref=Qf(g,null,A),S.return=g,S;case Yu:return A=Q1(A,g.mode,S),A.return=g,A;case Na:var w=A._init;return d(g,w(A._payload),S)}if(Td(A)||Jf(A))return A=Ec(A,g.mode,S,null),A.return=g,A;qg(g,A)}return null}function p(g,A,S,w){var R=A!==null?A.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return R!==null?null:a(g,A,""+S,w);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Vg:return S.key===R?l(g,A,S,w):null;case Yu:return S.key===R?c(g,A,S,w):null;case Na:return R=S._init,p(g,A,R(S._payload),w)}if(Td(S)||Jf(S))return R!==null?null:h(g,A,S,w,null);qg(g,S)}return null}function m(g,A,S,w,R){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(S)||null,a(A,g,""+w,R);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Vg:return g=g.get(w.key===null?S:w.key)||null,l(A,g,w,R);case Yu:return g=g.get(w.key===null?S:w.key)||null,c(A,g,w,R);case Na:var T=w._init;return m(g,A,S,T(w._payload),R)}if(Td(w)||Jf(w))return g=g.get(S)||null,h(A,g,w,R,null);qg(A,w)}return null}function y(g,A,S,w){for(var R=null,T=null,P=A,B=A=0,b=null;P!==null&&B<S.length;B++){P.index>B?(b=P,P=null):b=P.sibling;var I=p(g,P,S[B],w);if(I===null){P===null&&(P=b);break}n&&P&&I.alternate===null&&e(g,P),A=s(I,A,B),T===null?R=I:T.sibling=I,T=I,P=b}if(B===S.length)return t(g,P),An&&ql(g,B),R;if(P===null){for(;B<S.length;B++)P=d(g,S[B],w),P!==null&&(A=s(P,A,B),T===null?R=P:T.sibling=P,T=P);return An&&ql(g,B),R}for(P=i(g,P);B<S.length;B++)b=m(P,g,B,S[B],w),b!==null&&(n&&b.alternate!==null&&P.delete(b.key===null?B:b.key),A=s(b,A,B),T===null?R=b:T.sibling=b,T=b);return n&&P.forEach(function(U){return e(g,U)}),An&&ql(g,B),R}function x(g,A,S,w){var R=Jf(S);if(typeof R!="function")throw Error(Ce(150));if(S=R.call(S),S==null)throw Error(Ce(151));for(var T=R=null,P=A,B=A=0,b=null,I=S.next();P!==null&&!I.done;B++,I=S.next()){P.index>B?(b=P,P=null):b=P.sibling;var U=p(g,P,I.value,w);if(U===null){P===null&&(P=b);break}n&&P&&U.alternate===null&&e(g,P),A=s(U,A,B),T===null?R=U:T.sibling=U,T=U,P=b}if(I.done)return t(g,P),An&&ql(g,B),R;if(P===null){for(;!I.done;B++,I=S.next())I=d(g,I.value,w),I!==null&&(A=s(I,A,B),T===null?R=I:T.sibling=I,T=I);return An&&ql(g,B),R}for(P=i(g,P);!I.done;B++,I=S.next())I=m(P,g,B,I.value,w),I!==null&&(n&&I.alternate!==null&&P.delete(I.key===null?B:I.key),A=s(I,A,B),T===null?R=I:T.sibling=I,T=I);return n&&P.forEach(function(K){return e(g,K)}),An&&ql(g,B),R}function _(g,A,S,w){if(typeof S=="object"&&S!==null&&S.type===qu&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Vg:e:{for(var R=S.key,T=A;T!==null;){if(T.key===R){if(R=S.type,R===qu){if(T.tag===7){t(g,T.sibling),A=r(T,S.props.children),A.return=g,g=A;break e}}else if(T.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Na&&aP(R)===T.type){t(g,T.sibling),A=r(T,S.props),A.ref=Qf(g,T,S),A.return=g,g=A;break e}t(g,T);break}else e(g,T);T=T.sibling}S.type===qu?(A=Ec(S.props.children,g.mode,w,S.key),A.return=g,g=A):(w=My(S.type,S.key,S.props,null,g.mode,w),w.ref=Qf(g,A,S),w.return=g,g=w)}return o(g);case Yu:e:{for(T=S.key;A!==null;){if(A.key===T)if(A.tag===4&&A.stateNode.containerInfo===S.containerInfo&&A.stateNode.implementation===S.implementation){t(g,A.sibling),A=r(A,S.children||[]),A.return=g,g=A;break e}else{t(g,A);break}else e(g,A);A=A.sibling}A=Q1(S,g.mode,w),A.return=g,g=A}return o(g);case Na:return T=S._init,_(g,A,T(S._payload),w)}if(Td(S))return y(g,A,S,w);if(Jf(S))return x(g,A,S,w);qg(g,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,A!==null&&A.tag===6?(t(g,A.sibling),A=r(A,S),A.return=g,g=A):(t(g,A),A=q1(S,g.mode,w),A.return=g,g=A),o(g)):t(g,A)}return _}var kh=SN(!0),EN=SN(!1),om={},go=xl(om),gp=xl(om),yp=xl(om);function uc(n){if(n===om)throw Error(Ce(174));return n}function GM(n,e){switch(un(yp,e),un(gp,n),un(go,om),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:US(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=US(e,n)}yn(go),un(go,e)}function Vh(){yn(go),yn(gp),yn(yp)}function wN(n){uc(yp.current);var e=uc(go.current),t=US(e,n.type);e!==t&&(un(gp,n),un(go,t))}function HM(n){gp.current===n&&(yn(go),yn(gp))}var Mn=xl(0);function iv(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var j1=[];function WM(){for(var n=0;n<j1.length;n++)j1[n]._workInProgressVersionPrimary=null;j1.length=0}var xy=da.ReactCurrentDispatcher,X1=da.ReactCurrentBatchConfig,Oc=0,Pn=null,si=null,_i=null,rv=!1,Vd=!1,vp=0,B5=0;function Gi(){throw Error(Ce(321))}function jM(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!zs(n[t],e[t]))return!1;return!0}function XM(n,e,t,i,r,s){if(Oc=s,Pn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,xy.current=n===null||n.memoizedState===null?U5:k5,n=t(i,r),Vd){s=0;do{if(Vd=!1,vp=0,25<=s)throw Error(Ce(301));s+=1,_i=si=null,e.updateQueue=null,xy.current=V5,n=t(i,r)}while(Vd)}if(xy.current=sv,e=si!==null&&si.next!==null,Oc=0,_i=si=Pn=null,rv=!1,e)throw Error(Ce(300));return n}function JM(){var n=vp!==0;return vp=0,n}function ao(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _i===null?Pn.memoizedState=_i=n:_i=_i.next=n,_i}function ws(){if(si===null){var n=Pn.alternate;n=n!==null?n.memoizedState:null}else n=si.next;var e=_i===null?Pn.memoizedState:_i.next;if(e!==null)_i=e,si=n;else{if(n===null)throw Error(Ce(310));si=n,n={memoizedState:si.memoizedState,baseState:si.baseState,baseQueue:si.baseQueue,queue:si.queue,next:null},_i===null?Pn.memoizedState=_i=n:_i=_i.next=n}return _i}function _p(n,e){return typeof e=="function"?e(n):e}function J1(n){var e=ws(),t=e.queue;if(t===null)throw Error(Ce(311));t.lastRenderedReducer=n;var i=si,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((Oc&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,Pn.lanes|=h,Uc|=h}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,zs(i,e.memoizedState)||(Tr=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,Pn.lanes|=s,Uc|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function K1(n){var e=ws(),t=e.queue;if(t===null)throw Error(Ce(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);zs(s,e.memoizedState)||(Tr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function MN(){}function TN(n,e){var t=Pn,i=ws(),r=e(),s=!zs(i.memoizedState,r);if(s&&(i.memoizedState=r,Tr=!0),i=i.queue,KM(bN.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||_i!==null&&_i.memoizedState.tag&1){if(t.flags|=2048,xp(9,RN.bind(null,t,i,r,e),void 0,null),xi===null)throw Error(Ce(349));Oc&30||CN(t,e,r)}return r}function CN(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Pn.updateQueue,e===null?(e={lastEffect:null,stores:null},Pn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function RN(n,e,t,i){e.value=t,e.getSnapshot=i,PN(e)&&IN(n)}function bN(n,e,t){return t(function(){PN(e)&&IN(n)})}function PN(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!zs(n,t)}catch{return!0}}function IN(n){var e=aa(n,1);e!==null&&ks(e,n,1,-1)}function lP(n){var e=ao();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_p,lastRenderedState:n},e.queue=n,n=n.dispatch=O5.bind(null,Pn,n),[e.memoizedState,n]}function xp(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=Pn.updateQueue,e===null?(e={lastEffect:null,stores:null},Pn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function DN(){return ws().memoizedState}function Ay(n,e,t,i){var r=ao();Pn.flags|=n,r.memoizedState=xp(1|e,t,void 0,i===void 0?null:i)}function Zv(n,e,t,i){var r=ws();i=i===void 0?null:i;var s=void 0;if(si!==null){var o=si.memoizedState;if(s=o.destroy,i!==null&&jM(i,o.deps)){r.memoizedState=xp(e,t,s,i);return}}Pn.flags|=n,r.memoizedState=xp(1|e,t,s,i)}function cP(n,e){return Ay(8390656,8,n,e)}function KM(n,e){return Zv(2048,8,n,e)}function LN(n,e){return Zv(4,2,n,e)}function BN(n,e){return Zv(4,4,n,e)}function NN(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function FN(n,e,t){return t=t!=null?t.concat([n]):null,Zv(4,4,NN.bind(null,e,n),t)}function $M(){}function ON(n,e){var t=ws();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&jM(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function UN(n,e){var t=ws();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&jM(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function kN(n,e,t){return Oc&21?(zs(t,e)||(t=G3(),Pn.lanes|=t,Uc|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Tr=!0),n.memoizedState=t)}function N5(n,e){var t=sn;sn=t!==0&&4>t?t:4,n(!0);var i=X1.transition;X1.transition={};try{n(!1),e()}finally{sn=t,X1.transition=i}}function VN(){return ws().memoizedState}function F5(n,e,t){var i=Qa(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},zN(n))GN(e,t);else if(t=vN(n,e,t,i),t!==null){var r=mr();ks(t,n,i,r),HN(t,e,i)}}function O5(n,e,t){var i=Qa(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(zN(n))GN(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(r.hasEagerState=!0,r.eagerState=a,zs(a,o)){var l=e.interleaved;l===null?(r.next=r,VM(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=vN(n,e,r,i),t!==null&&(r=mr(),ks(t,n,i,r),HN(t,e,i))}}function zN(n){var e=n.alternate;return n===Pn||e!==null&&e===Pn}function GN(n,e){Vd=rv=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function HN(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,TM(n,t)}}var sv={readContext:Es,useCallback:Gi,useContext:Gi,useEffect:Gi,useImperativeHandle:Gi,useInsertionEffect:Gi,useLayoutEffect:Gi,useMemo:Gi,useReducer:Gi,useRef:Gi,useState:Gi,useDebugValue:Gi,useDeferredValue:Gi,useTransition:Gi,useMutableSource:Gi,useSyncExternalStore:Gi,useId:Gi,unstable_isNewReconciler:!1},U5={readContext:Es,useCallback:function(n,e){return ao().memoizedState=[n,e===void 0?null:e],n},useContext:Es,useEffect:cP,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Ay(4194308,4,NN.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Ay(4194308,4,n,e)},useInsertionEffect:function(n,e){return Ay(4,2,n,e)},useMemo:function(n,e){var t=ao();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=ao();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=F5.bind(null,Pn,n),[i.memoizedState,n]},useRef:function(n){var e=ao();return n={current:n},e.memoizedState=n},useState:lP,useDebugValue:$M,useDeferredValue:function(n){return ao().memoizedState=n},useTransition:function(){var n=lP(!1),e=n[0];return n=N5.bind(null,n[1]),ao().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=Pn,r=ao();if(An){if(t===void 0)throw Error(Ce(407));t=t()}else{if(t=e(),xi===null)throw Error(Ce(349));Oc&30||CN(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,cP(bN.bind(null,i,s,n),[n]),i.flags|=2048,xp(9,RN.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=ao(),e=xi.identifierPrefix;if(An){var t=$o,i=Ko;t=(i&~(1<<32-Us(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=vp++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=B5++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},k5={readContext:Es,useCallback:ON,useContext:Es,useEffect:KM,useImperativeHandle:FN,useInsertionEffect:LN,useLayoutEffect:BN,useMemo:UN,useReducer:J1,useRef:DN,useState:function(){return J1(_p)},useDebugValue:$M,useDeferredValue:function(n){var e=ws();return kN(e,si.memoizedState,n)},useTransition:function(){var n=J1(_p)[0],e=ws().memoizedState;return[n,e]},useMutableSource:MN,useSyncExternalStore:TN,useId:VN,unstable_isNewReconciler:!1},V5={readContext:Es,useCallback:ON,useContext:Es,useEffect:KM,useImperativeHandle:FN,useInsertionEffect:LN,useLayoutEffect:BN,useMemo:UN,useReducer:K1,useRef:DN,useState:function(){return K1(_p)},useDebugValue:$M,useDeferredValue:function(n){var e=ws();return si===null?e.memoizedState=n:kN(e,si.memoizedState,n)},useTransition:function(){var n=K1(_p)[0],e=ws().memoizedState;return[n,e]},useMutableSource:MN,useSyncExternalStore:TN,useId:VN,unstable_isNewReconciler:!1};function zh(n,e){try{var t="",i=e;do t+=pH(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function $1(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function aE(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var z5=typeof WeakMap=="function"?WeakMap:Map;function WN(n,e,t){t=ta(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){av||(av=!0,yE=i),aE(n,e)},t}function jN(n,e,t){t=ta(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){aE(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){aE(n,e),typeof i!="function"&&(qa===null?qa=new Set([this]):qa.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function uP(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new z5;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=t6.bind(null,n,e,t),e.then(n,n))}function hP(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function fP(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=ta(-1,1),e.tag=2,Ya(t,e,1))),t.lanes|=1),n)}var G5=da.ReactCurrentOwner,Tr=!1;function hr(n,e,t,i){e.child=n===null?EN(e,null,t,i):kh(e,n.child,t,i)}function dP(n,e,t,i,r){t=t.render;var s=e.ref;return Mh(e,r),i=XM(n,e,t,i,s,r),t=JM(),n!==null&&!Tr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,la(n,e,r)):(An&&t&&BM(e),e.flags|=1,hr(n,e,i,r),e.child)}function pP(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!iT(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,XN(n,e,s,i,r)):(n=My(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:fp,t(o,i)&&n.ref===e.ref)return la(n,e,r)}return e.flags|=1,n=Za(s,i),n.ref=e.ref,n.return=e,e.child=n}function XN(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(fp(s,i)&&n.ref===e.ref)if(Tr=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(Tr=!0);else return e.lanes=n.lanes,la(n,e,r)}return lE(n,e,t,i,r)}function JN(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},un(ah,kr),kr|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,un(ah,kr),kr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,un(ah,kr),kr|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,un(ah,kr),kr|=i;return hr(n,e,r,t),e.child}function KN(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function lE(n,e,t,i,r){var s=Rr(t)?Nc:tr.current;return s=Oh(e,s),Mh(e,r),t=XM(n,e,t,i,s,r),i=JM(),n!==null&&!Tr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,la(n,e,r)):(An&&i&&BM(e),e.flags|=1,hr(n,e,t,r),e.child)}function mP(n,e,t,i,r){if(Rr(t)){var s=!0;qy(e)}else s=!1;if(Mh(e,r),e.stateNode===null)Sy(n,e),AN(e,t,i),oE(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=Es(c):(c=Rr(t)?Nc:tr.current,c=Oh(e,c));var h=t.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&oP(e,o,i,c),Fa=!1;var p=e.memoizedState;o.state=p,nv(e,i,o,r),l=e.memoizedState,a!==i||p!==l||Cr.current||Fa?(typeof h=="function"&&(sE(e,t,h,i),l=e.memoizedState),(a=Fa||sP(e,t,a,i,p,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,_N(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:Is(e.type,a),o.props=c,d=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Es(l):(l=Rr(t)?Nc:tr.current,l=Oh(e,l));var m=t.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&oP(e,o,i,l),Fa=!1,p=e.memoizedState,o.state=p,nv(e,i,o,r);var y=e.memoizedState;a!==d||p!==y||Cr.current||Fa?(typeof m=="function"&&(sE(e,t,m,i),y=e.memoizedState),(c=Fa||sP(e,t,c,i,p,y,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=y),o.props=i,o.state=y,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),i=!1)}return cE(n,e,t,i,s,r)}function cE(n,e,t,i,r,s){KN(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&eP(e,t,!1),la(n,e,s);i=e.stateNode,G5.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=kh(e,n.child,null,s),e.child=kh(e,null,a,s)):hr(n,e,a,s),e.memoizedState=i.state,r&&eP(e,t,!0),e.child}function $N(n){var e=n.stateNode;e.pendingContext?Zb(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Zb(n,e.context,!1),GM(n,e.containerInfo)}function gP(n,e,t,i,r){return Uh(),FM(r),e.flags|=256,hr(n,e,t,i),e.child}var uE={dehydrated:null,treeContext:null,retryLane:0};function hE(n){return{baseLanes:n,cachePool:null,transitions:null}}function YN(n,e,t){var i=e.pendingProps,r=Mn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),un(Mn,r&1),n===null)return iE(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=n_(o,i,0,null),n=Ec(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=hE(t),e.memoizedState=uE,n):YM(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return H5(n,e,o,i,a,r,t);if(s){s=i.fallback,o=e.mode,r=n.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Za(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Za(a,s):(s=Ec(s,o,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=n.child.memoizedState,o=o===null?hE(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=uE,i}return s=n.child,n=s.sibling,i=Za(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function YM(n,e){return e=n_({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Qg(n,e,t,i){return i!==null&&FM(i),kh(e,n.child,null,t),n=YM(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function H5(n,e,t,i,r,s,o){if(t)return e.flags&256?(e.flags&=-257,i=$1(Error(Ce(422))),Qg(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=n_({mode:"visible",children:i.children},r,0,null),s=Ec(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&kh(e,n.child,null,o),e.child.memoizedState=hE(o),e.memoizedState=uE,s);if(!(e.mode&1))return Qg(n,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(Ce(419)),i=$1(s,i,void 0),Qg(n,e,o,i)}if(a=(o&n.childLanes)!==0,Tr||a){if(i=xi,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,aa(n,r),ks(i,n,r,-1))}return nT(),i=$1(Error(Ce(421))),Qg(n,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=n6.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,zr=$a(r.nextSibling),Hr=e,An=!0,Bs=null,n!==null&&(gs[ys++]=Ko,gs[ys++]=$o,gs[ys++]=Fc,Ko=n.id,$o=n.overflow,Fc=e),e=YM(e,i.children),e.flags|=4096,e)}function yP(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),rE(n.return,e,t)}function Y1(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function qN(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(hr(n,e,i.children,t),i=Mn.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&yP(n,t,e);else if(n.tag===19)yP(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(un(Mn,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&iv(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),Y1(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&iv(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}Y1(e,!0,t,null,s);break;case"together":Y1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Sy(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function la(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Uc|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Ce(153));if(e.child!==null){for(n=e.child,t=Za(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Za(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function W5(n,e,t){switch(e.tag){case 3:$N(e),Uh();break;case 5:wN(e);break;case 1:Rr(e.type)&&qy(e);break;case 4:GM(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;un(ev,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(un(Mn,Mn.current&1),e.flags|=128,null):t&e.child.childLanes?YN(n,e,t):(un(Mn,Mn.current&1),n=la(n,e,t),n!==null?n.sibling:null);un(Mn,Mn.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return qN(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),un(Mn,Mn.current),i)break;return null;case 22:case 23:return e.lanes=0,JN(n,e,t)}return la(n,e,t)}var QN,fE,ZN,eF;QN=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};fE=function(){};ZN=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,uc(go.current);var s=null;switch(t){case"input":r=BS(n,r),i=BS(n,i),s=[];break;case"select":r=In({},r,{value:void 0}),i=In({},i,{value:void 0}),s=[];break;case"textarea":r=OS(n,r),i=OS(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=$y)}kS(t,i);var o;t=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(sp.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(sp.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&dn("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};eF=function(n,e,t,i){t!==i&&(e.flags|=4)};function Zf(n,e){if(!An)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function Hi(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function j5(n,e,t){var i=e.pendingProps;switch(NM(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hi(e),null;case 1:return Rr(e.type)&&Yy(),Hi(e),null;case 3:return i=e.stateNode,Vh(),yn(Cr),yn(tr),WM(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Yg(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Bs!==null&&(xE(Bs),Bs=null))),fE(n,e),Hi(e),null;case 5:HM(e);var r=uc(yp.current);if(t=e.type,n!==null&&e.stateNode!=null)ZN(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Ce(166));return Hi(e),null}if(n=uc(go.current),Yg(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[lo]=e,i[mp]=s,n=(e.mode&1)!==0,t){case"dialog":dn("cancel",i),dn("close",i);break;case"iframe":case"object":case"embed":dn("load",i);break;case"video":case"audio":for(r=0;r<Rd.length;r++)dn(Rd[r],i);break;case"source":dn("error",i);break;case"img":case"image":case"link":dn("error",i),dn("load",i);break;case"details":dn("toggle",i);break;case"input":Tb(i,s),dn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},dn("invalid",i);break;case"textarea":Rb(i,s),dn("invalid",i)}kS(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&$g(i.textContent,a,n),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&$g(i.textContent,a,n),r=["children",""+a]):sp.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&dn("scroll",i)}switch(t){case"input":zg(i),Cb(i,s,!0);break;case"textarea":zg(i),bb(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=$y)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=C3(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[lo]=e,n[mp]=i,QN(n,e,!1,!1),e.stateNode=n;e:{switch(o=VS(t,i),t){case"dialog":dn("cancel",n),dn("close",n),r=i;break;case"iframe":case"object":case"embed":dn("load",n),r=i;break;case"video":case"audio":for(r=0;r<Rd.length;r++)dn(Rd[r],n);r=i;break;case"source":dn("error",n),r=i;break;case"img":case"image":case"link":dn("error",n),dn("load",n),r=i;break;case"details":dn("toggle",n),r=i;break;case"input":Tb(n,i),r=BS(n,i),dn("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=In({},i,{value:void 0}),dn("invalid",n);break;case"textarea":Rb(n,i),r=OS(n,i),dn("invalid",n);break;default:r=i}kS(t,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?P3(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&R3(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&op(n,l):typeof l=="number"&&op(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(sp.hasOwnProperty(s)?l!=null&&s==="onScroll"&&dn("scroll",n):l!=null&&xM(n,s,l,o))}switch(t){case"input":zg(n),Cb(n,i,!1);break;case"textarea":zg(n),bb(n);break;case"option":i.value!=null&&n.setAttribute("value",""+al(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?Ah(n,!!i.multiple,s,!1):i.defaultValue!=null&&Ah(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=$y)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Hi(e),null;case 6:if(n&&e.stateNode!=null)eF(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Ce(166));if(t=uc(yp.current),uc(go.current),Yg(e)){if(i=e.stateNode,t=e.memoizedProps,i[lo]=e,(s=i.nodeValue!==t)&&(n=Hr,n!==null))switch(n.tag){case 3:$g(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&$g(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[lo]=e,e.stateNode=i}return Hi(e),null;case 13:if(yn(Mn),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(An&&zr!==null&&e.mode&1&&!(e.flags&128))yN(),Uh(),e.flags|=98560,s=!1;else if(s=Yg(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(Ce(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ce(317));s[lo]=e}else Uh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Hi(e),s=!1}else Bs!==null&&(xE(Bs),Bs=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||Mn.current&1?li===0&&(li=3):nT())),e.updateQueue!==null&&(e.flags|=4),Hi(e),null);case 4:return Vh(),fE(n,e),n===null&&dp(e.stateNode.containerInfo),Hi(e),null;case 10:return kM(e.type._context),Hi(e),null;case 17:return Rr(e.type)&&Yy(),Hi(e),null;case 19:if(yn(Mn),s=e.memoizedState,s===null)return Hi(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Zf(s,!1);else{if(li!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=iv(n),o!==null){for(e.flags|=128,Zf(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return un(Mn,Mn.current&1|2),e.child}n=n.sibling}s.tail!==null&&jn()>Gh&&(e.flags|=128,i=!0,Zf(s,!1),e.lanes=4194304)}else{if(!i)if(n=iv(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Zf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!An)return Hi(e),null}else 2*jn()-s.renderingStartTime>Gh&&t!==1073741824&&(e.flags|=128,i=!0,Zf(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=jn(),e.sibling=null,t=Mn.current,un(Mn,i?t&1|2:t&1),e):(Hi(e),null);case 22:case 23:return tT(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?kr&1073741824&&(Hi(e),e.subtreeFlags&6&&(e.flags|=8192)):Hi(e),null;case 24:return null;case 25:return null}throw Error(Ce(156,e.tag))}function X5(n,e){switch(NM(e),e.tag){case 1:return Rr(e.type)&&Yy(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Vh(),yn(Cr),yn(tr),WM(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return HM(e),null;case 13:if(yn(Mn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Ce(340));Uh()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return yn(Mn),null;case 4:return Vh(),null;case 10:return kM(e.type._context),null;case 22:case 23:return tT(),null;case 24:return null;default:return null}}var Zg=!1,$i=!1,J5=typeof WeakSet=="function"?WeakSet:Set,$e=null;function oh(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){Nn(n,e,i)}else t.current=null}function dE(n,e,t){try{t()}catch(i){Nn(n,e,i)}}var vP=!1;function K5(n,e){if(YS=Xy,n=rN(),LM(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=n,p=null;t:for(;;){for(var m;d!==t||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)p=d,d=m;for(;;){if(d===n)break t;if(p===t&&++c===r&&(a=o),p===s&&++h===i&&(l=o),(m=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(qS={focusedElem:n,selectionRange:t},Xy=!1,$e=e;$e!==null;)if(e=$e,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,$e=n;else for(;$e!==null;){e=$e;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var x=y.memoizedProps,_=y.memoizedState,g=e.stateNode,A=g.getSnapshotBeforeUpdate(e.elementType===e.type?x:Is(e.type,x),_);g.__reactInternalSnapshotBeforeUpdate=A}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ce(163))}}catch(w){Nn(e,e.return,w)}if(n=e.sibling,n!==null){n.return=e.return,$e=n;break}$e=e.return}return y=vP,vP=!1,y}function zd(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&dE(e,t,s)}r=r.next}while(r!==i)}}function e_(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function pE(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function tF(n){var e=n.alternate;e!==null&&(n.alternate=null,tF(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[lo],delete e[mp],delete e[eE],delete e[P5],delete e[I5])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function nF(n){return n.tag===5||n.tag===3||n.tag===4}function _P(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||nF(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function mE(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=$y));else if(i!==4&&(n=n.child,n!==null))for(mE(n,e,t),n=n.sibling;n!==null;)mE(n,e,t),n=n.sibling}function gE(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(gE(n,e,t),n=n.sibling;n!==null;)gE(n,e,t),n=n.sibling}var Ri=null,Ls=!1;function Ea(n,e,t){for(t=t.child;t!==null;)iF(n,e,t),t=t.sibling}function iF(n,e,t){if(mo&&typeof mo.onCommitFiberUnmount=="function")try{mo.onCommitFiberUnmount(Xv,t)}catch{}switch(t.tag){case 5:$i||oh(t,e);case 6:var i=Ri,r=Ls;Ri=null,Ea(n,e,t),Ri=i,Ls=r,Ri!==null&&(Ls?(n=Ri,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Ri.removeChild(t.stateNode));break;case 18:Ri!==null&&(Ls?(n=Ri,t=t.stateNode,n.nodeType===8?H1(n.parentNode,t):n.nodeType===1&&H1(n,t),up(n)):H1(Ri,t.stateNode));break;case 4:i=Ri,r=Ls,Ri=t.stateNode.containerInfo,Ls=!0,Ea(n,e,t),Ri=i,Ls=r;break;case 0:case 11:case 14:case 15:if(!$i&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&dE(t,e,o),r=r.next}while(r!==i)}Ea(n,e,t);break;case 1:if(!$i&&(oh(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){Nn(t,e,a)}Ea(n,e,t);break;case 21:Ea(n,e,t);break;case 22:t.mode&1?($i=(i=$i)||t.memoizedState!==null,Ea(n,e,t),$i=i):Ea(n,e,t);break;default:Ea(n,e,t)}}function xP(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new J5),e.forEach(function(i){var r=i6.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function Cs(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ri=a.stateNode,Ls=!1;break e;case 3:Ri=a.stateNode.containerInfo,Ls=!0;break e;case 4:Ri=a.stateNode.containerInfo,Ls=!0;break e}a=a.return}if(Ri===null)throw Error(Ce(160));iF(s,o,r),Ri=null,Ls=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){Nn(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)rF(e,n),e=e.sibling}function rF(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Cs(e,n),so(n),i&4){try{zd(3,n,n.return),e_(3,n)}catch(x){Nn(n,n.return,x)}try{zd(5,n,n.return)}catch(x){Nn(n,n.return,x)}}break;case 1:Cs(e,n),so(n),i&512&&t!==null&&oh(t,t.return);break;case 5:if(Cs(e,n),so(n),i&512&&t!==null&&oh(t,t.return),n.flags&32){var r=n.stateNode;try{op(r,"")}catch(x){Nn(n,n.return,x)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&M3(r,s),VS(a,o);var c=VS(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?P3(r,d):h==="dangerouslySetInnerHTML"?R3(r,d):h==="children"?op(r,d):xM(r,h,d,c)}switch(a){case"input":NS(r,s);break;case"textarea":T3(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Ah(r,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?Ah(r,!!s.multiple,s.defaultValue,!0):Ah(r,!!s.multiple,s.multiple?[]:"",!1))}r[mp]=s}catch(x){Nn(n,n.return,x)}}break;case 6:if(Cs(e,n),so(n),i&4){if(n.stateNode===null)throw Error(Ce(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(x){Nn(n,n.return,x)}}break;case 3:if(Cs(e,n),so(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{up(e.containerInfo)}catch(x){Nn(n,n.return,x)}break;case 4:Cs(e,n),so(n);break;case 13:Cs(e,n),so(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(ZM=jn())),i&4&&xP(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?($i=(c=$i)||h,Cs(e,n),$i=c):Cs(e,n),so(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!h&&n.mode&1)for($e=n,h=n.child;h!==null;){for(d=$e=h;$e!==null;){switch(p=$e,m=p.child,p.tag){case 0:case 11:case 14:case 15:zd(4,p,p.return);break;case 1:oh(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){i=p,t=p.return;try{e=i,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(x){Nn(i,t,x)}}break;case 5:oh(p,p.return);break;case 22:if(p.memoizedState!==null){SP(d);continue}}m!==null?(m.return=p,$e=m):SP(d)}h=h.sibling}e:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{r=d.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=b3("display",o))}catch(x){Nn(n,n.return,x)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(x){Nn(n,n.return,x)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Cs(e,n),so(n),i&4&&xP(n);break;case 21:break;default:Cs(e,n),so(n)}}function so(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(nF(t)){var i=t;break e}t=t.return}throw Error(Ce(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(op(r,""),i.flags&=-33);var s=_P(n);gE(n,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=_P(n);mE(n,a,o);break;default:throw Error(Ce(161))}}catch(l){Nn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function $5(n,e,t){$e=n,sF(n)}function sF(n,e,t){for(var i=(n.mode&1)!==0;$e!==null;){var r=$e,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Zg;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||$i;a=Zg;var c=$i;if(Zg=o,($i=l)&&!c)for($e=r;$e!==null;)o=$e,l=o.child,o.tag===22&&o.memoizedState!==null?EP(r):l!==null?(l.return=o,$e=l):EP(r);for(;s!==null;)$e=s,sF(s),s=s.sibling;$e=r,Zg=a,$i=c}AP(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,$e=s):AP(n)}}function AP(n){for(;$e!==null;){var e=$e;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:$i||e_(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!$i)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:Is(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&rP(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}rP(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&up(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ce(163))}$i||e.flags&512&&pE(e)}catch(p){Nn(e,e.return,p)}}if(e===n){$e=null;break}if(t=e.sibling,t!==null){t.return=e.return,$e=t;break}$e=e.return}}function SP(n){for(;$e!==null;){var e=$e;if(e===n){$e=null;break}var t=e.sibling;if(t!==null){t.return=e.return,$e=t;break}$e=e.return}}function EP(n){for(;$e!==null;){var e=$e;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{e_(4,e)}catch(l){Nn(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Nn(e,r,l)}}var s=e.return;try{pE(e)}catch(l){Nn(e,s,l)}break;case 5:var o=e.return;try{pE(e)}catch(l){Nn(e,o,l)}}}catch(l){Nn(e,e.return,l)}if(e===n){$e=null;break}var a=e.sibling;if(a!==null){a.return=e.return,$e=a;break}$e=e.return}}var Y5=Math.ceil,ov=da.ReactCurrentDispatcher,qM=da.ReactCurrentOwner,Ss=da.ReactCurrentBatchConfig,Yt=0,xi=null,ei=null,Li=0,kr=0,ah=xl(0),li=0,Ap=null,Uc=0,t_=0,QM=0,Gd=null,Er=null,ZM=0,Gh=1/0,Wo=null,av=!1,yE=null,qa=null,e0=!1,Ha=null,lv=0,Hd=0,vE=null,Ey=-1,wy=0;function mr(){return Yt&6?jn():Ey!==-1?Ey:Ey=jn()}function Qa(n){return n.mode&1?Yt&2&&Li!==0?Li&-Li:L5.transition!==null?(wy===0&&(wy=G3()),wy):(n=sn,n!==0||(n=window.event,n=n===void 0?16:$3(n.type)),n):1}function ks(n,e,t,i){if(50<Hd)throw Hd=0,vE=null,Error(Ce(185));im(n,t,i),(!(Yt&2)||n!==xi)&&(n===xi&&(!(Yt&2)&&(t_|=t),li===4&&Va(n,Li)),br(n,i),t===1&&Yt===0&&!(e.mode&1)&&(Gh=jn()+500,qv&&Al()))}function br(n,e){var t=n.callbackNode;LH(n,e);var i=jy(n,n===xi?Li:0);if(i===0)t!==null&&Db(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&Db(t),e===1)n.tag===0?D5(wP.bind(null,n)):pN(wP.bind(null,n)),R5(function(){!(Yt&6)&&Al()}),t=null;else{switch(H3(i)){case 1:t=MM;break;case 4:t=V3;break;case 16:t=Wy;break;case 536870912:t=z3;break;default:t=Wy}t=dF(t,oF.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function oF(n,e){if(Ey=-1,wy=0,Yt&6)throw Error(Ce(327));var t=n.callbackNode;if(Th()&&n.callbackNode!==t)return null;var i=jy(n,n===xi?Li:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=cv(n,i);else{e=i;var r=Yt;Yt|=2;var s=lF();(xi!==n||Li!==e)&&(Wo=null,Gh=jn()+500,Sc(n,e));do try{Z5();break}catch(a){aF(n,a)}while(!0);UM(),ov.current=s,Yt=r,ei!==null?e=0:(xi=null,Li=0,e=li)}if(e!==0){if(e===2&&(r=jS(n),r!==0&&(i=r,e=_E(n,r))),e===1)throw t=Ap,Sc(n,0),Va(n,i),br(n,jn()),t;if(e===6)Va(n,i);else{if(r=n.current.alternate,!(i&30)&&!q5(r)&&(e=cv(n,i),e===2&&(s=jS(n),s!==0&&(i=s,e=_E(n,s))),e===1))throw t=Ap,Sc(n,0),Va(n,i),br(n,jn()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(Ce(345));case 2:Ql(n,Er,Wo);break;case 3:if(Va(n,i),(i&130023424)===i&&(e=ZM+500-jn(),10<e)){if(jy(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){mr(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=ZS(Ql.bind(null,n,Er,Wo),e);break}Ql(n,Er,Wo);break;case 4:if(Va(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var o=31-Us(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=jn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Y5(i/1960))-i,10<i){n.timeoutHandle=ZS(Ql.bind(null,n,Er,Wo),i);break}Ql(n,Er,Wo);break;case 5:Ql(n,Er,Wo);break;default:throw Error(Ce(329))}}}return br(n,jn()),n.callbackNode===t?oF.bind(null,n):null}function _E(n,e){var t=Gd;return n.current.memoizedState.isDehydrated&&(Sc(n,e).flags|=256),n=cv(n,e),n!==2&&(e=Er,Er=t,e!==null&&xE(e)),n}function xE(n){Er===null?Er=n:Er.push.apply(Er,n)}function q5(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!zs(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Va(n,e){for(e&=~QM,e&=~t_,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Us(e),i=1<<t;n[t]=-1,e&=~i}}function wP(n){if(Yt&6)throw Error(Ce(327));Th();var e=jy(n,0);if(!(e&1))return br(n,jn()),null;var t=cv(n,e);if(n.tag!==0&&t===2){var i=jS(n);i!==0&&(e=i,t=_E(n,i))}if(t===1)throw t=Ap,Sc(n,0),Va(n,e),br(n,jn()),t;if(t===6)throw Error(Ce(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Ql(n,Er,Wo),br(n,jn()),null}function eT(n,e){var t=Yt;Yt|=1;try{return n(e)}finally{Yt=t,Yt===0&&(Gh=jn()+500,qv&&Al())}}function kc(n){Ha!==null&&Ha.tag===0&&!(Yt&6)&&Th();var e=Yt;Yt|=1;var t=Ss.transition,i=sn;try{if(Ss.transition=null,sn=1,n)return n()}finally{sn=i,Ss.transition=t,Yt=e,!(Yt&6)&&Al()}}function tT(){kr=ah.current,yn(ah)}function Sc(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,C5(t)),ei!==null)for(t=ei.return;t!==null;){var i=t;switch(NM(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Yy();break;case 3:Vh(),yn(Cr),yn(tr),WM();break;case 5:HM(i);break;case 4:Vh();break;case 13:yn(Mn);break;case 19:yn(Mn);break;case 10:kM(i.type._context);break;case 22:case 23:tT()}t=t.return}if(xi=n,ei=n=Za(n.current,null),Li=kr=e,li=0,Ap=null,QM=t_=Uc=0,Er=Gd=null,cc!==null){for(e=0;e<cc.length;e++)if(t=cc[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}t.pending=i}cc=null}return n}function aF(n,e){do{var t=ei;try{if(UM(),xy.current=sv,rv){for(var i=Pn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}rv=!1}if(Oc=0,_i=si=Pn=null,Vd=!1,vp=0,qM.current=null,t===null||t.return===null){li=1,Ap=e,ei=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=Li,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=hP(o);if(m!==null){m.flags&=-257,fP(m,o,a,s,e),m.mode&1&&uP(s,c,e),e=m,l=c;var y=e.updateQueue;if(y===null){var x=new Set;x.add(l),e.updateQueue=x}else y.add(l);break e}else{if(!(e&1)){uP(s,c,e),nT();break e}l=Error(Ce(426))}}else if(An&&a.mode&1){var _=hP(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),fP(_,o,a,s,e),FM(zh(l,a));break e}}s=l=zh(l,a),li!==4&&(li=2),Gd===null?Gd=[s]:Gd.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=WN(s,l,e);iP(s,g);break e;case 1:a=l;var A=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof A.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(qa===null||!qa.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=jN(s,a,e);iP(s,w);break e}}s=s.return}while(s!==null)}uF(t)}catch(R){e=R,ei===t&&t!==null&&(ei=t=t.return);continue}break}while(!0)}function lF(){var n=ov.current;return ov.current=sv,n===null?sv:n}function nT(){(li===0||li===3||li===2)&&(li=4),xi===null||!(Uc&268435455)&&!(t_&268435455)||Va(xi,Li)}function cv(n,e){var t=Yt;Yt|=2;var i=lF();(xi!==n||Li!==e)&&(Wo=null,Sc(n,e));do try{Q5();break}catch(r){aF(n,r)}while(!0);if(UM(),Yt=t,ov.current=i,ei!==null)throw Error(Ce(261));return xi=null,Li=0,li}function Q5(){for(;ei!==null;)cF(ei)}function Z5(){for(;ei!==null&&!wH();)cF(ei)}function cF(n){var e=fF(n.alternate,n,kr);n.memoizedProps=n.pendingProps,e===null?uF(n):ei=e,qM.current=null}function uF(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=X5(t,e),t!==null){t.flags&=32767,ei=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{li=6,ei=null;return}}else if(t=j5(t,e,kr),t!==null){ei=t;return}if(e=e.sibling,e!==null){ei=e;return}ei=e=n}while(e!==null);li===0&&(li=5)}function Ql(n,e,t){var i=sn,r=Ss.transition;try{Ss.transition=null,sn=1,e6(n,e,t,i)}finally{Ss.transition=r,sn=i}return null}function e6(n,e,t,i){do Th();while(Ha!==null);if(Yt&6)throw Error(Ce(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Ce(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(BH(n,s),n===xi&&(ei=xi=null,Li=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||e0||(e0=!0,dF(Wy,function(){return Th(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Ss.transition,Ss.transition=null;var o=sn;sn=1;var a=Yt;Yt|=4,qM.current=null,K5(n,t),rF(t,n),x5(qS),Xy=!!YS,qS=YS=null,n.current=t,$5(t),MH(),Yt=a,sn=o,Ss.transition=s}else n.current=t;if(e0&&(e0=!1,Ha=n,lv=r),s=n.pendingLanes,s===0&&(qa=null),RH(t.stateNode),br(n,jn()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(av)throw av=!1,n=yE,yE=null,n;return lv&1&&n.tag!==0&&Th(),s=n.pendingLanes,s&1?n===vE?Hd++:(Hd=0,vE=n):Hd=0,Al(),null}function Th(){if(Ha!==null){var n=H3(lv),e=Ss.transition,t=sn;try{if(Ss.transition=null,sn=16>n?16:n,Ha===null)var i=!1;else{if(n=Ha,Ha=null,lv=0,Yt&6)throw Error(Ce(331));var r=Yt;for(Yt|=4,$e=n.current;$e!==null;){var s=$e,o=s.child;if($e.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for($e=c;$e!==null;){var h=$e;switch(h.tag){case 0:case 11:case 15:zd(8,h,s)}var d=h.child;if(d!==null)d.return=h,$e=d;else for(;$e!==null;){h=$e;var p=h.sibling,m=h.return;if(tF(h),h===c){$e=null;break}if(p!==null){p.return=m,$e=p;break}$e=m}}}var y=s.alternate;if(y!==null){var x=y.child;if(x!==null){y.child=null;do{var _=x.sibling;x.sibling=null,x=_}while(x!==null)}}$e=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,$e=o;else e:for(;$e!==null;){if(s=$e,s.flags&2048)switch(s.tag){case 0:case 11:case 15:zd(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,$e=g;break e}$e=s.return}}var A=n.current;for($e=A;$e!==null;){o=$e;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,$e=S;else e:for(o=A;$e!==null;){if(a=$e,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:e_(9,a)}}catch(R){Nn(a,a.return,R)}if(a===o){$e=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,$e=w;break e}$e=a.return}}if(Yt=r,Al(),mo&&typeof mo.onPostCommitFiberRoot=="function")try{mo.onPostCommitFiberRoot(Xv,n)}catch{}i=!0}return i}finally{sn=t,Ss.transition=e}}return!1}function MP(n,e,t){e=zh(t,e),e=WN(n,e,1),n=Ya(n,e,1),e=mr(),n!==null&&(im(n,1,e),br(n,e))}function Nn(n,e,t){if(n.tag===3)MP(n,n,t);else for(;e!==null;){if(e.tag===3){MP(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(qa===null||!qa.has(i))){n=zh(t,n),n=jN(e,n,1),e=Ya(e,n,1),n=mr(),e!==null&&(im(e,1,n),br(e,n));break}}e=e.return}}function t6(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=mr(),n.pingedLanes|=n.suspendedLanes&t,xi===n&&(Li&t)===t&&(li===4||li===3&&(Li&130023424)===Li&&500>jn()-ZM?Sc(n,0):QM|=t),br(n,e)}function hF(n,e){e===0&&(n.mode&1?(e=Wg,Wg<<=1,!(Wg&130023424)&&(Wg=4194304)):e=1);var t=mr();n=aa(n,e),n!==null&&(im(n,e,t),br(n,t))}function n6(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),hF(n,t)}function i6(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(Ce(314))}i!==null&&i.delete(e),hF(n,t)}var fF;fF=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Cr.current)Tr=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Tr=!1,W5(n,e,t);Tr=!!(n.flags&131072)}else Tr=!1,An&&e.flags&1048576&&mN(e,Zy,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Sy(n,e),n=e.pendingProps;var r=Oh(e,tr.current);Mh(e,t),r=XM(null,e,i,n,r,t);var s=JM();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Rr(i)?(s=!0,qy(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,zM(e),r.updater=Qv,e.stateNode=r,r._reactInternals=e,oE(e,i,n,t),e=cE(null,e,i,!0,s,t)):(e.tag=0,An&&s&&BM(e),hr(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(Sy(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=s6(i),n=Is(i,n),r){case 0:e=lE(null,e,i,n,t);break e;case 1:e=mP(null,e,i,n,t);break e;case 11:e=dP(null,e,i,n,t);break e;case 14:e=pP(null,e,i,Is(i.type,n),t);break e}throw Error(Ce(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Is(i,r),lE(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Is(i,r),mP(n,e,i,r,t);case 3:e:{if($N(e),n===null)throw Error(Ce(387));i=e.pendingProps,s=e.memoizedState,r=s.element,_N(n,e),nv(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=zh(Error(Ce(423)),e),e=gP(n,e,i,t,r);break e}else if(i!==r){r=zh(Error(Ce(424)),e),e=gP(n,e,i,t,r);break e}else for(zr=$a(e.stateNode.containerInfo.firstChild),Hr=e,An=!0,Bs=null,t=EN(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Uh(),i===r){e=la(n,e,t);break e}hr(n,e,i,t)}e=e.child}return e;case 5:return wN(e),n===null&&iE(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,QS(i,r)?o=null:s!==null&&QS(i,s)&&(e.flags|=32),KN(n,e),hr(n,e,o,t),e.child;case 6:return n===null&&iE(e),null;case 13:return YN(n,e,t);case 4:return GM(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=kh(e,null,i,t):hr(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Is(i,r),dP(n,e,i,r,t);case 7:return hr(n,e,e.pendingProps,t),e.child;case 8:return hr(n,e,e.pendingProps.children,t),e.child;case 12:return hr(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,un(ev,i._currentValue),i._currentValue=o,s!==null)if(zs(s.value,o)){if(s.children===r.children&&!Cr.current){e=la(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=ta(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),rE(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ce(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),rE(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}hr(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Mh(e,t),r=Es(r),i=i(r),e.flags|=1,hr(n,e,i,t),e.child;case 14:return i=e.type,r=Is(i,e.pendingProps),r=Is(i.type,r),pP(n,e,i,r,t);case 15:return XN(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Is(i,r),Sy(n,e),e.tag=1,Rr(i)?(n=!0,qy(e)):n=!1,Mh(e,t),AN(e,i,r),oE(e,i,r,t),cE(null,e,i,!0,n,t);case 19:return qN(n,e,t);case 22:return JN(n,e,t)}throw Error(Ce(156,e.tag))};function dF(n,e){return k3(n,e)}function r6(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xs(n,e,t,i){return new r6(n,e,t,i)}function iT(n){return n=n.prototype,!(!n||!n.isReactComponent)}function s6(n){if(typeof n=="function")return iT(n)?1:0;if(n!=null){if(n=n.$$typeof,n===SM)return 11;if(n===EM)return 14}return 2}function Za(n,e){var t=n.alternate;return t===null?(t=xs(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function My(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")iT(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case qu:return Ec(t.children,r,s,e);case AM:o=8,r|=8;break;case PS:return n=xs(12,t,e,r|2),n.elementType=PS,n.lanes=s,n;case IS:return n=xs(13,t,e,r),n.elementType=IS,n.lanes=s,n;case DS:return n=xs(19,t,e,r),n.elementType=DS,n.lanes=s,n;case S3:return n_(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case x3:o=10;break e;case A3:o=9;break e;case SM:o=11;break e;case EM:o=14;break e;case Na:o=16,i=null;break e}throw Error(Ce(130,n==null?n:typeof n,""))}return e=xs(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function Ec(n,e,t,i){return n=xs(7,n,i,e),n.lanes=t,n}function n_(n,e,t,i){return n=xs(22,n,i,e),n.elementType=S3,n.lanes=t,n.stateNode={isHidden:!1},n}function q1(n,e,t){return n=xs(6,n,null,e),n.lanes=t,n}function Q1(n,e,t){return e=xs(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function o6(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=D1(0),this.expirationTimes=D1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=D1(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function rT(n,e,t,i,r,s,o,a,l){return n=new o6(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=xs(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},zM(s),n}function a6(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yu,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function pF(n){if(!n)return ll;n=n._reactInternals;e:{if(Kc(n)!==n||n.tag!==1)throw Error(Ce(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Rr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ce(171))}if(n.tag===1){var t=n.type;if(Rr(t))return dN(n,t,e)}return e}function mF(n,e,t,i,r,s,o,a,l){return n=rT(t,i,!0,n,r,s,o,a,l),n.context=pF(null),t=n.current,i=mr(),r=Qa(t),s=ta(i,r),s.callback=e??null,Ya(t,s,r),n.current.lanes=r,im(n,r,i),br(n,i),n}function i_(n,e,t,i){var r=e.current,s=mr(),o=Qa(r);return t=pF(t),e.context===null?e.context=t:e.pendingContext=t,e=ta(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=Ya(r,e,o),n!==null&&(ks(n,r,o,s),_y(n,r,o)),o}function uv(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function TP(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function sT(n,e){TP(n,e),(n=n.alternate)&&TP(n,e)}function l6(){return null}var gF=typeof reportError=="function"?reportError:function(n){console.error(n)};function oT(n){this._internalRoot=n}r_.prototype.render=oT.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Ce(409));i_(n,e,null,null)};r_.prototype.unmount=oT.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;kc(function(){i_(null,n,null,null)}),e[oa]=null}};function r_(n){this._internalRoot=n}r_.prototype.unstable_scheduleHydration=function(n){if(n){var e=X3();n={blockedOn:null,target:n,priority:e};for(var t=0;t<ka.length&&e!==0&&e<ka[t].priority;t++);ka.splice(t,0,n),t===0&&K3(n)}};function aT(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function s_(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function CP(){}function c6(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=uv(o);s.call(c)}}var o=mF(e,i,n,0,null,!1,!1,"",CP);return n._reactRootContainer=o,n[oa]=o.current,dp(n.nodeType===8?n.parentNode:n),kc(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=uv(l);a.call(c)}}var l=rT(n,0,!1,null,null,!1,!1,"",CP);return n._reactRootContainer=l,n[oa]=l.current,dp(n.nodeType===8?n.parentNode:n),kc(function(){i_(e,l,t,i)}),l}function o_(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=uv(o);a.call(l)}}i_(e,o,n,r)}else o=c6(t,e,n,r,i);return uv(o)}W3=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Cd(e.pendingLanes);t!==0&&(TM(e,t|1),br(e,jn()),!(Yt&6)&&(Gh=jn()+500,Al()))}break;case 13:kc(function(){var i=aa(n,1);if(i!==null){var r=mr();ks(i,n,1,r)}}),sT(n,1)}};CM=function(n){if(n.tag===13){var e=aa(n,134217728);if(e!==null){var t=mr();ks(e,n,134217728,t)}sT(n,134217728)}};j3=function(n){if(n.tag===13){var e=Qa(n),t=aa(n,e);if(t!==null){var i=mr();ks(t,n,e,i)}sT(n,e)}};X3=function(){return sn};J3=function(n,e){var t=sn;try{return sn=n,e()}finally{sn=t}};GS=function(n,e,t){switch(e){case"input":if(NS(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=Yv(i);if(!r)throw Error(Ce(90));w3(i),NS(i,r)}}}break;case"textarea":T3(n,t);break;case"select":e=t.value,e!=null&&Ah(n,!!t.multiple,e,!1)}};L3=eT;B3=kc;var u6={usingClientEntryPoint:!1,Events:[sm,th,Yv,I3,D3,eT]},ed={findFiberByHostInstance:lc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},h6={bundleType:ed.bundleType,version:ed.version,rendererPackageName:ed.rendererPackageName,rendererConfig:ed.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:da.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=O3(n),n===null?null:n.stateNode},findFiberByHostInstance:ed.findFiberByHostInstance||l6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var t0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!t0.isDisabled&&t0.supportsFiber)try{Xv=t0.inject(h6),mo=t0}catch{}}$r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=u6;$r.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!aT(e))throw Error(Ce(200));return a6(n,e,null,t)};$r.createRoot=function(n,e){if(!aT(n))throw Error(Ce(299));var t=!1,i="",r=gF;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=rT(n,1,!1,null,null,t,!1,i,r),n[oa]=e.current,dp(n.nodeType===8?n.parentNode:n),new oT(e)};$r.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Ce(188)):(n=Object.keys(n).join(","),Error(Ce(268,n)));return n=O3(e),n=n===null?null:n.stateNode,n};$r.flushSync=function(n){return kc(n)};$r.hydrate=function(n,e,t){if(!s_(e))throw Error(Ce(200));return o_(null,n,e,!0,t)};$r.hydrateRoot=function(n,e,t){if(!aT(n))throw Error(Ce(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",o=gF;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=mF(e,null,n,1,t??null,r,!1,s,o),n[oa]=e.current,dp(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new r_(e)};$r.render=function(n,e,t){if(!s_(e))throw Error(Ce(200));return o_(null,n,e,!1,t)};$r.unmountComponentAtNode=function(n){if(!s_(n))throw Error(Ce(40));return n._reactRootContainer?(kc(function(){o_(null,null,n,!1,function(){n._reactRootContainer=null,n[oa]=null})}),!0):!1};$r.unstable_batchedUpdates=eT;$r.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!s_(t))throw Error(Ce(200));if(n==null||n._reactInternals===void 0)throw Error(Ce(38));return o_(n,e,t,!1,i)};$r.version="18.2.0-next-9e3b772b8-20220608";function yF(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yF)}catch(n){console.error(n)}}yF(),m3.exports=$r;var f6=m3.exports,vF,RP=f6;vF=RS.createRoot=RP.createRoot,RS.hydrateRoot=RP.hydrateRoot;/**
 * @remix-run/router v1.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sp(){return Sp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Sp.apply(this,arguments)}var hc;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(hc||(hc={}));const bP="popstate";function d6(n){n===void 0&&(n={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return AE("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:hv(r)}return m6(e,t,null,n)}function Vs(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function p6(){return Math.random().toString(36).substr(2,8)}function PP(n,e){return{usr:n.state,key:n.key,idx:e}}function AE(n,e,t,i){return t===void 0&&(t=null),Sp({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?a_(e):e,{state:t,key:e&&e.key||i||p6()})}function hv(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function a_(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function m6(n,e,t,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=hc.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(Sp({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=hc.Pop;let _=h(),g=_==null?null:_-c;c=_,l&&l({action:a,location:x.location,delta:g})}function p(_,g){a=hc.Push;let A=AE(x.location,_,g);t&&t(A,_),c=h()+1;let S=PP(A,c),w=x.createHref(A);try{o.pushState(S,"",w)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;r.location.assign(w)}s&&l&&l({action:a,location:x.location,delta:1})}function m(_,g){a=hc.Replace;let A=AE(x.location,_,g);t&&t(A,_),c=h();let S=PP(A,c),w=x.createHref(A);o.replaceState(S,"",w),s&&l&&l({action:a,location:x.location,delta:0})}function y(_){let g=r.location.origin!=="null"?r.location.origin:r.location.href,A=typeof _=="string"?_:hv(_);return Vs(g,"No window.location.(origin|href) available to create URL for href: "+A),new URL(A,g)}let x={get action(){return a},get location(){return n(r,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(bP,d),l=_,()=>{r.removeEventListener(bP,d),l=null}},createHref(_){return e(r,_)},createURL:y,encodeLocation(_){let g=y(_);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:p,replace:m,go(_){return o.go(_)}};return x}var IP;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(IP||(IP={}));function _F(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function g6(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?a_(n):n;return{pathname:t?t.startsWith("/")?t:y6(t,e):e,search:_6(i),hash:x6(r)}}function y6(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function Z1(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function v6(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function xF(n,e){let t=v6(n);return e?t.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function AF(n,e,t,i){i===void 0&&(i=!1);let r;typeof n=="string"?r=a_(n):(r=Sp({},n),Vs(!r.pathname||!r.pathname.includes("?"),Z1("?","pathname","search",r)),Vs(!r.pathname||!r.pathname.includes("#"),Z1("#","pathname","hash",r)),Vs(!r.search||!r.search.includes("#"),Z1("#","search","hash",r)));let s=n===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=t;else{let d=e.length-1;if(!i&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;r.pathname=p.join("/")}a=d>=0?e[d]:"/"}let l=g6(r,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const SF=n=>n.join("/").replace(/\/\/+/g,"/"),_6=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,x6=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,EF=["post","put","patch","delete"];new Set(EF);const A6=["get",...EF];new Set(A6);/**
 * React Router v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fv(){return fv=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},fv.apply(this,arguments)}const wF=W.createContext(null),df=W.createContext(null),lT=W.createContext(null),l_=W.createContext({outlet:null,matches:[],isDataRoute:!1});function S6(n,e){let{relative:t}=e===void 0?{}:e;c_()||Vs(!1);let{basename:i,navigator:r}=W.useContext(df),{hash:s,pathname:o,search:a}=TF(n,{relative:t}),l=o;return i!=="/"&&(l=o==="/"?i:SF([i,o])),r.createHref({pathname:l,search:a,hash:s})}function c_(){return W.useContext(lT)!=null}function cT(){return c_()||Vs(!1),W.useContext(lT).location}function MF(n){W.useContext(df).static||W.useLayoutEffect(n)}function E6(){let{isDataRoute:n}=W.useContext(l_);return n?R6():w6()}function w6(){c_()||Vs(!1);let n=W.useContext(wF),{basename:e,future:t,navigator:i}=W.useContext(df),{matches:r}=W.useContext(l_),{pathname:s}=cT(),o=JSON.stringify(xF(r,t.v7_relativeSplatPath)),a=W.useRef(!1);return MF(()=>{a.current=!0}),W.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let d=AF(c,JSON.parse(o),s,h.relative==="path");n==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:SF([e,d.pathname])),(h.replace?i.replace:i.push)(d,h.state,h)},[e,i,o,s,n])}function TF(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=W.useContext(df),{matches:r}=W.useContext(l_),{pathname:s}=cT(),o=JSON.stringify(xF(r,i.v7_relativeSplatPath));return W.useMemo(()=>AF(n,JSON.parse(o),s,t==="path"),[n,o,s,t])}var CF=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(CF||{}),RF=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(RF||{});function M6(n){let e=W.useContext(wF);return e||Vs(!1),e}function T6(n){let e=W.useContext(l_);return e||Vs(!1),e}function C6(n){let e=T6(),t=e.matches[e.matches.length-1];return t.route.id||Vs(!1),t.route.id}function R6(){let{router:n}=M6(CF.UseNavigateStable),e=C6(RF.UseNavigateStable),t=W.useRef(!1);return MF(()=>{t.current=!0}),W.useCallback(function(r,s){s===void 0&&(s={}),t.current&&(typeof r=="number"?n.navigate(r):n.navigate(r,fv({fromRouteId:e},s)))},[n,e])}function b6(n){let{basename:e="/",children:t=null,location:i,navigationType:r=hc.Pop,navigator:s,static:o=!1,future:a}=n;c_()&&Vs(!1);let l=e.replace(/^\/*/,"/"),c=W.useMemo(()=>({basename:l,navigator:s,static:o,future:fv({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=a_(i));let{pathname:h="/",search:d="",hash:p="",state:m=null,key:y="default"}=i,x=W.useMemo(()=>{let _=_F(h,l);return _==null?null:{location:{pathname:_,search:d,hash:p,state:m,key:y},navigationType:r}},[l,h,d,p,m,y,r]);return x==null?null:W.createElement(df.Provider,{value:c},W.createElement(lT.Provider,{children:t,value:x}))}new Promise(()=>{});/**
 * React Router DOM v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function SE(){return SE=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},SE.apply(this,arguments)}function P6(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function I6(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function D6(n,e){return n.button===0&&(!e||e==="_self")&&!I6(n)}const L6=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],B6="startTransition",DP=nH[B6];function N6(n){let{basename:e,children:t,future:i,window:r}=n,s=W.useRef();s.current==null&&(s.current=d6({window:r,v5Compat:!0}));let o=s.current,[a,l]=W.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},h=W.useCallback(d=>{c&&DP?DP(()=>l(d)):l(d)},[l,c]);return W.useLayoutEffect(()=>o.listen(h),[o,h]),W.createElement(b6,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:i})}const F6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",O6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,U6=W.forwardRef(function(e,t){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,unstable_viewTransition:d}=e,p=P6(e,L6),{basename:m}=W.useContext(df),y,x=!1;if(typeof c=="string"&&O6.test(c)&&(y=c,F6))try{let S=new URL(window.location.href),w=c.startsWith("//")?new URL(S.protocol+c):new URL(c),R=_F(w.pathname,m);w.origin===S.origin&&R!=null?c=R+w.search+w.hash:x=!0}catch{}let _=S6(c,{relative:r}),g=k6(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:r,unstable_viewTransition:d});function A(S){i&&i(S),S.defaultPrevented||g(S)}return W.createElement("a",SE({},p,{href:y||_,onClick:x||s?i:A,ref:t,target:l}))});var LP;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(LP||(LP={}));var BP;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(BP||(BP={}));function k6(n,e){let{target:t,replace:i,state:r,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=E6(),c=cT(),h=TF(n,{relative:o});return W.useCallback(d=>{if(D6(d,t)){d.preventDefault();let p=i!==void 0?i:hv(c)===hv(h);l(n,{replace:p,state:r,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[c,l,h,i,r,t,n,s,o,a])}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const pf="160",Zl={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},ec={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},bF=0,EE=1,PF=2,V6=3,IF=0,u_=1,Wd=2,Ds=3,Eo=0,gr=1,vs=2,z6=2,na=0,wc=1,wE=2,ME=3,TE=4,DF=5,za=100,LF=101,BF=102,CE=103,RE=104,NF=200,FF=201,OF=202,UF=203,dv=204,pv=205,kF=206,VF=207,zF=208,GF=209,HF=210,WF=211,jF=212,XF=213,JF=214,KF=0,$F=1,YF=2,Ep=3,qF=4,QF=5,ZF=6,eO=7,am=0,tO=1,nO=2,yo=0,iO=1,rO=2,sO=3,uT=4,oO=5,aO=6,bE="attached",lO="detached",h_=300,ca=301,cl=302,wp=303,Mp=304,mf=306,ul=1e3,Di=1001,Hh=1002,Fn=1003,Tp=1004,G6=1004,Ch=1005,H6=1005,Tn=1006,f_=1007,W6=1007,wo=1008,j6=1008,vo=1009,cO=1010,uO=1011,d_=1012,hT=1013,Yo=1014,Fs=1015,Wh=1016,fT=1017,dT=1018,el=1020,hO=1021,fr=1023,fO=1024,dO=1025,tl=1026,Vc=1027,pO=1028,pT=1029,mO=1030,mT=1031,gT=1033,Ty=33776,Cy=33777,Ry=33778,by=33779,PE=35840,IE=35841,DE=35842,LE=35843,yT=36196,BE=37492,NE=37496,FE=37808,OE=37809,UE=37810,kE=37811,VE=37812,zE=37813,GE=37814,HE=37815,WE=37816,jE=37817,XE=37818,JE=37819,KE=37820,$E=37821,Py=36492,YE=36494,qE=36495,gO=36283,QE=36284,ZE=36285,ew=36286,yO=2200,vO=2201,_O=2202,jh=2300,zc=2301,Iy=2302,fc=2400,dc=2401,Cp=2402,p_=2500,vT=2501,xO=0,_T=1,mv=2,xT=3e3,nl=3001,AO=3200,SO=3201,Sl=0,EO=1,Vr="",oi="srgb",Mo="srgb-linear",m_="display-p3",lm="display-p3-linear",Rp="linear",cn="srgb",bp="rec709",Pp="p3",X6=0,tc=7680,J6=7681,K6=7682,$6=7683,Y6=34055,q6=34056,Q6=5386,Z6=512,e8=513,t8=514,n8=515,i8=516,r8=517,s8=518,tw=519,wO=512,MO=513,TO=514,AT=515,CO=516,RO=517,bO=518,PO=519,Ip=35044,Mc=35048,o8=35040,a8=35045,l8=35049,c8=35041,u8=35046,h8=35050,f8=35042,d8="100",nw="300 es",gv=1035,Os=2e3,Xh=2001;class Po{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const Wi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let NP=1234567;const Tc=Math.PI/180,Jh=180/Math.PI;function Wr(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Wi[n&255]+Wi[n>>8&255]+Wi[n>>16&255]+Wi[n>>24&255]+"-"+Wi[e&255]+Wi[e>>8&255]+"-"+Wi[e>>16&15|64]+Wi[e>>24&255]+"-"+Wi[t&63|128]+Wi[t>>8&255]+"-"+Wi[t>>16&255]+Wi[t>>24&255]+Wi[i&255]+Wi[i>>8&255]+Wi[i>>16&255]+Wi[i>>24&255]).toLowerCase()}function On(n,e,t){return Math.max(e,Math.min(t,n))}function ST(n,e){return(n%e+e)%e}function p8(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function m8(n,e,t){return n!==e?(t-n)/(e-n):0}function jd(n,e,t){return(1-t)*n+t*e}function g8(n,e,t,i){return jd(n,e,1-Math.exp(-t*i))}function y8(n,e=1){return e-Math.abs(ST(n,e*2)-e)}function v8(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function _8(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function x8(n,e){return n+Math.floor(Math.random()*(e-n+1))}function A8(n,e){return n+Math.random()*(e-n)}function S8(n){return n*(.5-Math.random())}function E8(n){n!==void 0&&(NP=n);let e=NP+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function w8(n){return n*Tc}function M8(n){return n*Jh}function iw(n){return(n&n-1)===0&&n!==0}function T8(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function yv(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function C8(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+i)/2),h=o((e+i)/2),d=s((e-i)/2),p=o((e-i)/2),m=s((i-e)/2),y=o((i-e)/2);switch(r){case"XYX":n.set(a*h,l*d,l*p,a*c);break;case"YZY":n.set(l*p,a*h,l*d,a*c);break;case"ZXZ":n.set(l*d,l*p,a*h,a*c);break;case"XZX":n.set(a*h,l*y,l*m,a*c);break;case"YXY":n.set(l*m,a*h,l*y,a*c);break;case"ZYZ":n.set(l*y,l*m,a*h,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Mr(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Pt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const IO={DEG2RAD:Tc,RAD2DEG:Jh,generateUUID:Wr,clamp:On,euclideanModulo:ST,mapLinear:p8,inverseLerp:m8,lerp:jd,damp:g8,pingpong:y8,smoothstep:v8,smootherstep:_8,randInt:x8,randFloat:A8,randFloatSpread:S8,seededRandom:E8,degToRad:w8,radToDeg:M8,isPowerOfTwo:iw,ceilPowerOfTwo:T8,floorPowerOfTwo:yv,setQuaternionFromProperEuler:C8,normalize:Pt,denormalize:Mr};class me{constructor(e=0,t=0){me.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(On(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Lt{constructor(e,t,i,r,s,o,a,l,c){Lt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c)}set(e,t,i,r,s,o,a,l,c){const h=this.elements;return h[0]=e,h[1]=r,h[2]=a,h[3]=t,h[4]=s,h[5]=l,h[6]=i,h[7]=o,h[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],h=i[4],d=i[7],p=i[2],m=i[5],y=i[8],x=r[0],_=r[3],g=r[6],A=r[1],S=r[4],w=r[7],R=r[2],T=r[5],P=r[8];return s[0]=o*x+a*A+l*R,s[3]=o*_+a*S+l*T,s[6]=o*g+a*w+l*P,s[1]=c*x+h*A+d*R,s[4]=c*_+h*S+d*T,s[7]=c*g+h*w+d*P,s[2]=p*x+m*A+y*R,s[5]=p*_+m*S+y*T,s[8]=p*g+m*w+y*P,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8];return t*o*h-t*a*c-i*s*h+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],d=h*o-a*c,p=a*l-h*s,m=c*s-o*l,y=t*d+i*p+r*m;if(y===0)return this.set(0,0,0,0,0,0,0,0,0);const x=1/y;return e[0]=d*x,e[1]=(r*c-h*i)*x,e[2]=(a*i-r*o)*x,e[3]=p*x,e[4]=(h*t-r*l)*x,e[5]=(r*s-a*t)*x,e[6]=m*x,e[7]=(i*l-c*t)*x,e[8]=(o*t-i*s)*x,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(eA.makeScale(e,t)),this}rotate(e){return this.premultiply(eA.makeRotation(-e)),this}translate(e,t){return this.premultiply(eA.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const eA=new Lt;function DO(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const R8={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function lh(n,e){return new R8[n](e)}function Dp(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function LO(){const n=Dp("canvas");return n.style.display="block",n}const FP={};function Xd(n){n in FP||(FP[n]=!0,console.warn(n))}const OP=new Lt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),UP=new Lt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),n0={[Mo]:{transfer:Rp,primaries:bp,toReference:n=>n,fromReference:n=>n},[oi]:{transfer:cn,primaries:bp,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[lm]:{transfer:Rp,primaries:Pp,toReference:n=>n.applyMatrix3(UP),fromReference:n=>n.applyMatrix3(OP)},[m_]:{transfer:cn,primaries:Pp,toReference:n=>n.convertSRGBToLinear().applyMatrix3(UP),fromReference:n=>n.applyMatrix3(OP).convertLinearToSRGB()}},b8=new Set([Mo,lm]),nn={enabled:!0,_workingColorSpace:Mo,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!b8.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=n0[e].toReference,r=n0[t].fromReference;return r(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return n0[n].primaries},getTransfer:function(n){return n===Vr?Rp:n0[n].transfer}};function Rh(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function tA(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Au;class ET{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Au===void 0&&(Au=Dp("canvas")),Au.width=e.width,Au.height=e.height;const i=Au.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Au}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Dp("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Rh(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Rh(t[i]/255)*255):t[i]=Rh(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let P8=0;class pc{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:P8++}),this.uuid=Wr(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(nA(r[o].image)):s.push(nA(r[o]))}else s=nA(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function nA(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?ET.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let I8=0;class Sn extends Po{constructor(e=Sn.DEFAULT_IMAGE,t=Sn.DEFAULT_MAPPING,i=Di,r=Di,s=Tn,o=wo,a=fr,l=vo,c=Sn.DEFAULT_ANISOTROPY,h=Vr){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:I8++}),this.uuid=Wr(),this.name="",this.source=new pc(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new me(0,0),this.repeat=new me(1,1),this.center=new me(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Lt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof h=="string"?this.colorSpace=h:(Xd("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=h===nl?oi:Vr),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==h_)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ul:e.x=e.x-Math.floor(e.x);break;case Di:e.x=e.x<0?0:1;break;case Hh:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case ul:e.y=e.y-Math.floor(e.y);break;case Di:e.y=e.y<0?0:1;break;case Hh:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Xd("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===oi?nl:xT}set encoding(e){Xd("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===nl?oi:Vr}}Sn.DEFAULT_IMAGE=null;Sn.DEFAULT_MAPPING=h_;Sn.DEFAULT_ANISOTROPY=1;class rn{constructor(e=0,t=0,i=0,r=1){rn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],h=l[4],d=l[8],p=l[1],m=l[5],y=l[9],x=l[2],_=l[6],g=l[10];if(Math.abs(h-p)<.01&&Math.abs(d-x)<.01&&Math.abs(y-_)<.01){if(Math.abs(h+p)<.1&&Math.abs(d+x)<.1&&Math.abs(y+_)<.1&&Math.abs(c+m+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const S=(c+1)/2,w=(m+1)/2,R=(g+1)/2,T=(h+p)/4,P=(d+x)/4,B=(y+_)/4;return S>w&&S>R?S<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(S),r=T/i,s=P/i):w>R?w<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(w),i=T/r,s=B/r):R<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(R),i=P/s,r=B/s),this.set(i,r,s,t),this}let A=Math.sqrt((_-y)*(_-y)+(d-x)*(d-x)+(p-h)*(p-h));return Math.abs(A)<.001&&(A=1),this.x=(_-y)/A,this.y=(d-x)/A,this.z=(p-h)/A,this.w=Math.acos((c+m+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class BO extends Po{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new rn(0,0,e,t),this.scissorTest=!1,this.viewport=new rn(0,0,e,t);const r={width:e,height:t,depth:1};i.encoding!==void 0&&(Xd("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===nl?oi:Vr),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Tn,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},i),this.texture=new Sn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps,this.texture.internalFormat=i.internalFormat,this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new pc(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Gs extends BO{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class g_ extends Sn{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Fn,this.minFilter=Fn,this.wrapR=Di,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class D8 extends Gs{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new g_(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class wT extends Sn{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Fn,this.minFilter=Fn,this.wrapR=Di,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class L8 extends Gs{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new wT(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class B8 extends Gs{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<i;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class Ai{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],c=i[r+1],h=i[r+2],d=i[r+3];const p=s[o+0],m=s[o+1],y=s[o+2],x=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=h,e[t+3]=d;return}if(a===1){e[t+0]=p,e[t+1]=m,e[t+2]=y,e[t+3]=x;return}if(d!==x||l!==p||c!==m||h!==y){let _=1-a;const g=l*p+c*m+h*y+d*x,A=g>=0?1:-1,S=1-g*g;if(S>Number.EPSILON){const R=Math.sqrt(S),T=Math.atan2(R,g*A);_=Math.sin(_*T)/R,a=Math.sin(a*T)/R}const w=a*A;if(l=l*_+p*w,c=c*_+m*w,h=h*_+y*w,d=d*_+x*w,_===1-a){const R=1/Math.sqrt(l*l+c*c+h*h+d*d);l*=R,c*=R,h*=R,d*=R}}e[t]=l,e[t+1]=c,e[t+2]=h,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],h=i[r+3],d=s[o],p=s[o+1],m=s[o+2],y=s[o+3];return e[t]=a*y+h*d+l*m-c*p,e[t+1]=l*y+h*p+c*d-a*m,e[t+2]=c*y+h*m+a*p-l*d,e[t+3]=h*y-a*d-l*p-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),h=a(r/2),d=a(s/2),p=l(i/2),m=l(r/2),y=l(s/2);switch(o){case"XYZ":this._x=p*h*d+c*m*y,this._y=c*m*d-p*h*y,this._z=c*h*y+p*m*d,this._w=c*h*d-p*m*y;break;case"YXZ":this._x=p*h*d+c*m*y,this._y=c*m*d-p*h*y,this._z=c*h*y-p*m*d,this._w=c*h*d+p*m*y;break;case"ZXY":this._x=p*h*d-c*m*y,this._y=c*m*d+p*h*y,this._z=c*h*y+p*m*d,this._w=c*h*d-p*m*y;break;case"ZYX":this._x=p*h*d-c*m*y,this._y=c*m*d+p*h*y,this._z=c*h*y-p*m*d,this._w=c*h*d+p*m*y;break;case"YZX":this._x=p*h*d+c*m*y,this._y=c*m*d+p*h*y,this._z=c*h*y-p*m*d,this._w=c*h*d-p*m*y;break;case"XZY":this._x=p*h*d-c*m*y,this._y=c*m*d-p*h*y,this._z=c*h*y+p*m*d,this._w=c*h*d+p*m*y;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],h=t[6],d=t[10],p=i+a+d;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(h-l)*m,this._y=(s-c)*m,this._z=(o-r)*m}else if(i>a&&i>d){const m=2*Math.sqrt(1+i-a-d);this._w=(h-l)/m,this._x=.25*m,this._y=(r+o)/m,this._z=(s+c)/m}else if(a>d){const m=2*Math.sqrt(1+a-i-d);this._w=(s-c)/m,this._x=(r+o)/m,this._y=.25*m,this._z=(l+h)/m}else{const m=2*Math.sqrt(1+d-i-a);this._w=(o-r)/m,this._x=(s+c)/m,this._y=(l+h)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(On(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,h=t._w;return this._x=i*h+o*a+r*c-s*l,this._y=r*h+o*l+s*a-i*c,this._z=s*h+o*c+i*l-r*a,this._w=o*h-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*i+t*this._x,this._y=m*r+t*this._y,this._z=m*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),h=Math.atan2(c,a),d=Math.sin((1-t)*h)/c,p=Math.sin(t*h)/c;return this._w=o*d+this._w*p,this._x=i*d+this._x*p,this._y=r*d+this._y*p,this._z=s*d+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class F{constructor(e=0,t=0,i=0){F.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(kP.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(kP.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*r-a*i),h=2*(a*t-s*r),d=2*(s*i-o*t);return this.x=t+l*c+o*d-a*h,this.y=i+l*h+a*c-s*d,this.z=r+l*d+s*h-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return iA.copy(this).projectOnVector(e),this.sub(iA)}reflect(e){return this.sub(iA.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(On(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const iA=new F,kP=new Ai;class Qi{constructor(e=new F(1/0,1/0,1/0),t=new F(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Rs.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Rs.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Rs.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,Rs):Rs.fromBufferAttribute(s,o),Rs.applyMatrix4(e.matrixWorld),this.expandByPoint(Rs);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),i0.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),i0.copy(i.boundingBox)),i0.applyMatrix4(e.matrixWorld),this.union(i0)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Rs),Rs.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(td),r0.subVectors(this.max,td),Su.subVectors(e.a,td),Eu.subVectors(e.b,td),wu.subVectors(e.c,td),wa.subVectors(Eu,Su),Ma.subVectors(wu,Eu),Ul.subVectors(Su,wu);let t=[0,-wa.z,wa.y,0,-Ma.z,Ma.y,0,-Ul.z,Ul.y,wa.z,0,-wa.x,Ma.z,0,-Ma.x,Ul.z,0,-Ul.x,-wa.y,wa.x,0,-Ma.y,Ma.x,0,-Ul.y,Ul.x,0];return!rA(t,Su,Eu,wu,r0)||(t=[1,0,0,0,1,0,0,0,1],!rA(t,Su,Eu,wu,r0))?!1:(s0.crossVectors(wa,Ma),t=[s0.x,s0.y,s0.z],rA(t,Su,Eu,wu,r0))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Rs).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Rs).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Uo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Uo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Uo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Uo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Uo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Uo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Uo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Uo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Uo),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Uo=[new F,new F,new F,new F,new F,new F,new F,new F],Rs=new F,i0=new Qi,Su=new F,Eu=new F,wu=new F,wa=new F,Ma=new F,Ul=new F,td=new F,r0=new F,s0=new F,kl=new F;function rA(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){kl.fromArray(n,s);const a=r.x*Math.abs(kl.x)+r.y*Math.abs(kl.y)+r.z*Math.abs(kl.z),l=e.dot(kl),c=t.dot(kl),h=i.dot(kl);if(Math.max(-Math.max(l,c,h),Math.min(l,c,h))>a)return!1}return!0}const N8=new Qi,nd=new F,sA=new F;class Bi{constructor(e=new F,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):N8.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;nd.subVectors(e,this.center);const t=nd.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(nd,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(sA.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(nd.copy(e.center).add(sA)),this.expandByPoint(nd.copy(e.center).sub(sA))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const ko=new F,oA=new F,o0=new F,Ta=new F,aA=new F,a0=new F,lA=new F;class $c{constructor(e=new F,t=new F(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ko)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=ko.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ko.copy(this.origin).addScaledVector(this.direction,t),ko.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){oA.copy(e).add(t).multiplyScalar(.5),o0.copy(t).sub(e).normalize(),Ta.copy(this.origin).sub(oA);const s=e.distanceTo(t)*.5,o=-this.direction.dot(o0),a=Ta.dot(this.direction),l=-Ta.dot(o0),c=Ta.lengthSq(),h=Math.abs(1-o*o);let d,p,m,y;if(h>0)if(d=o*l-a,p=o*a-l,y=s*h,d>=0)if(p>=-y)if(p<=y){const x=1/h;d*=x,p*=x,m=d*(d+o*p+2*a)+p*(o*d+p+2*l)+c}else p=s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+c;else p=-s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+c;else p<=-y?(d=Math.max(0,-(-o*s+a)),p=d>0?-s:Math.min(Math.max(-s,-l),s),m=-d*d+p*(p+2*l)+c):p<=y?(d=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+c):(d=Math.max(0,-(o*s+a)),p=d>0?s:Math.min(Math.max(-s,-l),s),m=-d*d+p*(p+2*l)+c);else p=o>0?-s:s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(oA).addScaledVector(o0,p),m}intersectSphere(e,t){ko.subVectors(e.center,this.origin);const i=ko.dot(this.direction),r=ko.dot(ko)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const c=1/this.direction.x,h=1/this.direction.y,d=1/this.direction.z,p=this.origin;return c>=0?(i=(e.min.x-p.x)*c,r=(e.max.x-p.x)*c):(i=(e.max.x-p.x)*c,r=(e.min.x-p.x)*c),h>=0?(s=(e.min.y-p.y)*h,o=(e.max.y-p.y)*h):(s=(e.max.y-p.y)*h,o=(e.min.y-p.y)*h),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),d>=0?(a=(e.min.z-p.z)*d,l=(e.max.z-p.z)*d):(a=(e.max.z-p.z)*d,l=(e.min.z-p.z)*d),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,ko)!==null}intersectTriangle(e,t,i,r,s){aA.subVectors(t,e),a0.subVectors(i,e),lA.crossVectors(aA,a0);let o=this.direction.dot(lA),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Ta.subVectors(this.origin,e);const l=a*this.direction.dot(a0.crossVectors(Ta,a0));if(l<0)return null;const c=a*this.direction.dot(aA.cross(Ta));if(c<0||l+c>o)return null;const h=-a*Ta.dot(lA);return h<0?null:this.at(h/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class ht{constructor(e,t,i,r,s,o,a,l,c,h,d,p,m,y,x,_){ht.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c,h,d,p,m,y,x,_)}set(e,t,i,r,s,o,a,l,c,h,d,p,m,y,x,_){const g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=r,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=c,g[6]=h,g[10]=d,g[14]=p,g[3]=m,g[7]=y,g[11]=x,g[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ht().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Mu.setFromMatrixColumn(e,0).length(),s=1/Mu.setFromMatrixColumn(e,1).length(),o=1/Mu.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),h=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const p=o*h,m=o*d,y=a*h,x=a*d;t[0]=l*h,t[4]=-l*d,t[8]=c,t[1]=m+y*c,t[5]=p-x*c,t[9]=-a*l,t[2]=x-p*c,t[6]=y+m*c,t[10]=o*l}else if(e.order==="YXZ"){const p=l*h,m=l*d,y=c*h,x=c*d;t[0]=p+x*a,t[4]=y*a-m,t[8]=o*c,t[1]=o*d,t[5]=o*h,t[9]=-a,t[2]=m*a-y,t[6]=x+p*a,t[10]=o*l}else if(e.order==="ZXY"){const p=l*h,m=l*d,y=c*h,x=c*d;t[0]=p-x*a,t[4]=-o*d,t[8]=y+m*a,t[1]=m+y*a,t[5]=o*h,t[9]=x-p*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const p=o*h,m=o*d,y=a*h,x=a*d;t[0]=l*h,t[4]=y*c-m,t[8]=p*c+x,t[1]=l*d,t[5]=x*c+p,t[9]=m*c-y,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*c,y=a*l,x=a*c;t[0]=l*h,t[4]=x-p*d,t[8]=y*d+m,t[1]=d,t[5]=o*h,t[9]=-a*h,t[2]=-c*h,t[6]=m*d+y,t[10]=p-x*d}else if(e.order==="XZY"){const p=o*l,m=o*c,y=a*l,x=a*c;t[0]=l*h,t[4]=-d,t[8]=c*h,t[1]=p*d+x,t[5]=o*h,t[9]=m*d-y,t[2]=y*d-m,t[6]=a*h,t[10]=x*d+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(F8,e,O8)}lookAt(e,t,i){const r=this.elements;return Or.subVectors(e,t),Or.lengthSq()===0&&(Or.z=1),Or.normalize(),Ca.crossVectors(i,Or),Ca.lengthSq()===0&&(Math.abs(i.z)===1?Or.x+=1e-4:Or.z+=1e-4,Or.normalize(),Ca.crossVectors(i,Or)),Ca.normalize(),l0.crossVectors(Or,Ca),r[0]=Ca.x,r[4]=l0.x,r[8]=Or.x,r[1]=Ca.y,r[5]=l0.y,r[9]=Or.y,r[2]=Ca.z,r[6]=l0.z,r[10]=Or.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],h=i[1],d=i[5],p=i[9],m=i[13],y=i[2],x=i[6],_=i[10],g=i[14],A=i[3],S=i[7],w=i[11],R=i[15],T=r[0],P=r[4],B=r[8],b=r[12],I=r[1],U=r[5],K=r[9],re=r[13],G=r[2],$=r[6],Q=r[10],se=r[14],L=r[3],k=r[7],z=r[11],j=r[15];return s[0]=o*T+a*I+l*G+c*L,s[4]=o*P+a*U+l*$+c*k,s[8]=o*B+a*K+l*Q+c*z,s[12]=o*b+a*re+l*se+c*j,s[1]=h*T+d*I+p*G+m*L,s[5]=h*P+d*U+p*$+m*k,s[9]=h*B+d*K+p*Q+m*z,s[13]=h*b+d*re+p*se+m*j,s[2]=y*T+x*I+_*G+g*L,s[6]=y*P+x*U+_*$+g*k,s[10]=y*B+x*K+_*Q+g*z,s[14]=y*b+x*re+_*se+g*j,s[3]=A*T+S*I+w*G+R*L,s[7]=A*P+S*U+w*$+R*k,s[11]=A*B+S*K+w*Q+R*z,s[15]=A*b+S*re+w*se+R*j,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],h=e[2],d=e[6],p=e[10],m=e[14],y=e[3],x=e[7],_=e[11],g=e[15];return y*(+s*l*d-r*c*d-s*a*p+i*c*p+r*a*m-i*l*m)+x*(+t*l*m-t*c*p+s*o*p-r*o*m+r*c*h-s*l*h)+_*(+t*c*d-t*a*m-s*o*d+i*o*m+s*a*h-i*c*h)+g*(-r*a*h-t*l*d+t*a*p+r*o*d-i*o*p+i*l*h)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],d=e[9],p=e[10],m=e[11],y=e[12],x=e[13],_=e[14],g=e[15],A=d*_*c-x*p*c+x*l*m-a*_*m-d*l*g+a*p*g,S=y*p*c-h*_*c-y*l*m+o*_*m+h*l*g-o*p*g,w=h*x*c-y*d*c+y*a*m-o*x*m-h*a*g+o*d*g,R=y*d*l-h*x*l-y*a*p+o*x*p+h*a*_-o*d*_,T=t*A+i*S+r*w+s*R;if(T===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/T;return e[0]=A*P,e[1]=(x*p*s-d*_*s-x*r*m+i*_*m+d*r*g-i*p*g)*P,e[2]=(a*_*s-x*l*s+x*r*c-i*_*c-a*r*g+i*l*g)*P,e[3]=(d*l*s-a*p*s-d*r*c+i*p*c+a*r*m-i*l*m)*P,e[4]=S*P,e[5]=(h*_*s-y*p*s+y*r*m-t*_*m-h*r*g+t*p*g)*P,e[6]=(y*l*s-o*_*s-y*r*c+t*_*c+o*r*g-t*l*g)*P,e[7]=(o*p*s-h*l*s+h*r*c-t*p*c-o*r*m+t*l*m)*P,e[8]=w*P,e[9]=(y*d*s-h*x*s-y*i*m+t*x*m+h*i*g-t*d*g)*P,e[10]=(o*x*s-y*a*s+y*i*c-t*x*c-o*i*g+t*a*g)*P,e[11]=(h*a*s-o*d*s-h*i*c+t*d*c+o*i*m-t*a*m)*P,e[12]=R*P,e[13]=(h*x*r-y*d*r+y*i*p-t*x*p-h*i*_+t*d*_)*P,e[14]=(y*a*r-o*x*r-y*i*l+t*x*l+o*i*_-t*a*_)*P,e[15]=(o*d*r-h*a*r+h*i*l-t*d*l-o*i*p+t*a*p)*P,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,h=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,h*a+i,h*l-r*o,0,c*l-r*a,h*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,h=o+o,d=a+a,p=s*c,m=s*h,y=s*d,x=o*h,_=o*d,g=a*d,A=l*c,S=l*h,w=l*d,R=i.x,T=i.y,P=i.z;return r[0]=(1-(x+g))*R,r[1]=(m+w)*R,r[2]=(y-S)*R,r[3]=0,r[4]=(m-w)*T,r[5]=(1-(p+g))*T,r[6]=(_+A)*T,r[7]=0,r[8]=(y+S)*P,r[9]=(_-A)*P,r[10]=(1-(p+x))*P,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Mu.set(r[0],r[1],r[2]).length();const o=Mu.set(r[4],r[5],r[6]).length(),a=Mu.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],bs.copy(this);const c=1/s,h=1/o,d=1/a;return bs.elements[0]*=c,bs.elements[1]*=c,bs.elements[2]*=c,bs.elements[4]*=h,bs.elements[5]*=h,bs.elements[6]*=h,bs.elements[8]*=d,bs.elements[9]*=d,bs.elements[10]*=d,t.setFromRotationMatrix(bs),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=Os){const l=this.elements,c=2*s/(t-e),h=2*s/(i-r),d=(t+e)/(t-e),p=(i+r)/(i-r);let m,y;if(a===Os)m=-(o+s)/(o-s),y=-2*o*s/(o-s);else if(a===Xh)m=-o/(o-s),y=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=h,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=y,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=Os){const l=this.elements,c=1/(t-e),h=1/(i-r),d=1/(o-s),p=(t+e)*c,m=(i+r)*h;let y,x;if(a===Os)y=(o+s)*d,x=-2*d;else if(a===Xh)y=s*d,x=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*h,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=x,l[14]=-y,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Mu=new F,bs=new ht,F8=new F(0,0,0),O8=new F(1,1,1),Ca=new F,l0=new F,Or=new F,VP=new ht,zP=new Ai;class cm{constructor(e=0,t=0,i=0,r=cm.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],h=r[9],d=r[2],p=r[6],m=r[10];switch(t){case"XYZ":this._y=Math.asin(On(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,c),this._z=0);break;case"YXZ":this._x=Math.asin(-On(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(On(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-d,m),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-On(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(On(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,c),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-On(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-h,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return VP.makeRotationFromQuaternion(e),this.setFromRotationMatrix(VP,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return zP.setFromEuler(this),this.setFromQuaternion(zP,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}cm.DEFAULT_ORDER="XYZ";class Cc{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let U8=0;const GP=new F,Tu=new Ai,Vo=new ht,c0=new F,id=new F,k8=new F,V8=new Ai,HP=new F(1,0,0),WP=new F(0,1,0),jP=new F(0,0,1),z8={type:"added"},G8={type:"removed"};class Ht extends Po{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:U8++}),this.uuid=Wr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ht.DEFAULT_UP.clone();const e=new F,t=new cm,i=new Ai,r=new F(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new ht},normalMatrix:{value:new Lt}}),this.matrix=new ht,this.matrixWorld=new ht,this.matrixAutoUpdate=Ht.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Ht.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Cc,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Tu.setFromAxisAngle(e,t),this.quaternion.multiply(Tu),this}rotateOnWorldAxis(e,t){return Tu.setFromAxisAngle(e,t),this.quaternion.premultiply(Tu),this}rotateX(e){return this.rotateOnAxis(HP,e)}rotateY(e){return this.rotateOnAxis(WP,e)}rotateZ(e){return this.rotateOnAxis(jP,e)}translateOnAxis(e,t){return GP.copy(e).applyQuaternion(this.quaternion),this.position.add(GP.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(HP,e)}translateY(e){return this.translateOnAxis(WP,e)}translateZ(e){return this.translateOnAxis(jP,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Vo.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?c0.copy(e):c0.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),id.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Vo.lookAt(id,c0,this.up):Vo.lookAt(c0,id,this.up),this.quaternion.setFromRotationMatrix(Vo),r&&(Vo.extractRotation(r.matrixWorld),Tu.setFromRotationMatrix(Vo),this.quaternion.premultiply(Tu.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(z8)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(G8)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Vo.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Vo.multiply(e.parent.matrixWorld)),e.applyMatrix4(Vo),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(id,e,k8),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(id,V8,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++){const s=t[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++){const a=r[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),r.maxGeometryCount=this._maxGeometryCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,h=l.length;c<h;c++){const d=l[c];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),h=o(e.images),d=o(e.shapes),p=o(e.skeletons),m=o(e.animations),y=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),h.length>0&&(i.images=h),d.length>0&&(i.shapes=d),p.length>0&&(i.skeletons=p),m.length>0&&(i.animations=m),y.length>0&&(i.nodes=y)}return i.object=r,i;function o(a){const l=[];for(const c in a){const h=a[c];delete h.metadata,l.push(h)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Ht.DEFAULT_UP=new F(0,1,0);Ht.DEFAULT_MATRIX_AUTO_UPDATE=!0;Ht.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ps=new F,zo=new F,cA=new F,Go=new F,Cu=new F,Ru=new F,XP=new F,uA=new F,hA=new F,fA=new F;let u0=!1;class wr{constructor(e=new F,t=new F,i=new F){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Ps.subVectors(e,t),r.cross(Ps);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Ps.subVectors(r,t),zo.subVectors(i,t),cA.subVectors(e,t);const o=Ps.dot(Ps),a=Ps.dot(zo),l=Ps.dot(cA),c=zo.dot(zo),h=zo.dot(cA),d=o*c-a*a;if(d===0)return s.set(0,0,0),null;const p=1/d,m=(c*l-a*h)*p,y=(o*h-a*l)*p;return s.set(1-m-y,y,m)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Go)===null?!1:Go.x>=0&&Go.y>=0&&Go.x+Go.y<=1}static getUV(e,t,i,r,s,o,a,l){return u0===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),u0=!0),this.getInterpolation(e,t,i,r,s,o,a,l)}static getInterpolation(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,Go)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,Go.x),l.addScaledVector(o,Go.y),l.addScaledVector(a,Go.z),l)}static isFrontFacing(e,t,i,r){return Ps.subVectors(i,t),zo.subVectors(e,t),Ps.cross(zo).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ps.subVectors(this.c,this.b),zo.subVectors(this.a,this.b),Ps.cross(zo).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return wr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return wr.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return u0===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),u0=!0),wr.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}getInterpolation(e,t,i,r,s){return wr.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return wr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return wr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;Cu.subVectors(r,i),Ru.subVectors(s,i),uA.subVectors(e,i);const l=Cu.dot(uA),c=Ru.dot(uA);if(l<=0&&c<=0)return t.copy(i);hA.subVectors(e,r);const h=Cu.dot(hA),d=Ru.dot(hA);if(h>=0&&d<=h)return t.copy(r);const p=l*d-h*c;if(p<=0&&l>=0&&h<=0)return o=l/(l-h),t.copy(i).addScaledVector(Cu,o);fA.subVectors(e,s);const m=Cu.dot(fA),y=Ru.dot(fA);if(y>=0&&m<=y)return t.copy(s);const x=m*c-l*y;if(x<=0&&c>=0&&y<=0)return a=c/(c-y),t.copy(i).addScaledVector(Ru,a);const _=h*y-m*d;if(_<=0&&d-h>=0&&m-y>=0)return XP.subVectors(s,r),a=(d-h)/(d-h+(m-y)),t.copy(r).addScaledVector(XP,a);const g=1/(_+x+p);return o=x*g,a=p*g,t.copy(i).addScaledVector(Cu,o).addScaledVector(Ru,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const NO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ra={h:0,s:0,l:0},h0={h:0,s:0,l:0};function dA(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class ke{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=oi){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,nn.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=nn.workingColorSpace){return this.r=e,this.g=t,this.b=i,nn.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=nn.workingColorSpace){if(e=ST(e,1),t=On(t,0,1),i=On(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=dA(o,s,e+1/3),this.g=dA(o,s,e),this.b=dA(o,s,e-1/3)}return nn.toWorkingColorSpace(this,r),this}setStyle(e,t=oi){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=oi){const i=NO[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Rh(e.r),this.g=Rh(e.g),this.b=Rh(e.b),this}copyLinearToSRGB(e){return this.r=tA(e.r),this.g=tA(e.g),this.b=tA(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=oi){return nn.fromWorkingColorSpace(ji.copy(this),e),Math.round(On(ji.r*255,0,255))*65536+Math.round(On(ji.g*255,0,255))*256+Math.round(On(ji.b*255,0,255))}getHexString(e=oi){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=nn.workingColorSpace){nn.fromWorkingColorSpace(ji.copy(this),t);const i=ji.r,r=ji.g,s=ji.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,c;const h=(a+o)/2;if(a===o)l=0,c=0;else{const d=o-a;switch(c=h<=.5?d/(o+a):d/(2-o-a),o){case i:l=(r-s)/d+(r<s?6:0);break;case r:l=(s-i)/d+2;break;case s:l=(i-r)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=h,e}getRGB(e,t=nn.workingColorSpace){return nn.fromWorkingColorSpace(ji.copy(this),t),e.r=ji.r,e.g=ji.g,e.b=ji.b,e}getStyle(e=oi){nn.fromWorkingColorSpace(ji.copy(this),e);const t=ji.r,i=ji.g,r=ji.b;return e!==oi?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Ra),this.setHSL(Ra.h+e,Ra.s+t,Ra.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Ra),e.getHSL(h0);const i=jd(Ra.h,h0.h,t),r=jd(Ra.s,h0.s,t),s=jd(Ra.l,h0.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ji=new ke;ke.NAMES=NO;let H8=0;class ni extends Po{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:H8++}),this.uuid=Wr(),this.name="",this.type="Material",this.blending=wc,this.side=Eo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=dv,this.blendDst=pv,this.blendEquation=za,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ke(0,0,0),this.blendAlpha=0,this.depthFunc=Ep,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=tw,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=tc,this.stencilZFail=tc,this.stencilZPass=tc,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==wc&&(i.blending=this.blending),this.side!==Eo&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==dv&&(i.blendSrc=this.blendSrc),this.blendDst!==pv&&(i.blendDst=this.blendDst),this.blendEquation!==za&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Ep&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==tw&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==tc&&(i.stencilFail=this.stencilFail),this.stencilZFail!==tc&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==tc&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Gr extends ni{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ke(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=am,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Jo=W8();function W8(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,h=0;for(;!(c&8388608);)c<<=1,h-=8388608;c&=-8388609,h+=947912704,s[l]=c|h}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function Sr(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=On(n,-65504,65504),Jo.floatView[0]=n;const e=Jo.uint32View[0],t=e>>23&511;return Jo.baseTable[t]+((e&8388607)>>Jo.shiftTable[t])}function bd(n){const e=n>>10;return Jo.uint32View[0]=Jo.mantissaTable[Jo.offsetTable[e]+(n&1023)]+Jo.exponentTable[e],Jo.floatView[0]}const j8={toHalfFloat:Sr,fromHalfFloat:bd},qn=new F,f0=new me;class Wt{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Ip,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Fs,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)f0.fromBufferAttribute(this,t),f0.applyMatrix3(e),this.setXY(t,f0.x,f0.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)qn.fromBufferAttribute(this,t),qn.applyMatrix3(e),this.setXYZ(t,qn.x,qn.y,qn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)qn.fromBufferAttribute(this,t),qn.applyMatrix4(e),this.setXYZ(t,qn.x,qn.y,qn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)qn.fromBufferAttribute(this,t),qn.applyNormalMatrix(e),this.setXYZ(t,qn.x,qn.y,qn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)qn.fromBufferAttribute(this,t),qn.transformDirection(e),this.setXYZ(t,qn.x,qn.y,qn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Mr(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Pt(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Mr(t,this.array)),t}setX(e,t){return this.normalized&&(t=Pt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Mr(t,this.array)),t}setY(e,t){return this.normalized&&(t=Pt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Mr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Pt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Mr(t,this.array)),t}setW(e,t){return this.normalized&&(t=Pt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Pt(t,this.array),i=Pt(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Pt(t,this.array),i=Pt(i,this.array),r=Pt(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Pt(t,this.array),i=Pt(i,this.array),r=Pt(r,this.array),s=Pt(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Ip&&(e.usage=this.usage),e}}class X8 extends Wt{constructor(e,t,i){super(new Int8Array(e),t,i)}}class J8 extends Wt{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class K8 extends Wt{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class $8 extends Wt{constructor(e,t,i){super(new Int16Array(e),t,i)}}class MT extends Wt{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class Y8 extends Wt{constructor(e,t,i){super(new Int32Array(e),t,i)}}class TT extends Wt{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class q8 extends Wt{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=bd(this.array[e*this.itemSize]);return this.normalized&&(t=Mr(t,this.array)),t}setX(e,t){return this.normalized&&(t=Pt(t,this.array)),this.array[e*this.itemSize]=Sr(t),this}getY(e){let t=bd(this.array[e*this.itemSize+1]);return this.normalized&&(t=Mr(t,this.array)),t}setY(e,t){return this.normalized&&(t=Pt(t,this.array)),this.array[e*this.itemSize+1]=Sr(t),this}getZ(e){let t=bd(this.array[e*this.itemSize+2]);return this.normalized&&(t=Mr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Pt(t,this.array)),this.array[e*this.itemSize+2]=Sr(t),this}getW(e){let t=bd(this.array[e*this.itemSize+3]);return this.normalized&&(t=Mr(t,this.array)),t}setW(e,t){return this.normalized&&(t=Pt(t,this.array)),this.array[e*this.itemSize+3]=Sr(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Pt(t,this.array),i=Pt(i,this.array)),this.array[e+0]=Sr(t),this.array[e+1]=Sr(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Pt(t,this.array),i=Pt(i,this.array),r=Pt(r,this.array)),this.array[e+0]=Sr(t),this.array[e+1]=Sr(i),this.array[e+2]=Sr(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Pt(t,this.array),i=Pt(i,this.array),r=Pt(r,this.array),s=Pt(s,this.array)),this.array[e+0]=Sr(t),this.array[e+1]=Sr(i),this.array[e+2]=Sr(r),this.array[e+3]=Sr(s),this}}class et extends Wt{constructor(e,t,i){super(new Float32Array(e),t,i)}}class Q8 extends Wt{constructor(e,t,i){super(new Float64Array(e),t,i)}}let Z8=0;const us=new ht,pA=new Ht,bu=new F,Ur=new Qi,rd=new Qi,yi=new F;class Ct extends Po{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Z8++}),this.uuid=Wr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(DO(e)?TT:MT)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Lt().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return us.makeRotationFromQuaternion(e),this.applyMatrix4(us),this}rotateX(e){return us.makeRotationX(e),this.applyMatrix4(us),this}rotateY(e){return us.makeRotationY(e),this.applyMatrix4(us),this}rotateZ(e){return us.makeRotationZ(e),this.applyMatrix4(us),this}translate(e,t,i){return us.makeTranslation(e,t,i),this.applyMatrix4(us),this}scale(e,t,i){return us.makeScale(e,t,i),this.applyMatrix4(us),this}lookAt(e){return pA.lookAt(e),pA.updateMatrix(),this.applyMatrix4(pA.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(bu).negate(),this.translate(bu.x,bu.y,bu.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new et(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Qi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new F(-1/0,-1/0,-1/0),new F(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];Ur.setFromBufferAttribute(s),this.morphTargetsRelative?(yi.addVectors(this.boundingBox.min,Ur.min),this.boundingBox.expandByPoint(yi),yi.addVectors(this.boundingBox.max,Ur.max),this.boundingBox.expandByPoint(yi)):(this.boundingBox.expandByPoint(Ur.min),this.boundingBox.expandByPoint(Ur.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Bi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new F,1/0);return}if(e){const i=this.boundingSphere.center;if(Ur.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];rd.setFromBufferAttribute(a),this.morphTargetsRelative?(yi.addVectors(Ur.min,rd.min),Ur.expandByPoint(yi),yi.addVectors(Ur.max,rd.max),Ur.expandByPoint(yi)):(Ur.expandByPoint(rd.min),Ur.expandByPoint(rd.max))}Ur.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)yi.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(yi));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,h=a.count;c<h;c++)yi.fromBufferAttribute(a,c),l&&(bu.fromBufferAttribute(e,c),yi.add(bu)),r=Math.max(r,i.distanceToSquared(yi))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Wt(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],h=[];for(let I=0;I<a;I++)c[I]=new F,h[I]=new F;const d=new F,p=new F,m=new F,y=new me,x=new me,_=new me,g=new F,A=new F;function S(I,U,K){d.fromArray(r,I*3),p.fromArray(r,U*3),m.fromArray(r,K*3),y.fromArray(o,I*2),x.fromArray(o,U*2),_.fromArray(o,K*2),p.sub(d),m.sub(d),x.sub(y),_.sub(y);const re=1/(x.x*_.y-_.x*x.y);isFinite(re)&&(g.copy(p).multiplyScalar(_.y).addScaledVector(m,-x.y).multiplyScalar(re),A.copy(m).multiplyScalar(x.x).addScaledVector(p,-_.x).multiplyScalar(re),c[I].add(g),c[U].add(g),c[K].add(g),h[I].add(A),h[U].add(A),h[K].add(A))}let w=this.groups;w.length===0&&(w=[{start:0,count:i.length}]);for(let I=0,U=w.length;I<U;++I){const K=w[I],re=K.start,G=K.count;for(let $=re,Q=re+G;$<Q;$+=3)S(i[$+0],i[$+1],i[$+2])}const R=new F,T=new F,P=new F,B=new F;function b(I){P.fromArray(s,I*3),B.copy(P);const U=c[I];R.copy(U),R.sub(P.multiplyScalar(P.dot(U))).normalize(),T.crossVectors(B,U);const re=T.dot(h[I])<0?-1:1;l[I*4]=R.x,l[I*4+1]=R.y,l[I*4+2]=R.z,l[I*4+3]=re}for(let I=0,U=w.length;I<U;++I){const K=w[I],re=K.start,G=K.count;for(let $=re,Q=re+G;$<Q;$+=3)b(i[$+0]),b(i[$+1]),b(i[$+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Wt(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let p=0,m=i.count;p<m;p++)i.setXYZ(p,0,0,0);const r=new F,s=new F,o=new F,a=new F,l=new F,c=new F,h=new F,d=new F;if(e)for(let p=0,m=e.count;p<m;p+=3){const y=e.getX(p+0),x=e.getX(p+1),_=e.getX(p+2);r.fromBufferAttribute(t,y),s.fromBufferAttribute(t,x),o.fromBufferAttribute(t,_),h.subVectors(o,s),d.subVectors(r,s),h.cross(d),a.fromBufferAttribute(i,y),l.fromBufferAttribute(i,x),c.fromBufferAttribute(i,_),a.add(h),l.add(h),c.add(h),i.setXYZ(y,a.x,a.y,a.z),i.setXYZ(x,l.x,l.y,l.z),i.setXYZ(_,c.x,c.y,c.z)}else for(let p=0,m=t.count;p<m;p+=3)r.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),h.subVectors(o,s),d.subVectors(r,s),h.cross(d),i.setXYZ(p+0,h.x,h.y,h.z),i.setXYZ(p+1,h.x,h.y,h.z),i.setXYZ(p+2,h.x,h.y,h.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)yi.fromBufferAttribute(e,t),yi.normalize(),e.setXYZ(t,yi.x,yi.y,yi.z)}toNonIndexed(){function e(a,l){const c=a.array,h=a.itemSize,d=a.normalized,p=new c.constructor(l.length*h);let m=0,y=0;for(let x=0,_=l.length;x<_;x++){a.isInterleavedBufferAttribute?m=l[x]*a.data.stride+a.offset:m=l[x]*h;for(let g=0;g<h;g++)p[y++]=c[m++]}return new Wt(p,h,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Ct,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],c=e(l,i);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let h=0,d=c.length;h<d;h++){const p=c[h],m=e(p,i);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],h=[];for(let d=0,p=c.length;d<p;d++){const m=c[d];h.push(m.toJSON(e.data))}h.length>0&&(r[l]=h,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r){const h=r[c];this.setAttribute(c,h.clone(t))}const s=e.morphAttributes;for(const c in s){const h=[],d=s[c];for(let p=0,m=d.length;p<m;p++)h.push(d[p].clone(t));this.morphAttributes[c]=h}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,h=o.length;c<h;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const JP=new ht,Vl=new $c,d0=new Bi,KP=new F,Pu=new F,Iu=new F,Du=new F,mA=new F,p0=new F,m0=new me,g0=new me,y0=new me,$P=new F,YP=new F,qP=new F,v0=new F,_0=new F;class ti extends Ht{constructor(e=new Ct,t=new Gr){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){p0.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const h=a[l],d=s[l];h!==0&&(mA.fromBufferAttribute(d,e),o?p0.addScaledVector(mA,h):p0.addScaledVector(mA.sub(t),h))}t.add(p0)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),d0.copy(i.boundingSphere),d0.applyMatrix4(s),Vl.copy(e.ray).recast(e.near),!(d0.containsPoint(Vl.origin)===!1&&(Vl.intersectSphere(d0,KP)===null||Vl.origin.distanceToSquared(KP)>(e.far-e.near)**2))&&(JP.copy(s).invert(),Vl.copy(e.ray).applyMatrix4(JP),!(i.boundingBox!==null&&Vl.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Vl)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,h=s.attributes.uv1,d=s.attributes.normal,p=s.groups,m=s.drawRange;if(a!==null)if(Array.isArray(o))for(let y=0,x=p.length;y<x;y++){const _=p[y],g=o[_.materialIndex],A=Math.max(_.start,m.start),S=Math.min(a.count,Math.min(_.start+_.count,m.start+m.count));for(let w=A,R=S;w<R;w+=3){const T=a.getX(w),P=a.getX(w+1),B=a.getX(w+2);r=x0(this,g,e,i,c,h,d,T,P,B),r&&(r.faceIndex=Math.floor(w/3),r.face.materialIndex=_.materialIndex,t.push(r))}}else{const y=Math.max(0,m.start),x=Math.min(a.count,m.start+m.count);for(let _=y,g=x;_<g;_+=3){const A=a.getX(_),S=a.getX(_+1),w=a.getX(_+2);r=x0(this,o,e,i,c,h,d,A,S,w),r&&(r.faceIndex=Math.floor(_/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let y=0,x=p.length;y<x;y++){const _=p[y],g=o[_.materialIndex],A=Math.max(_.start,m.start),S=Math.min(l.count,Math.min(_.start+_.count,m.start+m.count));for(let w=A,R=S;w<R;w+=3){const T=w,P=w+1,B=w+2;r=x0(this,g,e,i,c,h,d,T,P,B),r&&(r.faceIndex=Math.floor(w/3),r.face.materialIndex=_.materialIndex,t.push(r))}}else{const y=Math.max(0,m.start),x=Math.min(l.count,m.start+m.count);for(let _=y,g=x;_<g;_+=3){const A=_,S=_+1,w=_+2;r=x0(this,o,e,i,c,h,d,A,S,w),r&&(r.faceIndex=Math.floor(_/3),t.push(r))}}}}function eW(n,e,t,i,r,s,o,a){let l;if(e.side===gr?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===Eo,a),l===null)return null;_0.copy(a),_0.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(_0);return c<t.near||c>t.far?null:{distance:c,point:_0.clone(),object:n}}function x0(n,e,t,i,r,s,o,a,l,c){n.getVertexPosition(a,Pu),n.getVertexPosition(l,Iu),n.getVertexPosition(c,Du);const h=eW(n,e,t,i,Pu,Iu,Du,v0);if(h){r&&(m0.fromBufferAttribute(r,a),g0.fromBufferAttribute(r,l),y0.fromBufferAttribute(r,c),h.uv=wr.getInterpolation(v0,Pu,Iu,Du,m0,g0,y0,new me)),s&&(m0.fromBufferAttribute(s,a),g0.fromBufferAttribute(s,l),y0.fromBufferAttribute(s,c),h.uv1=wr.getInterpolation(v0,Pu,Iu,Du,m0,g0,y0,new me),h.uv2=h.uv1),o&&($P.fromBufferAttribute(o,a),YP.fromBufferAttribute(o,l),qP.fromBufferAttribute(o,c),h.normal=wr.getInterpolation(v0,Pu,Iu,Du,$P,YP,qP,new F),h.normal.dot(i.direction)>0&&h.normal.multiplyScalar(-1));const d={a,b:l,c,normal:new F,materialIndex:0};wr.getNormal(Pu,Iu,Du,d.normal),h.face=d}return h}class Yc extends Ct{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],h=[],d=[];let p=0,m=0;y("z","y","x",-1,-1,i,t,e,o,s,0),y("z","y","x",1,-1,i,t,-e,o,s,1),y("x","z","y",1,1,e,i,t,r,o,2),y("x","z","y",1,-1,e,i,-t,r,o,3),y("x","y","z",1,-1,e,t,i,r,s,4),y("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new et(c,3)),this.setAttribute("normal",new et(h,3)),this.setAttribute("uv",new et(d,2));function y(x,_,g,A,S,w,R,T,P,B,b){const I=w/P,U=R/B,K=w/2,re=R/2,G=T/2,$=P+1,Q=B+1;let se=0,L=0;const k=new F;for(let z=0;z<Q;z++){const j=z*U-re;for(let te=0;te<$;te++){const Z=te*I-K;k[x]=Z*A,k[_]=j*S,k[g]=G,c.push(k.x,k.y,k.z),k[x]=0,k[_]=0,k[g]=T>0?1:-1,h.push(k.x,k.y,k.z),d.push(te/P),d.push(1-z/B),se+=1}}for(let z=0;z<B;z++)for(let j=0;j<P;j++){const te=p+j+$*z,Z=p+j+$*(z+1),ce=p+(j+1)+$*(z+1),Se=p+(j+1)+$*z;l.push(te,Z,Se),l.push(Z,ce,Se),L+=6}a.addGroup(m,L,b),m+=L,p+=se}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Yc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Kh(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function lr(n){const e={};for(let t=0;t<n.length;t++){const i=Kh(n[t]);for(const r in i)e[r]=i[r]}return e}function tW(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function FO(n){return n.getRenderTarget()===null?n.outputColorSpace:nn.workingColorSpace}const OO={clone:Kh,merge:lr};var nW=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,iW=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class To extends ni{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=nW,this.fragmentShader=iW,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Kh(e.uniforms),this.uniformsGroups=tW(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class um extends Ht{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ht,this.projectionMatrix=new ht,this.projectionMatrixInverse=new ht,this.coordinateSystem=Os}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class mn extends um{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Jh*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Tc*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Jh*2*Math.atan(Math.tan(Tc*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Tc*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Lu=-90,Bu=1;class CT extends Ht{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new mn(Lu,Bu,e,t);r.layers=this.layers,this.add(r);const s=new mn(Lu,Bu,e,t);s.layers=this.layers,this.add(s);const o=new mn(Lu,Bu,e,t);o.layers=this.layers,this.add(o);const a=new mn(Lu,Bu,e,t);a.layers=this.layers,this.add(a);const l=new mn(Lu,Bu,e,t);l.layers=this.layers,this.add(l);const c=new mn(Lu,Bu,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===Os)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Xh)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,h]=this.children,d=e.getRenderTarget(),p=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),y=e.xr.enabled;e.xr.enabled=!1;const x=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,c),i.texture.generateMipmaps=x,e.setRenderTarget(i,5,r),e.render(t,h),e.setRenderTarget(d,p,m),e.xr.enabled=y,i.texture.needsPMREMUpdate=!0}}class hm extends Sn{constructor(e,t,i,r,s,o,a,l,c,h){e=e!==void 0?e:[],t=t!==void 0?t:ca,super(e,t,i,r,s,o,a,l,c,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class RT extends Gs{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];t.encoding!==void 0&&(Xd("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===nl?oi:Vr),this.texture=new hm(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Tn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Yc(5,5,5),s=new To({name:"CubemapFromEquirect",uniforms:Kh(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:gr,blending:na});s.uniforms.tEquirect.value=t;const o=new ti(r,s),a=t.minFilter;return t.minFilter===wo&&(t.minFilter=Tn),new CT(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const gA=new F,rW=new F,sW=new Lt;class Xo{constructor(e=new F(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=gA.subVectors(i,t).cross(rW.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(gA),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||sW.getNormalMatrix(e),r=this.coplanarPoint(gA).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const zl=new Bi,A0=new F;class fm{constructor(e=new Xo,t=new Xo,i=new Xo,r=new Xo,s=new Xo,o=new Xo){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Os){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],h=r[5],d=r[6],p=r[7],m=r[8],y=r[9],x=r[10],_=r[11],g=r[12],A=r[13],S=r[14],w=r[15];if(i[0].setComponents(l-s,p-c,_-m,w-g).normalize(),i[1].setComponents(l+s,p+c,_+m,w+g).normalize(),i[2].setComponents(l+o,p+h,_+y,w+A).normalize(),i[3].setComponents(l-o,p-h,_-y,w-A).normalize(),i[4].setComponents(l-a,p-d,_-x,w-S).normalize(),t===Os)i[5].setComponents(l+a,p+d,_+x,w+S).normalize();else if(t===Xh)i[5].setComponents(a,d,x,S).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),zl.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),zl.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(zl)}intersectsSprite(e){return zl.center.set(0,0,0),zl.radius=.7071067811865476,zl.applyMatrix4(e.matrixWorld),this.intersectsSphere(zl)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(A0.x=r.normal.x>0?e.max.x:e.min.x,A0.y=r.normal.y>0?e.max.y:e.min.y,A0.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(A0)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function UO(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function oW(n,e){const t=e.isWebGL2,i=new WeakMap;function r(c,h){const d=c.array,p=c.usage,m=d.byteLength,y=n.createBuffer();n.bindBuffer(h,y),n.bufferData(h,d,p),c.onUploadCallback();let x;if(d instanceof Float32Array)x=n.FLOAT;else if(d instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(t)x=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else x=n.UNSIGNED_SHORT;else if(d instanceof Int16Array)x=n.SHORT;else if(d instanceof Uint32Array)x=n.UNSIGNED_INT;else if(d instanceof Int32Array)x=n.INT;else if(d instanceof Int8Array)x=n.BYTE;else if(d instanceof Uint8Array)x=n.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)x=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:y,type:x,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version,size:m}}function s(c,h,d){const p=h.array,m=h._updateRange,y=h.updateRanges;if(n.bindBuffer(d,c),m.count===-1&&y.length===0&&n.bufferSubData(d,0,p),y.length!==0){for(let x=0,_=y.length;x<_;x++){const g=y[x];t?n.bufferSubData(d,g.start*p.BYTES_PER_ELEMENT,p,g.start,g.count):n.bufferSubData(d,g.start*p.BYTES_PER_ELEMENT,p.subarray(g.start,g.start+g.count))}h.clearUpdateRanges()}m.count!==-1&&(t?n.bufferSubData(d,m.offset*p.BYTES_PER_ELEMENT,p,m.offset,m.count):n.bufferSubData(d,m.offset*p.BYTES_PER_ELEMENT,p.subarray(m.offset,m.offset+m.count)),m.count=-1),h.onUploadCallback()}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const h=i.get(c);h&&(n.deleteBuffer(h.buffer),i.delete(c))}function l(c,h){if(c.isGLBufferAttribute){const p=i.get(c);(!p||p.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const d=i.get(c);if(d===void 0)i.set(c,r(c,h));else if(d.version<c.version){if(d.size!==c.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");s(d.buffer,c,h),d.version=c.version}}return{get:o,remove:a,update:l}}class dm extends Ct{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,h=l+1,d=e/a,p=t/l,m=[],y=[],x=[],_=[];for(let g=0;g<h;g++){const A=g*p-o;for(let S=0;S<c;S++){const w=S*d-s;y.push(w,-A,0),x.push(0,0,1),_.push(S/a),_.push(1-g/l)}}for(let g=0;g<l;g++)for(let A=0;A<a;A++){const S=A+c*g,w=A+c*(g+1),R=A+1+c*(g+1),T=A+1+c*g;m.push(S,w,T),m.push(w,R,T)}this.setIndex(m),this.setAttribute("position",new et(y,3)),this.setAttribute("normal",new et(x,3)),this.setAttribute("uv",new et(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dm(e.width,e.height,e.widthSegments,e.heightSegments)}}var aW=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,lW=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,cW=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,uW=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,hW=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,fW=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,dW=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,pW=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,mW=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,gW=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,yW=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,vW=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,_W=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,xW=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,AW=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,SW=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,EW=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,wW=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,MW=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,TW=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,CW=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,RW=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,bW=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,PW=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,IW=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,DW=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,LW=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,BW=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,NW=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,FW=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,OW="gl_FragColor = linearToOutputTexel( gl_FragColor );",UW=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,kW=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,VW=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,zW=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,GW=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,HW=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,WW=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,jW=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,XW=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,JW=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,KW=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,$W=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,YW=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,qW=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,QW=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,ZW=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,ej=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,tj=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,nj=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,ij=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,rj=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,sj=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,oj=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,aj=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lj=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,cj=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,uj=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,hj=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,fj=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,dj=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,pj=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,mj=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,gj=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,yj=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,vj=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,_j=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,xj=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Aj=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,Sj=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Ej=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,wj=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Mj=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Tj=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Cj=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Rj=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,bj=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Pj=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Ij=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Dj=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Lj=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Bj=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Nj=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Fj=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Oj=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Uj=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,kj=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Vj=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,zj=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Gj=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Hj=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Wj=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,jj=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Xj=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Jj=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Kj=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,$j=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Yj=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,qj=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Qj=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Zj=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color *= toneMappingExposure;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	return color;
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,e7=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,t7=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,n7=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,i7=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,r7=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,s7=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const o7=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,a7=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,l7=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,c7=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,u7=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,h7=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,f7=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,d7=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,p7=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,m7=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,g7=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,y7=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,v7=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,_7=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,x7=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,A7=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,S7=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,E7=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,w7=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,M7=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,T7=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,C7=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,R7=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,b7=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,P7=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,I7=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,D7=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,L7=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,B7=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,N7=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,F7=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,O7=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,U7=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,k7=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,bt={alphahash_fragment:aW,alphahash_pars_fragment:lW,alphamap_fragment:cW,alphamap_pars_fragment:uW,alphatest_fragment:hW,alphatest_pars_fragment:fW,aomap_fragment:dW,aomap_pars_fragment:pW,batching_pars_vertex:mW,batching_vertex:gW,begin_vertex:yW,beginnormal_vertex:vW,bsdfs:_W,iridescence_fragment:xW,bumpmap_pars_fragment:AW,clipping_planes_fragment:SW,clipping_planes_pars_fragment:EW,clipping_planes_pars_vertex:wW,clipping_planes_vertex:MW,color_fragment:TW,color_pars_fragment:CW,color_pars_vertex:RW,color_vertex:bW,common:PW,cube_uv_reflection_fragment:IW,defaultnormal_vertex:DW,displacementmap_pars_vertex:LW,displacementmap_vertex:BW,emissivemap_fragment:NW,emissivemap_pars_fragment:FW,colorspace_fragment:OW,colorspace_pars_fragment:UW,envmap_fragment:kW,envmap_common_pars_fragment:VW,envmap_pars_fragment:zW,envmap_pars_vertex:GW,envmap_physical_pars_fragment:ej,envmap_vertex:HW,fog_vertex:WW,fog_pars_vertex:jW,fog_fragment:XW,fog_pars_fragment:JW,gradientmap_pars_fragment:KW,lightmap_fragment:$W,lightmap_pars_fragment:YW,lights_lambert_fragment:qW,lights_lambert_pars_fragment:QW,lights_pars_begin:ZW,lights_toon_fragment:tj,lights_toon_pars_fragment:nj,lights_phong_fragment:ij,lights_phong_pars_fragment:rj,lights_physical_fragment:sj,lights_physical_pars_fragment:oj,lights_fragment_begin:aj,lights_fragment_maps:lj,lights_fragment_end:cj,logdepthbuf_fragment:uj,logdepthbuf_pars_fragment:hj,logdepthbuf_pars_vertex:fj,logdepthbuf_vertex:dj,map_fragment:pj,map_pars_fragment:mj,map_particle_fragment:gj,map_particle_pars_fragment:yj,metalnessmap_fragment:vj,metalnessmap_pars_fragment:_j,morphcolor_vertex:xj,morphnormal_vertex:Aj,morphtarget_pars_vertex:Sj,morphtarget_vertex:Ej,normal_fragment_begin:wj,normal_fragment_maps:Mj,normal_pars_fragment:Tj,normal_pars_vertex:Cj,normal_vertex:Rj,normalmap_pars_fragment:bj,clearcoat_normal_fragment_begin:Pj,clearcoat_normal_fragment_maps:Ij,clearcoat_pars_fragment:Dj,iridescence_pars_fragment:Lj,opaque_fragment:Bj,packing:Nj,premultiplied_alpha_fragment:Fj,project_vertex:Oj,dithering_fragment:Uj,dithering_pars_fragment:kj,roughnessmap_fragment:Vj,roughnessmap_pars_fragment:zj,shadowmap_pars_fragment:Gj,shadowmap_pars_vertex:Hj,shadowmap_vertex:Wj,shadowmask_pars_fragment:jj,skinbase_vertex:Xj,skinning_pars_vertex:Jj,skinning_vertex:Kj,skinnormal_vertex:$j,specularmap_fragment:Yj,specularmap_pars_fragment:qj,tonemapping_fragment:Qj,tonemapping_pars_fragment:Zj,transmission_fragment:e7,transmission_pars_fragment:t7,uv_pars_fragment:n7,uv_pars_vertex:i7,uv_vertex:r7,worldpos_vertex:s7,background_vert:o7,background_frag:a7,backgroundCube_vert:l7,backgroundCube_frag:c7,cube_vert:u7,cube_frag:h7,depth_vert:f7,depth_frag:d7,distanceRGBA_vert:p7,distanceRGBA_frag:m7,equirect_vert:g7,equirect_frag:y7,linedashed_vert:v7,linedashed_frag:_7,meshbasic_vert:x7,meshbasic_frag:A7,meshlambert_vert:S7,meshlambert_frag:E7,meshmatcap_vert:w7,meshmatcap_frag:M7,meshnormal_vert:T7,meshnormal_frag:C7,meshphong_vert:R7,meshphong_frag:b7,meshphysical_vert:P7,meshphysical_frag:I7,meshtoon_vert:D7,meshtoon_frag:L7,points_vert:B7,points_frag:N7,shadow_vert:F7,shadow_frag:O7,sprite_vert:U7,sprite_frag:k7},Be={common:{diffuse:{value:new ke(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Lt},alphaMap:{value:null},alphaMapTransform:{value:new Lt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Lt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Lt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Lt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Lt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Lt},normalScale:{value:new me(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Lt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Lt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Lt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Lt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ke(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ke(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Lt},alphaTest:{value:0},uvTransform:{value:new Lt}},sprite:{diffuse:{value:new ke(16777215)},opacity:{value:1},center:{value:new me(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Lt},alphaMap:{value:null},alphaMapTransform:{value:new Lt},alphaTest:{value:0}}},Ns={basic:{uniforms:lr([Be.common,Be.specularmap,Be.envmap,Be.aomap,Be.lightmap,Be.fog]),vertexShader:bt.meshbasic_vert,fragmentShader:bt.meshbasic_frag},lambert:{uniforms:lr([Be.common,Be.specularmap,Be.envmap,Be.aomap,Be.lightmap,Be.emissivemap,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.fog,Be.lights,{emissive:{value:new ke(0)}}]),vertexShader:bt.meshlambert_vert,fragmentShader:bt.meshlambert_frag},phong:{uniforms:lr([Be.common,Be.specularmap,Be.envmap,Be.aomap,Be.lightmap,Be.emissivemap,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.fog,Be.lights,{emissive:{value:new ke(0)},specular:{value:new ke(1118481)},shininess:{value:30}}]),vertexShader:bt.meshphong_vert,fragmentShader:bt.meshphong_frag},standard:{uniforms:lr([Be.common,Be.envmap,Be.aomap,Be.lightmap,Be.emissivemap,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.roughnessmap,Be.metalnessmap,Be.fog,Be.lights,{emissive:{value:new ke(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:bt.meshphysical_vert,fragmentShader:bt.meshphysical_frag},toon:{uniforms:lr([Be.common,Be.aomap,Be.lightmap,Be.emissivemap,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.gradientmap,Be.fog,Be.lights,{emissive:{value:new ke(0)}}]),vertexShader:bt.meshtoon_vert,fragmentShader:bt.meshtoon_frag},matcap:{uniforms:lr([Be.common,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.fog,{matcap:{value:null}}]),vertexShader:bt.meshmatcap_vert,fragmentShader:bt.meshmatcap_frag},points:{uniforms:lr([Be.points,Be.fog]),vertexShader:bt.points_vert,fragmentShader:bt.points_frag},dashed:{uniforms:lr([Be.common,Be.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:bt.linedashed_vert,fragmentShader:bt.linedashed_frag},depth:{uniforms:lr([Be.common,Be.displacementmap]),vertexShader:bt.depth_vert,fragmentShader:bt.depth_frag},normal:{uniforms:lr([Be.common,Be.bumpmap,Be.normalmap,Be.displacementmap,{opacity:{value:1}}]),vertexShader:bt.meshnormal_vert,fragmentShader:bt.meshnormal_frag},sprite:{uniforms:lr([Be.sprite,Be.fog]),vertexShader:bt.sprite_vert,fragmentShader:bt.sprite_frag},background:{uniforms:{uvTransform:{value:new Lt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:bt.background_vert,fragmentShader:bt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:bt.backgroundCube_vert,fragmentShader:bt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:bt.cube_vert,fragmentShader:bt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:bt.equirect_vert,fragmentShader:bt.equirect_frag},distanceRGBA:{uniforms:lr([Be.common,Be.displacementmap,{referencePosition:{value:new F},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:bt.distanceRGBA_vert,fragmentShader:bt.distanceRGBA_frag},shadow:{uniforms:lr([Be.lights,Be.fog,{color:{value:new ke(0)},opacity:{value:1}}]),vertexShader:bt.shadow_vert,fragmentShader:bt.shadow_frag}};Ns.physical={uniforms:lr([Ns.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Lt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Lt},clearcoatNormalScale:{value:new me(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Lt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Lt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Lt},sheen:{value:0},sheenColor:{value:new ke(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Lt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Lt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Lt},transmissionSamplerSize:{value:new me},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Lt},attenuationDistance:{value:0},attenuationColor:{value:new ke(0)},specularColor:{value:new ke(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Lt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Lt},anisotropyVector:{value:new me},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Lt}}]),vertexShader:bt.meshphysical_vert,fragmentShader:bt.meshphysical_frag};const S0={r:0,b:0,g:0};function V7(n,e,t,i,r,s,o){const a=new ke(0);let l=s===!0?0:1,c,h,d=null,p=0,m=null;function y(_,g){let A=!1,S=g.isScene===!0?g.background:null;S&&S.isTexture&&(S=(g.backgroundBlurriness>0?t:e).get(S)),S===null?x(a,l):S&&S.isColor&&(x(S,1),A=!0);const w=n.xr.getEnvironmentBlendMode();w==="additive"?i.buffers.color.setClear(0,0,0,1,o):w==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||A)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),S&&(S.isCubeTexture||S.mapping===mf)?(h===void 0&&(h=new ti(new Yc(1,1,1),new To({name:"BackgroundCubeMaterial",uniforms:Kh(Ns.backgroundCube.uniforms),vertexShader:Ns.backgroundCube.vertexShader,fragmentShader:Ns.backgroundCube.fragmentShader,side:gr,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(R,T,P){this.matrixWorld.copyPosition(P.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(h)),h.material.uniforms.envMap.value=S,h.material.uniforms.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,h.material.toneMapped=nn.getTransfer(S.colorSpace)!==cn,(d!==S||p!==S.version||m!==n.toneMapping)&&(h.material.needsUpdate=!0,d=S,p=S.version,m=n.toneMapping),h.layers.enableAll(),_.unshift(h,h.geometry,h.material,0,0,null)):S&&S.isTexture&&(c===void 0&&(c=new ti(new dm(2,2),new To({name:"BackgroundMaterial",uniforms:Kh(Ns.background.uniforms),vertexShader:Ns.background.vertexShader,fragmentShader:Ns.background.fragmentShader,side:Eo,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=S,c.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,c.material.toneMapped=nn.getTransfer(S.colorSpace)!==cn,S.matrixAutoUpdate===!0&&S.updateMatrix(),c.material.uniforms.uvTransform.value.copy(S.matrix),(d!==S||p!==S.version||m!==n.toneMapping)&&(c.material.needsUpdate=!0,d=S,p=S.version,m=n.toneMapping),c.layers.enableAll(),_.unshift(c,c.geometry,c.material,0,0,null))}function x(_,g){_.getRGB(S0,FO(n)),i.buffers.color.setClear(S0.r,S0.g,S0.b,g,o)}return{getClearColor:function(){return a},setClearColor:function(_,g=1){a.set(_),l=g,x(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(_){l=_,x(a,l)},render:y}}function z7(n,e,t,i){const r=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,a={},l=_(null);let c=l,h=!1;function d(G,$,Q,se,L){let k=!1;if(o){const z=x(se,Q,$);c!==z&&(c=z,m(c.object)),k=g(G,se,Q,L),k&&A(G,se,Q,L)}else{const z=$.wireframe===!0;(c.geometry!==se.id||c.program!==Q.id||c.wireframe!==z)&&(c.geometry=se.id,c.program=Q.id,c.wireframe=z,k=!0)}L!==null&&t.update(L,n.ELEMENT_ARRAY_BUFFER),(k||h)&&(h=!1,B(G,$,Q,se),L!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(L).buffer))}function p(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function m(G){return i.isWebGL2?n.bindVertexArray(G):s.bindVertexArrayOES(G)}function y(G){return i.isWebGL2?n.deleteVertexArray(G):s.deleteVertexArrayOES(G)}function x(G,$,Q){const se=Q.wireframe===!0;let L=a[G.id];L===void 0&&(L={},a[G.id]=L);let k=L[$.id];k===void 0&&(k={},L[$.id]=k);let z=k[se];return z===void 0&&(z=_(p()),k[se]=z),z}function _(G){const $=[],Q=[],se=[];for(let L=0;L<r;L++)$[L]=0,Q[L]=0,se[L]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:$,enabledAttributes:Q,attributeDivisors:se,object:G,attributes:{},index:null}}function g(G,$,Q,se){const L=c.attributes,k=$.attributes;let z=0;const j=Q.getAttributes();for(const te in j)if(j[te].location>=0){const ce=L[te];let Se=k[te];if(Se===void 0&&(te==="instanceMatrix"&&G.instanceMatrix&&(Se=G.instanceMatrix),te==="instanceColor"&&G.instanceColor&&(Se=G.instanceColor)),ce===void 0||ce.attribute!==Se||Se&&ce.data!==Se.data)return!0;z++}return c.attributesNum!==z||c.index!==se}function A(G,$,Q,se){const L={},k=$.attributes;let z=0;const j=Q.getAttributes();for(const te in j)if(j[te].location>=0){let ce=k[te];ce===void 0&&(te==="instanceMatrix"&&G.instanceMatrix&&(ce=G.instanceMatrix),te==="instanceColor"&&G.instanceColor&&(ce=G.instanceColor));const Se={};Se.attribute=ce,ce&&ce.data&&(Se.data=ce.data),L[te]=Se,z++}c.attributes=L,c.attributesNum=z,c.index=se}function S(){const G=c.newAttributes;for(let $=0,Q=G.length;$<Q;$++)G[$]=0}function w(G){R(G,0)}function R(G,$){const Q=c.newAttributes,se=c.enabledAttributes,L=c.attributeDivisors;Q[G]=1,se[G]===0&&(n.enableVertexAttribArray(G),se[G]=1),L[G]!==$&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](G,$),L[G]=$)}function T(){const G=c.newAttributes,$=c.enabledAttributes;for(let Q=0,se=$.length;Q<se;Q++)$[Q]!==G[Q]&&(n.disableVertexAttribArray(Q),$[Q]=0)}function P(G,$,Q,se,L,k,z){z===!0?n.vertexAttribIPointer(G,$,Q,L,k):n.vertexAttribPointer(G,$,Q,se,L,k)}function B(G,$,Q,se){if(i.isWebGL2===!1&&(G.isInstancedMesh||se.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;S();const L=se.attributes,k=Q.getAttributes(),z=$.defaultAttributeValues;for(const j in k){const te=k[j];if(te.location>=0){let Z=L[j];if(Z===void 0&&(j==="instanceMatrix"&&G.instanceMatrix&&(Z=G.instanceMatrix),j==="instanceColor"&&G.instanceColor&&(Z=G.instanceColor)),Z!==void 0){const ce=Z.normalized,Se=Z.itemSize,Te=t.get(Z);if(Te===void 0)continue;const be=Te.buffer,tt=Te.type,ot=Te.bytesPerElement,De=i.isWebGL2===!0&&(tt===n.INT||tt===n.UNSIGNED_INT||Z.gpuType===hT);if(Z.isInterleavedBufferAttribute){const Re=Z.data,H=Re.stride,ve=Z.offset;if(Re.isInstancedInterleavedBuffer){for(let de=0;de<te.locationSize;de++)R(te.location+de,Re.meshPerAttribute);G.isInstancedMesh!==!0&&se._maxInstanceCount===void 0&&(se._maxInstanceCount=Re.meshPerAttribute*Re.count)}else for(let de=0;de<te.locationSize;de++)w(te.location+de);n.bindBuffer(n.ARRAY_BUFFER,be);for(let de=0;de<te.locationSize;de++)P(te.location+de,Se/te.locationSize,tt,ce,H*ot,(ve+Se/te.locationSize*de)*ot,De)}else{if(Z.isInstancedBufferAttribute){for(let Re=0;Re<te.locationSize;Re++)R(te.location+Re,Z.meshPerAttribute);G.isInstancedMesh!==!0&&se._maxInstanceCount===void 0&&(se._maxInstanceCount=Z.meshPerAttribute*Z.count)}else for(let Re=0;Re<te.locationSize;Re++)w(te.location+Re);n.bindBuffer(n.ARRAY_BUFFER,be);for(let Re=0;Re<te.locationSize;Re++)P(te.location+Re,Se/te.locationSize,tt,ce,Se*ot,Se/te.locationSize*Re*ot,De)}}else if(z!==void 0){const ce=z[j];if(ce!==void 0)switch(ce.length){case 2:n.vertexAttrib2fv(te.location,ce);break;case 3:n.vertexAttrib3fv(te.location,ce);break;case 4:n.vertexAttrib4fv(te.location,ce);break;default:n.vertexAttrib1fv(te.location,ce)}}}}T()}function b(){K();for(const G in a){const $=a[G];for(const Q in $){const se=$[Q];for(const L in se)y(se[L].object),delete se[L];delete $[Q]}delete a[G]}}function I(G){if(a[G.id]===void 0)return;const $=a[G.id];for(const Q in $){const se=$[Q];for(const L in se)y(se[L].object),delete se[L];delete $[Q]}delete a[G.id]}function U(G){for(const $ in a){const Q=a[$];if(Q[G.id]===void 0)continue;const se=Q[G.id];for(const L in se)y(se[L].object),delete se[L];delete Q[G.id]}}function K(){re(),h=!0,c!==l&&(c=l,m(c.object))}function re(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:K,resetDefaultState:re,dispose:b,releaseStatesOfGeometry:I,releaseStatesOfProgram:U,initAttributes:S,enableAttribute:w,disableUnusedAttributes:T}}function G7(n,e,t,i){const r=i.isWebGL2;let s;function o(h){s=h}function a(h,d){n.drawArrays(s,h,d),t.update(d,s,1)}function l(h,d,p){if(p===0)return;let m,y;if(r)m=n,y="drawArraysInstanced";else if(m=e.get("ANGLE_instanced_arrays"),y="drawArraysInstancedANGLE",m===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[y](s,h,d,p),t.update(d,s,p)}function c(h,d,p){if(p===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let y=0;y<p;y++)this.render(h[y],d[y]);else{m.multiDrawArraysWEBGL(s,h,0,d,0,p);let y=0;for(let x=0;x<p;x++)y+=d[x];t.update(y,s,1)}}this.setMode=o,this.render=a,this.renderInstances=l,this.renderMultiDraw=c}function H7(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const P=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(P){if(P==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";P="mediump"}return P==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),h=t.logarithmicDepthBuffer===!0,d=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),p=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_TEXTURE_SIZE),y=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),x=n.getParameter(n.MAX_VERTEX_ATTRIBS),_=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),g=n.getParameter(n.MAX_VARYING_VECTORS),A=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),S=p>0,w=o||e.has("OES_texture_float"),R=S&&w,T=o?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:r,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:h,maxTextures:d,maxVertexTextures:p,maxTextureSize:m,maxCubemapSize:y,maxAttributes:x,maxVertexUniforms:_,maxVaryings:g,maxFragmentUniforms:A,vertexTextures:S,floatFragmentTextures:w,floatVertexTextures:R,maxSamples:T}}function W7(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Xo,a=new Lt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,p){const m=d.length!==0||p||i!==0||r;return r=p,i=d.length,m},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,p){t=h(d,p,0)},this.setState=function(d,p,m){const y=d.clippingPlanes,x=d.clipIntersection,_=d.clipShadows,g=n.get(d);if(!r||y===null||y.length===0||s&&!_)s?h(null):c();else{const A=s?0:i,S=A*4;let w=g.clippingState||null;l.value=w,w=h(y,p,S,m);for(let R=0;R!==S;++R)w[R]=t[R];g.clippingState=w,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=A}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function h(d,p,m,y){const x=d!==null?d.length:0;let _=null;if(x!==0){if(_=l.value,y!==!0||_===null){const g=m+x*4,A=p.matrixWorldInverse;a.getNormalMatrix(A),(_===null||_.length<g)&&(_=new Float32Array(g));for(let S=0,w=m;S!==x;++S,w+=4)o.copy(d[S]).applyMatrix4(A,a),o.normal.toArray(_,w),_[w+3]=o.constant}l.value=_,l.needsUpdate=!0}return e.numPlanes=x,e.numIntersection=0,_}}function j7(n){let e=new WeakMap;function t(o,a){return a===wp?o.mapping=ca:a===Mp&&(o.mapping=cl),o}function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===wp||a===Mp)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new RT(l.height/2);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class As extends um{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=h*this.view.offsetY,l=a-h*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const ch=4,QP=[.125,.215,.35,.446,.526,.582],oc=20,yA=new As,ZP=new ke;let vA=null,_A=0,xA=0;const nc=(1+Math.sqrt(5))/2,Nu=1/nc,eI=[new F(1,1,1),new F(-1,1,1),new F(1,1,-1),new F(-1,1,-1),new F(0,nc,Nu),new F(0,nc,-Nu),new F(Nu,0,nc),new F(-Nu,0,nc),new F(nc,Nu,0),new F(-nc,Nu,0)];class rw{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){vA=this._renderer.getRenderTarget(),_A=this._renderer.getActiveCubeFace(),xA=this._renderer.getActiveMipmapLevel(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=iI(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=nI(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(vA,_A,xA),e.scissorTest=!1,E0(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===ca||e.mapping===cl?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),vA=this._renderer.getRenderTarget(),_A=this._renderer.getActiveCubeFace(),xA=this._renderer.getActiveMipmapLevel();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Tn,minFilter:Tn,generateMipmaps:!1,type:Wh,format:fr,colorSpace:Mo,depthBuffer:!1},r=tI(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=tI(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=X7(s)),this._blurMaterial=J7(s,e,t)}return r}_compileMaterial(e){const t=new ti(this._lodPlanes[0],e);this._renderer.compile(t,yA)}_sceneToCubeUV(e,t,i,r){const a=new mn(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],h=this._renderer,d=h.autoClear,p=h.toneMapping;h.getClearColor(ZP),h.toneMapping=yo,h.autoClear=!1;const m=new Gr({name:"PMREM.Background",side:gr,depthWrite:!1,depthTest:!1}),y=new ti(new Yc,m);let x=!1;const _=e.background;_?_.isColor&&(m.color.copy(_),e.background=null,x=!0):(m.color.copy(ZP),x=!0);for(let g=0;g<6;g++){const A=g%3;A===0?(a.up.set(0,l[g],0),a.lookAt(c[g],0,0)):A===1?(a.up.set(0,0,l[g]),a.lookAt(0,c[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,c[g]));const S=this._cubeSize;E0(r,A*S,g>2?S:0,S,S),h.setRenderTarget(r),x&&h.render(y,a),h.render(e,a)}y.geometry.dispose(),y.material.dispose(),h.toneMapping=p,h.autoClear=d,e.background=_}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===ca||e.mapping===cl;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=iI()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=nI());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new ti(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;E0(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,yA)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=eI[(r-1)%eI.length];this._blur(e,r-1,r,s,o)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,d=new ti(this._lodPlanes[r],c),p=c.uniforms,m=this._sizeLods[i]-1,y=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*oc-1),x=s/y,_=isFinite(s)?1+Math.floor(h*x):oc;_>oc&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${_} samples when the maximum is set to ${oc}`);const g=[];let A=0;for(let P=0;P<oc;++P){const B=P/x,b=Math.exp(-B*B/2);g.push(b),P===0?A+=b:P<_&&(A+=2*b)}for(let P=0;P<g.length;P++)g[P]=g[P]/A;p.envMap.value=e.texture,p.samples.value=_,p.weights.value=g,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:S}=this;p.dTheta.value=y,p.mipInt.value=S-i;const w=this._sizeLods[r],R=3*w*(r>S-ch?r-S+ch:0),T=4*(this._cubeSize-w);E0(t,R,T,3*w,2*w),l.setRenderTarget(t),l.render(d,yA)}}function X7(n){const e=[],t=[],i=[];let r=n;const s=n-ch+1+QP.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-ch?l=QP[o-n+ch-1]:o===0&&(l=0),i.push(l);const c=1/(a-2),h=-c,d=1+c,p=[h,h,d,h,d,d,h,h,d,d,h,d],m=6,y=6,x=3,_=2,g=1,A=new Float32Array(x*y*m),S=new Float32Array(_*y*m),w=new Float32Array(g*y*m);for(let T=0;T<m;T++){const P=T%3*2/3-1,B=T>2?0:-1,b=[P,B,0,P+2/3,B,0,P+2/3,B+1,0,P,B,0,P+2/3,B+1,0,P,B+1,0];A.set(b,x*y*T),S.set(p,_*y*T);const I=[T,T,T,T,T,T];w.set(I,g*y*T)}const R=new Ct;R.setAttribute("position",new Wt(A,x)),R.setAttribute("uv",new Wt(S,_)),R.setAttribute("faceIndex",new Wt(w,g)),e.push(R),r>ch&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function tI(n,e,t){const i=new Gs(n,e,t);return i.texture.mapping=mf,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function E0(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function J7(n,e,t){const i=new Float32Array(oc),r=new F(0,1,0);return new To({name:"SphericalGaussianBlur",defines:{n:oc,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:bT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:na,depthTest:!1,depthWrite:!1})}function nI(){return new To({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:bT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:na,depthTest:!1,depthWrite:!1})}function iI(){return new To({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:bT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:na,depthTest:!1,depthWrite:!1})}function bT(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function K7(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===wp||l===Mp,h=l===ca||l===cl;if(c||h)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let d=e.get(a);return t===null&&(t=new rw(n)),d=c?t.fromEquirectangular(a,d):t.fromCubemap(a,d),e.set(a,d),d.texture}else{if(e.has(a))return e.get(a).texture;{const d=a.image;if(c&&d&&d.height>0||h&&d&&r(d)){t===null&&(t=new rw(n));const p=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,p),a.addEventListener("dispose",s),p.texture}else return null}}}return a}function r(a){let l=0;const c=6;for(let h=0;h<c;h++)a[h]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function $7(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?(t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance")):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function Y7(n,e,t,i){const r={},s=new WeakMap;function o(d){const p=d.target;p.index!==null&&e.remove(p.index);for(const y in p.attributes)e.remove(p.attributes[y]);for(const y in p.morphAttributes){const x=p.morphAttributes[y];for(let _=0,g=x.length;_<g;_++)e.remove(x[_])}p.removeEventListener("dispose",o),delete r[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),i.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(d,p){return r[p.id]===!0||(p.addEventListener("dispose",o),r[p.id]=!0,t.memory.geometries++),p}function l(d){const p=d.attributes;for(const y in p)e.update(p[y],n.ARRAY_BUFFER);const m=d.morphAttributes;for(const y in m){const x=m[y];for(let _=0,g=x.length;_<g;_++)e.update(x[_],n.ARRAY_BUFFER)}}function c(d){const p=[],m=d.index,y=d.attributes.position;let x=0;if(m!==null){const A=m.array;x=m.version;for(let S=0,w=A.length;S<w;S+=3){const R=A[S+0],T=A[S+1],P=A[S+2];p.push(R,T,T,P,P,R)}}else if(y!==void 0){const A=y.array;x=y.version;for(let S=0,w=A.length/3-1;S<w;S+=3){const R=S+0,T=S+1,P=S+2;p.push(R,T,T,P,P,R)}}else return;const _=new(DO(p)?TT:MT)(p,1);_.version=x;const g=s.get(d);g&&e.remove(g),s.set(d,_)}function h(d){const p=s.get(d);if(p){const m=d.index;m!==null&&p.version<m.version&&c(d)}else c(d);return s.get(d)}return{get:a,update:l,getWireframeAttribute:h}}function q7(n,e,t,i){const r=i.isWebGL2;let s;function o(m){s=m}let a,l;function c(m){a=m.type,l=m.bytesPerElement}function h(m,y){n.drawElements(s,y,a,m*l),t.update(y,s,1)}function d(m,y,x){if(x===0)return;let _,g;if(r)_=n,g="drawElementsInstanced";else if(_=e.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",_===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}_[g](s,y,a,m*l,x),t.update(y,s,x)}function p(m,y,x){if(x===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let g=0;g<x;g++)this.render(m[g]/l,y[g]);else{_.multiDrawElementsWEBGL(s,y,0,a,m,0,x);let g=0;for(let A=0;A<x;A++)g+=y[A];t.update(g,s,1)}}this.setMode=o,this.setIndex=c,this.render=h,this.renderInstances=d,this.renderMultiDraw=p}function Q7(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function Z7(n,e){return n[0]-e[0]}function eX(n,e){return Math.abs(e[1])-Math.abs(n[1])}function tX(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new rn,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,h,d){const p=c.morphTargetInfluences;if(e.isWebGL2===!0){const y=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,x=y!==void 0?y.length:0;let _=s.get(h);if(_===void 0||_.count!==x){let $=function(){re.dispose(),s.delete(h),h.removeEventListener("dispose",$)};var m=$;_!==void 0&&_.texture.dispose();const S=h.morphAttributes.position!==void 0,w=h.morphAttributes.normal!==void 0,R=h.morphAttributes.color!==void 0,T=h.morphAttributes.position||[],P=h.morphAttributes.normal||[],B=h.morphAttributes.color||[];let b=0;S===!0&&(b=1),w===!0&&(b=2),R===!0&&(b=3);let I=h.attributes.position.count*b,U=1;I>e.maxTextureSize&&(U=Math.ceil(I/e.maxTextureSize),I=e.maxTextureSize);const K=new Float32Array(I*U*4*x),re=new g_(K,I,U,x);re.type=Fs,re.needsUpdate=!0;const G=b*4;for(let Q=0;Q<x;Q++){const se=T[Q],L=P[Q],k=B[Q],z=I*U*4*Q;for(let j=0;j<se.count;j++){const te=j*G;S===!0&&(o.fromBufferAttribute(se,j),K[z+te+0]=o.x,K[z+te+1]=o.y,K[z+te+2]=o.z,K[z+te+3]=0),w===!0&&(o.fromBufferAttribute(L,j),K[z+te+4]=o.x,K[z+te+5]=o.y,K[z+te+6]=o.z,K[z+te+7]=0),R===!0&&(o.fromBufferAttribute(k,j),K[z+te+8]=o.x,K[z+te+9]=o.y,K[z+te+10]=o.z,K[z+te+11]=k.itemSize===4?o.w:1)}}_={count:x,texture:re,size:new me(I,U)},s.set(h,_),h.addEventListener("dispose",$)}let g=0;for(let S=0;S<p.length;S++)g+=p[S];const A=h.morphTargetsRelative?1:1-g;d.getUniforms().setValue(n,"morphTargetBaseInfluence",A),d.getUniforms().setValue(n,"morphTargetInfluences",p),d.getUniforms().setValue(n,"morphTargetsTexture",_.texture,t),d.getUniforms().setValue(n,"morphTargetsTextureSize",_.size)}else{const y=p===void 0?0:p.length;let x=i[h.id];if(x===void 0||x.length!==y){x=[];for(let w=0;w<y;w++)x[w]=[w,0];i[h.id]=x}for(let w=0;w<y;w++){const R=x[w];R[0]=w,R[1]=p[w]}x.sort(eX);for(let w=0;w<8;w++)w<y&&x[w][1]?(a[w][0]=x[w][0],a[w][1]=x[w][1]):(a[w][0]=Number.MAX_SAFE_INTEGER,a[w][1]=0);a.sort(Z7);const _=h.morphAttributes.position,g=h.morphAttributes.normal;let A=0;for(let w=0;w<8;w++){const R=a[w],T=R[0],P=R[1];T!==Number.MAX_SAFE_INTEGER&&P?(_&&h.getAttribute("morphTarget"+w)!==_[T]&&h.setAttribute("morphTarget"+w,_[T]),g&&h.getAttribute("morphNormal"+w)!==g[T]&&h.setAttribute("morphNormal"+w,g[T]),r[w]=P,A+=P):(_&&h.hasAttribute("morphTarget"+w)===!0&&h.deleteAttribute("morphTarget"+w),g&&h.hasAttribute("morphNormal"+w)===!0&&h.deleteAttribute("morphNormal"+w),r[w]=0)}const S=h.morphTargetsRelative?1:1-A;d.getUniforms().setValue(n,"morphTargetBaseInfluence",S),d.getUniforms().setValue(n,"morphTargetInfluences",r)}}return{update:l}}function nX(n,e,t,i){let r=new WeakMap;function s(l){const c=i.render.frame,h=l.geometry,d=e.get(l,h);if(r.get(d)!==c&&(e.update(d),r.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const p=l.skeleton;r.get(p)!==c&&(p.update(),r.set(p,c))}return d}function o(){r=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}class PT extends Sn{constructor(e,t,i,r,s,o,a,l,c,h){if(h=h!==void 0?h:tl,h!==tl&&h!==Vc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&h===tl&&(i=Yo),i===void 0&&h===Vc&&(i=el),super(null,r,s,o,a,l,h,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Fn,this.minFilter=l!==void 0?l:Fn,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const kO=new Sn,VO=new PT(1,1);VO.compareFunction=AT;const zO=new g_,GO=new wT,HO=new hm,rI=[],sI=[],oI=new Float32Array(16),aI=new Float32Array(9),lI=new Float32Array(4);function gf(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=rI[r];if(s===void 0&&(s=new Float32Array(r),rI[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function ui(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function hi(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function y_(n,e){let t=sI[e];t===void 0&&(t=new Int32Array(e),sI[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function iX(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function rX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ui(t,e))return;n.uniform2fv(this.addr,e),hi(t,e)}}function sX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ui(t,e))return;n.uniform3fv(this.addr,e),hi(t,e)}}function oX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ui(t,e))return;n.uniform4fv(this.addr,e),hi(t,e)}}function aX(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ui(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),hi(t,e)}else{if(ui(t,i))return;lI.set(i),n.uniformMatrix2fv(this.addr,!1,lI),hi(t,i)}}function lX(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ui(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),hi(t,e)}else{if(ui(t,i))return;aI.set(i),n.uniformMatrix3fv(this.addr,!1,aI),hi(t,i)}}function cX(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ui(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),hi(t,e)}else{if(ui(t,i))return;oI.set(i),n.uniformMatrix4fv(this.addr,!1,oI),hi(t,i)}}function uX(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function hX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ui(t,e))return;n.uniform2iv(this.addr,e),hi(t,e)}}function fX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ui(t,e))return;n.uniform3iv(this.addr,e),hi(t,e)}}function dX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ui(t,e))return;n.uniform4iv(this.addr,e),hi(t,e)}}function pX(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function mX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ui(t,e))return;n.uniform2uiv(this.addr,e),hi(t,e)}}function gX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ui(t,e))return;n.uniform3uiv(this.addr,e),hi(t,e)}}function yX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ui(t,e))return;n.uniform4uiv(this.addr,e),hi(t,e)}}function vX(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);const s=this.type===n.SAMPLER_2D_SHADOW?VO:kO;t.setTexture2D(e||s,r)}function _X(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||GO,r)}function xX(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||HO,r)}function AX(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||zO,r)}function SX(n){switch(n){case 5126:return iX;case 35664:return rX;case 35665:return sX;case 35666:return oX;case 35674:return aX;case 35675:return lX;case 35676:return cX;case 5124:case 35670:return uX;case 35667:case 35671:return hX;case 35668:case 35672:return fX;case 35669:case 35673:return dX;case 5125:return pX;case 36294:return mX;case 36295:return gX;case 36296:return yX;case 35678:case 36198:case 36298:case 36306:case 35682:return vX;case 35679:case 36299:case 36307:return _X;case 35680:case 36300:case 36308:case 36293:return xX;case 36289:case 36303:case 36311:case 36292:return AX}}function EX(n,e){n.uniform1fv(this.addr,e)}function wX(n,e){const t=gf(e,this.size,2);n.uniform2fv(this.addr,t)}function MX(n,e){const t=gf(e,this.size,3);n.uniform3fv(this.addr,t)}function TX(n,e){const t=gf(e,this.size,4);n.uniform4fv(this.addr,t)}function CX(n,e){const t=gf(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function RX(n,e){const t=gf(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function bX(n,e){const t=gf(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function PX(n,e){n.uniform1iv(this.addr,e)}function IX(n,e){n.uniform2iv(this.addr,e)}function DX(n,e){n.uniform3iv(this.addr,e)}function LX(n,e){n.uniform4iv(this.addr,e)}function BX(n,e){n.uniform1uiv(this.addr,e)}function NX(n,e){n.uniform2uiv(this.addr,e)}function FX(n,e){n.uniform3uiv(this.addr,e)}function OX(n,e){n.uniform4uiv(this.addr,e)}function UX(n,e,t){const i=this.cache,r=e.length,s=y_(t,r);ui(i,s)||(n.uniform1iv(this.addr,s),hi(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||kO,s[o])}function kX(n,e,t){const i=this.cache,r=e.length,s=y_(t,r);ui(i,s)||(n.uniform1iv(this.addr,s),hi(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||GO,s[o])}function VX(n,e,t){const i=this.cache,r=e.length,s=y_(t,r);ui(i,s)||(n.uniform1iv(this.addr,s),hi(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||HO,s[o])}function zX(n,e,t){const i=this.cache,r=e.length,s=y_(t,r);ui(i,s)||(n.uniform1iv(this.addr,s),hi(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||zO,s[o])}function GX(n){switch(n){case 5126:return EX;case 35664:return wX;case 35665:return MX;case 35666:return TX;case 35674:return CX;case 35675:return RX;case 35676:return bX;case 5124:case 35670:return PX;case 35667:case 35671:return IX;case 35668:case 35672:return DX;case 35669:case 35673:return LX;case 5125:return BX;case 36294:return NX;case 36295:return FX;case 36296:return OX;case 35678:case 36198:case 36298:case 36306:case 35682:return UX;case 35679:case 36299:case 36307:return kX;case 35680:case 36300:case 36308:case 36293:return VX;case 36289:case 36303:case 36311:case 36292:return zX}}class HX{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=SX(t.type)}}class WX{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=GX(t.type)}}class jX{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const AA=/(\w+)(\])?(\[|\.)?/g;function cI(n,e){n.seq.push(e),n.map[e.id]=e}function XX(n,e,t){const i=n.name,r=i.length;for(AA.lastIndex=0;;){const s=AA.exec(i),o=AA.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){cI(t,c===void 0?new HX(a,n,e):new WX(a,n,e));break}else{let d=t.map[a];d===void 0&&(d=new jX(a),cI(t,d)),t=d}}}class Dy{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);XX(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function uI(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const JX=37297;let KX=0;function $X(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}function YX(n){const e=nn.getPrimaries(nn.workingColorSpace),t=nn.getPrimaries(n);let i;switch(e===t?i="":e===Pp&&t===bp?i="LinearDisplayP3ToLinearSRGB":e===bp&&t===Pp&&(i="LinearSRGBToLinearDisplayP3"),n){case Mo:case lm:return[i,"LinearTransferOETF"];case oi:case m_:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[i,"LinearTransferOETF"]}}function hI(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+$X(n.getShaderSource(e),o)}else return r}function qX(n,e){const t=YX(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function QX(n,e){let t;switch(e){case iO:t="Linear";break;case rO:t="Reinhard";break;case sO:t="OptimizedCineon";break;case uT:t="ACESFilmic";break;case aO:t="AgX";break;case oO:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function ZX(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(uh).join(`
`)}function eJ(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":""].filter(uh).join(`
`)}function tJ(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function nJ(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function uh(n){return n!==""}function fI(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function dI(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const iJ=/^[ \t]*#include +<([\w\d./]+)>/gm;function sw(n){return n.replace(iJ,sJ)}const rJ=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function sJ(n,e){let t=bt[e];if(t===void 0){const i=rJ.get(e);if(i!==void 0)t=bt[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return sw(t)}const oJ=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function pI(n){return n.replace(oJ,aJ)}function aJ(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function mI(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function lJ(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===u_?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Wd?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Ds&&(e="SHADOWMAP_TYPE_VSM"),e}function cJ(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case ca:case cl:e="ENVMAP_TYPE_CUBE";break;case mf:e="ENVMAP_TYPE_CUBE_UV";break}return e}function uJ(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case cl:e="ENVMAP_MODE_REFRACTION";break}return e}function hJ(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case am:e="ENVMAP_BLENDING_MULTIPLY";break;case tO:e="ENVMAP_BLENDING_MIX";break;case nO:e="ENVMAP_BLENDING_ADD";break}return e}function fJ(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function dJ(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=lJ(t),c=cJ(t),h=uJ(t),d=hJ(t),p=fJ(t),m=t.isWebGL2?"":ZX(t),y=eJ(t),x=tJ(s),_=r.createProgram();let g,A,S=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(uh).join(`
`),g.length>0&&(g+=`
`),A=[m,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(uh).join(`
`),A.length>0&&(A+=`
`)):(g=[mI(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(uh).join(`
`),A=[m,mI(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+h:"",t.envMap?"#define "+d:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==yo?"#define TONE_MAPPING":"",t.toneMapping!==yo?bt.tonemapping_pars_fragment:"",t.toneMapping!==yo?QX("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",bt.colorspace_pars_fragment,qX("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(uh).join(`
`)),o=sw(o),o=fI(o,t),o=dI(o,t),a=sw(a),a=fI(a,t),a=dI(a,t),o=pI(o),a=pI(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(S=`#version 300 es
`,g=[y,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,A=["precision mediump sampler2DArray;","#define varying in",t.glslVersion===nw?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===nw?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+A);const w=S+g+o,R=S+A+a,T=uI(r,r.VERTEX_SHADER,w),P=uI(r,r.FRAGMENT_SHADER,R);r.attachShader(_,T),r.attachShader(_,P),t.index0AttributeName!==void 0?r.bindAttribLocation(_,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(_,0,"position"),r.linkProgram(_);function B(K){if(n.debug.checkShaderErrors){const re=r.getProgramInfoLog(_).trim(),G=r.getShaderInfoLog(T).trim(),$=r.getShaderInfoLog(P).trim();let Q=!0,se=!0;if(r.getProgramParameter(_,r.LINK_STATUS)===!1)if(Q=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,_,T,P);else{const L=hI(r,T,"vertex"),k=hI(r,P,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(_,r.VALIDATE_STATUS)+`

Program Info Log: `+re+`
`+L+`
`+k)}else re!==""?console.warn("THREE.WebGLProgram: Program Info Log:",re):(G===""||$==="")&&(se=!1);se&&(K.diagnostics={runnable:Q,programLog:re,vertexShader:{log:G,prefix:g},fragmentShader:{log:$,prefix:A}})}r.deleteShader(T),r.deleteShader(P),b=new Dy(r,_),I=nJ(r,_)}let b;this.getUniforms=function(){return b===void 0&&B(this),b};let I;this.getAttributes=function(){return I===void 0&&B(this),I};let U=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return U===!1&&(U=r.getProgramParameter(_,JX)),U},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(_),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=KX++,this.cacheKey=e,this.usedTimes=1,this.program=_,this.vertexShader=T,this.fragmentShader=P,this}let pJ=0;class mJ{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new gJ(e),t.set(e,i)),i}}class gJ{constructor(e){this.id=pJ++,this.code=e,this.usedTimes=0}}function yJ(n,e,t,i,r,s,o){const a=new Cc,l=new mJ,c=[],h=r.isWebGL2,d=r.logarithmicDepthBuffer,p=r.vertexTextures;let m=r.precision;const y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(b){return b===0?"uv":`uv${b}`}function _(b,I,U,K,re){const G=K.fog,$=re.geometry,Q=b.isMeshStandardMaterial?K.environment:null,se=(b.isMeshStandardMaterial?t:e).get(b.envMap||Q),L=se&&se.mapping===mf?se.image.height:null,k=y[b.type];b.precision!==null&&(m=r.getMaxPrecision(b.precision),m!==b.precision&&console.warn("THREE.WebGLProgram.getParameters:",b.precision,"not supported, using",m,"instead."));const z=$.morphAttributes.position||$.morphAttributes.normal||$.morphAttributes.color,j=z!==void 0?z.length:0;let te=0;$.morphAttributes.position!==void 0&&(te=1),$.morphAttributes.normal!==void 0&&(te=2),$.morphAttributes.color!==void 0&&(te=3);let Z,ce,Se,Te;if(k){const vn=Ns[k];Z=vn.vertexShader,ce=vn.fragmentShader}else Z=b.vertexShader,ce=b.fragmentShader,l.update(b),Se=l.getVertexShaderID(b),Te=l.getFragmentShaderID(b);const be=n.getRenderTarget(),tt=re.isInstancedMesh===!0,ot=re.isBatchedMesh===!0,De=!!b.map,Re=!!b.matcap,H=!!se,ve=!!b.aoMap,de=!!b.lightMap,Me=!!b.bumpMap,pe=!!b.normalMap,Je=!!b.displacementMap,Fe=!!b.emissiveMap,N=!!b.metalnessMap,D=!!b.roughnessMap,ne=b.anisotropy>0,Ae=b.clearcoat>0,_e=b.iridescence>0,ye=b.sheen>0,Qe=b.transmission>0,Le=ne&&!!b.anisotropyMap,Oe=Ae&&!!b.clearcoatMap,at=Ae&&!!b.clearcoatNormalMap,xt=Ae&&!!b.clearcoatRoughnessMap,Ee=_e&&!!b.iridescenceMap,Ot=_e&&!!b.iridescenceThicknessMap,Rt=ye&&!!b.sheenColorMap,gt=ye&&!!b.sheenRoughnessMap,st=!!b.specularMap,Ke=!!b.specularColorMap,J=!!b.specularIntensityMap,ge=Qe&&!!b.transmissionMap,je=Qe&&!!b.thicknessMap,He=!!b.gradientMap,we=!!b.alphaMap,X=b.alphaTest>0,Ie=!!b.alphaHash,Ue=!!b.extensions,ct=!!$.attributes.uv1,Ze=!!$.attributes.uv2,Ft=!!$.attributes.uv3;let kt=yo;return b.toneMapped&&(be===null||be.isXRRenderTarget===!0)&&(kt=n.toneMapping),{isWebGL2:h,shaderID:k,shaderType:b.type,shaderName:b.name,vertexShader:Z,fragmentShader:ce,defines:b.defines,customVertexShaderID:Se,customFragmentShaderID:Te,isRawShaderMaterial:b.isRawShaderMaterial===!0,glslVersion:b.glslVersion,precision:m,batching:ot,instancing:tt,instancingColor:tt&&re.instanceColor!==null,supportsVertexTextures:p,outputColorSpace:be===null?n.outputColorSpace:be.isXRRenderTarget===!0?be.texture.colorSpace:Mo,map:De,matcap:Re,envMap:H,envMapMode:H&&se.mapping,envMapCubeUVHeight:L,aoMap:ve,lightMap:de,bumpMap:Me,normalMap:pe,displacementMap:p&&Je,emissiveMap:Fe,normalMapObjectSpace:pe&&b.normalMapType===EO,normalMapTangentSpace:pe&&b.normalMapType===Sl,metalnessMap:N,roughnessMap:D,anisotropy:ne,anisotropyMap:Le,clearcoat:Ae,clearcoatMap:Oe,clearcoatNormalMap:at,clearcoatRoughnessMap:xt,iridescence:_e,iridescenceMap:Ee,iridescenceThicknessMap:Ot,sheen:ye,sheenColorMap:Rt,sheenRoughnessMap:gt,specularMap:st,specularColorMap:Ke,specularIntensityMap:J,transmission:Qe,transmissionMap:ge,thicknessMap:je,gradientMap:He,opaque:b.transparent===!1&&b.blending===wc,alphaMap:we,alphaTest:X,alphaHash:Ie,combine:b.combine,mapUv:De&&x(b.map.channel),aoMapUv:ve&&x(b.aoMap.channel),lightMapUv:de&&x(b.lightMap.channel),bumpMapUv:Me&&x(b.bumpMap.channel),normalMapUv:pe&&x(b.normalMap.channel),displacementMapUv:Je&&x(b.displacementMap.channel),emissiveMapUv:Fe&&x(b.emissiveMap.channel),metalnessMapUv:N&&x(b.metalnessMap.channel),roughnessMapUv:D&&x(b.roughnessMap.channel),anisotropyMapUv:Le&&x(b.anisotropyMap.channel),clearcoatMapUv:Oe&&x(b.clearcoatMap.channel),clearcoatNormalMapUv:at&&x(b.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:xt&&x(b.clearcoatRoughnessMap.channel),iridescenceMapUv:Ee&&x(b.iridescenceMap.channel),iridescenceThicknessMapUv:Ot&&x(b.iridescenceThicknessMap.channel),sheenColorMapUv:Rt&&x(b.sheenColorMap.channel),sheenRoughnessMapUv:gt&&x(b.sheenRoughnessMap.channel),specularMapUv:st&&x(b.specularMap.channel),specularColorMapUv:Ke&&x(b.specularColorMap.channel),specularIntensityMapUv:J&&x(b.specularIntensityMap.channel),transmissionMapUv:ge&&x(b.transmissionMap.channel),thicknessMapUv:je&&x(b.thicknessMap.channel),alphaMapUv:we&&x(b.alphaMap.channel),vertexTangents:!!$.attributes.tangent&&(pe||ne),vertexColors:b.vertexColors,vertexAlphas:b.vertexColors===!0&&!!$.attributes.color&&$.attributes.color.itemSize===4,vertexUv1s:ct,vertexUv2s:Ze,vertexUv3s:Ft,pointsUvs:re.isPoints===!0&&!!$.attributes.uv&&(De||we),fog:!!G,useFog:b.fog===!0,fogExp2:G&&G.isFogExp2,flatShading:b.flatShading===!0,sizeAttenuation:b.sizeAttenuation===!0,logarithmicDepthBuffer:d,skinning:re.isSkinnedMesh===!0,morphTargets:$.morphAttributes.position!==void 0,morphNormals:$.morphAttributes.normal!==void 0,morphColors:$.morphAttributes.color!==void 0,morphTargetsCount:j,morphTextureStride:te,numDirLights:I.directional.length,numPointLights:I.point.length,numSpotLights:I.spot.length,numSpotLightMaps:I.spotLightMap.length,numRectAreaLights:I.rectArea.length,numHemiLights:I.hemi.length,numDirLightShadows:I.directionalShadowMap.length,numPointLightShadows:I.pointShadowMap.length,numSpotLightShadows:I.spotShadowMap.length,numSpotLightShadowsWithMaps:I.numSpotLightShadowsWithMaps,numLightProbes:I.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:b.dithering,shadowMapEnabled:n.shadowMap.enabled&&U.length>0,shadowMapType:n.shadowMap.type,toneMapping:kt,useLegacyLights:n._useLegacyLights,decodeVideoTexture:De&&b.map.isVideoTexture===!0&&nn.getTransfer(b.map.colorSpace)===cn,premultipliedAlpha:b.premultipliedAlpha,doubleSided:b.side===vs,flipSided:b.side===gr,useDepthPacking:b.depthPacking>=0,depthPacking:b.depthPacking||0,index0AttributeName:b.index0AttributeName,extensionDerivatives:Ue&&b.extensions.derivatives===!0,extensionFragDepth:Ue&&b.extensions.fragDepth===!0,extensionDrawBuffers:Ue&&b.extensions.drawBuffers===!0,extensionShaderTextureLOD:Ue&&b.extensions.shaderTextureLOD===!0,extensionClipCullDistance:Ue&&b.extensions.clipCullDistance&&i.has("WEBGL_clip_cull_distance"),rendererExtensionFragDepth:h||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||i.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:b.customProgramCacheKey()}}function g(b){const I=[];if(b.shaderID?I.push(b.shaderID):(I.push(b.customVertexShaderID),I.push(b.customFragmentShaderID)),b.defines!==void 0)for(const U in b.defines)I.push(U),I.push(b.defines[U]);return b.isRawShaderMaterial===!1&&(A(I,b),S(I,b),I.push(n.outputColorSpace)),I.push(b.customProgramCacheKey),I.join()}function A(b,I){b.push(I.precision),b.push(I.outputColorSpace),b.push(I.envMapMode),b.push(I.envMapCubeUVHeight),b.push(I.mapUv),b.push(I.alphaMapUv),b.push(I.lightMapUv),b.push(I.aoMapUv),b.push(I.bumpMapUv),b.push(I.normalMapUv),b.push(I.displacementMapUv),b.push(I.emissiveMapUv),b.push(I.metalnessMapUv),b.push(I.roughnessMapUv),b.push(I.anisotropyMapUv),b.push(I.clearcoatMapUv),b.push(I.clearcoatNormalMapUv),b.push(I.clearcoatRoughnessMapUv),b.push(I.iridescenceMapUv),b.push(I.iridescenceThicknessMapUv),b.push(I.sheenColorMapUv),b.push(I.sheenRoughnessMapUv),b.push(I.specularMapUv),b.push(I.specularColorMapUv),b.push(I.specularIntensityMapUv),b.push(I.transmissionMapUv),b.push(I.thicknessMapUv),b.push(I.combine),b.push(I.fogExp2),b.push(I.sizeAttenuation),b.push(I.morphTargetsCount),b.push(I.morphAttributeCount),b.push(I.numDirLights),b.push(I.numPointLights),b.push(I.numSpotLights),b.push(I.numSpotLightMaps),b.push(I.numHemiLights),b.push(I.numRectAreaLights),b.push(I.numDirLightShadows),b.push(I.numPointLightShadows),b.push(I.numSpotLightShadows),b.push(I.numSpotLightShadowsWithMaps),b.push(I.numLightProbes),b.push(I.shadowMapType),b.push(I.toneMapping),b.push(I.numClippingPlanes),b.push(I.numClipIntersection),b.push(I.depthPacking)}function S(b,I){a.disableAll(),I.isWebGL2&&a.enable(0),I.supportsVertexTextures&&a.enable(1),I.instancing&&a.enable(2),I.instancingColor&&a.enable(3),I.matcap&&a.enable(4),I.envMap&&a.enable(5),I.normalMapObjectSpace&&a.enable(6),I.normalMapTangentSpace&&a.enable(7),I.clearcoat&&a.enable(8),I.iridescence&&a.enable(9),I.alphaTest&&a.enable(10),I.vertexColors&&a.enable(11),I.vertexAlphas&&a.enable(12),I.vertexUv1s&&a.enable(13),I.vertexUv2s&&a.enable(14),I.vertexUv3s&&a.enable(15),I.vertexTangents&&a.enable(16),I.anisotropy&&a.enable(17),I.alphaHash&&a.enable(18),I.batching&&a.enable(19),b.push(a.mask),a.disableAll(),I.fog&&a.enable(0),I.useFog&&a.enable(1),I.flatShading&&a.enable(2),I.logarithmicDepthBuffer&&a.enable(3),I.skinning&&a.enable(4),I.morphTargets&&a.enable(5),I.morphNormals&&a.enable(6),I.morphColors&&a.enable(7),I.premultipliedAlpha&&a.enable(8),I.shadowMapEnabled&&a.enable(9),I.useLegacyLights&&a.enable(10),I.doubleSided&&a.enable(11),I.flipSided&&a.enable(12),I.useDepthPacking&&a.enable(13),I.dithering&&a.enable(14),I.transmission&&a.enable(15),I.sheen&&a.enable(16),I.opaque&&a.enable(17),I.pointsUvs&&a.enable(18),I.decodeVideoTexture&&a.enable(19),b.push(a.mask)}function w(b){const I=y[b.type];let U;if(I){const K=Ns[I];U=OO.clone(K.uniforms)}else U=b.uniforms;return U}function R(b,I){let U;for(let K=0,re=c.length;K<re;K++){const G=c[K];if(G.cacheKey===I){U=G,++U.usedTimes;break}}return U===void 0&&(U=new dJ(n,I,b,s),c.push(U)),U}function T(b){if(--b.usedTimes===0){const I=c.indexOf(b);c[I]=c[c.length-1],c.pop(),b.destroy()}}function P(b){l.remove(b)}function B(){l.dispose()}return{getParameters:_,getProgramCacheKey:g,getUniforms:w,acquireProgram:R,releaseProgram:T,releaseShaderCache:P,programs:c,dispose:B}}function vJ(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function i(s,o,a){n.get(s)[o]=a}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function _J(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function gI(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function yI(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(d,p,m,y,x,_){let g=n[e];return g===void 0?(g={id:d.id,object:d,geometry:p,material:m,groupOrder:y,renderOrder:d.renderOrder,z:x,group:_},n[e]=g):(g.id=d.id,g.object=d,g.geometry=p,g.material=m,g.groupOrder=y,g.renderOrder=d.renderOrder,g.z=x,g.group=_),e++,g}function a(d,p,m,y,x,_){const g=o(d,p,m,y,x,_);m.transmission>0?i.push(g):m.transparent===!0?r.push(g):t.push(g)}function l(d,p,m,y,x,_){const g=o(d,p,m,y,x,_);m.transmission>0?i.unshift(g):m.transparent===!0?r.unshift(g):t.unshift(g)}function c(d,p){t.length>1&&t.sort(d||_J),i.length>1&&i.sort(p||gI),r.length>1&&r.sort(p||gI)}function h(){for(let d=e,p=n.length;d<p;d++){const m=n[d];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:h,sort:c}}function xJ(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new yI,n.set(i,[o])):r>=s.length?(o=new yI,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function AJ(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new F,color:new ke};break;case"SpotLight":t={position:new F,direction:new F,color:new ke,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new F,color:new ke,distance:0,decay:0};break;case"HemisphereLight":t={direction:new F,skyColor:new ke,groundColor:new ke};break;case"RectAreaLight":t={color:new ke,position:new F,halfWidth:new F,halfHeight:new F};break}return n[e.id]=t,t}}}function SJ(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new me};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new me};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new me,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let EJ=0;function wJ(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function MJ(n,e){const t=new AJ,i=SJ(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let h=0;h<9;h++)r.probe.push(new F);const s=new F,o=new ht,a=new ht;function l(h,d){let p=0,m=0,y=0;for(let K=0;K<9;K++)r.probe[K].set(0,0,0);let x=0,_=0,g=0,A=0,S=0,w=0,R=0,T=0,P=0,B=0,b=0;h.sort(wJ);const I=d===!0?Math.PI:1;for(let K=0,re=h.length;K<re;K++){const G=h[K],$=G.color,Q=G.intensity,se=G.distance,L=G.shadow&&G.shadow.map?G.shadow.map.texture:null;if(G.isAmbientLight)p+=$.r*Q*I,m+=$.g*Q*I,y+=$.b*Q*I;else if(G.isLightProbe){for(let k=0;k<9;k++)r.probe[k].addScaledVector(G.sh.coefficients[k],Q);b++}else if(G.isDirectionalLight){const k=t.get(G);if(k.color.copy(G.color).multiplyScalar(G.intensity*I),G.castShadow){const z=G.shadow,j=i.get(G);j.shadowBias=z.bias,j.shadowNormalBias=z.normalBias,j.shadowRadius=z.radius,j.shadowMapSize=z.mapSize,r.directionalShadow[x]=j,r.directionalShadowMap[x]=L,r.directionalShadowMatrix[x]=G.shadow.matrix,w++}r.directional[x]=k,x++}else if(G.isSpotLight){const k=t.get(G);k.position.setFromMatrixPosition(G.matrixWorld),k.color.copy($).multiplyScalar(Q*I),k.distance=se,k.coneCos=Math.cos(G.angle),k.penumbraCos=Math.cos(G.angle*(1-G.penumbra)),k.decay=G.decay,r.spot[g]=k;const z=G.shadow;if(G.map&&(r.spotLightMap[P]=G.map,P++,z.updateMatrices(G),G.castShadow&&B++),r.spotLightMatrix[g]=z.matrix,G.castShadow){const j=i.get(G);j.shadowBias=z.bias,j.shadowNormalBias=z.normalBias,j.shadowRadius=z.radius,j.shadowMapSize=z.mapSize,r.spotShadow[g]=j,r.spotShadowMap[g]=L,T++}g++}else if(G.isRectAreaLight){const k=t.get(G);k.color.copy($).multiplyScalar(Q),k.halfWidth.set(G.width*.5,0,0),k.halfHeight.set(0,G.height*.5,0),r.rectArea[A]=k,A++}else if(G.isPointLight){const k=t.get(G);if(k.color.copy(G.color).multiplyScalar(G.intensity*I),k.distance=G.distance,k.decay=G.decay,G.castShadow){const z=G.shadow,j=i.get(G);j.shadowBias=z.bias,j.shadowNormalBias=z.normalBias,j.shadowRadius=z.radius,j.shadowMapSize=z.mapSize,j.shadowCameraNear=z.camera.near,j.shadowCameraFar=z.camera.far,r.pointShadow[_]=j,r.pointShadowMap[_]=L,r.pointShadowMatrix[_]=G.shadow.matrix,R++}r.point[_]=k,_++}else if(G.isHemisphereLight){const k=t.get(G);k.skyColor.copy(G.color).multiplyScalar(Q*I),k.groundColor.copy(G.groundColor).multiplyScalar(Q*I),r.hemi[S]=k,S++}}A>0&&(e.isWebGL2?n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Be.LTC_FLOAT_1,r.rectAreaLTC2=Be.LTC_FLOAT_2):(r.rectAreaLTC1=Be.LTC_HALF_1,r.rectAreaLTC2=Be.LTC_HALF_2):n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Be.LTC_FLOAT_1,r.rectAreaLTC2=Be.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=Be.LTC_HALF_1,r.rectAreaLTC2=Be.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=p,r.ambient[1]=m,r.ambient[2]=y;const U=r.hash;(U.directionalLength!==x||U.pointLength!==_||U.spotLength!==g||U.rectAreaLength!==A||U.hemiLength!==S||U.numDirectionalShadows!==w||U.numPointShadows!==R||U.numSpotShadows!==T||U.numSpotMaps!==P||U.numLightProbes!==b)&&(r.directional.length=x,r.spot.length=g,r.rectArea.length=A,r.point.length=_,r.hemi.length=S,r.directionalShadow.length=w,r.directionalShadowMap.length=w,r.pointShadow.length=R,r.pointShadowMap.length=R,r.spotShadow.length=T,r.spotShadowMap.length=T,r.directionalShadowMatrix.length=w,r.pointShadowMatrix.length=R,r.spotLightMatrix.length=T+P-B,r.spotLightMap.length=P,r.numSpotLightShadowsWithMaps=B,r.numLightProbes=b,U.directionalLength=x,U.pointLength=_,U.spotLength=g,U.rectAreaLength=A,U.hemiLength=S,U.numDirectionalShadows=w,U.numPointShadows=R,U.numSpotShadows=T,U.numSpotMaps=P,U.numLightProbes=b,r.version=EJ++)}function c(h,d){let p=0,m=0,y=0,x=0,_=0;const g=d.matrixWorldInverse;for(let A=0,S=h.length;A<S;A++){const w=h[A];if(w.isDirectionalLight){const R=r.directional[p];R.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),R.direction.sub(s),R.direction.transformDirection(g),p++}else if(w.isSpotLight){const R=r.spot[y];R.position.setFromMatrixPosition(w.matrixWorld),R.position.applyMatrix4(g),R.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),R.direction.sub(s),R.direction.transformDirection(g),y++}else if(w.isRectAreaLight){const R=r.rectArea[x];R.position.setFromMatrixPosition(w.matrixWorld),R.position.applyMatrix4(g),a.identity(),o.copy(w.matrixWorld),o.premultiply(g),a.extractRotation(o),R.halfWidth.set(w.width*.5,0,0),R.halfHeight.set(0,w.height*.5,0),R.halfWidth.applyMatrix4(a),R.halfHeight.applyMatrix4(a),x++}else if(w.isPointLight){const R=r.point[m];R.position.setFromMatrixPosition(w.matrixWorld),R.position.applyMatrix4(g),m++}else if(w.isHemisphereLight){const R=r.hemi[_];R.direction.setFromMatrixPosition(w.matrixWorld),R.direction.transformDirection(g),_++}}}return{setup:l,setupView:c,state:r}}function vI(n,e){const t=new MJ(n,e),i=[],r=[];function s(){i.length=0,r.length=0}function o(d){i.push(d)}function a(d){r.push(d)}function l(d){t.setup(i,d)}function c(d){t.setupView(i,d)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function TJ(n,e){let t=new WeakMap;function i(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new vI(n,e),t.set(s,[l])):o>=a.length?(l=new vI(n,e),a.push(l)):l=a[o],l}function r(){t=new WeakMap}return{get:i,dispose:r}}class IT extends ni{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=AO,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class DT extends ni{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const CJ=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,RJ=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function bJ(n,e,t){let i=new fm;const r=new me,s=new me,o=new rn,a=new IT({depthPacking:SO}),l=new DT,c={},h=t.maxTextureSize,d={[Eo]:gr,[gr]:Eo,[vs]:vs},p=new To({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new me},radius:{value:4}},vertexShader:CJ,fragmentShader:RJ}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const y=new Ct;y.setAttribute("position",new Wt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new ti(y,p),_=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=u_;let g=this.type;this.render=function(T,P,B){if(_.enabled===!1||_.autoUpdate===!1&&_.needsUpdate===!1||T.length===0)return;const b=n.getRenderTarget(),I=n.getActiveCubeFace(),U=n.getActiveMipmapLevel(),K=n.state;K.setBlending(na),K.buffers.color.setClear(1,1,1,1),K.buffers.depth.setTest(!0),K.setScissorTest(!1);const re=g!==Ds&&this.type===Ds,G=g===Ds&&this.type!==Ds;for(let $=0,Q=T.length;$<Q;$++){const se=T[$],L=se.shadow;if(L===void 0){console.warn("THREE.WebGLShadowMap:",se,"has no shadow.");continue}if(L.autoUpdate===!1&&L.needsUpdate===!1)continue;r.copy(L.mapSize);const k=L.getFrameExtents();if(r.multiply(k),s.copy(L.mapSize),(r.x>h||r.y>h)&&(r.x>h&&(s.x=Math.floor(h/k.x),r.x=s.x*k.x,L.mapSize.x=s.x),r.y>h&&(s.y=Math.floor(h/k.y),r.y=s.y*k.y,L.mapSize.y=s.y)),L.map===null||re===!0||G===!0){const j=this.type!==Ds?{minFilter:Fn,magFilter:Fn}:{};L.map!==null&&L.map.dispose(),L.map=new Gs(r.x,r.y,j),L.map.texture.name=se.name+".shadowMap",L.camera.updateProjectionMatrix()}n.setRenderTarget(L.map),n.clear();const z=L.getViewportCount();for(let j=0;j<z;j++){const te=L.getViewport(j);o.set(s.x*te.x,s.y*te.y,s.x*te.z,s.y*te.w),K.viewport(o),L.updateMatrices(se,j),i=L.getFrustum(),w(P,B,L.camera,se,this.type)}L.isPointLightShadow!==!0&&this.type===Ds&&A(L,B),L.needsUpdate=!1}g=this.type,_.needsUpdate=!1,n.setRenderTarget(b,I,U)};function A(T,P){const B=e.update(x);p.defines.VSM_SAMPLES!==T.blurSamples&&(p.defines.VSM_SAMPLES=T.blurSamples,m.defines.VSM_SAMPLES=T.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),T.mapPass===null&&(T.mapPass=new Gs(r.x,r.y)),p.uniforms.shadow_pass.value=T.map.texture,p.uniforms.resolution.value=T.mapSize,p.uniforms.radius.value=T.radius,n.setRenderTarget(T.mapPass),n.clear(),n.renderBufferDirect(P,null,B,p,x,null),m.uniforms.shadow_pass.value=T.mapPass.texture,m.uniforms.resolution.value=T.mapSize,m.uniforms.radius.value=T.radius,n.setRenderTarget(T.map),n.clear(),n.renderBufferDirect(P,null,B,m,x,null)}function S(T,P,B,b){let I=null;const U=B.isPointLight===!0?T.customDistanceMaterial:T.customDepthMaterial;if(U!==void 0)I=U;else if(I=B.isPointLight===!0?l:a,n.localClippingEnabled&&P.clipShadows===!0&&Array.isArray(P.clippingPlanes)&&P.clippingPlanes.length!==0||P.displacementMap&&P.displacementScale!==0||P.alphaMap&&P.alphaTest>0||P.map&&P.alphaTest>0){const K=I.uuid,re=P.uuid;let G=c[K];G===void 0&&(G={},c[K]=G);let $=G[re];$===void 0&&($=I.clone(),G[re]=$,P.addEventListener("dispose",R)),I=$}if(I.visible=P.visible,I.wireframe=P.wireframe,b===Ds?I.side=P.shadowSide!==null?P.shadowSide:P.side:I.side=P.shadowSide!==null?P.shadowSide:d[P.side],I.alphaMap=P.alphaMap,I.alphaTest=P.alphaTest,I.map=P.map,I.clipShadows=P.clipShadows,I.clippingPlanes=P.clippingPlanes,I.clipIntersection=P.clipIntersection,I.displacementMap=P.displacementMap,I.displacementScale=P.displacementScale,I.displacementBias=P.displacementBias,I.wireframeLinewidth=P.wireframeLinewidth,I.linewidth=P.linewidth,B.isPointLight===!0&&I.isMeshDistanceMaterial===!0){const K=n.properties.get(I);K.light=B}return I}function w(T,P,B,b,I){if(T.visible===!1)return;if(T.layers.test(P.layers)&&(T.isMesh||T.isLine||T.isPoints)&&(T.castShadow||T.receiveShadow&&I===Ds)&&(!T.frustumCulled||i.intersectsObject(T))){T.modelViewMatrix.multiplyMatrices(B.matrixWorldInverse,T.matrixWorld);const re=e.update(T),G=T.material;if(Array.isArray(G)){const $=re.groups;for(let Q=0,se=$.length;Q<se;Q++){const L=$[Q],k=G[L.materialIndex];if(k&&k.visible){const z=S(T,k,b,I);T.onBeforeShadow(n,T,P,B,re,z,L),n.renderBufferDirect(B,null,re,z,T,L),T.onAfterShadow(n,T,P,B,re,z,L)}}}else if(G.visible){const $=S(T,G,b,I);T.onBeforeShadow(n,T,P,B,re,$,null),n.renderBufferDirect(B,null,re,$,T,null),T.onAfterShadow(n,T,P,B,re,$,null)}}const K=T.children;for(let re=0,G=K.length;re<G;re++)w(K[re],P,B,b,I)}function R(T){T.target.removeEventListener("dispose",R);for(const B in c){const b=c[B],I=T.target.uuid;I in b&&(b[I].dispose(),delete b[I])}}}function PJ(n,e,t){const i=t.isWebGL2;function r(){let X=!1;const Ie=new rn;let Ue=null;const ct=new rn(0,0,0,0);return{setMask:function(Ze){Ue!==Ze&&!X&&(n.colorMask(Ze,Ze,Ze,Ze),Ue=Ze)},setLocked:function(Ze){X=Ze},setClear:function(Ze,Ft,kt,an,vn){vn===!0&&(Ze*=an,Ft*=an,kt*=an),Ie.set(Ze,Ft,kt,an),ct.equals(Ie)===!1&&(n.clearColor(Ze,Ft,kt,an),ct.copy(Ie))},reset:function(){X=!1,Ue=null,ct.set(-1,0,0,0)}}}function s(){let X=!1,Ie=null,Ue=null,ct=null;return{setTest:function(Ze){Ze?ot(n.DEPTH_TEST):De(n.DEPTH_TEST)},setMask:function(Ze){Ie!==Ze&&!X&&(n.depthMask(Ze),Ie=Ze)},setFunc:function(Ze){if(Ue!==Ze){switch(Ze){case KF:n.depthFunc(n.NEVER);break;case $F:n.depthFunc(n.ALWAYS);break;case YF:n.depthFunc(n.LESS);break;case Ep:n.depthFunc(n.LEQUAL);break;case qF:n.depthFunc(n.EQUAL);break;case QF:n.depthFunc(n.GEQUAL);break;case ZF:n.depthFunc(n.GREATER);break;case eO:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Ue=Ze}},setLocked:function(Ze){X=Ze},setClear:function(Ze){ct!==Ze&&(n.clearDepth(Ze),ct=Ze)},reset:function(){X=!1,Ie=null,Ue=null,ct=null}}}function o(){let X=!1,Ie=null,Ue=null,ct=null,Ze=null,Ft=null,kt=null,an=null,vn=null;return{setTest:function(jt){X||(jt?ot(n.STENCIL_TEST):De(n.STENCIL_TEST))},setMask:function(jt){Ie!==jt&&!X&&(n.stencilMask(jt),Ie=jt)},setFunc:function(jt,wi,Zr){(Ue!==jt||ct!==wi||Ze!==Zr)&&(n.stencilFunc(jt,wi,Zr),Ue=jt,ct=wi,Ze=Zr)},setOp:function(jt,wi,Zr){(Ft!==jt||kt!==wi||an!==Zr)&&(n.stencilOp(jt,wi,Zr),Ft=jt,kt=wi,an=Zr)},setLocked:function(jt){X=jt},setClear:function(jt){vn!==jt&&(n.clearStencil(jt),vn=jt)},reset:function(){X=!1,Ie=null,Ue=null,ct=null,Ze=null,Ft=null,kt=null,an=null,vn=null}}}const a=new r,l=new s,c=new o,h=new WeakMap,d=new WeakMap;let p={},m={},y=new WeakMap,x=[],_=null,g=!1,A=null,S=null,w=null,R=null,T=null,P=null,B=null,b=new ke(0,0,0),I=0,U=!1,K=null,re=null,G=null,$=null,Q=null;const se=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let L=!1,k=0;const z=n.getParameter(n.VERSION);z.indexOf("WebGL")!==-1?(k=parseFloat(/^WebGL (\d)/.exec(z)[1]),L=k>=1):z.indexOf("OpenGL ES")!==-1&&(k=parseFloat(/^OpenGL ES (\d)/.exec(z)[1]),L=k>=2);let j=null,te={};const Z=n.getParameter(n.SCISSOR_BOX),ce=n.getParameter(n.VIEWPORT),Se=new rn().fromArray(Z),Te=new rn().fromArray(ce);function be(X,Ie,Ue,ct){const Ze=new Uint8Array(4),Ft=n.createTexture();n.bindTexture(X,Ft),n.texParameteri(X,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(X,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let kt=0;kt<Ue;kt++)i&&(X===n.TEXTURE_3D||X===n.TEXTURE_2D_ARRAY)?n.texImage3D(Ie,0,n.RGBA,1,1,ct,0,n.RGBA,n.UNSIGNED_BYTE,Ze):n.texImage2D(Ie+kt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Ze);return Ft}const tt={};tt[n.TEXTURE_2D]=be(n.TEXTURE_2D,n.TEXTURE_2D,1),tt[n.TEXTURE_CUBE_MAP]=be(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(tt[n.TEXTURE_2D_ARRAY]=be(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),tt[n.TEXTURE_3D]=be(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),ot(n.DEPTH_TEST),l.setFunc(Ep),Fe(!1),N(EE),ot(n.CULL_FACE),pe(na);function ot(X){p[X]!==!0&&(n.enable(X),p[X]=!0)}function De(X){p[X]!==!1&&(n.disable(X),p[X]=!1)}function Re(X,Ie){return m[X]!==Ie?(n.bindFramebuffer(X,Ie),m[X]=Ie,i&&(X===n.DRAW_FRAMEBUFFER&&(m[n.FRAMEBUFFER]=Ie),X===n.FRAMEBUFFER&&(m[n.DRAW_FRAMEBUFFER]=Ie)),!0):!1}function H(X,Ie){let Ue=x,ct=!1;if(X)if(Ue=y.get(Ie),Ue===void 0&&(Ue=[],y.set(Ie,Ue)),X.isWebGLMultipleRenderTargets){const Ze=X.texture;if(Ue.length!==Ze.length||Ue[0]!==n.COLOR_ATTACHMENT0){for(let Ft=0,kt=Ze.length;Ft<kt;Ft++)Ue[Ft]=n.COLOR_ATTACHMENT0+Ft;Ue.length=Ze.length,ct=!0}}else Ue[0]!==n.COLOR_ATTACHMENT0&&(Ue[0]=n.COLOR_ATTACHMENT0,ct=!0);else Ue[0]!==n.BACK&&(Ue[0]=n.BACK,ct=!0);ct&&(t.isWebGL2?n.drawBuffers(Ue):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ue))}function ve(X){return _!==X?(n.useProgram(X),_=X,!0):!1}const de={[za]:n.FUNC_ADD,[LF]:n.FUNC_SUBTRACT,[BF]:n.FUNC_REVERSE_SUBTRACT};if(i)de[CE]=n.MIN,de[RE]=n.MAX;else{const X=e.get("EXT_blend_minmax");X!==null&&(de[CE]=X.MIN_EXT,de[RE]=X.MAX_EXT)}const Me={[NF]:n.ZERO,[FF]:n.ONE,[OF]:n.SRC_COLOR,[dv]:n.SRC_ALPHA,[HF]:n.SRC_ALPHA_SATURATE,[zF]:n.DST_COLOR,[kF]:n.DST_ALPHA,[UF]:n.ONE_MINUS_SRC_COLOR,[pv]:n.ONE_MINUS_SRC_ALPHA,[GF]:n.ONE_MINUS_DST_COLOR,[VF]:n.ONE_MINUS_DST_ALPHA,[WF]:n.CONSTANT_COLOR,[jF]:n.ONE_MINUS_CONSTANT_COLOR,[XF]:n.CONSTANT_ALPHA,[JF]:n.ONE_MINUS_CONSTANT_ALPHA};function pe(X,Ie,Ue,ct,Ze,Ft,kt,an,vn,jt){if(X===na){g===!0&&(De(n.BLEND),g=!1);return}if(g===!1&&(ot(n.BLEND),g=!0),X!==DF){if(X!==A||jt!==U){if((S!==za||T!==za)&&(n.blendEquation(n.FUNC_ADD),S=za,T=za),jt)switch(X){case wc:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case wE:n.blendFunc(n.ONE,n.ONE);break;case ME:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case TE:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",X);break}else switch(X){case wc:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case wE:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case ME:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case TE:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",X);break}w=null,R=null,P=null,B=null,b.set(0,0,0),I=0,A=X,U=jt}return}Ze=Ze||Ie,Ft=Ft||Ue,kt=kt||ct,(Ie!==S||Ze!==T)&&(n.blendEquationSeparate(de[Ie],de[Ze]),S=Ie,T=Ze),(Ue!==w||ct!==R||Ft!==P||kt!==B)&&(n.blendFuncSeparate(Me[Ue],Me[ct],Me[Ft],Me[kt]),w=Ue,R=ct,P=Ft,B=kt),(an.equals(b)===!1||vn!==I)&&(n.blendColor(an.r,an.g,an.b,vn),b.copy(an),I=vn),A=X,U=!1}function Je(X,Ie){X.side===vs?De(n.CULL_FACE):ot(n.CULL_FACE);let Ue=X.side===gr;Ie&&(Ue=!Ue),Fe(Ue),X.blending===wc&&X.transparent===!1?pe(na):pe(X.blending,X.blendEquation,X.blendSrc,X.blendDst,X.blendEquationAlpha,X.blendSrcAlpha,X.blendDstAlpha,X.blendColor,X.blendAlpha,X.premultipliedAlpha),l.setFunc(X.depthFunc),l.setTest(X.depthTest),l.setMask(X.depthWrite),a.setMask(X.colorWrite);const ct=X.stencilWrite;c.setTest(ct),ct&&(c.setMask(X.stencilWriteMask),c.setFunc(X.stencilFunc,X.stencilRef,X.stencilFuncMask),c.setOp(X.stencilFail,X.stencilZFail,X.stencilZPass)),ne(X.polygonOffset,X.polygonOffsetFactor,X.polygonOffsetUnits),X.alphaToCoverage===!0?ot(n.SAMPLE_ALPHA_TO_COVERAGE):De(n.SAMPLE_ALPHA_TO_COVERAGE)}function Fe(X){K!==X&&(X?n.frontFace(n.CW):n.frontFace(n.CCW),K=X)}function N(X){X!==bF?(ot(n.CULL_FACE),X!==re&&(X===EE?n.cullFace(n.BACK):X===PF?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):De(n.CULL_FACE),re=X}function D(X){X!==G&&(L&&n.lineWidth(X),G=X)}function ne(X,Ie,Ue){X?(ot(n.POLYGON_OFFSET_FILL),($!==Ie||Q!==Ue)&&(n.polygonOffset(Ie,Ue),$=Ie,Q=Ue)):De(n.POLYGON_OFFSET_FILL)}function Ae(X){X?ot(n.SCISSOR_TEST):De(n.SCISSOR_TEST)}function _e(X){X===void 0&&(X=n.TEXTURE0+se-1),j!==X&&(n.activeTexture(X),j=X)}function ye(X,Ie,Ue){Ue===void 0&&(j===null?Ue=n.TEXTURE0+se-1:Ue=j);let ct=te[Ue];ct===void 0&&(ct={type:void 0,texture:void 0},te[Ue]=ct),(ct.type!==X||ct.texture!==Ie)&&(j!==Ue&&(n.activeTexture(Ue),j=Ue),n.bindTexture(X,Ie||tt[X]),ct.type=X,ct.texture=Ie)}function Qe(){const X=te[j];X!==void 0&&X.type!==void 0&&(n.bindTexture(X.type,null),X.type=void 0,X.texture=void 0)}function Le(){try{n.compressedTexImage2D.apply(n,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function Oe(){try{n.compressedTexImage3D.apply(n,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function at(){try{n.texSubImage2D.apply(n,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function xt(){try{n.texSubImage3D.apply(n,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function Ee(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function Ot(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function Rt(){try{n.texStorage2D.apply(n,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function gt(){try{n.texStorage3D.apply(n,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function st(){try{n.texImage2D.apply(n,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function Ke(){try{n.texImage3D.apply(n,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function J(X){Se.equals(X)===!1&&(n.scissor(X.x,X.y,X.z,X.w),Se.copy(X))}function ge(X){Te.equals(X)===!1&&(n.viewport(X.x,X.y,X.z,X.w),Te.copy(X))}function je(X,Ie){let Ue=d.get(Ie);Ue===void 0&&(Ue=new WeakMap,d.set(Ie,Ue));let ct=Ue.get(X);ct===void 0&&(ct=n.getUniformBlockIndex(Ie,X.name),Ue.set(X,ct))}function He(X,Ie){const ct=d.get(Ie).get(X);h.get(Ie)!==ct&&(n.uniformBlockBinding(Ie,ct,X.__bindingPointIndex),h.set(Ie,ct))}function we(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),i===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),p={},j=null,te={},m={},y=new WeakMap,x=[],_=null,g=!1,A=null,S=null,w=null,R=null,T=null,P=null,B=null,b=new ke(0,0,0),I=0,U=!1,K=null,re=null,G=null,$=null,Q=null,Se.set(0,0,n.canvas.width,n.canvas.height),Te.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:ot,disable:De,bindFramebuffer:Re,drawBuffers:H,useProgram:ve,setBlending:pe,setMaterial:Je,setFlipSided:Fe,setCullFace:N,setLineWidth:D,setPolygonOffset:ne,setScissorTest:Ae,activeTexture:_e,bindTexture:ye,unbindTexture:Qe,compressedTexImage2D:Le,compressedTexImage3D:Oe,texImage2D:st,texImage3D:Ke,updateUBOMapping:je,uniformBlockBinding:He,texStorage2D:Rt,texStorage3D:gt,texSubImage2D:at,texSubImage3D:xt,compressedTexSubImage2D:Ee,compressedTexSubImage3D:Ot,scissor:J,viewport:ge,reset:we}}function IJ(n,e,t,i,r,s,o){const a=r.isWebGL2,l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),h=new WeakMap;let d;const p=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(N,D){return m?new OffscreenCanvas(N,D):Dp("canvas")}function x(N,D,ne,Ae){let _e=1;if((N.width>Ae||N.height>Ae)&&(_e=Ae/Math.max(N.width,N.height)),_e<1||D===!0)if(typeof HTMLImageElement<"u"&&N instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&N instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&N instanceof ImageBitmap){const ye=D?yv:Math.floor,Qe=ye(_e*N.width),Le=ye(_e*N.height);d===void 0&&(d=y(Qe,Le));const Oe=ne?y(Qe,Le):d;return Oe.width=Qe,Oe.height=Le,Oe.getContext("2d").drawImage(N,0,0,Qe,Le),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+N.width+"x"+N.height+") to ("+Qe+"x"+Le+")."),Oe}else return"data"in N&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+N.width+"x"+N.height+")."),N;return N}function _(N){return iw(N.width)&&iw(N.height)}function g(N){return a?!1:N.wrapS!==Di||N.wrapT!==Di||N.minFilter!==Fn&&N.minFilter!==Tn}function A(N,D){return N.generateMipmaps&&D&&N.minFilter!==Fn&&N.minFilter!==Tn}function S(N){n.generateMipmap(N)}function w(N,D,ne,Ae,_e=!1){if(a===!1)return D;if(N!==null){if(n[N]!==void 0)return n[N];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+N+"'")}let ye=D;if(D===n.RED&&(ne===n.FLOAT&&(ye=n.R32F),ne===n.HALF_FLOAT&&(ye=n.R16F),ne===n.UNSIGNED_BYTE&&(ye=n.R8)),D===n.RED_INTEGER&&(ne===n.UNSIGNED_BYTE&&(ye=n.R8UI),ne===n.UNSIGNED_SHORT&&(ye=n.R16UI),ne===n.UNSIGNED_INT&&(ye=n.R32UI),ne===n.BYTE&&(ye=n.R8I),ne===n.SHORT&&(ye=n.R16I),ne===n.INT&&(ye=n.R32I)),D===n.RG&&(ne===n.FLOAT&&(ye=n.RG32F),ne===n.HALF_FLOAT&&(ye=n.RG16F),ne===n.UNSIGNED_BYTE&&(ye=n.RG8)),D===n.RGBA){const Qe=_e?Rp:nn.getTransfer(Ae);ne===n.FLOAT&&(ye=n.RGBA32F),ne===n.HALF_FLOAT&&(ye=n.RGBA16F),ne===n.UNSIGNED_BYTE&&(ye=Qe===cn?n.SRGB8_ALPHA8:n.RGBA8),ne===n.UNSIGNED_SHORT_4_4_4_4&&(ye=n.RGBA4),ne===n.UNSIGNED_SHORT_5_5_5_1&&(ye=n.RGB5_A1)}return(ye===n.R16F||ye===n.R32F||ye===n.RG16F||ye===n.RG32F||ye===n.RGBA16F||ye===n.RGBA32F)&&e.get("EXT_color_buffer_float"),ye}function R(N,D,ne){return A(N,ne)===!0||N.isFramebufferTexture&&N.minFilter!==Fn&&N.minFilter!==Tn?Math.log2(Math.max(D.width,D.height))+1:N.mipmaps!==void 0&&N.mipmaps.length>0?N.mipmaps.length:N.isCompressedTexture&&Array.isArray(N.image)?D.mipmaps.length:1}function T(N){return N===Fn||N===Tp||N===Ch?n.NEAREST:n.LINEAR}function P(N){const D=N.target;D.removeEventListener("dispose",P),b(D),D.isVideoTexture&&h.delete(D)}function B(N){const D=N.target;D.removeEventListener("dispose",B),U(D)}function b(N){const D=i.get(N);if(D.__webglInit===void 0)return;const ne=N.source,Ae=p.get(ne);if(Ae){const _e=Ae[D.__cacheKey];_e.usedTimes--,_e.usedTimes===0&&I(N),Object.keys(Ae).length===0&&p.delete(ne)}i.remove(N)}function I(N){const D=i.get(N);n.deleteTexture(D.__webglTexture);const ne=N.source,Ae=p.get(ne);delete Ae[D.__cacheKey],o.memory.textures--}function U(N){const D=N.texture,ne=i.get(N),Ae=i.get(D);if(Ae.__webglTexture!==void 0&&(n.deleteTexture(Ae.__webglTexture),o.memory.textures--),N.depthTexture&&N.depthTexture.dispose(),N.isWebGLCubeRenderTarget)for(let _e=0;_e<6;_e++){if(Array.isArray(ne.__webglFramebuffer[_e]))for(let ye=0;ye<ne.__webglFramebuffer[_e].length;ye++)n.deleteFramebuffer(ne.__webglFramebuffer[_e][ye]);else n.deleteFramebuffer(ne.__webglFramebuffer[_e]);ne.__webglDepthbuffer&&n.deleteRenderbuffer(ne.__webglDepthbuffer[_e])}else{if(Array.isArray(ne.__webglFramebuffer))for(let _e=0;_e<ne.__webglFramebuffer.length;_e++)n.deleteFramebuffer(ne.__webglFramebuffer[_e]);else n.deleteFramebuffer(ne.__webglFramebuffer);if(ne.__webglDepthbuffer&&n.deleteRenderbuffer(ne.__webglDepthbuffer),ne.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ne.__webglMultisampledFramebuffer),ne.__webglColorRenderbuffer)for(let _e=0;_e<ne.__webglColorRenderbuffer.length;_e++)ne.__webglColorRenderbuffer[_e]&&n.deleteRenderbuffer(ne.__webglColorRenderbuffer[_e]);ne.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ne.__webglDepthRenderbuffer)}if(N.isWebGLMultipleRenderTargets)for(let _e=0,ye=D.length;_e<ye;_e++){const Qe=i.get(D[_e]);Qe.__webglTexture&&(n.deleteTexture(Qe.__webglTexture),o.memory.textures--),i.remove(D[_e])}i.remove(D),i.remove(N)}let K=0;function re(){K=0}function G(){const N=K;return N>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+N+" texture units while this GPU supports only "+r.maxTextures),K+=1,N}function $(N){const D=[];return D.push(N.wrapS),D.push(N.wrapT),D.push(N.wrapR||0),D.push(N.magFilter),D.push(N.minFilter),D.push(N.anisotropy),D.push(N.internalFormat),D.push(N.format),D.push(N.type),D.push(N.generateMipmaps),D.push(N.premultiplyAlpha),D.push(N.flipY),D.push(N.unpackAlignment),D.push(N.colorSpace),D.join()}function Q(N,D){const ne=i.get(N);if(N.isVideoTexture&&Je(N),N.isRenderTargetTexture===!1&&N.version>0&&ne.__version!==N.version){const Ae=N.image;if(Ae===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ae.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Se(ne,N,D);return}}t.bindTexture(n.TEXTURE_2D,ne.__webglTexture,n.TEXTURE0+D)}function se(N,D){const ne=i.get(N);if(N.version>0&&ne.__version!==N.version){Se(ne,N,D);return}t.bindTexture(n.TEXTURE_2D_ARRAY,ne.__webglTexture,n.TEXTURE0+D)}function L(N,D){const ne=i.get(N);if(N.version>0&&ne.__version!==N.version){Se(ne,N,D);return}t.bindTexture(n.TEXTURE_3D,ne.__webglTexture,n.TEXTURE0+D)}function k(N,D){const ne=i.get(N);if(N.version>0&&ne.__version!==N.version){Te(ne,N,D);return}t.bindTexture(n.TEXTURE_CUBE_MAP,ne.__webglTexture,n.TEXTURE0+D)}const z={[ul]:n.REPEAT,[Di]:n.CLAMP_TO_EDGE,[Hh]:n.MIRRORED_REPEAT},j={[Fn]:n.NEAREST,[Tp]:n.NEAREST_MIPMAP_NEAREST,[Ch]:n.NEAREST_MIPMAP_LINEAR,[Tn]:n.LINEAR,[f_]:n.LINEAR_MIPMAP_NEAREST,[wo]:n.LINEAR_MIPMAP_LINEAR},te={[wO]:n.NEVER,[PO]:n.ALWAYS,[MO]:n.LESS,[AT]:n.LEQUAL,[TO]:n.EQUAL,[bO]:n.GEQUAL,[CO]:n.GREATER,[RO]:n.NOTEQUAL};function Z(N,D,ne){if(ne?(n.texParameteri(N,n.TEXTURE_WRAP_S,z[D.wrapS]),n.texParameteri(N,n.TEXTURE_WRAP_T,z[D.wrapT]),(N===n.TEXTURE_3D||N===n.TEXTURE_2D_ARRAY)&&n.texParameteri(N,n.TEXTURE_WRAP_R,z[D.wrapR]),n.texParameteri(N,n.TEXTURE_MAG_FILTER,j[D.magFilter]),n.texParameteri(N,n.TEXTURE_MIN_FILTER,j[D.minFilter])):(n.texParameteri(N,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(N,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(N===n.TEXTURE_3D||N===n.TEXTURE_2D_ARRAY)&&n.texParameteri(N,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(D.wrapS!==Di||D.wrapT!==Di)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(N,n.TEXTURE_MAG_FILTER,T(D.magFilter)),n.texParameteri(N,n.TEXTURE_MIN_FILTER,T(D.minFilter)),D.minFilter!==Fn&&D.minFilter!==Tn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),D.compareFunction&&(n.texParameteri(N,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(N,n.TEXTURE_COMPARE_FUNC,te[D.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Ae=e.get("EXT_texture_filter_anisotropic");if(D.magFilter===Fn||D.minFilter!==Ch&&D.minFilter!==wo||D.type===Fs&&e.has("OES_texture_float_linear")===!1||a===!1&&D.type===Wh&&e.has("OES_texture_half_float_linear")===!1)return;(D.anisotropy>1||i.get(D).__currentAnisotropy)&&(n.texParameterf(N,Ae.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(D.anisotropy,r.getMaxAnisotropy())),i.get(D).__currentAnisotropy=D.anisotropy)}}function ce(N,D){let ne=!1;N.__webglInit===void 0&&(N.__webglInit=!0,D.addEventListener("dispose",P));const Ae=D.source;let _e=p.get(Ae);_e===void 0&&(_e={},p.set(Ae,_e));const ye=$(D);if(ye!==N.__cacheKey){_e[ye]===void 0&&(_e[ye]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,ne=!0),_e[ye].usedTimes++;const Qe=_e[N.__cacheKey];Qe!==void 0&&(_e[N.__cacheKey].usedTimes--,Qe.usedTimes===0&&I(D)),N.__cacheKey=ye,N.__webglTexture=_e[ye].texture}return ne}function Se(N,D,ne){let Ae=n.TEXTURE_2D;(D.isDataArrayTexture||D.isCompressedArrayTexture)&&(Ae=n.TEXTURE_2D_ARRAY),D.isData3DTexture&&(Ae=n.TEXTURE_3D);const _e=ce(N,D),ye=D.source;t.bindTexture(Ae,N.__webglTexture,n.TEXTURE0+ne);const Qe=i.get(ye);if(ye.version!==Qe.__version||_e===!0){t.activeTexture(n.TEXTURE0+ne);const Le=nn.getPrimaries(nn.workingColorSpace),Oe=D.colorSpace===Vr?null:nn.getPrimaries(D.colorSpace),at=D.colorSpace===Vr||Le===Oe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,D.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,D.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,D.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,at);const xt=g(D)&&_(D.image)===!1;let Ee=x(D.image,xt,!1,r.maxTextureSize);Ee=Fe(D,Ee);const Ot=_(Ee)||a,Rt=s.convert(D.format,D.colorSpace);let gt=s.convert(D.type),st=w(D.internalFormat,Rt,gt,D.colorSpace,D.isVideoTexture);Z(Ae,D,Ot);let Ke;const J=D.mipmaps,ge=a&&D.isVideoTexture!==!0&&st!==yT,je=Qe.__version===void 0||_e===!0,He=R(D,Ee,Ot);if(D.isDepthTexture)st=n.DEPTH_COMPONENT,a?D.type===Fs?st=n.DEPTH_COMPONENT32F:D.type===Yo?st=n.DEPTH_COMPONENT24:D.type===el?st=n.DEPTH24_STENCIL8:st=n.DEPTH_COMPONENT16:D.type===Fs&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),D.format===tl&&st===n.DEPTH_COMPONENT&&D.type!==d_&&D.type!==Yo&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),D.type=Yo,gt=s.convert(D.type)),D.format===Vc&&st===n.DEPTH_COMPONENT&&(st=n.DEPTH_STENCIL,D.type!==el&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),D.type=el,gt=s.convert(D.type))),je&&(ge?t.texStorage2D(n.TEXTURE_2D,1,st,Ee.width,Ee.height):t.texImage2D(n.TEXTURE_2D,0,st,Ee.width,Ee.height,0,Rt,gt,null));else if(D.isDataTexture)if(J.length>0&&Ot){ge&&je&&t.texStorage2D(n.TEXTURE_2D,He,st,J[0].width,J[0].height);for(let we=0,X=J.length;we<X;we++)Ke=J[we],ge?t.texSubImage2D(n.TEXTURE_2D,we,0,0,Ke.width,Ke.height,Rt,gt,Ke.data):t.texImage2D(n.TEXTURE_2D,we,st,Ke.width,Ke.height,0,Rt,gt,Ke.data);D.generateMipmaps=!1}else ge?(je&&t.texStorage2D(n.TEXTURE_2D,He,st,Ee.width,Ee.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ee.width,Ee.height,Rt,gt,Ee.data)):t.texImage2D(n.TEXTURE_2D,0,st,Ee.width,Ee.height,0,Rt,gt,Ee.data);else if(D.isCompressedTexture)if(D.isCompressedArrayTexture){ge&&je&&t.texStorage3D(n.TEXTURE_2D_ARRAY,He,st,J[0].width,J[0].height,Ee.depth);for(let we=0,X=J.length;we<X;we++)Ke=J[we],D.format!==fr?Rt!==null?ge?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,we,0,0,0,Ke.width,Ke.height,Ee.depth,Rt,Ke.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,we,st,Ke.width,Ke.height,Ee.depth,0,Ke.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ge?t.texSubImage3D(n.TEXTURE_2D_ARRAY,we,0,0,0,Ke.width,Ke.height,Ee.depth,Rt,gt,Ke.data):t.texImage3D(n.TEXTURE_2D_ARRAY,we,st,Ke.width,Ke.height,Ee.depth,0,Rt,gt,Ke.data)}else{ge&&je&&t.texStorage2D(n.TEXTURE_2D,He,st,J[0].width,J[0].height);for(let we=0,X=J.length;we<X;we++)Ke=J[we],D.format!==fr?Rt!==null?ge?t.compressedTexSubImage2D(n.TEXTURE_2D,we,0,0,Ke.width,Ke.height,Rt,Ke.data):t.compressedTexImage2D(n.TEXTURE_2D,we,st,Ke.width,Ke.height,0,Ke.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ge?t.texSubImage2D(n.TEXTURE_2D,we,0,0,Ke.width,Ke.height,Rt,gt,Ke.data):t.texImage2D(n.TEXTURE_2D,we,st,Ke.width,Ke.height,0,Rt,gt,Ke.data)}else if(D.isDataArrayTexture)ge?(je&&t.texStorage3D(n.TEXTURE_2D_ARRAY,He,st,Ee.width,Ee.height,Ee.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ee.width,Ee.height,Ee.depth,Rt,gt,Ee.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,st,Ee.width,Ee.height,Ee.depth,0,Rt,gt,Ee.data);else if(D.isData3DTexture)ge?(je&&t.texStorage3D(n.TEXTURE_3D,He,st,Ee.width,Ee.height,Ee.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ee.width,Ee.height,Ee.depth,Rt,gt,Ee.data)):t.texImage3D(n.TEXTURE_3D,0,st,Ee.width,Ee.height,Ee.depth,0,Rt,gt,Ee.data);else if(D.isFramebufferTexture){if(je)if(ge)t.texStorage2D(n.TEXTURE_2D,He,st,Ee.width,Ee.height);else{let we=Ee.width,X=Ee.height;for(let Ie=0;Ie<He;Ie++)t.texImage2D(n.TEXTURE_2D,Ie,st,we,X,0,Rt,gt,null),we>>=1,X>>=1}}else if(J.length>0&&Ot){ge&&je&&t.texStorage2D(n.TEXTURE_2D,He,st,J[0].width,J[0].height);for(let we=0,X=J.length;we<X;we++)Ke=J[we],ge?t.texSubImage2D(n.TEXTURE_2D,we,0,0,Rt,gt,Ke):t.texImage2D(n.TEXTURE_2D,we,st,Rt,gt,Ke);D.generateMipmaps=!1}else ge?(je&&t.texStorage2D(n.TEXTURE_2D,He,st,Ee.width,Ee.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Rt,gt,Ee)):t.texImage2D(n.TEXTURE_2D,0,st,Rt,gt,Ee);A(D,Ot)&&S(Ae),Qe.__version=ye.version,D.onUpdate&&D.onUpdate(D)}N.__version=D.version}function Te(N,D,ne){if(D.image.length!==6)return;const Ae=ce(N,D),_e=D.source;t.bindTexture(n.TEXTURE_CUBE_MAP,N.__webglTexture,n.TEXTURE0+ne);const ye=i.get(_e);if(_e.version!==ye.__version||Ae===!0){t.activeTexture(n.TEXTURE0+ne);const Qe=nn.getPrimaries(nn.workingColorSpace),Le=D.colorSpace===Vr?null:nn.getPrimaries(D.colorSpace),Oe=D.colorSpace===Vr||Qe===Le?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,D.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,D.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,D.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Oe);const at=D.isCompressedTexture||D.image[0].isCompressedTexture,xt=D.image[0]&&D.image[0].isDataTexture,Ee=[];for(let we=0;we<6;we++)!at&&!xt?Ee[we]=x(D.image[we],!1,!0,r.maxCubemapSize):Ee[we]=xt?D.image[we].image:D.image[we],Ee[we]=Fe(D,Ee[we]);const Ot=Ee[0],Rt=_(Ot)||a,gt=s.convert(D.format,D.colorSpace),st=s.convert(D.type),Ke=w(D.internalFormat,gt,st,D.colorSpace),J=a&&D.isVideoTexture!==!0,ge=ye.__version===void 0||Ae===!0;let je=R(D,Ot,Rt);Z(n.TEXTURE_CUBE_MAP,D,Rt);let He;if(at){J&&ge&&t.texStorage2D(n.TEXTURE_CUBE_MAP,je,Ke,Ot.width,Ot.height);for(let we=0;we<6;we++){He=Ee[we].mipmaps;for(let X=0;X<He.length;X++){const Ie=He[X];D.format!==fr?gt!==null?J?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,X,0,0,Ie.width,Ie.height,gt,Ie.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,X,Ke,Ie.width,Ie.height,0,Ie.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):J?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,X,0,0,Ie.width,Ie.height,gt,st,Ie.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,X,Ke,Ie.width,Ie.height,0,gt,st,Ie.data)}}}else{He=D.mipmaps,J&&ge&&(He.length>0&&je++,t.texStorage2D(n.TEXTURE_CUBE_MAP,je,Ke,Ee[0].width,Ee[0].height));for(let we=0;we<6;we++)if(xt){J?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,0,0,0,Ee[we].width,Ee[we].height,gt,st,Ee[we].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,0,Ke,Ee[we].width,Ee[we].height,0,gt,st,Ee[we].data);for(let X=0;X<He.length;X++){const Ue=He[X].image[we].image;J?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,X+1,0,0,Ue.width,Ue.height,gt,st,Ue.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,X+1,Ke,Ue.width,Ue.height,0,gt,st,Ue.data)}}else{J?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,0,0,0,gt,st,Ee[we]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,0,Ke,gt,st,Ee[we]);for(let X=0;X<He.length;X++){const Ie=He[X];J?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,X+1,0,0,gt,st,Ie.image[we]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,X+1,Ke,gt,st,Ie.image[we])}}}A(D,Rt)&&S(n.TEXTURE_CUBE_MAP),ye.__version=_e.version,D.onUpdate&&D.onUpdate(D)}N.__version=D.version}function be(N,D,ne,Ae,_e,ye){const Qe=s.convert(ne.format,ne.colorSpace),Le=s.convert(ne.type),Oe=w(ne.internalFormat,Qe,Le,ne.colorSpace);if(!i.get(D).__hasExternalTextures){const xt=Math.max(1,D.width>>ye),Ee=Math.max(1,D.height>>ye);_e===n.TEXTURE_3D||_e===n.TEXTURE_2D_ARRAY?t.texImage3D(_e,ye,Oe,xt,Ee,D.depth,0,Qe,Le,null):t.texImage2D(_e,ye,Oe,xt,Ee,0,Qe,Le,null)}t.bindFramebuffer(n.FRAMEBUFFER,N),pe(D)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Ae,_e,i.get(ne).__webglTexture,0,Me(D)):(_e===n.TEXTURE_2D||_e>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&_e<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Ae,_e,i.get(ne).__webglTexture,ye),t.bindFramebuffer(n.FRAMEBUFFER,null)}function tt(N,D,ne){if(n.bindRenderbuffer(n.RENDERBUFFER,N),D.depthBuffer&&!D.stencilBuffer){let Ae=a===!0?n.DEPTH_COMPONENT24:n.DEPTH_COMPONENT16;if(ne||pe(D)){const _e=D.depthTexture;_e&&_e.isDepthTexture&&(_e.type===Fs?Ae=n.DEPTH_COMPONENT32F:_e.type===Yo&&(Ae=n.DEPTH_COMPONENT24));const ye=Me(D);pe(D)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ye,Ae,D.width,D.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,ye,Ae,D.width,D.height)}else n.renderbufferStorage(n.RENDERBUFFER,Ae,D.width,D.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,N)}else if(D.depthBuffer&&D.stencilBuffer){const Ae=Me(D);ne&&pe(D)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ae,n.DEPTH24_STENCIL8,D.width,D.height):pe(D)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ae,n.DEPTH24_STENCIL8,D.width,D.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,D.width,D.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,N)}else{const Ae=D.isWebGLMultipleRenderTargets===!0?D.texture:[D.texture];for(let _e=0;_e<Ae.length;_e++){const ye=Ae[_e],Qe=s.convert(ye.format,ye.colorSpace),Le=s.convert(ye.type),Oe=w(ye.internalFormat,Qe,Le,ye.colorSpace),at=Me(D);ne&&pe(D)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,at,Oe,D.width,D.height):pe(D)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,at,Oe,D.width,D.height):n.renderbufferStorage(n.RENDERBUFFER,Oe,D.width,D.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function ot(N,D){if(D&&D.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,N),!(D.depthTexture&&D.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(D.depthTexture).__webglTexture||D.depthTexture.image.width!==D.width||D.depthTexture.image.height!==D.height)&&(D.depthTexture.image.width=D.width,D.depthTexture.image.height=D.height,D.depthTexture.needsUpdate=!0),Q(D.depthTexture,0);const Ae=i.get(D.depthTexture).__webglTexture,_e=Me(D);if(D.depthTexture.format===tl)pe(D)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ae,0,_e):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ae,0);else if(D.depthTexture.format===Vc)pe(D)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ae,0,_e):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ae,0);else throw new Error("Unknown depthTexture format")}function De(N){const D=i.get(N),ne=N.isWebGLCubeRenderTarget===!0;if(N.depthTexture&&!D.__autoAllocateDepthBuffer){if(ne)throw new Error("target.depthTexture not supported in Cube render targets");ot(D.__webglFramebuffer,N)}else if(ne){D.__webglDepthbuffer=[];for(let Ae=0;Ae<6;Ae++)t.bindFramebuffer(n.FRAMEBUFFER,D.__webglFramebuffer[Ae]),D.__webglDepthbuffer[Ae]=n.createRenderbuffer(),tt(D.__webglDepthbuffer[Ae],N,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,D.__webglFramebuffer),D.__webglDepthbuffer=n.createRenderbuffer(),tt(D.__webglDepthbuffer,N,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function Re(N,D,ne){const Ae=i.get(N);D!==void 0&&be(Ae.__webglFramebuffer,N,N.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),ne!==void 0&&De(N)}function H(N){const D=N.texture,ne=i.get(N),Ae=i.get(D);N.addEventListener("dispose",B),N.isWebGLMultipleRenderTargets!==!0&&(Ae.__webglTexture===void 0&&(Ae.__webglTexture=n.createTexture()),Ae.__version=D.version,o.memory.textures++);const _e=N.isWebGLCubeRenderTarget===!0,ye=N.isWebGLMultipleRenderTargets===!0,Qe=_(N)||a;if(_e){ne.__webglFramebuffer=[];for(let Le=0;Le<6;Le++)if(a&&D.mipmaps&&D.mipmaps.length>0){ne.__webglFramebuffer[Le]=[];for(let Oe=0;Oe<D.mipmaps.length;Oe++)ne.__webglFramebuffer[Le][Oe]=n.createFramebuffer()}else ne.__webglFramebuffer[Le]=n.createFramebuffer()}else{if(a&&D.mipmaps&&D.mipmaps.length>0){ne.__webglFramebuffer=[];for(let Le=0;Le<D.mipmaps.length;Le++)ne.__webglFramebuffer[Le]=n.createFramebuffer()}else ne.__webglFramebuffer=n.createFramebuffer();if(ye)if(r.drawBuffers){const Le=N.texture;for(let Oe=0,at=Le.length;Oe<at;Oe++){const xt=i.get(Le[Oe]);xt.__webglTexture===void 0&&(xt.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&N.samples>0&&pe(N)===!1){const Le=ye?D:[D];ne.__webglMultisampledFramebuffer=n.createFramebuffer(),ne.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,ne.__webglMultisampledFramebuffer);for(let Oe=0;Oe<Le.length;Oe++){const at=Le[Oe];ne.__webglColorRenderbuffer[Oe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ne.__webglColorRenderbuffer[Oe]);const xt=s.convert(at.format,at.colorSpace),Ee=s.convert(at.type),Ot=w(at.internalFormat,xt,Ee,at.colorSpace,N.isXRRenderTarget===!0),Rt=Me(N);n.renderbufferStorageMultisample(n.RENDERBUFFER,Rt,Ot,N.width,N.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Oe,n.RENDERBUFFER,ne.__webglColorRenderbuffer[Oe])}n.bindRenderbuffer(n.RENDERBUFFER,null),N.depthBuffer&&(ne.__webglDepthRenderbuffer=n.createRenderbuffer(),tt(ne.__webglDepthRenderbuffer,N,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(_e){t.bindTexture(n.TEXTURE_CUBE_MAP,Ae.__webglTexture),Z(n.TEXTURE_CUBE_MAP,D,Qe);for(let Le=0;Le<6;Le++)if(a&&D.mipmaps&&D.mipmaps.length>0)for(let Oe=0;Oe<D.mipmaps.length;Oe++)be(ne.__webglFramebuffer[Le][Oe],N,D,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,Oe);else be(ne.__webglFramebuffer[Le],N,D,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0);A(D,Qe)&&S(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(ye){const Le=N.texture;for(let Oe=0,at=Le.length;Oe<at;Oe++){const xt=Le[Oe],Ee=i.get(xt);t.bindTexture(n.TEXTURE_2D,Ee.__webglTexture),Z(n.TEXTURE_2D,xt,Qe),be(ne.__webglFramebuffer,N,xt,n.COLOR_ATTACHMENT0+Oe,n.TEXTURE_2D,0),A(xt,Qe)&&S(n.TEXTURE_2D)}t.unbindTexture()}else{let Le=n.TEXTURE_2D;if((N.isWebGL3DRenderTarget||N.isWebGLArrayRenderTarget)&&(a?Le=N.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Le,Ae.__webglTexture),Z(Le,D,Qe),a&&D.mipmaps&&D.mipmaps.length>0)for(let Oe=0;Oe<D.mipmaps.length;Oe++)be(ne.__webglFramebuffer[Oe],N,D,n.COLOR_ATTACHMENT0,Le,Oe);else be(ne.__webglFramebuffer,N,D,n.COLOR_ATTACHMENT0,Le,0);A(D,Qe)&&S(Le),t.unbindTexture()}N.depthBuffer&&De(N)}function ve(N){const D=_(N)||a,ne=N.isWebGLMultipleRenderTargets===!0?N.texture:[N.texture];for(let Ae=0,_e=ne.length;Ae<_e;Ae++){const ye=ne[Ae];if(A(ye,D)){const Qe=N.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,Le=i.get(ye).__webglTexture;t.bindTexture(Qe,Le),S(Qe),t.unbindTexture()}}}function de(N){if(a&&N.samples>0&&pe(N)===!1){const D=N.isWebGLMultipleRenderTargets?N.texture:[N.texture],ne=N.width,Ae=N.height;let _e=n.COLOR_BUFFER_BIT;const ye=[],Qe=N.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Le=i.get(N),Oe=N.isWebGLMultipleRenderTargets===!0;if(Oe)for(let at=0;at<D.length;at++)t.bindFramebuffer(n.FRAMEBUFFER,Le.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+at,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Le.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+at,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Le.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Le.__webglFramebuffer);for(let at=0;at<D.length;at++){ye.push(n.COLOR_ATTACHMENT0+at),N.depthBuffer&&ye.push(Qe);const xt=Le.__ignoreDepthValues!==void 0?Le.__ignoreDepthValues:!1;if(xt===!1&&(N.depthBuffer&&(_e|=n.DEPTH_BUFFER_BIT),N.stencilBuffer&&(_e|=n.STENCIL_BUFFER_BIT)),Oe&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Le.__webglColorRenderbuffer[at]),xt===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[Qe]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[Qe])),Oe){const Ee=i.get(D[at]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Ee,0)}n.blitFramebuffer(0,0,ne,Ae,0,0,ne,Ae,_e,n.NEAREST),c&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,ye)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Oe)for(let at=0;at<D.length;at++){t.bindFramebuffer(n.FRAMEBUFFER,Le.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+at,n.RENDERBUFFER,Le.__webglColorRenderbuffer[at]);const xt=i.get(D[at]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Le.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+at,n.TEXTURE_2D,xt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Le.__webglMultisampledFramebuffer)}}function Me(N){return Math.min(r.maxSamples,N.samples)}function pe(N){const D=i.get(N);return a&&N.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&D.__useRenderToTexture!==!1}function Je(N){const D=o.render.frame;h.get(N)!==D&&(h.set(N,D),N.update())}function Fe(N,D){const ne=N.colorSpace,Ae=N.format,_e=N.type;return N.isCompressedTexture===!0||N.isVideoTexture===!0||N.format===gv||ne!==Mo&&ne!==Vr&&(nn.getTransfer(ne)===cn?a===!1?e.has("EXT_sRGB")===!0&&Ae===fr?(N.format=gv,N.minFilter=Tn,N.generateMipmaps=!1):D=ET.sRGBToLinear(D):(Ae!==fr||_e!==vo)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ne)),D}this.allocateTextureUnit=G,this.resetTextureUnits=re,this.setTexture2D=Q,this.setTexture2DArray=se,this.setTexture3D=L,this.setTextureCube=k,this.rebindTextures=Re,this.setupRenderTarget=H,this.updateRenderTargetMipmap=ve,this.updateMultisampleRenderTarget=de,this.setupDepthRenderbuffer=De,this.setupFrameBufferTexture=be,this.useMultisampledRTT=pe}function WO(n,e,t){const i=t.isWebGL2;function r(s,o=Vr){let a;const l=nn.getTransfer(o);if(s===vo)return n.UNSIGNED_BYTE;if(s===fT)return n.UNSIGNED_SHORT_4_4_4_4;if(s===dT)return n.UNSIGNED_SHORT_5_5_5_1;if(s===cO)return n.BYTE;if(s===uO)return n.SHORT;if(s===d_)return n.UNSIGNED_SHORT;if(s===hT)return n.INT;if(s===Yo)return n.UNSIGNED_INT;if(s===Fs)return n.FLOAT;if(s===Wh)return i?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===hO)return n.ALPHA;if(s===fr)return n.RGBA;if(s===fO)return n.LUMINANCE;if(s===dO)return n.LUMINANCE_ALPHA;if(s===tl)return n.DEPTH_COMPONENT;if(s===Vc)return n.DEPTH_STENCIL;if(s===gv)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===pO)return n.RED;if(s===pT)return n.RED_INTEGER;if(s===mO)return n.RG;if(s===mT)return n.RG_INTEGER;if(s===gT)return n.RGBA_INTEGER;if(s===Ty||s===Cy||s===Ry||s===by)if(l===cn)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===Ty)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Cy)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Ry)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===by)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===Ty)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Cy)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Ry)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===by)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===PE||s===IE||s===DE||s===LE)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===PE)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===IE)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===DE)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===LE)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===yT)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===BE||s===NE)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===BE)return l===cn?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===NE)return l===cn?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===FE||s===OE||s===UE||s===kE||s===VE||s===zE||s===GE||s===HE||s===WE||s===jE||s===XE||s===JE||s===KE||s===$E)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===FE)return l===cn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===OE)return l===cn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===UE)return l===cn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===kE)return l===cn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===VE)return l===cn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===zE)return l===cn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===GE)return l===cn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===HE)return l===cn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===WE)return l===cn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===jE)return l===cn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===XE)return l===cn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===JE)return l===cn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===KE)return l===cn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===$E)return l===cn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===Py||s===YE||s===qE)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===Py)return l===cn?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===YE)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===qE)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(s===gO||s===QE||s===ZE||s===ew)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===Py)return a.COMPRESSED_RED_RGTC1_EXT;if(s===QE)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===ZE)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===ew)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===el?i?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:r}}class jO extends mn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class qo extends Ht{constructor(){super(),this.isGroup=!0,this.type="Group"}}const DJ={type:"move"};class SA{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new qo,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new qo,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new F,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new F),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new qo,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new F,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new F),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const x of e.hand.values()){const _=t.getJointPose(x,i),g=this._getHandJoint(c,x);_!==null&&(g.matrix.fromArray(_.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=_.radius),g.visible=_!==null}const h=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],p=h.position.distanceTo(d.position),m=.02,y=.005;c.inputState.pinching&&p>m+y?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&p<=m-y&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(DJ)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new qo;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class LJ extends Po{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,h=null,d=null,p=null,m=null,y=null;const x=t.getContextAttributes();let _=null,g=null;const A=[],S=[],w=new me;let R=null;const T=new mn;T.layers.enable(1),T.viewport=new rn;const P=new mn;P.layers.enable(2),P.viewport=new rn;const B=[T,P],b=new jO;b.layers.enable(1),b.layers.enable(2);let I=null,U=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Z){let ce=A[Z];return ce===void 0&&(ce=new SA,A[Z]=ce),ce.getTargetRaySpace()},this.getControllerGrip=function(Z){let ce=A[Z];return ce===void 0&&(ce=new SA,A[Z]=ce),ce.getGripSpace()},this.getHand=function(Z){let ce=A[Z];return ce===void 0&&(ce=new SA,A[Z]=ce),ce.getHandSpace()};function K(Z){const ce=S.indexOf(Z.inputSource);if(ce===-1)return;const Se=A[ce];Se!==void 0&&(Se.update(Z.inputSource,Z.frame,c||o),Se.dispatchEvent({type:Z.type,data:Z.inputSource}))}function re(){r.removeEventListener("select",K),r.removeEventListener("selectstart",K),r.removeEventListener("selectend",K),r.removeEventListener("squeeze",K),r.removeEventListener("squeezestart",K),r.removeEventListener("squeezeend",K),r.removeEventListener("end",re),r.removeEventListener("inputsourceschange",G);for(let Z=0;Z<A.length;Z++){const ce=S[Z];ce!==null&&(S[Z]=null,A[Z].disconnect(ce))}I=null,U=null,e.setRenderTarget(_),m=null,p=null,d=null,r=null,g=null,te.stop(),i.isPresenting=!1,e.setPixelRatio(R),e.setSize(w.width,w.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Z){s=Z,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Z){a=Z,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(Z){c=Z},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return d},this.getFrame=function(){return y},this.getSession=function(){return r},this.setSession=async function(Z){if(r=Z,r!==null){if(_=e.getRenderTarget(),r.addEventListener("select",K),r.addEventListener("selectstart",K),r.addEventListener("selectend",K),r.addEventListener("squeeze",K),r.addEventListener("squeezestart",K),r.addEventListener("squeezeend",K),r.addEventListener("end",re),r.addEventListener("inputsourceschange",G),x.xrCompatible!==!0&&await t.makeXRCompatible(),R=e.getPixelRatio(),e.getSize(w),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const ce={antialias:r.renderState.layers===void 0?x.antialias:!0,alpha:!0,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(r,t,ce),r.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),g=new Gs(m.framebufferWidth,m.framebufferHeight,{format:fr,type:vo,colorSpace:e.outputColorSpace,stencilBuffer:x.stencil})}else{let ce=null,Se=null,Te=null;x.depth&&(Te=x.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ce=x.stencil?Vc:tl,Se=x.stencil?el:Yo);const be={colorFormat:t.RGBA8,depthFormat:Te,scaleFactor:s};d=new XRWebGLBinding(r,t),p=d.createProjectionLayer(be),r.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),g=new Gs(p.textureWidth,p.textureHeight,{format:fr,type:vo,depthTexture:new PT(p.textureWidth,p.textureHeight,Se,void 0,void 0,void 0,void 0,void 0,void 0,ce),stencilBuffer:x.stencil,colorSpace:e.outputColorSpace,samples:x.antialias?4:0});const tt=e.properties.get(g);tt.__ignoreDepthValues=p.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await r.requestReferenceSpace(a),te.setContext(r),te.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function G(Z){for(let ce=0;ce<Z.removed.length;ce++){const Se=Z.removed[ce],Te=S.indexOf(Se);Te>=0&&(S[Te]=null,A[Te].disconnect(Se))}for(let ce=0;ce<Z.added.length;ce++){const Se=Z.added[ce];let Te=S.indexOf(Se);if(Te===-1){for(let tt=0;tt<A.length;tt++)if(tt>=S.length){S.push(Se),Te=tt;break}else if(S[tt]===null){S[tt]=Se,Te=tt;break}if(Te===-1)break}const be=A[Te];be&&be.connect(Se)}}const $=new F,Q=new F;function se(Z,ce,Se){$.setFromMatrixPosition(ce.matrixWorld),Q.setFromMatrixPosition(Se.matrixWorld);const Te=$.distanceTo(Q),be=ce.projectionMatrix.elements,tt=Se.projectionMatrix.elements,ot=be[14]/(be[10]-1),De=be[14]/(be[10]+1),Re=(be[9]+1)/be[5],H=(be[9]-1)/be[5],ve=(be[8]-1)/be[0],de=(tt[8]+1)/tt[0],Me=ot*ve,pe=ot*de,Je=Te/(-ve+de),Fe=Je*-ve;ce.matrixWorld.decompose(Z.position,Z.quaternion,Z.scale),Z.translateX(Fe),Z.translateZ(Je),Z.matrixWorld.compose(Z.position,Z.quaternion,Z.scale),Z.matrixWorldInverse.copy(Z.matrixWorld).invert();const N=ot+Je,D=De+Je,ne=Me-Fe,Ae=pe+(Te-Fe),_e=Re*De/D*N,ye=H*De/D*N;Z.projectionMatrix.makePerspective(ne,Ae,_e,ye,N,D),Z.projectionMatrixInverse.copy(Z.projectionMatrix).invert()}function L(Z,ce){ce===null?Z.matrixWorld.copy(Z.matrix):Z.matrixWorld.multiplyMatrices(ce.matrixWorld,Z.matrix),Z.matrixWorldInverse.copy(Z.matrixWorld).invert()}this.updateCamera=function(Z){if(r===null)return;b.near=P.near=T.near=Z.near,b.far=P.far=T.far=Z.far,(I!==b.near||U!==b.far)&&(r.updateRenderState({depthNear:b.near,depthFar:b.far}),I=b.near,U=b.far);const ce=Z.parent,Se=b.cameras;L(b,ce);for(let Te=0;Te<Se.length;Te++)L(Se[Te],ce);Se.length===2?se(b,T,P):b.projectionMatrix.copy(T.projectionMatrix),k(Z,b,ce)};function k(Z,ce,Se){Se===null?Z.matrix.copy(ce.matrixWorld):(Z.matrix.copy(Se.matrixWorld),Z.matrix.invert(),Z.matrix.multiply(ce.matrixWorld)),Z.matrix.decompose(Z.position,Z.quaternion,Z.scale),Z.updateMatrixWorld(!0),Z.projectionMatrix.copy(ce.projectionMatrix),Z.projectionMatrixInverse.copy(ce.projectionMatrixInverse),Z.isPerspectiveCamera&&(Z.fov=Jh*2*Math.atan(1/Z.projectionMatrix.elements[5]),Z.zoom=1)}this.getCamera=function(){return b},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(Z){l=Z,p!==null&&(p.fixedFoveation=Z),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=Z)};let z=null;function j(Z,ce){if(h=ce.getViewerPose(c||o),y=ce,h!==null){const Se=h.views;m!==null&&(e.setRenderTargetFramebuffer(g,m.framebuffer),e.setRenderTarget(g));let Te=!1;Se.length!==b.cameras.length&&(b.cameras.length=0,Te=!0);for(let be=0;be<Se.length;be++){const tt=Se[be];let ot=null;if(m!==null)ot=m.getViewport(tt);else{const Re=d.getViewSubImage(p,tt);ot=Re.viewport,be===0&&(e.setRenderTargetTextures(g,Re.colorTexture,p.ignoreDepthValues?void 0:Re.depthStencilTexture),e.setRenderTarget(g))}let De=B[be];De===void 0&&(De=new mn,De.layers.enable(be),De.viewport=new rn,B[be]=De),De.matrix.fromArray(tt.transform.matrix),De.matrix.decompose(De.position,De.quaternion,De.scale),De.projectionMatrix.fromArray(tt.projectionMatrix),De.projectionMatrixInverse.copy(De.projectionMatrix).invert(),De.viewport.set(ot.x,ot.y,ot.width,ot.height),be===0&&(b.matrix.copy(De.matrix),b.matrix.decompose(b.position,b.quaternion,b.scale)),Te===!0&&b.cameras.push(De)}}for(let Se=0;Se<A.length;Se++){const Te=S[Se],be=A[Se];Te!==null&&be!==void 0&&be.update(Te,ce,c||o)}z&&z(Z,ce),ce.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:ce}),y=null}const te=new UO;te.setAnimationLoop(j),this.setAnimationLoop=function(Z){z=Z},this.dispose=function(){}}}function BJ(n,e){function t(_,g){_.matrixAutoUpdate===!0&&_.updateMatrix(),g.value.copy(_.matrix)}function i(_,g){g.color.getRGB(_.fogColor.value,FO(n)),g.isFog?(_.fogNear.value=g.near,_.fogFar.value=g.far):g.isFogExp2&&(_.fogDensity.value=g.density)}function r(_,g,A,S,w){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(_,g):g.isMeshToonMaterial?(s(_,g),d(_,g)):g.isMeshPhongMaterial?(s(_,g),h(_,g)):g.isMeshStandardMaterial?(s(_,g),p(_,g),g.isMeshPhysicalMaterial&&m(_,g,w)):g.isMeshMatcapMaterial?(s(_,g),y(_,g)):g.isMeshDepthMaterial?s(_,g):g.isMeshDistanceMaterial?(s(_,g),x(_,g)):g.isMeshNormalMaterial?s(_,g):g.isLineBasicMaterial?(o(_,g),g.isLineDashedMaterial&&a(_,g)):g.isPointsMaterial?l(_,g,A,S):g.isSpriteMaterial?c(_,g):g.isShadowMaterial?(_.color.value.copy(g.color),_.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(_,g){_.opacity.value=g.opacity,g.color&&_.diffuse.value.copy(g.color),g.emissive&&_.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(_.map.value=g.map,t(g.map,_.mapTransform)),g.alphaMap&&(_.alphaMap.value=g.alphaMap,t(g.alphaMap,_.alphaMapTransform)),g.bumpMap&&(_.bumpMap.value=g.bumpMap,t(g.bumpMap,_.bumpMapTransform),_.bumpScale.value=g.bumpScale,g.side===gr&&(_.bumpScale.value*=-1)),g.normalMap&&(_.normalMap.value=g.normalMap,t(g.normalMap,_.normalMapTransform),_.normalScale.value.copy(g.normalScale),g.side===gr&&_.normalScale.value.negate()),g.displacementMap&&(_.displacementMap.value=g.displacementMap,t(g.displacementMap,_.displacementMapTransform),_.displacementScale.value=g.displacementScale,_.displacementBias.value=g.displacementBias),g.emissiveMap&&(_.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,_.emissiveMapTransform)),g.specularMap&&(_.specularMap.value=g.specularMap,t(g.specularMap,_.specularMapTransform)),g.alphaTest>0&&(_.alphaTest.value=g.alphaTest);const A=e.get(g).envMap;if(A&&(_.envMap.value=A,_.flipEnvMap.value=A.isCubeTexture&&A.isRenderTargetTexture===!1?-1:1,_.reflectivity.value=g.reflectivity,_.ior.value=g.ior,_.refractionRatio.value=g.refractionRatio),g.lightMap){_.lightMap.value=g.lightMap;const S=n._useLegacyLights===!0?Math.PI:1;_.lightMapIntensity.value=g.lightMapIntensity*S,t(g.lightMap,_.lightMapTransform)}g.aoMap&&(_.aoMap.value=g.aoMap,_.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,_.aoMapTransform))}function o(_,g){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity,g.map&&(_.map.value=g.map,t(g.map,_.mapTransform))}function a(_,g){_.dashSize.value=g.dashSize,_.totalSize.value=g.dashSize+g.gapSize,_.scale.value=g.scale}function l(_,g,A,S){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity,_.size.value=g.size*A,_.scale.value=S*.5,g.map&&(_.map.value=g.map,t(g.map,_.uvTransform)),g.alphaMap&&(_.alphaMap.value=g.alphaMap,t(g.alphaMap,_.alphaMapTransform)),g.alphaTest>0&&(_.alphaTest.value=g.alphaTest)}function c(_,g){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity,_.rotation.value=g.rotation,g.map&&(_.map.value=g.map,t(g.map,_.mapTransform)),g.alphaMap&&(_.alphaMap.value=g.alphaMap,t(g.alphaMap,_.alphaMapTransform)),g.alphaTest>0&&(_.alphaTest.value=g.alphaTest)}function h(_,g){_.specular.value.copy(g.specular),_.shininess.value=Math.max(g.shininess,1e-4)}function d(_,g){g.gradientMap&&(_.gradientMap.value=g.gradientMap)}function p(_,g){_.metalness.value=g.metalness,g.metalnessMap&&(_.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,_.metalnessMapTransform)),_.roughness.value=g.roughness,g.roughnessMap&&(_.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,_.roughnessMapTransform)),e.get(g).envMap&&(_.envMapIntensity.value=g.envMapIntensity)}function m(_,g,A){_.ior.value=g.ior,g.sheen>0&&(_.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),_.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(_.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,_.sheenColorMapTransform)),g.sheenRoughnessMap&&(_.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,_.sheenRoughnessMapTransform))),g.clearcoat>0&&(_.clearcoat.value=g.clearcoat,_.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(_.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,_.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,_.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(_.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,_.clearcoatNormalMapTransform),_.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===gr&&_.clearcoatNormalScale.value.negate())),g.iridescence>0&&(_.iridescence.value=g.iridescence,_.iridescenceIOR.value=g.iridescenceIOR,_.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],_.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(_.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,_.iridescenceMapTransform)),g.iridescenceThicknessMap&&(_.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,_.iridescenceThicknessMapTransform))),g.transmission>0&&(_.transmission.value=g.transmission,_.transmissionSamplerMap.value=A.texture,_.transmissionSamplerSize.value.set(A.width,A.height),g.transmissionMap&&(_.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,_.transmissionMapTransform)),_.thickness.value=g.thickness,g.thicknessMap&&(_.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,_.thicknessMapTransform)),_.attenuationDistance.value=g.attenuationDistance,_.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(_.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(_.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,_.anisotropyMapTransform))),_.specularIntensity.value=g.specularIntensity,_.specularColor.value.copy(g.specularColor),g.specularColorMap&&(_.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,_.specularColorMapTransform)),g.specularIntensityMap&&(_.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,_.specularIntensityMapTransform))}function y(_,g){g.matcap&&(_.matcap.value=g.matcap)}function x(_,g){const A=e.get(g).light;_.referencePosition.value.setFromMatrixPosition(A.matrixWorld),_.nearDistance.value=A.shadow.camera.near,_.farDistance.value=A.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function NJ(n,e,t,i){let r={},s={},o=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(A,S){const w=S.program;i.uniformBlockBinding(A,w)}function c(A,S){let w=r[A.id];w===void 0&&(y(A),w=h(A),r[A.id]=w,A.addEventListener("dispose",_));const R=S.program;i.updateUBOMapping(A,R);const T=e.render.frame;s[A.id]!==T&&(p(A),s[A.id]=T)}function h(A){const S=d();A.__bindingPointIndex=S;const w=n.createBuffer(),R=A.__size,T=A.usage;return n.bindBuffer(n.UNIFORM_BUFFER,w),n.bufferData(n.UNIFORM_BUFFER,R,T),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,S,w),w}function d(){for(let A=0;A<a;A++)if(o.indexOf(A)===-1)return o.push(A),A;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(A){const S=r[A.id],w=A.uniforms,R=A.__cache;n.bindBuffer(n.UNIFORM_BUFFER,S);for(let T=0,P=w.length;T<P;T++){const B=Array.isArray(w[T])?w[T]:[w[T]];for(let b=0,I=B.length;b<I;b++){const U=B[b];if(m(U,T,b,R)===!0){const K=U.__offset,re=Array.isArray(U.value)?U.value:[U.value];let G=0;for(let $=0;$<re.length;$++){const Q=re[$],se=x(Q);typeof Q=="number"||typeof Q=="boolean"?(U.__data[0]=Q,n.bufferSubData(n.UNIFORM_BUFFER,K+G,U.__data)):Q.isMatrix3?(U.__data[0]=Q.elements[0],U.__data[1]=Q.elements[1],U.__data[2]=Q.elements[2],U.__data[3]=0,U.__data[4]=Q.elements[3],U.__data[5]=Q.elements[4],U.__data[6]=Q.elements[5],U.__data[7]=0,U.__data[8]=Q.elements[6],U.__data[9]=Q.elements[7],U.__data[10]=Q.elements[8],U.__data[11]=0):(Q.toArray(U.__data,G),G+=se.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,K,U.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function m(A,S,w,R){const T=A.value,P=S+"_"+w;if(R[P]===void 0)return typeof T=="number"||typeof T=="boolean"?R[P]=T:R[P]=T.clone(),!0;{const B=R[P];if(typeof T=="number"||typeof T=="boolean"){if(B!==T)return R[P]=T,!0}else if(B.equals(T)===!1)return B.copy(T),!0}return!1}function y(A){const S=A.uniforms;let w=0;const R=16;for(let P=0,B=S.length;P<B;P++){const b=Array.isArray(S[P])?S[P]:[S[P]];for(let I=0,U=b.length;I<U;I++){const K=b[I],re=Array.isArray(K.value)?K.value:[K.value];for(let G=0,$=re.length;G<$;G++){const Q=re[G],se=x(Q),L=w%R;L!==0&&R-L<se.boundary&&(w+=R-L),K.__data=new Float32Array(se.storage/Float32Array.BYTES_PER_ELEMENT),K.__offset=w,w+=se.storage}}}const T=w%R;return T>0&&(w+=R-T),A.__size=w,A.__cache={},this}function x(A){const S={boundary:0,storage:0};return typeof A=="number"||typeof A=="boolean"?(S.boundary=4,S.storage=4):A.isVector2?(S.boundary=8,S.storage=8):A.isVector3||A.isColor?(S.boundary=16,S.storage=12):A.isVector4?(S.boundary=16,S.storage=16):A.isMatrix3?(S.boundary=48,S.storage=48):A.isMatrix4?(S.boundary=64,S.storage=64):A.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",A),S}function _(A){const S=A.target;S.removeEventListener("dispose",_);const w=o.indexOf(S.__bindingPointIndex);o.splice(w,1),n.deleteBuffer(r[S.id]),delete r[S.id],delete s[S.id]}function g(){for(const A in r)n.deleteBuffer(r[A]);o=[],r={},s={}}return{bind:l,update:c,dispose:g}}class LT{constructor(e={}){const{canvas:t=LO(),context:i=null,depth:r=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:d=!1}=e;this.isWebGLRenderer=!0;let p;i!==null?p=i.getContextAttributes().alpha:p=o;const m=new Uint32Array(4),y=new Int32Array(4);let x=null,_=null;const g=[],A=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=oi,this._useLegacyLights=!1,this.toneMapping=yo,this.toneMappingExposure=1;const S=this;let w=!1,R=0,T=0,P=null,B=-1,b=null;const I=new rn,U=new rn;let K=null;const re=new ke(0);let G=0,$=t.width,Q=t.height,se=1,L=null,k=null;const z=new rn(0,0,$,Q),j=new rn(0,0,$,Q);let te=!1;const Z=new fm;let ce=!1,Se=!1,Te=null;const be=new ht,tt=new me,ot=new F,De={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Re(){return P===null?se:1}let H=i;function ve(O,ie){for(let le=0;le<O.length;le++){const ue=O[le],ae=t.getContext(ue,ie);if(ae!==null)return ae}return null}try{const O={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:h,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${pf}`),t.addEventListener("webglcontextlost",we,!1),t.addEventListener("webglcontextrestored",X,!1),t.addEventListener("webglcontextcreationerror",Ie,!1),H===null){const ie=["webgl2","webgl","experimental-webgl"];if(S.isWebGL1Renderer===!0&&ie.shift(),H=ve(ie,O),H===null)throw ve(ie)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&H instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),H.getShaderPrecisionFormat===void 0&&(H.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(O){throw console.error("THREE.WebGLRenderer: "+O.message),O}let de,Me,pe,Je,Fe,N,D,ne,Ae,_e,ye,Qe,Le,Oe,at,xt,Ee,Ot,Rt,gt,st,Ke,J,ge;function je(){de=new $7(H),Me=new H7(H,de,e),de.init(Me),Ke=new WO(H,de,Me),pe=new PJ(H,de,Me),Je=new Q7(H),Fe=new vJ,N=new IJ(H,de,pe,Fe,Me,Ke,Je),D=new j7(S),ne=new K7(S),Ae=new oW(H,Me),J=new z7(H,de,Ae,Me),_e=new Y7(H,Ae,Je,J),ye=new nX(H,_e,Ae,Je),Rt=new tX(H,Me,N),xt=new W7(Fe),Qe=new yJ(S,D,ne,de,Me,J,xt),Le=new BJ(S,Fe),Oe=new xJ,at=new TJ(de,Me),Ot=new V7(S,D,ne,pe,ye,p,l),Ee=new bJ(S,ye,Me),ge=new NJ(H,Je,Me,pe),gt=new G7(H,de,Je,Me),st=new q7(H,de,Je,Me),Je.programs=Qe.programs,S.capabilities=Me,S.extensions=de,S.properties=Fe,S.renderLists=Oe,S.shadowMap=Ee,S.state=pe,S.info=Je}je();const He=new LJ(S,H);this.xr=He,this.getContext=function(){return H},this.getContextAttributes=function(){return H.getContextAttributes()},this.forceContextLoss=function(){const O=de.get("WEBGL_lose_context");O&&O.loseContext()},this.forceContextRestore=function(){const O=de.get("WEBGL_lose_context");O&&O.restoreContext()},this.getPixelRatio=function(){return se},this.setPixelRatio=function(O){O!==void 0&&(se=O,this.setSize($,Q,!1))},this.getSize=function(O){return O.set($,Q)},this.setSize=function(O,ie,le=!0){if(He.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}$=O,Q=ie,t.width=Math.floor(O*se),t.height=Math.floor(ie*se),le===!0&&(t.style.width=O+"px",t.style.height=ie+"px"),this.setViewport(0,0,O,ie)},this.getDrawingBufferSize=function(O){return O.set($*se,Q*se).floor()},this.setDrawingBufferSize=function(O,ie,le){$=O,Q=ie,se=le,t.width=Math.floor(O*le),t.height=Math.floor(ie*le),this.setViewport(0,0,O,ie)},this.getCurrentViewport=function(O){return O.copy(I)},this.getViewport=function(O){return O.copy(z)},this.setViewport=function(O,ie,le,ue){O.isVector4?z.set(O.x,O.y,O.z,O.w):z.set(O,ie,le,ue),pe.viewport(I.copy(z).multiplyScalar(se).floor())},this.getScissor=function(O){return O.copy(j)},this.setScissor=function(O,ie,le,ue){O.isVector4?j.set(O.x,O.y,O.z,O.w):j.set(O,ie,le,ue),pe.scissor(U.copy(j).multiplyScalar(se).floor())},this.getScissorTest=function(){return te},this.setScissorTest=function(O){pe.setScissorTest(te=O)},this.setOpaqueSort=function(O){L=O},this.setTransparentSort=function(O){k=O},this.getClearColor=function(O){return O.copy(Ot.getClearColor())},this.setClearColor=function(){Ot.setClearColor.apply(Ot,arguments)},this.getClearAlpha=function(){return Ot.getClearAlpha()},this.setClearAlpha=function(){Ot.setClearAlpha.apply(Ot,arguments)},this.clear=function(O=!0,ie=!0,le=!0){let ue=0;if(O){let ae=!1;if(P!==null){const Xe=P.texture.format;ae=Xe===gT||Xe===mT||Xe===pT}if(ae){const Xe=P.texture.type,it=Xe===vo||Xe===Yo||Xe===d_||Xe===el||Xe===fT||Xe===dT,ft=Ot.getClearColor(),dt=Ot.getClearAlpha(),At=ft.r,_t=ft.g,St=ft.b;it?(m[0]=At,m[1]=_t,m[2]=St,m[3]=dt,H.clearBufferuiv(H.COLOR,0,m)):(y[0]=At,y[1]=_t,y[2]=St,y[3]=dt,H.clearBufferiv(H.COLOR,0,y))}else ue|=H.COLOR_BUFFER_BIT}ie&&(ue|=H.DEPTH_BUFFER_BIT),le&&(ue|=H.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),H.clear(ue)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",we,!1),t.removeEventListener("webglcontextrestored",X,!1),t.removeEventListener("webglcontextcreationerror",Ie,!1),Oe.dispose(),at.dispose(),Fe.dispose(),D.dispose(),ne.dispose(),ye.dispose(),J.dispose(),ge.dispose(),Qe.dispose(),He.dispose(),He.removeEventListener("sessionstart",vn),He.removeEventListener("sessionend",jt),Te&&(Te.dispose(),Te=null),wi.stop()};function we(O){O.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function X(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const O=Je.autoReset,ie=Ee.enabled,le=Ee.autoUpdate,ue=Ee.needsUpdate,ae=Ee.type;je(),Je.autoReset=O,Ee.enabled=ie,Ee.autoUpdate=le,Ee.needsUpdate=ue,Ee.type=ae}function Ie(O){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",O.statusMessage)}function Ue(O){const ie=O.target;ie.removeEventListener("dispose",Ue),ct(ie)}function ct(O){Ze(O),Fe.remove(O)}function Ze(O){const ie=Fe.get(O).programs;ie!==void 0&&(ie.forEach(function(le){Qe.releaseProgram(le)}),O.isShaderMaterial&&Qe.releaseShaderCache(O))}this.renderBufferDirect=function(O,ie,le,ue,ae,Xe){ie===null&&(ie=De);const it=ae.isMesh&&ae.matrixWorld.determinant()<0,ft=xx(O,ie,le,ue,ae);pe.setMaterial(ue,it);let dt=le.index,At=1;if(ue.wireframe===!0){if(dt=_e.getWireframeAttribute(le),dt===void 0)return;At=2}const _t=le.drawRange,St=le.attributes.position;let En=_t.start*At,Mi=(_t.start+_t.count)*At;Xe!==null&&(En=Math.max(En,Xe.start*At),Mi=Math.min(Mi,(Xe.start+Xe.count)*At)),dt!==null?(En=Math.max(En,0),Mi=Math.min(Mi,dt.count)):St!=null&&(En=Math.max(En,0),Mi=Math.min(Mi,St.count));const fn=Mi-En;if(fn<0||fn===1/0)return;J.setup(ae,ue,ft,le,dt);let fi,pt=gt;if(dt!==null&&(fi=Ae.get(dt),pt=st,pt.setIndex(fi)),ae.isMesh)ue.wireframe===!0?(pe.setLineWidth(ue.wireframeLinewidth*Re()),pt.setMode(H.LINES)):pt.setMode(H.TRIANGLES);else if(ae.isLine){let Ye=ue.linewidth;Ye===void 0&&(Ye=1),pe.setLineWidth(Ye*Re()),ae.isLineSegments?pt.setMode(H.LINES):ae.isLineLoop?pt.setMode(H.LINE_LOOP):pt.setMode(H.LINE_STRIP)}else ae.isPoints?pt.setMode(H.POINTS):ae.isSprite&&pt.setMode(H.TRIANGLES);if(ae.isBatchedMesh)pt.renderMultiDraw(ae._multiDrawStarts,ae._multiDrawCounts,ae._multiDrawCount);else if(ae.isInstancedMesh)pt.renderInstances(En,fn,ae.count);else if(le.isInstancedBufferGeometry){const Ye=le._maxInstanceCount!==void 0?le._maxInstanceCount:1/0,es=Math.min(le.instanceCount,Ye);pt.renderInstances(En,fn,es)}else pt.render(En,fn)};function Ft(O,ie,le){O.transparent===!0&&O.side===vs&&O.forceSinglePass===!1?(O.side=gr,O.needsUpdate=!0,su(O,ie,le),O.side=Eo,O.needsUpdate=!0,su(O,ie,le),O.side=vs):su(O,ie,le)}this.compile=function(O,ie,le=null){le===null&&(le=O),_=at.get(le),_.init(),A.push(_),le.traverseVisible(function(ae){ae.isLight&&ae.layers.test(ie.layers)&&(_.pushLight(ae),ae.castShadow&&_.pushShadow(ae))}),O!==le&&O.traverseVisible(function(ae){ae.isLight&&ae.layers.test(ie.layers)&&(_.pushLight(ae),ae.castShadow&&_.pushShadow(ae))}),_.setupLights(S._useLegacyLights);const ue=new Set;return O.traverse(function(ae){const Xe=ae.material;if(Xe)if(Array.isArray(Xe))for(let it=0;it<Xe.length;it++){const ft=Xe[it];Ft(ft,le,ae),ue.add(ft)}else Ft(Xe,le,ae),ue.add(Xe)}),A.pop(),_=null,ue},this.compileAsync=function(O,ie,le=null){const ue=this.compile(O,ie,le);return new Promise(ae=>{function Xe(){if(ue.forEach(function(it){Fe.get(it).currentProgram.isReady()&&ue.delete(it)}),ue.size===0){ae(O);return}setTimeout(Xe,10)}de.get("KHR_parallel_shader_compile")!==null?Xe():setTimeout(Xe,10)})};let kt=null;function an(O){kt&&kt(O)}function vn(){wi.stop()}function jt(){wi.start()}const wi=new UO;wi.setAnimationLoop(an),typeof self<"u"&&wi.setContext(self),this.setAnimationLoop=function(O){kt=O,He.setAnimationLoop(O),O===null?wi.stop():wi.start()},He.addEventListener("sessionstart",vn),He.addEventListener("sessionend",jt),this.render=function(O,ie){if(ie!==void 0&&ie.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(w===!0)return;O.matrixWorldAutoUpdate===!0&&O.updateMatrixWorld(),ie.parent===null&&ie.matrixWorldAutoUpdate===!0&&ie.updateMatrixWorld(),He.enabled===!0&&He.isPresenting===!0&&(He.cameraAutoUpdate===!0&&He.updateCamera(ie),ie=He.getCamera()),O.isScene===!0&&O.onBeforeRender(S,O,ie,P),_=at.get(O,A.length),_.init(),A.push(_),be.multiplyMatrices(ie.projectionMatrix,ie.matrixWorldInverse),Z.setFromProjectionMatrix(be),Se=this.localClippingEnabled,ce=xt.init(this.clippingPlanes,Se),x=Oe.get(O,g.length),x.init(),g.push(x),Zr(O,ie,0,S.sortObjects),x.finish(),S.sortObjects===!0&&x.sort(L,k),this.info.render.frame++,ce===!0&&xt.beginShadows();const le=_.state.shadowsArray;if(Ee.render(le,O,ie),ce===!0&&xt.endShadows(),this.info.autoReset===!0&&this.info.reset(),Ot.render(x,O),_.setupLights(S._useLegacyLights),ie.isArrayCamera){const ue=ie.cameras;for(let ae=0,Xe=ue.length;ae<Xe;ae++){const it=ue[ae];Tf(x,O,it,it.viewport)}}else Tf(x,O,ie);P!==null&&(N.updateMultisampleRenderTarget(P),N.updateRenderTargetMipmap(P)),O.isScene===!0&&O.onAfterRender(S,O,ie),J.resetDefaultState(),B=-1,b=null,A.pop(),A.length>0?_=A[A.length-1]:_=null,g.pop(),g.length>0?x=g[g.length-1]:x=null};function Zr(O,ie,le,ue){if(O.visible===!1)return;if(O.layers.test(ie.layers)){if(O.isGroup)le=O.renderOrder;else if(O.isLOD)O.autoUpdate===!0&&O.update(ie);else if(O.isLight)_.pushLight(O),O.castShadow&&_.pushShadow(O);else if(O.isSprite){if(!O.frustumCulled||Z.intersectsSprite(O)){ue&&ot.setFromMatrixPosition(O.matrixWorld).applyMatrix4(be);const it=ye.update(O),ft=O.material;ft.visible&&x.push(O,it,ft,le,ot.z,null)}}else if((O.isMesh||O.isLine||O.isPoints)&&(!O.frustumCulled||Z.intersectsObject(O))){const it=ye.update(O),ft=O.material;if(ue&&(O.boundingSphere!==void 0?(O.boundingSphere===null&&O.computeBoundingSphere(),ot.copy(O.boundingSphere.center)):(it.boundingSphere===null&&it.computeBoundingSphere(),ot.copy(it.boundingSphere.center)),ot.applyMatrix4(O.matrixWorld).applyMatrix4(be)),Array.isArray(ft)){const dt=it.groups;for(let At=0,_t=dt.length;At<_t;At++){const St=dt[At],En=ft[St.materialIndex];En&&En.visible&&x.push(O,it,En,le,ot.z,St)}}else ft.visible&&x.push(O,it,ft,le,ot.z,null)}}const Xe=O.children;for(let it=0,ft=Xe.length;it<ft;it++)Zr(Xe[it],ie,le,ue)}function Tf(O,ie,le,ue){const ae=O.opaque,Xe=O.transmissive,it=O.transparent;_.setupLightsView(le),ce===!0&&xt.setGlobalState(S.clippingPlanes,le),Xe.length>0&&Cf(ae,Xe,ie,le),ue&&pe.viewport(I.copy(ue)),ae.length>0&&ru(ae,ie,le),Xe.length>0&&ru(Xe,ie,le),it.length>0&&ru(it,ie,le),pe.buffers.depth.setTest(!0),pe.buffers.depth.setMask(!0),pe.buffers.color.setMask(!0),pe.setPolygonOffset(!1)}function Cf(O,ie,le,ue){if((le.isScene===!0?le.overrideMaterial:null)!==null)return;const Xe=Me.isWebGL2;Te===null&&(Te=new Gs(1,1,{generateMipmaps:!0,type:de.has("EXT_color_buffer_half_float")?Wh:vo,minFilter:wo,samples:Xe?4:0})),S.getDrawingBufferSize(tt),Xe?Te.setSize(tt.x,tt.y):Te.setSize(yv(tt.x),yv(tt.y));const it=S.getRenderTarget();S.setRenderTarget(Te),S.getClearColor(re),G=S.getClearAlpha(),G<1&&S.setClearColor(16777215,.5),S.clear();const ft=S.toneMapping;S.toneMapping=yo,ru(O,le,ue),N.updateMultisampleRenderTarget(Te),N.updateRenderTargetMipmap(Te);let dt=!1;for(let At=0,_t=ie.length;At<_t;At++){const St=ie[At],En=St.object,Mi=St.geometry,fn=St.material,fi=St.group;if(fn.side===vs&&En.layers.test(ue.layers)){const pt=fn.side;fn.side=gr,fn.needsUpdate=!0,pa(En,le,ue,Mi,fn,fi),fn.side=pt,fn.needsUpdate=!0,dt=!0}}dt===!0&&(N.updateMultisampleRenderTarget(Te),N.updateRenderTargetMipmap(Te)),S.setRenderTarget(it),S.setClearColor(re,G),S.toneMapping=ft}function ru(O,ie,le){const ue=ie.isScene===!0?ie.overrideMaterial:null;for(let ae=0,Xe=O.length;ae<Xe;ae++){const it=O[ae],ft=it.object,dt=it.geometry,At=ue===null?it.material:ue,_t=it.group;ft.layers.test(le.layers)&&pa(ft,ie,le,dt,At,_t)}}function pa(O,ie,le,ue,ae,Xe){O.onBeforeRender(S,ie,le,ue,ae,Xe),O.modelViewMatrix.multiplyMatrices(le.matrixWorldInverse,O.matrixWorld),O.normalMatrix.getNormalMatrix(O.modelViewMatrix),ae.onBeforeRender(S,ie,le,ue,O,Xe),ae.transparent===!0&&ae.side===vs&&ae.forceSinglePass===!1?(ae.side=gr,ae.needsUpdate=!0,S.renderBufferDirect(le,ie,ue,ae,O,Xe),ae.side=Eo,ae.needsUpdate=!0,S.renderBufferDirect(le,ie,ue,ae,O,Xe),ae.side=vs):S.renderBufferDirect(le,ie,ue,ae,O,Xe),O.onAfterRender(S,ie,le,ue,ae,Xe)}function su(O,ie,le){ie.isScene!==!0&&(ie=De);const ue=Fe.get(O),ae=_.state.lights,Xe=_.state.shadowsArray,it=ae.state.version,ft=Qe.getParameters(O,ae.state,Xe,ie,le),dt=Qe.getProgramCacheKey(ft);let At=ue.programs;ue.environment=O.isMeshStandardMaterial?ie.environment:null,ue.fog=ie.fog,ue.envMap=(O.isMeshStandardMaterial?ne:D).get(O.envMap||ue.environment),At===void 0&&(O.addEventListener("dispose",Ue),At=new Map,ue.programs=At);let _t=At.get(dt);if(_t!==void 0){if(ue.currentProgram===_t&&ue.lightsStateVersion===it)return jm(O,ft),_t}else ft.uniforms=Qe.getUniforms(O),O.onBuild(le,ft,S),O.onBeforeCompile(ft,S),_t=Qe.acquireProgram(ft,dt),At.set(dt,_t),ue.uniforms=ft.uniforms;const St=ue.uniforms;return(!O.isShaderMaterial&&!O.isRawShaderMaterial||O.clipping===!0)&&(St.clippingPlanes=xt.uniform),jm(O,ft),ue.needsLights=Sx(O),ue.lightsStateVersion=it,ue.needsLights&&(St.ambientLightColor.value=ae.state.ambient,St.lightProbe.value=ae.state.probe,St.directionalLights.value=ae.state.directional,St.directionalLightShadows.value=ae.state.directionalShadow,St.spotLights.value=ae.state.spot,St.spotLightShadows.value=ae.state.spotShadow,St.rectAreaLights.value=ae.state.rectArea,St.ltc_1.value=ae.state.rectAreaLTC1,St.ltc_2.value=ae.state.rectAreaLTC2,St.pointLights.value=ae.state.point,St.pointLightShadows.value=ae.state.pointShadow,St.hemisphereLights.value=ae.state.hemi,St.directionalShadowMap.value=ae.state.directionalShadowMap,St.directionalShadowMatrix.value=ae.state.directionalShadowMatrix,St.spotShadowMap.value=ae.state.spotShadowMap,St.spotLightMatrix.value=ae.state.spotLightMatrix,St.spotLightMap.value=ae.state.spotLightMap,St.pointShadowMap.value=ae.state.pointShadowMap,St.pointShadowMatrix.value=ae.state.pointShadowMatrix),ue.currentProgram=_t,ue.uniformsList=null,_t}function Wm(O){if(O.uniformsList===null){const ie=O.currentProgram.getUniforms();O.uniformsList=Dy.seqWithValue(ie.seq,O.uniforms)}return O.uniformsList}function jm(O,ie){const le=Fe.get(O);le.outputColorSpace=ie.outputColorSpace,le.batching=ie.batching,le.instancing=ie.instancing,le.instancingColor=ie.instancingColor,le.skinning=ie.skinning,le.morphTargets=ie.morphTargets,le.morphNormals=ie.morphNormals,le.morphColors=ie.morphColors,le.morphTargetsCount=ie.morphTargetsCount,le.numClippingPlanes=ie.numClippingPlanes,le.numIntersection=ie.numClipIntersection,le.vertexAlphas=ie.vertexAlphas,le.vertexTangents=ie.vertexTangents,le.toneMapping=ie.toneMapping}function xx(O,ie,le,ue,ae){ie.isScene!==!0&&(ie=De),N.resetTextureUnits();const Xe=ie.fog,it=ue.isMeshStandardMaterial?ie.environment:null,ft=P===null?S.outputColorSpace:P.isXRRenderTarget===!0?P.texture.colorSpace:Mo,dt=(ue.isMeshStandardMaterial?ne:D).get(ue.envMap||it),At=ue.vertexColors===!0&&!!le.attributes.color&&le.attributes.color.itemSize===4,_t=!!le.attributes.tangent&&(!!ue.normalMap||ue.anisotropy>0),St=!!le.morphAttributes.position,En=!!le.morphAttributes.normal,Mi=!!le.morphAttributes.color;let fn=yo;ue.toneMapped&&(P===null||P.isXRRenderTarget===!0)&&(fn=S.toneMapping);const fi=le.morphAttributes.position||le.morphAttributes.normal||le.morphAttributes.color,pt=fi!==void 0?fi.length:0,Ye=Fe.get(ue),es=_.state.lights;if(ce===!0&&(Se===!0||O!==b)){const Ti=O===b&&ue.id===B;xt.setState(ue,O,Ti)}let Bt=!1;ue.version===Ye.__version?(Ye.needsLights&&Ye.lightsStateVersion!==es.state.version||Ye.outputColorSpace!==ft||ae.isBatchedMesh&&Ye.batching===!1||!ae.isBatchedMesh&&Ye.batching===!0||ae.isInstancedMesh&&Ye.instancing===!1||!ae.isInstancedMesh&&Ye.instancing===!0||ae.isSkinnedMesh&&Ye.skinning===!1||!ae.isSkinnedMesh&&Ye.skinning===!0||ae.isInstancedMesh&&Ye.instancingColor===!0&&ae.instanceColor===null||ae.isInstancedMesh&&Ye.instancingColor===!1&&ae.instanceColor!==null||Ye.envMap!==dt||ue.fog===!0&&Ye.fog!==Xe||Ye.numClippingPlanes!==void 0&&(Ye.numClippingPlanes!==xt.numPlanes||Ye.numIntersection!==xt.numIntersection)||Ye.vertexAlphas!==At||Ye.vertexTangents!==_t||Ye.morphTargets!==St||Ye.morphNormals!==En||Ye.morphColors!==Mi||Ye.toneMapping!==fn||Me.isWebGL2===!0&&Ye.morphTargetsCount!==pt)&&(Bt=!0):(Bt=!0,Ye.__version=ue.version);let Dn=Ye.currentProgram;Bt===!0&&(Dn=su(ue,ie,ae));let Ys=!1,ts=!1,di=!1;const Vn=Dn.getUniforms(),qs=Ye.uniforms;if(pe.useProgram(Dn.program)&&(Ys=!0,ts=!0,di=!0),ue.id!==B&&(B=ue.id,ts=!0),Ys||b!==O){Vn.setValue(H,"projectionMatrix",O.projectionMatrix),Vn.setValue(H,"viewMatrix",O.matrixWorldInverse);const Ti=Vn.map.cameraPosition;Ti!==void 0&&Ti.setValue(H,ot.setFromMatrixPosition(O.matrixWorld)),Me.logarithmicDepthBuffer&&Vn.setValue(H,"logDepthBufFC",2/(Math.log(O.far+1)/Math.LN2)),(ue.isMeshPhongMaterial||ue.isMeshToonMaterial||ue.isMeshLambertMaterial||ue.isMeshBasicMaterial||ue.isMeshStandardMaterial||ue.isShaderMaterial)&&Vn.setValue(H,"isOrthographic",O.isOrthographicCamera===!0),b!==O&&(b=O,ts=!0,di=!0)}if(ae.isSkinnedMesh){Vn.setOptional(H,ae,"bindMatrix"),Vn.setOptional(H,ae,"bindMatrixInverse");const Ti=ae.skeleton;Ti&&(Me.floatVertexTextures?(Ti.boneTexture===null&&Ti.computeBoneTexture(),Vn.setValue(H,"boneTexture",Ti.boneTexture,N)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}ae.isBatchedMesh&&(Vn.setOptional(H,ae,"batchingTexture"),Vn.setValue(H,"batchingTexture",ae._matricesTexture,N));const ou=le.morphAttributes;if((ou.position!==void 0||ou.normal!==void 0||ou.color!==void 0&&Me.isWebGL2===!0)&&Rt.update(ae,le,Dn),(ts||Ye.receiveShadow!==ae.receiveShadow)&&(Ye.receiveShadow=ae.receiveShadow,Vn.setValue(H,"receiveShadow",ae.receiveShadow)),ue.isMeshGouraudMaterial&&ue.envMap!==null&&(qs.envMap.value=dt,qs.flipEnvMap.value=dt.isCubeTexture&&dt.isRenderTargetTexture===!1?-1:1),ts&&(Vn.setValue(H,"toneMappingExposure",S.toneMappingExposure),Ye.needsLights&&Ax(qs,di),Xe&&ue.fog===!0&&Le.refreshFogUniforms(qs,Xe),Le.refreshMaterialUniforms(qs,ue,se,Q,Te),Dy.upload(H,Wm(Ye),qs,N)),ue.isShaderMaterial&&ue.uniformsNeedUpdate===!0&&(Dy.upload(H,Wm(Ye),qs,N),ue.uniformsNeedUpdate=!1),ue.isSpriteMaterial&&Vn.setValue(H,"center",ae.center),Vn.setValue(H,"modelViewMatrix",ae.modelViewMatrix),Vn.setValue(H,"normalMatrix",ae.normalMatrix),Vn.setValue(H,"modelMatrix",ae.matrixWorld),ue.isShaderMaterial||ue.isRawShaderMaterial){const Ti=ue.uniformsGroups;for(let au=0,Dr=Ti.length;au<Dr;au++)if(Me.isWebGL2){const Xm=Ti[au];ge.update(Xm,Dn),ge.bind(Xm,Dn)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Dn}function Ax(O,ie){O.ambientLightColor.needsUpdate=ie,O.lightProbe.needsUpdate=ie,O.directionalLights.needsUpdate=ie,O.directionalLightShadows.needsUpdate=ie,O.pointLights.needsUpdate=ie,O.pointLightShadows.needsUpdate=ie,O.spotLights.needsUpdate=ie,O.spotLightShadows.needsUpdate=ie,O.rectAreaLights.needsUpdate=ie,O.hemisphereLights.needsUpdate=ie}function Sx(O){return O.isMeshLambertMaterial||O.isMeshToonMaterial||O.isMeshPhongMaterial||O.isMeshStandardMaterial||O.isShadowMaterial||O.isShaderMaterial&&O.lights===!0}this.getActiveCubeFace=function(){return R},this.getActiveMipmapLevel=function(){return T},this.getRenderTarget=function(){return P},this.setRenderTargetTextures=function(O,ie,le){Fe.get(O.texture).__webglTexture=ie,Fe.get(O.depthTexture).__webglTexture=le;const ue=Fe.get(O);ue.__hasExternalTextures=!0,ue.__hasExternalTextures&&(ue.__autoAllocateDepthBuffer=le===void 0,ue.__autoAllocateDepthBuffer||de.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ue.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(O,ie){const le=Fe.get(O);le.__webglFramebuffer=ie,le.__useDefaultFramebuffer=ie===void 0},this.setRenderTarget=function(O,ie=0,le=0){P=O,R=ie,T=le;let ue=!0,ae=null,Xe=!1,it=!1;if(O){const dt=Fe.get(O);dt.__useDefaultFramebuffer!==void 0?(pe.bindFramebuffer(H.FRAMEBUFFER,null),ue=!1):dt.__webglFramebuffer===void 0?N.setupRenderTarget(O):dt.__hasExternalTextures&&N.rebindTextures(O,Fe.get(O.texture).__webglTexture,Fe.get(O.depthTexture).__webglTexture);const At=O.texture;(At.isData3DTexture||At.isDataArrayTexture||At.isCompressedArrayTexture)&&(it=!0);const _t=Fe.get(O).__webglFramebuffer;O.isWebGLCubeRenderTarget?(Array.isArray(_t[ie])?ae=_t[ie][le]:ae=_t[ie],Xe=!0):Me.isWebGL2&&O.samples>0&&N.useMultisampledRTT(O)===!1?ae=Fe.get(O).__webglMultisampledFramebuffer:Array.isArray(_t)?ae=_t[le]:ae=_t,I.copy(O.viewport),U.copy(O.scissor),K=O.scissorTest}else I.copy(z).multiplyScalar(se).floor(),U.copy(j).multiplyScalar(se).floor(),K=te;if(pe.bindFramebuffer(H.FRAMEBUFFER,ae)&&Me.drawBuffers&&ue&&pe.drawBuffers(O,ae),pe.viewport(I),pe.scissor(U),pe.setScissorTest(K),Xe){const dt=Fe.get(O.texture);H.framebufferTexture2D(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,H.TEXTURE_CUBE_MAP_POSITIVE_X+ie,dt.__webglTexture,le)}else if(it){const dt=Fe.get(O.texture),At=ie||0;H.framebufferTextureLayer(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,dt.__webglTexture,le||0,At)}B=-1},this.readRenderTargetPixels=function(O,ie,le,ue,ae,Xe,it){if(!(O&&O.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ft=Fe.get(O).__webglFramebuffer;if(O.isWebGLCubeRenderTarget&&it!==void 0&&(ft=ft[it]),ft){pe.bindFramebuffer(H.FRAMEBUFFER,ft);try{const dt=O.texture,At=dt.format,_t=dt.type;if(At!==fr&&Ke.convert(At)!==H.getParameter(H.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const St=_t===Wh&&(de.has("EXT_color_buffer_half_float")||Me.isWebGL2&&de.has("EXT_color_buffer_float"));if(_t!==vo&&Ke.convert(_t)!==H.getParameter(H.IMPLEMENTATION_COLOR_READ_TYPE)&&!(_t===Fs&&(Me.isWebGL2||de.has("OES_texture_float")||de.has("WEBGL_color_buffer_float")))&&!St){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ie>=0&&ie<=O.width-ue&&le>=0&&le<=O.height-ae&&H.readPixels(ie,le,ue,ae,Ke.convert(At),Ke.convert(_t),Xe)}finally{const dt=P!==null?Fe.get(P).__webglFramebuffer:null;pe.bindFramebuffer(H.FRAMEBUFFER,dt)}}},this.copyFramebufferToTexture=function(O,ie,le=0){const ue=Math.pow(2,-le),ae=Math.floor(ie.image.width*ue),Xe=Math.floor(ie.image.height*ue);N.setTexture2D(ie,0),H.copyTexSubImage2D(H.TEXTURE_2D,le,0,0,O.x,O.y,ae,Xe),pe.unbindTexture()},this.copyTextureToTexture=function(O,ie,le,ue=0){const ae=ie.image.width,Xe=ie.image.height,it=Ke.convert(le.format),ft=Ke.convert(le.type);N.setTexture2D(le,0),H.pixelStorei(H.UNPACK_FLIP_Y_WEBGL,le.flipY),H.pixelStorei(H.UNPACK_PREMULTIPLY_ALPHA_WEBGL,le.premultiplyAlpha),H.pixelStorei(H.UNPACK_ALIGNMENT,le.unpackAlignment),ie.isDataTexture?H.texSubImage2D(H.TEXTURE_2D,ue,O.x,O.y,ae,Xe,it,ft,ie.image.data):ie.isCompressedTexture?H.compressedTexSubImage2D(H.TEXTURE_2D,ue,O.x,O.y,ie.mipmaps[0].width,ie.mipmaps[0].height,it,ie.mipmaps[0].data):H.texSubImage2D(H.TEXTURE_2D,ue,O.x,O.y,it,ft,ie.image),ue===0&&le.generateMipmaps&&H.generateMipmap(H.TEXTURE_2D),pe.unbindTexture()},this.copyTextureToTexture3D=function(O,ie,le,ue,ae=0){if(S.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Xe=O.max.x-O.min.x+1,it=O.max.y-O.min.y+1,ft=O.max.z-O.min.z+1,dt=Ke.convert(ue.format),At=Ke.convert(ue.type);let _t;if(ue.isData3DTexture)N.setTexture3D(ue,0),_t=H.TEXTURE_3D;else if(ue.isDataArrayTexture||ue.isCompressedArrayTexture)N.setTexture2DArray(ue,0),_t=H.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}H.pixelStorei(H.UNPACK_FLIP_Y_WEBGL,ue.flipY),H.pixelStorei(H.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ue.premultiplyAlpha),H.pixelStorei(H.UNPACK_ALIGNMENT,ue.unpackAlignment);const St=H.getParameter(H.UNPACK_ROW_LENGTH),En=H.getParameter(H.UNPACK_IMAGE_HEIGHT),Mi=H.getParameter(H.UNPACK_SKIP_PIXELS),fn=H.getParameter(H.UNPACK_SKIP_ROWS),fi=H.getParameter(H.UNPACK_SKIP_IMAGES),pt=le.isCompressedTexture?le.mipmaps[ae]:le.image;H.pixelStorei(H.UNPACK_ROW_LENGTH,pt.width),H.pixelStorei(H.UNPACK_IMAGE_HEIGHT,pt.height),H.pixelStorei(H.UNPACK_SKIP_PIXELS,O.min.x),H.pixelStorei(H.UNPACK_SKIP_ROWS,O.min.y),H.pixelStorei(H.UNPACK_SKIP_IMAGES,O.min.z),le.isDataTexture||le.isData3DTexture?H.texSubImage3D(_t,ae,ie.x,ie.y,ie.z,Xe,it,ft,dt,At,pt.data):le.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),H.compressedTexSubImage3D(_t,ae,ie.x,ie.y,ie.z,Xe,it,ft,dt,pt.data)):H.texSubImage3D(_t,ae,ie.x,ie.y,ie.z,Xe,it,ft,dt,At,pt),H.pixelStorei(H.UNPACK_ROW_LENGTH,St),H.pixelStorei(H.UNPACK_IMAGE_HEIGHT,En),H.pixelStorei(H.UNPACK_SKIP_PIXELS,Mi),H.pixelStorei(H.UNPACK_SKIP_ROWS,fn),H.pixelStorei(H.UNPACK_SKIP_IMAGES,fi),ae===0&&ue.generateMipmaps&&H.generateMipmap(_t),pe.unbindTexture()},this.initTexture=function(O){O.isCubeTexture?N.setTextureCube(O,0):O.isData3DTexture?N.setTexture3D(O,0):O.isDataArrayTexture||O.isCompressedArrayTexture?N.setTexture2DArray(O,0):N.setTexture2D(O,0),pe.unbindTexture()},this.resetState=function(){R=0,T=0,P=null,pe.reset(),J.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Os}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===m_?"display-p3":"srgb",t.unpackColorSpace=nn.workingColorSpace===lm?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===oi?nl:xT}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===nl?oi:Mo}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class XO extends LT{}XO.prototype.isWebGL1Renderer=!0;class v_{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new ke(e),this.density=t}clone(){return new v_(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class __{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new ke(e),this.near=t,this.far=i}clone(){return new __(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class vv extends Ht{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class pm{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Ip,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Wr()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Wr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Wr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ar=new F;class hl{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)ar.fromBufferAttribute(this,t),ar.applyMatrix4(e),this.setXYZ(t,ar.x,ar.y,ar.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)ar.fromBufferAttribute(this,t),ar.applyNormalMatrix(e),this.setXYZ(t,ar.x,ar.y,ar.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)ar.fromBufferAttribute(this,t),ar.transformDirection(e),this.setXYZ(t,ar.x,ar.y,ar.z);return this}setX(e,t){return this.normalized&&(t=Pt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Pt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Pt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Pt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Mr(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Mr(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Mr(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Mr(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Pt(t,this.array),i=Pt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Pt(t,this.array),i=Pt(i,this.array),r=Pt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Pt(t,this.array),i=Pt(i,this.array),r=Pt(r,this.array),s=Pt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Wt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new hl(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class BT extends ni{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new ke(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Fu;const sd=new F,Ou=new F,Uu=new F,ku=new me,od=new me,JO=new ht,w0=new F,ad=new F,M0=new F,_I=new me,EA=new me,xI=new me;class KO extends Ht{constructor(e=new BT){if(super(),this.isSprite=!0,this.type="Sprite",Fu===void 0){Fu=new Ct;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new pm(t,5);Fu.setIndex([0,1,2,0,2,3]),Fu.setAttribute("position",new hl(i,3,0,!1)),Fu.setAttribute("uv",new hl(i,2,3,!1))}this.geometry=Fu,this.material=e,this.center=new me(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ou.setFromMatrixScale(this.matrixWorld),JO.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Uu.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Ou.multiplyScalar(-Uu.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;T0(w0.set(-.5,-.5,0),Uu,o,Ou,r,s),T0(ad.set(.5,-.5,0),Uu,o,Ou,r,s),T0(M0.set(.5,.5,0),Uu,o,Ou,r,s),_I.set(0,0),EA.set(1,0),xI.set(1,1);let a=e.ray.intersectTriangle(w0,ad,M0,!1,sd);if(a===null&&(T0(ad.set(-.5,.5,0),Uu,o,Ou,r,s),EA.set(0,1),a=e.ray.intersectTriangle(w0,M0,ad,!1,sd),a===null))return;const l=e.ray.origin.distanceTo(sd);l<e.near||l>e.far||t.push({distance:l,point:sd.clone(),uv:wr.getInterpolation(sd,w0,ad,M0,_I,EA,xI,new me),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function T0(n,e,t,i,r,s){ku.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(od.x=s*ku.x-r*ku.y,od.y=r*ku.x+s*ku.y):od.copy(ku),n.copy(e),n.x+=od.x,n.y+=od.y,n.applyMatrix4(JO)}const C0=new F,AI=new F;class $O extends Ht{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){C0.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(C0);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){C0.setFromMatrixPosition(e.matrixWorld),AI.setFromMatrixPosition(this.matrixWorld);const i=C0.distanceTo(AI)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const SI=new F,EI=new rn,wI=new rn,FJ=new F,MI=new ht,R0=new F,wA=new Bi,TI=new ht,MA=new $c;class NT extends ti{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=bE,this.bindMatrix=new ht,this.bindMatrixInverse=new ht,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Qi),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,R0),this.boundingBox.expandByPoint(R0)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Bi),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,R0),this.boundingSphere.expandByPoint(R0)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),wA.copy(this.boundingSphere),wA.applyMatrix4(r),e.ray.intersectsSphere(wA)!==!1&&(TI.copy(r).invert(),MA.copy(e.ray).applyMatrix4(TI),!(this.boundingBox!==null&&MA.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,MA)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new rn,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===bE?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===lO?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;EI.fromBufferAttribute(r.attributes.skinIndex,e),wI.fromBufferAttribute(r.attributes.skinWeight,e),SI.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=wI.getComponent(s);if(o!==0){const a=EI.getComponent(s);MI.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(FJ.copy(SI).applyMatrix4(MI),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class x_ extends Ht{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Rc extends Sn{constructor(e=null,t=1,i=1,r,s,o,a,l,c=Fn,h=Fn,d,p){super(null,o,a,l,c,h,r,s,d,p),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const CI=new ht,OJ=new ht;class mm{constructor(e=[],t=[]){this.uuid=Wr(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new ht)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new ht;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:OJ;CI.multiplyMatrices(a,t[s]),CI.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new mm(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Rc(t,e,e,fr,Fs);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new x_),this.bones.push(o),this.boneInverses.push(new ht().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class $h extends Wt{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Vu=new ht,RI=new ht,b0=[],bI=new Qi,UJ=new ht,ld=new ti,cd=new Bi;class FT extends ti{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new $h(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,UJ)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Qi),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Vu),bI.copy(e.boundingBox).applyMatrix4(Vu),this.boundingBox.union(bI)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Bi),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Vu),cd.copy(e.boundingSphere).applyMatrix4(Vu),this.boundingSphere.union(cd)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(ld.geometry=this.geometry,ld.material=this.material,ld.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),cd.copy(this.boundingSphere),cd.applyMatrix4(i),e.ray.intersectsSphere(cd)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,Vu),RI.multiplyMatrices(i,Vu),ld.matrixWorld=RI,ld.raycast(e,b0);for(let o=0,a=b0.length;o<a;o++){const l=b0[o];l.instanceId=s,l.object=this,t.push(l)}b0.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new $h(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function kJ(n,e){return n.z-e.z}function VJ(n,e){return e.z-n.z}class zJ{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t){const i=this.pool,r=this.list;this.index>=i.length&&i.push({start:-1,count:-1,z:-1});const s=i[this.index];r.push(s),this.index++,s.start=e.start,s.count=e.count,s.z=t}reset(){this.list.length=0,this.index=0}}const zu="batchId",ba=new ht,PI=new ht,GJ=new ht,II=new ht,TA=new fm,P0=new Qi,Gl=new Bi,ud=new F,CA=new zJ,Xi=new ti,I0=[];function HJ(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let o=0;o<i;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*i);e.needsUpdate=!0}class YO extends ti{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,t,i=t*2,r){super(new Ct,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new Rc(t,e,e,fr,Fs);this._matricesTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxGeometryCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const l=e.getAttribute(a),{array:c,itemSize:h,normalized:d}=l,p=new c.constructor(i*h),m=new l.constructor(p,h,d);m.setUsage(l.usage),t.setAttribute(a,m)}if(e.getIndex()!==null){const a=i>65536?new Uint32Array(s):new Uint16Array(s);t.setIndex(new Wt(a,1))}const o=r>65536?new Uint32Array(i):new Uint16Array(i);t.setAttribute(zu,new Wt(o,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(zu))throw new Error(`BatchedMesh: Geometry cannot use attribute "${zu}"`);const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(i===zu)continue;if(!e.hasAttribute(i))throw new Error(`BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Qi);const e=this._geometryCount,t=this.boundingBox,i=this._active;t.makeEmpty();for(let r=0;r<e;r++)i[r]!==!1&&(this.getMatrixAt(r,ba),this.getBoundingBoxAt(r,P0).applyMatrix4(ba),t.union(P0))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Bi);const e=this._geometryCount,t=this.boundingSphere,i=this._active;t.makeEmpty();for(let r=0;r<e;r++)i[r]!==!1&&(this.getMatrixAt(r,ba),this.getBoundingSphereAt(r,Gl).applyMatrix4(ba),t.union(Gl))}addGeometry(e,t=-1,i=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const r={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),t===-1?r.vertexCount=e.getAttribute("position").count:r.vertexCount=t,s===null?r.vertexStart=0:r.vertexStart=s.vertexStart+s.vertexCount;const c=e.getIndex(),h=c!==null;if(h&&(i===-1?r.indexCount=c.count:r.indexCount=i,s===null?r.indexStart=0:r.indexStart=s.indexStart+s.indexCount),r.indexStart!==-1&&r.indexStart+r.indexCount>this._maxIndexCount||r.vertexStart+r.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const d=this._visibility,p=this._active,m=this._matricesTexture,y=this._matricesTexture.image.data;d.push(!0),p.push(!0);const x=this._geometryCount;this._geometryCount++,GJ.toArray(y,x*16),m.needsUpdate=!0,o.push(r),a.push({start:h?r.indexStart:r.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new Qi,sphereInitialized:!1,sphere:new Bi});const _=this.geometry.getAttribute(zu);for(let g=0;g<r.vertexCount;g++)_.setX(r.vertexStart+g,x);return _.needsUpdate=!0,this.setGeometryAt(x,e),x}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),o=t.getIndex(),a=this._reservedRanges[e];if(r&&o.count>a.indexCount||t.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.vertexCount;for(const m in i.attributes){if(m===zu)continue;const y=t.getAttribute(m),x=i.getAttribute(m);HJ(y,x,l);const _=y.itemSize;for(let g=y.count,A=c;g<A;g++){const S=l+g;for(let w=0;w<_;w++)x.setComponent(S,w,0)}x.needsUpdate=!0}if(r){const m=a.indexStart;for(let y=0;y<o.count;y++)s.setX(m+y,l+o.getX(y));for(let y=o.count,x=a.indexCount;y<x;y++)s.setX(m+y,l);s.needsUpdate=!0}const h=this._bounds[e];t.boundingBox!==null?(h.box.copy(t.boundingBox),h.boxInitialized=!0):h.boxInitialized=!1,t.boundingSphere!==null?(h.sphere.copy(t.boundingSphere),h.sphereInitialized=!0):h.sphereInitialized=!1;const d=this._drawRanges[e],p=t.getAttribute("position");return d.count=r?o.count:p.count,this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._active;return e>=t.length||t[e]===!1?this:(t[e]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(e,t){if(this._active[e]===!1)return this;const r=this._bounds[e],s=r.box,o=this.geometry;if(r.boxInitialized===!1){s.makeEmpty();const a=o.index,l=o.attributes.position,c=this._drawRanges[e];for(let h=c.start,d=c.start+c.count;h<d;h++){let p=h;a&&(p=a.getX(p)),s.expandByPoint(ud.fromBufferAttribute(l,p))}r.boxInitialized=!0}return t.copy(s),t}getBoundingSphereAt(e,t){if(this._active[e]===!1)return this;const r=this._bounds[e],s=r.sphere,o=this.geometry;if(r.sphereInitialized===!1){s.makeEmpty(),this.getBoundingBoxAt(e,P0),P0.getCenter(s.center);const a=o.index,l=o.attributes.position,c=this._drawRanges[e];let h=0;for(let d=c.start,p=c.start+c.count;d<p;d++){let m=d;a&&(m=a.getX(m)),ud.fromBufferAttribute(l,m),h=Math.max(h,s.center.distanceToSquared(ud))}s.radius=Math.sqrt(h),r.sphereInitialized=!0}return t.copy(s),t}setMatrixAt(e,t){const i=this._active,r=this._matricesTexture,s=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||i[e]===!1?this:(t.toArray(s,e*16),r.needsUpdate=!0,this)}getMatrixAt(e,t){const i=this._active,r=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||i[e]===!1?null:t.fromArray(r,e*16)}setVisibleAt(e,t){const i=this._visibility,r=this._active,s=this._geometryCount;return e>=s||r[e]===!1||i[e]===t?this:(i[e]=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._visibility,i=this._active,r=this._geometryCount;return e>=r||i[e]===!1?!1:t[e]}raycast(e,t){const i=this._visibility,r=this._active,s=this._drawRanges,o=this._geometryCount,a=this.matrixWorld,l=this.geometry;Xi.material=this.material,Xi.geometry.index=l.index,Xi.geometry.attributes=l.attributes,Xi.geometry.boundingBox===null&&(Xi.geometry.boundingBox=new Qi),Xi.geometry.boundingSphere===null&&(Xi.geometry.boundingSphere=new Bi);for(let c=0;c<o;c++){if(!i[c]||!r[c])continue;const h=s[c];Xi.geometry.setDrawRange(h.start,h.count),this.getMatrixAt(c,Xi.matrixWorld).premultiply(a),this.getBoundingBoxAt(c,Xi.geometry.boundingBox),this.getBoundingSphereAt(c,Xi.geometry.boundingSphere),Xi.raycast(e,I0);for(let d=0,p=I0.length;d<p;d++){const m=I0[d];m.object=this,m.batchId=c,t.push(m)}I0.length=0}Xi.material=null,Xi.geometry.index=null,Xi.geometry.attributes={},Xi.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._visibility,c=this._multiDrawStarts,h=this._multiDrawCounts,d=this._drawRanges,p=this.perObjectFrustumCulled;p&&(II.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),TA.setFromProjectionMatrix(II,e.isWebGPURenderer?Xh:Os));let m=0;if(this.sortObjects){PI.copy(this.matrixWorld).invert(),ud.setFromMatrixPosition(i.matrixWorld).applyMatrix4(PI);for(let _=0,g=l.length;_<g;_++)if(l[_]){this.getMatrixAt(_,ba),this.getBoundingSphereAt(_,Gl).applyMatrix4(ba);let A=!1;if(p&&(A=!TA.intersectsSphere(Gl)),!A){const S=ud.distanceTo(Gl.center);CA.push(d[_],S)}}const y=CA.list,x=this.customSort;x===null?y.sort(s.transparent?VJ:kJ):x.call(this,y,i);for(let _=0,g=y.length;_<g;_++){const A=y[_];c[m]=A.start*a,h[m]=A.count,m++}CA.reset()}else for(let y=0,x=l.length;y<x;y++)if(l[y]){let _=!1;if(p&&(this.getMatrixAt(y,ba),this.getBoundingSphereAt(y,Gl).applyMatrix4(ba),_=!TA.intersectsSphere(Gl)),!_){const g=d[y];c[m]=g.start*a,h[m]=g.count,m++}}this._multiDrawCount=m,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class ir extends ni{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ke(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const DI=new F,LI=new F,BI=new ht,RA=new $c,D0=new Bi;class ua extends Ht{constructor(e=new Ct,t=new ir){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)DI.fromBufferAttribute(t,r-1),LI.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=DI.distanceTo(LI);e.setAttribute("lineDistance",new et(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),D0.copy(i.boundingSphere),D0.applyMatrix4(r),D0.radius+=s,e.ray.intersectsSphere(D0)===!1)return;BI.copy(r).invert(),RA.copy(e.ray).applyMatrix4(BI);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new F,h=new F,d=new F,p=new F,m=this.isLineSegments?2:1,y=i.index,_=i.attributes.position;if(y!==null){const g=Math.max(0,o.start),A=Math.min(y.count,o.start+o.count);for(let S=g,w=A-1;S<w;S+=m){const R=y.getX(S),T=y.getX(S+1);if(c.fromBufferAttribute(_,R),h.fromBufferAttribute(_,T),RA.distanceSqToSegment(c,h,p,d)>l)continue;p.applyMatrix4(this.matrixWorld);const B=e.ray.origin.distanceTo(p);B<e.near||B>e.far||t.push({distance:B,point:d.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,o.start),A=Math.min(_.count,o.start+o.count);for(let S=g,w=A-1;S<w;S+=m){if(c.fromBufferAttribute(_,S),h.fromBufferAttribute(_,S+1),RA.distanceSqToSegment(c,h,p,d)>l)continue;p.applyMatrix4(this.matrixWorld);const T=e.ray.origin.distanceTo(p);T<e.near||T>e.far||t.push({distance:T,point:d.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const NI=new F,FI=new F;class js extends ua{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)NI.fromBufferAttribute(t,r),FI.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+NI.distanceTo(FI);e.setAttribute("lineDistance",new et(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class OT extends ua{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class gm extends ni{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ke(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const OI=new ht,ow=new $c,L0=new Bi,B0=new F;let UT=class extends Ht{constructor(e=new Ct,t=new gm){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),L0.copy(i.boundingSphere),L0.applyMatrix4(r),L0.radius+=s,e.ray.intersectsSphere(L0)===!1)return;OI.copy(r).invert(),ow.copy(e.ray).applyMatrix4(OI);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,d=i.attributes.position;if(c!==null){const p=Math.max(0,o.start),m=Math.min(c.count,o.start+o.count);for(let y=p,x=m;y<x;y++){const _=c.getX(y);B0.fromBufferAttribute(d,_),UI(B0,_,l,r,e,t,this)}}else{const p=Math.max(0,o.start),m=Math.min(d.count,o.start+o.count);for(let y=p,x=m;y<x;y++)B0.fromBufferAttribute(d,y),UI(B0,y,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};function UI(n,e,t,i,r,s,o){const a=ow.distanceSqToPoint(n);if(a<t){const l=new F;ow.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class WJ extends Sn{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Tn,this.magFilter=s!==void 0?s:Tn,this.generateMipmaps=!1;const h=this;function d(){h.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class jJ extends Sn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Fn,this.minFilter=Fn,this.generateMipmaps=!1,this.needsUpdate=!0}}class A_ extends Sn{constructor(e,t,i,r,s,o,a,l,c,h,d,p){super(null,o,a,l,c,h,r,s,d,p),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class XJ extends A_{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Di}}class JJ extends A_{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,ca),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class KJ extends Sn{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Xs{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,l=s-1,c;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-o,c<0)a=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const h=i[r],p=i[r+1]-h,m=(o-h)/p;return(r+m)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new me:new F);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new F,r=[],s=[],o=[],a=new F,l=new ht;for(let m=0;m<=e;m++){const y=m/e;r[m]=this.getTangentAt(y,new F)}s[0]=new F,o[0]=new F;let c=Number.MAX_VALUE;const h=Math.abs(r[0].x),d=Math.abs(r[0].y),p=Math.abs(r[0].z);h<=c&&(c=h,i.set(1,0,0)),d<=c&&(c=d,i.set(0,1,0)),p<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(r[m-1],r[m]),a.length()>Number.EPSILON){a.normalize();const y=Math.acos(On(r[m-1].dot(r[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,y))}o[m].crossVectors(r[m],s[m])}if(t===!0){let m=Math.acos(On(s[0].dot(s[e]),-1,1));m/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let y=1;y<=e;y++)s[y].applyMatrix4(l.makeRotationAxis(r[y],m*y)),o[y].crossVectors(r[y],s[y])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class S_ extends Xs{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const i=t||new me,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const h=Math.cos(this.aRotation),d=Math.sin(this.aRotation),p=l-this.aX,m=c-this.aY;l=p*h-m*d+this.aX,c=p*d+m*h+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class qO extends S_{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function kT(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,h,d){let p=(o-s)/c-(a-s)/(c+h)+(a-o)/h,m=(a-o)/h-(l-o)/(h+d)+(l-a)/d;p*=h,m*=h,r(o,a,p,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const N0=new F,bA=new kT,PA=new kT,IA=new kT;class QO extends Xs{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new F){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,h;this.closed||a>0?c=r[(a-1)%s]:(N0.subVectors(r[0],r[1]).add(r[0]),c=N0);const d=r[a%s],p=r[(a+1)%s];if(this.closed||a+2<s?h=r[(a+2)%s]:(N0.subVectors(r[s-1],r[s-2]).add(r[s-1]),h=N0),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let y=Math.pow(c.distanceToSquared(d),m),x=Math.pow(d.distanceToSquared(p),m),_=Math.pow(p.distanceToSquared(h),m);x<1e-4&&(x=1),y<1e-4&&(y=x),_<1e-4&&(_=x),bA.initNonuniformCatmullRom(c.x,d.x,p.x,h.x,y,x,_),PA.initNonuniformCatmullRom(c.y,d.y,p.y,h.y,y,x,_),IA.initNonuniformCatmullRom(c.z,d.z,p.z,h.z,y,x,_)}else this.curveType==="catmullrom"&&(bA.initCatmullRom(c.x,d.x,p.x,h.x,this.tension),PA.initCatmullRom(c.y,d.y,p.y,h.y,this.tension),IA.initCatmullRom(c.z,d.z,p.z,h.z,this.tension));return i.set(bA.calc(l),PA.calc(l),IA.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new F().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function kI(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*n+t}function $J(n,e){const t=1-n;return t*t*e}function YJ(n,e){return 2*(1-n)*n*e}function qJ(n,e){return n*n*e}function Jd(n,e,t,i){return $J(n,e)+YJ(n,t)+qJ(n,i)}function QJ(n,e){const t=1-n;return t*t*t*e}function ZJ(n,e){const t=1-n;return 3*t*t*n*e}function eK(n,e){return 3*(1-n)*n*n*e}function tK(n,e){return n*n*n*e}function Kd(n,e,t,i,r){return QJ(n,e)+ZJ(n,t)+eK(n,i)+tK(n,r)}class VT extends Xs{constructor(e=new me,t=new me,i=new me,r=new me){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new me){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Kd(e,r.x,s.x,o.x,a.x),Kd(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class ZO extends Xs{constructor(e=new F,t=new F,i=new F,r=new F){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new F){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Kd(e,r.x,s.x,o.x,a.x),Kd(e,r.y,s.y,o.y,a.y),Kd(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class zT extends Xs{constructor(e=new me,t=new me){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new me){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new me){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class eU extends Xs{constructor(e=new F,t=new F){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new F){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new F){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class GT extends Xs{constructor(e=new me,t=new me,i=new me){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new me){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Jd(e,r.x,s.x,o.x),Jd(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class HT extends Xs{constructor(e=new F,t=new F,i=new F){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new F){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Jd(e,r.x,s.x,o.x),Jd(e,r.y,s.y,o.y),Jd(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class WT extends Xs{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new me){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],c=r[o],h=r[o>r.length-2?r.length-1:o+1],d=r[o>r.length-3?r.length-1:o+2];return i.set(kI(a,l.x,c.x,h.x,d.x),kI(a,l.y,c.y,h.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new me().fromArray(r))}return this}}var _v=Object.freeze({__proto__:null,ArcCurve:qO,CatmullRomCurve3:QO,CubicBezierCurve:VT,CubicBezierCurve3:ZO,EllipseCurve:S_,LineCurve:zT,LineCurve3:eU,QuadraticBezierCurve:GT,QuadraticBezierCurve3:HT,SplineCurve:WT});class tU extends Xs{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new _v[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const h=l[c];i&&i.equals(h)||(t.push(h),i=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new _v[r.type]().fromJSON(r))}return this}}class Lp extends tU{constructor(e){super(),this.type="Path",this.currentPoint=new me,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new zT(this.currentPoint.clone(),new me(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new GT(this.currentPoint.clone(),new me(e,t),new me(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new VT(this.currentPoint.clone(),new me(e,t),new me(i,r),new me(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new WT(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){const c=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+c,t+h,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const c=new S_(e,t,i,r,s,o,a,l);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const h=c.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class ym extends Ct{constructor(e=[new me(0,-.5),new me(.5,0),new me(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=On(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],h=1/t,d=new F,p=new me,m=new F,y=new F,x=new F;let _=0,g=0;for(let A=0;A<=e.length-1;A++)switch(A){case 0:_=e[A+1].x-e[A].x,g=e[A+1].y-e[A].y,m.x=g*1,m.y=-_,m.z=g*0,x.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(x.x,x.y,x.z);break;default:_=e[A+1].x-e[A].x,g=e[A+1].y-e[A].y,m.x=g*1,m.y=-_,m.z=g*0,y.copy(m),m.x+=x.x,m.y+=x.y,m.z+=x.z,m.normalize(),l.push(m.x,m.y,m.z),x.copy(y)}for(let A=0;A<=t;A++){const S=i+A*h*r,w=Math.sin(S),R=Math.cos(S);for(let T=0;T<=e.length-1;T++){d.x=e[T].x*w,d.y=e[T].y,d.z=e[T].x*R,o.push(d.x,d.y,d.z),p.x=A/t,p.y=T/(e.length-1),a.push(p.x,p.y);const P=l[3*T+0]*w,B=l[3*T+1],b=l[3*T+0]*R;c.push(P,B,b)}}for(let A=0;A<t;A++)for(let S=0;S<e.length-1;S++){const w=S+A*e.length,R=w,T=w+e.length,P=w+e.length+1,B=w+1;s.push(R,T,B),s.push(P,B,T)}this.setIndex(s),this.setAttribute("position",new et(o,3)),this.setAttribute("uv",new et(a,2)),this.setAttribute("normal",new et(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ym(e.points,e.segments,e.phiStart,e.phiLength)}}class E_ extends ym{constructor(e=1,t=1,i=4,r=8){const s=new Lp;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new E_(e.radius,e.length,e.capSegments,e.radialSegments)}}class w_ extends Ct{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new F,h=new me;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,p=3;d<=t;d++,p+=3){const m=i+d/t*r;c.x=e*Math.cos(m),c.y=e*Math.sin(m),o.push(c.x,c.y,c.z),a.push(0,0,1),h.x=(o[p]/e+1)/2,h.y=(o[p+1]/e+1)/2,l.push(h.x,h.y)}for(let d=1;d<=t;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new et(o,3)),this.setAttribute("normal",new et(a,3)),this.setAttribute("uv",new et(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new w_(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class yf extends Ct{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const h=[],d=[],p=[],m=[];let y=0;const x=[],_=i/2;let g=0;A(),o===!1&&(e>0&&S(!0),t>0&&S(!1)),this.setIndex(h),this.setAttribute("position",new et(d,3)),this.setAttribute("normal",new et(p,3)),this.setAttribute("uv",new et(m,2));function A(){const w=new F,R=new F;let T=0;const P=(t-e)/i;for(let B=0;B<=s;B++){const b=[],I=B/s,U=I*(t-e)+e;for(let K=0;K<=r;K++){const re=K/r,G=re*l+a,$=Math.sin(G),Q=Math.cos(G);R.x=U*$,R.y=-I*i+_,R.z=U*Q,d.push(R.x,R.y,R.z),w.set($,P,Q).normalize(),p.push(w.x,w.y,w.z),m.push(re,1-I),b.push(y++)}x.push(b)}for(let B=0;B<r;B++)for(let b=0;b<s;b++){const I=x[b][B],U=x[b+1][B],K=x[b+1][B+1],re=x[b][B+1];h.push(I,U,re),h.push(U,K,re),T+=6}c.addGroup(g,T,0),g+=T}function S(w){const R=y,T=new me,P=new F;let B=0;const b=w===!0?e:t,I=w===!0?1:-1;for(let K=1;K<=r;K++)d.push(0,_*I,0),p.push(0,I,0),m.push(.5,.5),y++;const U=y;for(let K=0;K<=r;K++){const G=K/r*l+a,$=Math.cos(G),Q=Math.sin(G);P.x=b*Q,P.y=_*I,P.z=b*$,d.push(P.x,P.y,P.z),p.push(0,I,0),T.x=$*.5+.5,T.y=Q*.5*I+.5,m.push(T.x,T.y),y++}for(let K=0;K<r;K++){const re=R+K,G=U+K;w===!0?h.push(G,G+1,re):h.push(G+1,G,re),B+=3}c.addGroup(g,B,w===!0?1:2),g+=B}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new yf(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class M_ extends yf{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new M_(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class El extends Ct{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),c(i),h(),this.setAttribute("position",new et(s,3)),this.setAttribute("normal",new et(s.slice(),3)),this.setAttribute("uv",new et(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(A){const S=new F,w=new F,R=new F;for(let T=0;T<t.length;T+=3)m(t[T+0],S),m(t[T+1],w),m(t[T+2],R),l(S,w,R,A)}function l(A,S,w,R){const T=R+1,P=[];for(let B=0;B<=T;B++){P[B]=[];const b=A.clone().lerp(w,B/T),I=S.clone().lerp(w,B/T),U=T-B;for(let K=0;K<=U;K++)K===0&&B===T?P[B][K]=b:P[B][K]=b.clone().lerp(I,K/U)}for(let B=0;B<T;B++)for(let b=0;b<2*(T-B)-1;b++){const I=Math.floor(b/2);b%2===0?(p(P[B][I+1]),p(P[B+1][I]),p(P[B][I])):(p(P[B][I+1]),p(P[B+1][I+1]),p(P[B+1][I]))}}function c(A){const S=new F;for(let w=0;w<s.length;w+=3)S.x=s[w+0],S.y=s[w+1],S.z=s[w+2],S.normalize().multiplyScalar(A),s[w+0]=S.x,s[w+1]=S.y,s[w+2]=S.z}function h(){const A=new F;for(let S=0;S<s.length;S+=3){A.x=s[S+0],A.y=s[S+1],A.z=s[S+2];const w=_(A)/2/Math.PI+.5,R=g(A)/Math.PI+.5;o.push(w,1-R)}y(),d()}function d(){for(let A=0;A<o.length;A+=6){const S=o[A+0],w=o[A+2],R=o[A+4],T=Math.max(S,w,R),P=Math.min(S,w,R);T>.9&&P<.1&&(S<.2&&(o[A+0]+=1),w<.2&&(o[A+2]+=1),R<.2&&(o[A+4]+=1))}}function p(A){s.push(A.x,A.y,A.z)}function m(A,S){const w=A*3;S.x=e[w+0],S.y=e[w+1],S.z=e[w+2]}function y(){const A=new F,S=new F,w=new F,R=new F,T=new me,P=new me,B=new me;for(let b=0,I=0;b<s.length;b+=9,I+=6){A.set(s[b+0],s[b+1],s[b+2]),S.set(s[b+3],s[b+4],s[b+5]),w.set(s[b+6],s[b+7],s[b+8]),T.set(o[I+0],o[I+1]),P.set(o[I+2],o[I+3]),B.set(o[I+4],o[I+5]),R.copy(A).add(S).add(w).divideScalar(3);const U=_(R);x(T,I+0,A,U),x(P,I+2,S,U),x(B,I+4,w,U)}}function x(A,S,w,R){R<0&&A.x===1&&(o[S]=A.x-1),w.x===0&&w.z===0&&(o[S]=R/2/Math.PI+.5)}function _(A){return Math.atan2(A.z,-A.x)}function g(A){return Math.atan2(-A.y,Math.sqrt(A.x*A.x+A.z*A.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new El(e.vertices,e.indices,e.radius,e.details)}}class T_ extends El{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new T_(e.radius,e.detail)}}const F0=new F,O0=new F,DA=new F,U0=new wr;class nU extends Ct{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(Tc*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],h=["a","b","c"],d=new Array(3),p={},m=[];for(let y=0;y<l;y+=3){o?(c[0]=o.getX(y),c[1]=o.getX(y+1),c[2]=o.getX(y+2)):(c[0]=y,c[1]=y+1,c[2]=y+2);const{a:x,b:_,c:g}=U0;if(x.fromBufferAttribute(a,c[0]),_.fromBufferAttribute(a,c[1]),g.fromBufferAttribute(a,c[2]),U0.getNormal(DA),d[0]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,d[1]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,d[2]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let A=0;A<3;A++){const S=(A+1)%3,w=d[A],R=d[S],T=U0[h[A]],P=U0[h[S]],B=`${w}_${R}`,b=`${R}_${w}`;b in p&&p[b]?(DA.dot(p[b].normal)<=s&&(m.push(T.x,T.y,T.z),m.push(P.x,P.y,P.z)),p[b]=null):B in p||(p[B]={index0:c[A],index1:c[S],normal:DA.clone()})}}for(const y in p)if(p[y]){const{index0:x,index1:_}=p[y];F0.fromBufferAttribute(a,x),O0.fromBufferAttribute(a,_),m.push(F0.x,F0.y,F0.z),m.push(O0.x,O0.y,O0.z)}this.setAttribute("position",new et(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class bc extends Lp{constructor(e){super(e),this.uuid=Wr(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new Lp().fromJSON(r))}return this}}const nK={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=iU(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,h,d,p,m;if(i&&(s=aK(n,e,s,t)),n.length>80*t){a=c=n[0],l=h=n[1];for(let y=t;y<r;y+=t)d=n[y],p=n[y+1],d<a&&(a=d),p<l&&(l=p),d>c&&(c=d),p>h&&(h=p);m=Math.max(c-a,h-l),m=m!==0?32767/m:0}return Bp(s,o,t,a,l,m,0),o}};function iU(n,e,t,i,r){let s,o;if(r===vK(n,e,t,i)>0)for(s=e;s<t;s+=i)o=VI(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=VI(s,n[s],n[s+1],o);return o&&C_(o,o.next)&&(Fp(o),o=o.next),o}function Gc(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(C_(t,t.next)||Cn(t.prev,t,t.next)===0)){if(Fp(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Bp(n,e,t,i,r,s,o){if(!n)return;!o&&s&&fK(n,i,r,s);let a=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,s?rK(n,i,r,s):iK(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),Fp(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=sK(Gc(n),e,t),Bp(n,e,t,i,r,s,2)):o===2&&oK(n,e,t,i,r,s):Bp(Gc(n),e,t,i,r,s,1);break}}}function iK(n){const e=n.prev,t=n,i=n.next;if(Cn(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,c=i.y,h=r<s?r<o?r:o:s<o?s:o,d=a<l?a<c?a:c:l<c?l:c,p=r>s?r>o?r:o:s>o?s:o,m=a>l?a>c?a:c:l>c?l:c;let y=i.next;for(;y!==e;){if(y.x>=h&&y.x<=p&&y.y>=d&&y.y<=m&&hh(r,a,s,l,o,c,y.x,y.y)&&Cn(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function rK(n,e,t,i){const r=n.prev,s=n,o=n.next;if(Cn(r,s,o)>=0)return!1;const a=r.x,l=s.x,c=o.x,h=r.y,d=s.y,p=o.y,m=a<l?a<c?a:c:l<c?l:c,y=h<d?h<p?h:p:d<p?d:p,x=a>l?a>c?a:c:l>c?l:c,_=h>d?h>p?h:p:d>p?d:p,g=aw(m,y,e,t,i),A=aw(x,_,e,t,i);let S=n.prevZ,w=n.nextZ;for(;S&&S.z>=g&&w&&w.z<=A;){if(S.x>=m&&S.x<=x&&S.y>=y&&S.y<=_&&S!==r&&S!==o&&hh(a,h,l,d,c,p,S.x,S.y)&&Cn(S.prev,S,S.next)>=0||(S=S.prevZ,w.x>=m&&w.x<=x&&w.y>=y&&w.y<=_&&w!==r&&w!==o&&hh(a,h,l,d,c,p,w.x,w.y)&&Cn(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;S&&S.z>=g;){if(S.x>=m&&S.x<=x&&S.y>=y&&S.y<=_&&S!==r&&S!==o&&hh(a,h,l,d,c,p,S.x,S.y)&&Cn(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;w&&w.z<=A;){if(w.x>=m&&w.x<=x&&w.y>=y&&w.y<=_&&w!==r&&w!==o&&hh(a,h,l,d,c,p,w.x,w.y)&&Cn(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function sK(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!C_(r,s)&&rU(r,i,i.next,s)&&Np(r,s)&&Np(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),Fp(i),Fp(i.next),i=n=s),i=i.next}while(i!==n);return Gc(i)}function oK(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&mK(o,a)){let l=sU(o,a);o=Gc(o,o.next),l=Gc(l,l.next),Bp(o,e,t,i,r,s,0),Bp(l,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function aK(n,e,t,i){const r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,c=iU(n,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(pK(c));for(r.sort(lK),s=0;s<r.length;s++)t=cK(r[s],t);return t}function lK(n,e){return n.x-e.x}function cK(n,e){const t=uK(n,e);if(!t)return e;const i=sU(t,n);return Gc(i,i.next),Gc(t,t.next)}function uK(n,e){let t=e,i=-1/0,r;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const p=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=s&&p>i&&(i=p,r=t.x<t.next.x?t:t.next,p===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,l=r.x,c=r.y;let h=1/0,d;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&hh(o<c?s:i,o,l,c,o<c?i:s,o,t.x,t.y)&&(d=Math.abs(o-t.y)/(s-t.x),Np(t,n)&&(d<h||d===h&&(t.x>r.x||t.x===r.x&&hK(r,t)))&&(r=t,h=d)),t=t.next;while(t!==a);return r}function hK(n,e){return Cn(n.prev,n,e.prev)<0&&Cn(e.next,n,n.next)<0}function fK(n,e,t,i){let r=n;do r.z===0&&(r.z=aw(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,dK(r)}function dK(n){let e,t,i,r,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,c*=2}while(o>1);return n}function aw(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function pK(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function hh(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function mK(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!gK(n,e)&&(Np(n,e)&&Np(e,n)&&yK(n,e)&&(Cn(n.prev,n,e.prev)||Cn(n,e.prev,e))||C_(n,e)&&Cn(n.prev,n,n.next)>0&&Cn(e.prev,e,e.next)>0)}function Cn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function C_(n,e){return n.x===e.x&&n.y===e.y}function rU(n,e,t,i){const r=V0(Cn(n,e,t)),s=V0(Cn(n,e,i)),o=V0(Cn(t,i,n)),a=V0(Cn(t,i,e));return!!(r!==s&&o!==a||r===0&&k0(n,t,e)||s===0&&k0(n,i,e)||o===0&&k0(t,n,i)||a===0&&k0(t,e,i))}function k0(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function V0(n){return n>0?1:n<0?-1:0}function gK(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&rU(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Np(n,e){return Cn(n.prev,n,n.next)<0?Cn(n,e,n.next)>=0&&Cn(n,n.prev,e)>=0:Cn(n,e,n.prev)<0||Cn(n,n.next,e)<0}function yK(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function sU(n,e){const t=new lw(n.i,n.x,n.y),i=new lw(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function VI(n,e,t,i){const r=new lw(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Fp(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function lw(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function vK(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class _o{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return _o.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];zI(e),GI(i,e);let o=e.length;t.forEach(zI);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,GI(i,t[l]);const a=nK.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function zI(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function GI(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class R_ extends Ct{constructor(e=new bc([new me(.5,.5),new me(-.5,.5),new me(-.5,-.5),new me(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new et(r,3)),this.setAttribute("uv",new et(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,h=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,y=t.bevelSize!==void 0?t.bevelSize:m-.1,x=t.bevelOffset!==void 0?t.bevelOffset:0,_=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,A=t.UVGenerator!==void 0?t.UVGenerator:_K;let S,w=!1,R,T,P,B;g&&(S=g.getSpacedPoints(h),w=!0,p=!1,R=g.computeFrenetFrames(h,!1),T=new F,P=new F,B=new F),p||(_=0,m=0,y=0,x=0);const b=a.extractPoints(c);let I=b.shape;const U=b.holes;if(!_o.isClockWise(I)){I=I.reverse();for(let H=0,ve=U.length;H<ve;H++){const de=U[H];_o.isClockWise(de)&&(U[H]=de.reverse())}}const re=_o.triangulateShape(I,U),G=I;for(let H=0,ve=U.length;H<ve;H++){const de=U[H];I=I.concat(de)}function $(H,ve,de){return ve||console.error("THREE.ExtrudeGeometry: vec does not exist"),H.clone().addScaledVector(ve,de)}const Q=I.length,se=re.length;function L(H,ve,de){let Me,pe,Je;const Fe=H.x-ve.x,N=H.y-ve.y,D=de.x-H.x,ne=de.y-H.y,Ae=Fe*Fe+N*N,_e=Fe*ne-N*D;if(Math.abs(_e)>Number.EPSILON){const ye=Math.sqrt(Ae),Qe=Math.sqrt(D*D+ne*ne),Le=ve.x-N/ye,Oe=ve.y+Fe/ye,at=de.x-ne/Qe,xt=de.y+D/Qe,Ee=((at-Le)*ne-(xt-Oe)*D)/(Fe*ne-N*D);Me=Le+Fe*Ee-H.x,pe=Oe+N*Ee-H.y;const Ot=Me*Me+pe*pe;if(Ot<=2)return new me(Me,pe);Je=Math.sqrt(Ot/2)}else{let ye=!1;Fe>Number.EPSILON?D>Number.EPSILON&&(ye=!0):Fe<-Number.EPSILON?D<-Number.EPSILON&&(ye=!0):Math.sign(N)===Math.sign(ne)&&(ye=!0),ye?(Me=-N,pe=Fe,Je=Math.sqrt(Ae)):(Me=Fe,pe=N,Je=Math.sqrt(Ae/2))}return new me(Me/Je,pe/Je)}const k=[];for(let H=0,ve=G.length,de=ve-1,Me=H+1;H<ve;H++,de++,Me++)de===ve&&(de=0),Me===ve&&(Me=0),k[H]=L(G[H],G[de],G[Me]);const z=[];let j,te=k.concat();for(let H=0,ve=U.length;H<ve;H++){const de=U[H];j=[];for(let Me=0,pe=de.length,Je=pe-1,Fe=Me+1;Me<pe;Me++,Je++,Fe++)Je===pe&&(Je=0),Fe===pe&&(Fe=0),j[Me]=L(de[Me],de[Je],de[Fe]);z.push(j),te=te.concat(j)}for(let H=0;H<_;H++){const ve=H/_,de=m*Math.cos(ve*Math.PI/2),Me=y*Math.sin(ve*Math.PI/2)+x;for(let pe=0,Je=G.length;pe<Je;pe++){const Fe=$(G[pe],k[pe],Me);be(Fe.x,Fe.y,-de)}for(let pe=0,Je=U.length;pe<Je;pe++){const Fe=U[pe];j=z[pe];for(let N=0,D=Fe.length;N<D;N++){const ne=$(Fe[N],j[N],Me);be(ne.x,ne.y,-de)}}}const Z=y+x;for(let H=0;H<Q;H++){const ve=p?$(I[H],te[H],Z):I[H];w?(P.copy(R.normals[0]).multiplyScalar(ve.x),T.copy(R.binormals[0]).multiplyScalar(ve.y),B.copy(S[0]).add(P).add(T),be(B.x,B.y,B.z)):be(ve.x,ve.y,0)}for(let H=1;H<=h;H++)for(let ve=0;ve<Q;ve++){const de=p?$(I[ve],te[ve],Z):I[ve];w?(P.copy(R.normals[H]).multiplyScalar(de.x),T.copy(R.binormals[H]).multiplyScalar(de.y),B.copy(S[H]).add(P).add(T),be(B.x,B.y,B.z)):be(de.x,de.y,d/h*H)}for(let H=_-1;H>=0;H--){const ve=H/_,de=m*Math.cos(ve*Math.PI/2),Me=y*Math.sin(ve*Math.PI/2)+x;for(let pe=0,Je=G.length;pe<Je;pe++){const Fe=$(G[pe],k[pe],Me);be(Fe.x,Fe.y,d+de)}for(let pe=0,Je=U.length;pe<Je;pe++){const Fe=U[pe];j=z[pe];for(let N=0,D=Fe.length;N<D;N++){const ne=$(Fe[N],j[N],Me);w?be(ne.x,ne.y+S[h-1].y,S[h-1].x+de):be(ne.x,ne.y,d+de)}}}ce(),Se();function ce(){const H=r.length/3;if(p){let ve=0,de=Q*ve;for(let Me=0;Me<se;Me++){const pe=re[Me];tt(pe[2]+de,pe[1]+de,pe[0]+de)}ve=h+_*2,de=Q*ve;for(let Me=0;Me<se;Me++){const pe=re[Me];tt(pe[0]+de,pe[1]+de,pe[2]+de)}}else{for(let ve=0;ve<se;ve++){const de=re[ve];tt(de[2],de[1],de[0])}for(let ve=0;ve<se;ve++){const de=re[ve];tt(de[0]+Q*h,de[1]+Q*h,de[2]+Q*h)}}i.addGroup(H,r.length/3-H,0)}function Se(){const H=r.length/3;let ve=0;Te(G,ve),ve+=G.length;for(let de=0,Me=U.length;de<Me;de++){const pe=U[de];Te(pe,ve),ve+=pe.length}i.addGroup(H,r.length/3-H,1)}function Te(H,ve){let de=H.length;for(;--de>=0;){const Me=de;let pe=de-1;pe<0&&(pe=H.length-1);for(let Je=0,Fe=h+_*2;Je<Fe;Je++){const N=Q*Je,D=Q*(Je+1),ne=ve+Me+N,Ae=ve+pe+N,_e=ve+pe+D,ye=ve+Me+D;ot(ne,Ae,_e,ye)}}}function be(H,ve,de){l.push(H),l.push(ve),l.push(de)}function tt(H,ve,de){De(H),De(ve),De(de);const Me=r.length/3,pe=A.generateTopUV(i,r,Me-3,Me-2,Me-1);Re(pe[0]),Re(pe[1]),Re(pe[2])}function ot(H,ve,de,Me){De(H),De(ve),De(Me),De(ve),De(de),De(Me);const pe=r.length/3,Je=A.generateSideWallUV(i,r,pe-6,pe-3,pe-2,pe-1);Re(Je[0]),Re(Je[1]),Re(Je[3]),Re(Je[1]),Re(Je[2]),Re(Je[3])}function De(H){r.push(l[H*3+0]),r.push(l[H*3+1]),r.push(l[H*3+2])}function Re(H){s.push(H.x),s.push(H.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return xK(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new _v[r.type]().fromJSON(r)),new R_(i,e.options)}}const _K={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],c=e[r*3],h=e[r*3+1];return[new me(s,o),new me(a,l),new me(c,h)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[i*3],h=e[i*3+1],d=e[i*3+2],p=e[r*3],m=e[r*3+1],y=e[r*3+2],x=e[s*3],_=e[s*3+1],g=e[s*3+2];return Math.abs(a-h)<Math.abs(o-c)?[new me(o,1-l),new me(c,1-d),new me(p,1-y),new me(x,1-g)]:[new me(a,1-l),new me(h,1-d),new me(m,1-y),new me(_,1-g)]}};function xK(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class b_ extends El{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new b_(e.radius,e.detail)}}class vm extends El{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new vm(e.radius,e.detail)}}class P_ extends Ct{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],c=[],h=[];let d=e;const p=(t-e)/r,m=new F,y=new me;for(let x=0;x<=r;x++){for(let _=0;_<=i;_++){const g=s+_/i*o;m.x=d*Math.cos(g),m.y=d*Math.sin(g),l.push(m.x,m.y,m.z),c.push(0,0,1),y.x=(m.x/t+1)/2,y.y=(m.y/t+1)/2,h.push(y.x,y.y)}d+=p}for(let x=0;x<r;x++){const _=x*(i+1);for(let g=0;g<i;g++){const A=g+_,S=A,w=A+i+1,R=A+i+2,T=A+1;a.push(S,w,T),a.push(w,R,T)}}this.setIndex(a),this.setAttribute("position",new et(l,3)),this.setAttribute("normal",new et(c,3)),this.setAttribute("uv",new et(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new P_(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class I_ extends Ct{constructor(e=new bc([new me(0,.5),new me(-.5,-.5),new me(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let h=0;h<e.length;h++)c(e[h]),this.addGroup(a,l,h),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new et(r,3)),this.setAttribute("normal",new et(s,3)),this.setAttribute("uv",new et(o,2));function c(h){const d=r.length/3,p=h.extractPoints(t);let m=p.shape;const y=p.holes;_o.isClockWise(m)===!1&&(m=m.reverse());for(let _=0,g=y.length;_<g;_++){const A=y[_];_o.isClockWise(A)===!0&&(y[_]=A.reverse())}const x=_o.triangulateShape(m,y);for(let _=0,g=y.length;_<g;_++){const A=y[_];m=m.concat(A)}for(let _=0,g=m.length;_<g;_++){const A=m[_];r.push(A.x,A.y,0),s.push(0,0,1),o.push(A.x,A.y)}for(let _=0,g=x.length;_<g;_++){const A=x[_],S=A[0]+d,w=A[1]+d,R=A[2]+d;i.push(S,w,R),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return AK(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new I_(i,e.curveSegments)}}function AK(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class _m extends Ct{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const h=[],d=new F,p=new F,m=[],y=[],x=[],_=[];for(let g=0;g<=i;g++){const A=[],S=g/i;let w=0;g===0&&o===0?w=.5/t:g===i&&l===Math.PI&&(w=-.5/t);for(let R=0;R<=t;R++){const T=R/t;d.x=-e*Math.cos(r+T*s)*Math.sin(o+S*a),d.y=e*Math.cos(o+S*a),d.z=e*Math.sin(r+T*s)*Math.sin(o+S*a),y.push(d.x,d.y,d.z),p.copy(d).normalize(),x.push(p.x,p.y,p.z),_.push(T+w,1-S),A.push(c++)}h.push(A)}for(let g=0;g<i;g++)for(let A=0;A<t;A++){const S=h[g][A+1],w=h[g][A],R=h[g+1][A],T=h[g+1][A+1];(g!==0||o>0)&&m.push(S,w,T),(g!==i-1||l<Math.PI)&&m.push(w,R,T)}this.setIndex(m),this.setAttribute("position",new et(y,3)),this.setAttribute("normal",new et(x,3)),this.setAttribute("uv",new et(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _m(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class D_ extends El{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new D_(e.radius,e.detail)}}class L_ extends Ct{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],c=[],h=new F,d=new F,p=new F;for(let m=0;m<=i;m++)for(let y=0;y<=r;y++){const x=y/r*s,_=m/i*Math.PI*2;d.x=(e+t*Math.cos(_))*Math.cos(x),d.y=(e+t*Math.cos(_))*Math.sin(x),d.z=t*Math.sin(_),a.push(d.x,d.y,d.z),h.x=e*Math.cos(x),h.y=e*Math.sin(x),p.subVectors(d,h).normalize(),l.push(p.x,p.y,p.z),c.push(y/r),c.push(m/i)}for(let m=1;m<=i;m++)for(let y=1;y<=r;y++){const x=(r+1)*m+y-1,_=(r+1)*(m-1)+y-1,g=(r+1)*(m-1)+y,A=(r+1)*m+y;o.push(x,_,A),o.push(_,g,A)}this.setIndex(o),this.setAttribute("position",new et(a,3)),this.setAttribute("normal",new et(l,3)),this.setAttribute("uv",new et(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new L_(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class B_ extends Ct{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],c=[],h=[],d=new F,p=new F,m=new F,y=new F,x=new F,_=new F,g=new F;for(let S=0;S<=i;++S){const w=S/i*s*Math.PI*2;A(w,s,o,e,m),A(w+.01,s,o,e,y),_.subVectors(y,m),g.addVectors(y,m),x.crossVectors(_,g),g.crossVectors(x,_),x.normalize(),g.normalize();for(let R=0;R<=r;++R){const T=R/r*Math.PI*2,P=-t*Math.cos(T),B=t*Math.sin(T);d.x=m.x+(P*g.x+B*x.x),d.y=m.y+(P*g.y+B*x.y),d.z=m.z+(P*g.z+B*x.z),l.push(d.x,d.y,d.z),p.subVectors(d,m).normalize(),c.push(p.x,p.y,p.z),h.push(S/i),h.push(R/r)}}for(let S=1;S<=i;S++)for(let w=1;w<=r;w++){const R=(r+1)*(S-1)+(w-1),T=(r+1)*S+(w-1),P=(r+1)*S+w,B=(r+1)*(S-1)+w;a.push(R,T,B),a.push(T,P,B)}this.setIndex(a),this.setAttribute("position",new et(l,3)),this.setAttribute("normal",new et(c,3)),this.setAttribute("uv",new et(h,2));function A(S,w,R,T,P){const B=Math.cos(S),b=Math.sin(S),I=R/w*S,U=Math.cos(I);P.x=T*(2+U)*.5*B,P.y=T*(2+U)*b*.5,P.z=T*Math.sin(I)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new B_(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class N_ extends Ct{constructor(e=new HT(new F(-1,-1,0),new F(-1,1,0),new F(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new F,l=new F,c=new me;let h=new F;const d=[],p=[],m=[],y=[];x(),this.setIndex(y),this.setAttribute("position",new et(d,3)),this.setAttribute("normal",new et(p,3)),this.setAttribute("uv",new et(m,2));function x(){for(let S=0;S<t;S++)_(S);_(s===!1?t:0),A(),g()}function _(S){h=e.getPointAt(S/t,h);const w=o.normals[S],R=o.binormals[S];for(let T=0;T<=r;T++){const P=T/r*Math.PI*2,B=Math.sin(P),b=-Math.cos(P);l.x=b*w.x+B*R.x,l.y=b*w.y+B*R.y,l.z=b*w.z+B*R.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=h.x+i*l.x,a.y=h.y+i*l.y,a.z=h.z+i*l.z,d.push(a.x,a.y,a.z)}}function g(){for(let S=1;S<=t;S++)for(let w=1;w<=r;w++){const R=(r+1)*(S-1)+(w-1),T=(r+1)*S+(w-1),P=(r+1)*S+w,B=(r+1)*(S-1)+w;y.push(R,T,B),y.push(T,P,B)}}function A(){for(let S=0;S<=t;S++)for(let w=0;w<=r;w++)c.x=S/t,c.y=w/r,m.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new N_(new _v[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class oU extends Ct{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new F,s=new F;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,h=l.length;c<h;++c){const d=l[c],p=d.start,m=d.count;for(let y=p,x=p+m;y<x;y+=3)for(let _=0;_<3;_++){const g=a.getX(y+_),A=a.getX(y+(_+1)%3);r.fromBufferAttribute(o,g),s.fromBufferAttribute(o,A),HI(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const h=3*a+c,d=3*a+(c+1)%3;r.fromBufferAttribute(o,h),s.fromBufferAttribute(o,d),HI(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new et(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function HI(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var WI=Object.freeze({__proto__:null,BoxGeometry:Yc,CapsuleGeometry:E_,CircleGeometry:w_,ConeGeometry:M_,CylinderGeometry:yf,DodecahedronGeometry:T_,EdgesGeometry:nU,ExtrudeGeometry:R_,IcosahedronGeometry:b_,LatheGeometry:ym,OctahedronGeometry:vm,PlaneGeometry:dm,PolyhedronGeometry:El,RingGeometry:P_,ShapeGeometry:I_,SphereGeometry:_m,TetrahedronGeometry:D_,TorusGeometry:L_,TorusKnotGeometry:B_,TubeGeometry:N_,WireframeGeometry:oU});class aU extends ni{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new ke(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class lU extends To{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class xm extends ni{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ke(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sl,this.normalScale=new me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Io extends xm{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new me(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return On(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ke(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ke(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ke(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class cU extends ni{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ke(16777215),this.specular=new ke(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sl,this.normalScale=new me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=am,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class uU extends ni{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ke(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sl,this.normalScale=new me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class hU extends ni{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sl,this.normalScale=new me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class fU extends ni{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ke(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sl,this.normalScale=new me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=am,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class dU extends ni{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ke(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sl,this.normalScale=new me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class pU extends ir{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function mc(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function mU(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function gU(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function cw(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function jT(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function SK(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],h=c.getValueSize(),d=[],p=[];for(let m=0;m<c.times.length;++m){const y=c.times[m]*r;if(!(y<t||y>=i)){d.push(c.times[m]);for(let x=0;x<h;++x)p.push(c.values[m*h+x])}}d.length!==0&&(c.times=mc(d,c.times.constructor),c.values=mc(p,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function EK(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(c===void 0)continue;let h=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=d/3);let p=0;const m=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const y=a.times.length-1;let x;if(s<=a.times[0]){const g=h,A=d-h;x=a.values.slice(g,A)}else if(s>=a.times[y]){const g=y*d+h,A=g+d-h;x=a.values.slice(g,A)}else{const g=a.createInterpolant(),A=h,S=d-h;g.evaluate(s),x=g.resultBuffer.slice(A,S)}l==="quaternion"&&new Ai().fromArray(x).normalize().conjugate().toArray(x);const _=c.times.length;for(let g=0;g<_;++g){const A=g*m+p;if(l==="quaternion")Ai.multiplyQuaternionsFlat(c.values,A,x,0,c.values,A);else{const S=m-p*2;for(let w=0;w<S;++w)c.values[A+w]-=x[w]}}}return n.blendMode=vT,n}const wK={convertArray:mc,isTypedArray:mU,getKeyframeOrder:gU,sortedArray:cw,flattenJSON:jT,subclip:SK,makeClipAdditive:EK};class vf{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class yU extends vf{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:fc,endingEnd:fc}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case dc:s=e,a=2*t-i;break;case Cp:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case dc:o=e,l=2*i-t;break;case Cp:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const c=(i-t)*.5,h=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=s*h,this._offsetNext=o*h}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,h=this._offsetPrev,d=this._offsetNext,p=this._weightPrev,m=this._weightNext,y=(i-t)/(r-t),x=y*y,_=x*y,g=-p*_+2*p*x-p*y,A=(1+p)*_+(-1.5-2*p)*x+(-.5+p)*y+1,S=(-1-m)*_+(1.5+m)*x+.5*y,w=m*_-m*x;for(let R=0;R!==a;++R)s[R]=g*o[h+R]+A*o[c+R]+S*o[l+R]+w*o[d+R];return s}}class XT extends vf{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,h=(i-t)/(r-t),d=1-h;for(let p=0;p!==a;++p)s[p]=o[c+p]*d+o[l+p]*h;return s}}class vU extends vf{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Js{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=mc(t,this.TimeBufferType),this.values=mc(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:mc(e.times,Array),values:mc(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new vU(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new XT(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new yU(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case jh:t=this.InterpolantFactoryMethodDiscrete;break;case zc:t=this.InterpolantFactoryMethodLinear;break;case Iy:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return jh;case this.InterpolantFactoryMethodLinear:return zc;case this.InterpolantFactoryMethodSmooth:return Iy}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&mU(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===Iy,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],h=e[a+1];if(c!==h&&(a!==1||c!==e[0]))if(r)l=!0;else{const d=a*i,p=d-i,m=d+i;for(let y=0;y!==i;++y){const x=t[d+y];if(x!==t[p+y]||x!==t[m+y]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*i,p=o*i;for(let m=0;m!==i;++m)t[p+m]=t[d+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Js.prototype.TimeBufferType=Float32Array;Js.prototype.ValueBufferType=Float32Array;Js.prototype.DefaultInterpolation=zc;class qc extends Js{}qc.prototype.ValueTypeName="bool";qc.prototype.ValueBufferType=Array;qc.prototype.DefaultInterpolation=jh;qc.prototype.InterpolantFactoryMethodLinear=void 0;qc.prototype.InterpolantFactoryMethodSmooth=void 0;class JT extends Js{}JT.prototype.ValueTypeName="color";class Yh extends Js{}Yh.prototype.ValueTypeName="number";class _U extends vf{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let c=e*a;for(let h=c+a;c!==h;c+=4)Ai.slerpFlat(s,0,o,c-a,o,c,l);return s}}class fl extends Js{InterpolantFactoryMethodLinear(e){return new _U(this.times,this.values,this.getValueSize(),e)}}fl.prototype.ValueTypeName="quaternion";fl.prototype.DefaultInterpolation=zc;fl.prototype.InterpolantFactoryMethodSmooth=void 0;class Qc extends Js{}Qc.prototype.ValueTypeName="string";Qc.prototype.ValueBufferType=Array;Qc.prototype.DefaultInterpolation=jh;Qc.prototype.InterpolantFactoryMethodLinear=void 0;Qc.prototype.InterpolantFactoryMethodSmooth=void 0;class qh extends Js{}qh.prototype.ValueTypeName="vector";class Qh{constructor(e,t=-1,i,r=p_){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Wr(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(TK(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(Js.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const h=gU(l);l=cw(l,1,h),c=cw(c,1,h),!r&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new Yh(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],h=c.name.match(s);if(h&&h.length>1){const d=h[1];let p=r[d];p||(r[d]=p=[]),p.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,p,m,y,x){if(m.length!==0){const _=[],g=[];jT(m,_,g,y),_.length!==0&&x.push(new d(p,_,g))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let d=0;d<c.length;d++){const p=c[d].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let y;for(y=0;y<p.length;y++)if(p[y].morphTargets)for(let x=0;x<p[y].morphTargets.length;x++)m[p[y].morphTargets[x]]=-1;for(const x in m){const _=[],g=[];for(let A=0;A!==p[y].morphTargets.length;++A){const S=p[y];_.push(S.time),g.push(S.morphTarget===x?1:0)}r.push(new Yh(".morphTargetInfluence["+x+"]",_,g))}l=m.length*o}else{const m=".bones["+t[d].name+"]";i(qh,m+".position",p,"pos",r),i(fl,m+".quaternion",p,"rot",r),i(qh,m+".scale",p,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function MK(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Yh;case"vector":case"vector2":case"vector3":case"vector4":return qh;case"color":return JT;case"quaternion":return fl;case"bool":case"boolean":return qc;case"string":return Qc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function TK(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=MK(n.type);if(n.times===void 0){const t=[],i=[];jT(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Qo={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class KT{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(h){a++,s===!1&&r.onStart!==void 0&&r.onStart(h,o,a),s=!0},this.itemEnd=function(h){o++,r.onProgress!==void 0&&r.onProgress(h,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(h){r.onError!==void 0&&r.onError(h)},this.resolveURL=function(h){return l?l(h):h},this.setURLModifier=function(h){return l=h,this},this.addHandler=function(h,d){return c.push(h,d),this},this.removeHandler=function(h){const d=c.indexOf(h);return d!==-1&&c.splice(d,2),this},this.getHandler=function(h){for(let d=0,p=c.length;d<p;d+=2){const m=c[d],y=c[d+1];if(m.global&&(m.lastIndex=0),m.test(h))return y}return null}}}const fh=new KT;class rr{constructor(e){this.manager=e!==void 0?e:fh,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}rr.DEFAULT_MATERIAL_NAME="__DEFAULT";const Ho={};class CK extends Error{constructor(e,t){super(e),this.response=t}}class Xr extends rr{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Qo.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Ho[e]!==void 0){Ho[e].push({onLoad:t,onProgress:i,onError:r});return}Ho[e]=[],Ho[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const h=Ho[e],d=c.body.getReader(),p=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),m=p?parseInt(p):0,y=m!==0;let x=0;const _=new ReadableStream({start(g){A();function A(){d.read().then(({done:S,value:w})=>{if(S)g.close();else{x+=w.byteLength;const R=new ProgressEvent("progress",{lengthComputable:y,loaded:x,total:m});for(let T=0,P=h.length;T<P;T++){const B=h[T];B.onProgress&&B.onProgress(R)}g.enqueue(w),A()}})}}});return new Response(_)}else throw new CK(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(h=>new DOMParser().parseFromString(h,a));case"json":return c.json();default:if(a===void 0)return c.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),p=d&&d[1]?d[1].toLowerCase():void 0,m=new TextDecoder(p);return c.arrayBuffer().then(y=>m.decode(y))}}}).then(c=>{Qo.add(e,c);const h=Ho[e];delete Ho[e];for(let d=0,p=h.length;d<p;d++){const m=h[d];m.onLoad&&m.onLoad(c)}}).catch(c=>{const h=Ho[e];if(h===void 0)throw this.manager.itemError(e),c;delete Ho[e];for(let d=0,p=h.length;d<p;d++){const m=h[d];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class RK extends rr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Xr(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=Qh.parse(e[i]);t.push(r)}return t}}class bK extends rr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],a=new A_,l=new Xr(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function h(d){l.load(e[d],function(p){const m=s.parse(p,!0);o[d]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},c+=1,c===6&&(m.mipmapCount===1&&(a.minFilter=Tn),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let d=0,p=e.length;d<p;++d)h(d);else l.load(e,function(d){const p=s.parse(d,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let y=0;y<m;y++){o[y]={mipmaps:[]};for(let x=0;x<p.mipmapCount;x++)o[y].mipmaps.push(p.mipmaps[y*p.mipmapCount+x]),o[y].format=p.format,o[y].width=p.width,o[y].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=Tn),a.format=p.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}}class Op extends rr{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Qo.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Dp("img");function l(){h(),Qo.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(d){h(),r&&r(d),s.manager.itemError(e),s.manager.itemEnd(e)}function h(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class PK extends rr{constructor(e){super(e)}load(e,t,i,r){const s=new hm;s.colorSpace=oi;const o=new Op(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(h){s.images[c]=h,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class IK extends rr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Rc,a=new Xr(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let c;try{c=s.parse(l)}catch(h){if(r!==void 0)r(h);else{console.error(h);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:Di,o.wrapT=c.wrapT!==void 0?c.wrapT:Di,o.magFilter=c.magFilter!==void 0?c.magFilter:Tn,o.minFilter=c.minFilter!==void 0?c.minFilter:Tn,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0?o.colorSpace=c.colorSpace:c.encoding!==void 0&&(o.encoding=c.encoding),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=wo),c.mipmapCount===1&&(o.minFilter=Tn),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c)},i,r),o}}class xU extends rr{constructor(e){super(e)}load(e,t,i,r){const s=new Sn,o=new Op(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class wl extends Ht{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new ke(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class AU extends wl{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Ht.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ke(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const LA=new ht,jI=new F,XI=new F;class $T{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new me(512,512),this.map=null,this.mapPass=null,this.matrix=new ht,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new fm,this._frameExtents=new me(1,1),this._viewportCount=1,this._viewports=[new rn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;jI.setFromMatrixPosition(e.matrixWorld),t.position.copy(jI),XI.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(XI),t.updateMatrixWorld(),LA.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(LA),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(LA)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class DK extends $T{constructor(){super(new mn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=Jh*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class YT extends wl{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Ht.DEFAULT_UP),this.updateMatrix(),this.target=new Ht,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new DK}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const JI=new ht,hd=new F,BA=new F;class LK extends $T{constructor(){super(new mn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new me(4,2),this._viewportCount=6,this._viewports=[new rn(2,1,1,1),new rn(0,1,1,1),new rn(3,1,1,1),new rn(1,1,1,1),new rn(3,0,1,1),new rn(1,0,1,1)],this._cubeDirections=[new F(1,0,0),new F(-1,0,0),new F(0,0,1),new F(0,0,-1),new F(0,1,0),new F(0,-1,0)],this._cubeUps=[new F(0,1,0),new F(0,1,0),new F(0,1,0),new F(0,1,0),new F(0,0,1),new F(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),hd.setFromMatrixPosition(e.matrixWorld),i.position.copy(hd),BA.copy(i.position),BA.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(BA),i.updateMatrixWorld(),r.makeTranslation(-hd.x,-hd.y,-hd.z),JI.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(JI)}}class qT extends wl{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new LK}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class BK extends $T{constructor(){super(new As(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class QT extends wl{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Ht.DEFAULT_UP),this.updateMatrix(),this.target=new Ht,this.shadow=new BK}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class SU extends wl{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class EU extends wl{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class wU{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new F)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class MU extends wl{constructor(e=new wU,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class F_ extends rr{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new Xr(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=F_.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new ke().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new ke().setHex(o.value);break;case"v2":r.uniforms[s].value=new me().fromArray(o.value);break;case"v3":r.uniforms[s].value=new F().fromArray(o.value);break;case"v4":r.uniforms[s].value=new rn().fromArray(o.value);break;case"m3":r.uniforms[s].value=new Lt().fromArray(o.value);break;case"m4":r.uniforms[s].value=new ht().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new me().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new me().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:aU,SpriteMaterial:BT,RawShaderMaterial:lU,ShaderMaterial:To,PointsMaterial:gm,MeshPhysicalMaterial:Io,MeshStandardMaterial:xm,MeshPhongMaterial:cU,MeshToonMaterial:uU,MeshNormalMaterial:hU,MeshLambertMaterial:fU,MeshDepthMaterial:IT,MeshDistanceMaterial:DT,MeshBasicMaterial:Gr,MeshMatcapMaterial:dU,LineDashedMaterial:pU,LineBasicMaterial:ir,Material:ni};return new t[e]}}class xo{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class TU extends Ct{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class CU extends rr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Xr(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(m,y){if(t[y]!==void 0)return t[y];const _=m.interleavedBuffers[y],g=s(m,_.buffer),A=lh(_.type,g),S=new pm(A,_.stride);return S.uuid=_.uuid,t[y]=S,S}function s(m,y){if(i[y]!==void 0)return i[y];const _=m.arrayBuffers[y],g=new Uint32Array(_).buffer;return i[y]=g,g}const o=e.isInstancedBufferGeometry?new TU:new Ct,a=e.data.index;if(a!==void 0){const m=lh(a.type,a.array);o.setIndex(new Wt(m,1))}const l=e.data.attributes;for(const m in l){const y=l[m];let x;if(y.isInterleavedBufferAttribute){const _=r(e.data,y.data);x=new hl(_,y.itemSize,y.offset,y.normalized)}else{const _=lh(y.type,y.array),g=y.isInstancedBufferAttribute?$h:Wt;x=new g(_,y.itemSize,y.normalized)}y.name!==void 0&&(x.name=y.name),y.usage!==void 0&&x.setUsage(y.usage),o.setAttribute(m,x)}const c=e.data.morphAttributes;if(c)for(const m in c){const y=c[m],x=[];for(let _=0,g=y.length;_<g;_++){const A=y[_];let S;if(A.isInterleavedBufferAttribute){const w=r(e.data,A.data);S=new hl(w,A.itemSize,A.offset,A.normalized)}else{const w=lh(A.type,A.array);S=new Wt(w,A.itemSize,A.normalized)}A.name!==void 0&&(S.name=A.name),x.push(S)}o.morphAttributes[m]=x}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let m=0,y=d.length;m!==y;++m){const x=d[m];o.addGroup(x.start,x.count,x.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new F;p.center!==void 0&&m.fromArray(p.center),o.boundingSphere=new Bi(m,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class NK extends rr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?xo.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Xr(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(d){r!==void 0&&r(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const h=c.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?xo.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new Xr(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,i),h=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,h),t!==void 0){let d=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){d=!0;break}d===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new bc().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new mm().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new CU;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in WI?a=WI[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new F_;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=Qh.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return o(h)}else return l.data?{data:lh(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new KT(t);s=new Op(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,h=e.length;c<h;c++){const d=e[c],p=d.url;if(Array.isArray(p)){const m=[];for(let y=0,x=p.length;y<x;y++){const _=p[y],g=a(_);g!==null&&(g instanceof HTMLImageElement?m.push(g):m.push(new Rc(g.data,g.width,g.height)))}r[d.uuid]=new pc(m)}else{const m=a(d.url);r[d.uuid]=new pc(m)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:lh(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new Op(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const h=[];for(let d=0,p=c.length;d<p;d++){const m=c[d],y=await s(m);y!==null&&(y instanceof HTMLImageElement?h.push(y):h.push(new Rc(y.data,y.width,y.height)))}i[l.uuid]=new pc(h)}else{const h=await s(l.url);i[l.uuid]=new pc(h)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let h;Array.isArray(c)?(h=new hm,c.length===6&&(h.needsUpdate=!0)):(c&&c.data?h=new Rc:h=new Sn,c&&(h.needsUpdate=!0)),h.source=l,h.uuid=a.uuid,a.name!==void 0&&(h.name=a.name),a.mapping!==void 0&&(h.mapping=i(a.mapping,FK)),a.channel!==void 0&&(h.channel=a.channel),a.offset!==void 0&&h.offset.fromArray(a.offset),a.repeat!==void 0&&h.repeat.fromArray(a.repeat),a.center!==void 0&&h.center.fromArray(a.center),a.rotation!==void 0&&(h.rotation=a.rotation),a.wrap!==void 0&&(h.wrapS=i(a.wrap[0],KI),h.wrapT=i(a.wrap[1],KI)),a.format!==void 0&&(h.format=a.format),a.internalFormat!==void 0&&(h.internalFormat=a.internalFormat),a.type!==void 0&&(h.type=a.type),a.colorSpace!==void 0&&(h.colorSpace=a.colorSpace),a.encoding!==void 0&&(h.encoding=a.encoding),a.minFilter!==void 0&&(h.minFilter=i(a.minFilter,$I)),a.magFilter!==void 0&&(h.magFilter=i(a.magFilter,$I)),a.anisotropy!==void 0&&(h.anisotropy=a.anisotropy),a.flipY!==void 0&&(h.flipY=a.flipY),a.generateMipmaps!==void 0&&(h.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(h.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(h.compareFunction=a.compareFunction),a.userData!==void 0&&(h.userData=a.userData),r[a.uuid]=h}return r}parseObject(e,t,i,r,s){let o;function a(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let y=0,x=p.length;y<x;y++){const _=p[y];i[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),m.push(i[_])}return m}return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),i[p]}}function c(p){return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),r[p]}let h,d;switch(e.type){case"Scene":o=new vv,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new ke(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new __(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new v_(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new mn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new As(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new SU(e.color,e.intensity);break;case"DirectionalLight":o=new QT(e.color,e.intensity);break;case"PointLight":o=new qT(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new EU(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new YT(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new AU(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new MU().fromJSON(e);break;case"SkinnedMesh":h=a(e.geometry),d=l(e.material),o=new NT(h,d),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":h=a(e.geometry),d=l(e.material),o=new ti(h,d);break;case"InstancedMesh":h=a(e.geometry),d=l(e.material);const p=e.count,m=e.instanceMatrix,y=e.instanceColor;o=new FT(h,d,p),o.instanceMatrix=new $h(new Float32Array(m.array),16),y!==void 0&&(o.instanceColor=new $h(new Float32Array(y.array),y.itemSize));break;case"BatchedMesh":h=a(e.geometry),d=l(e.material),o=new YO(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,d),o.geometry=h,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(x=>{const _=new Qi;_.min.fromArray(x.boxMin),_.max.fromArray(x.boxMax);const g=new Bi;return g.radius=x.sphereRadius,g.center.fromArray(x.sphereCenter),{boxInitialized:x.boxInitialized,box:_,sphereInitialized:x.sphereInitialized,sphere:g}}),o._maxGeometryCount=e.maxGeometryCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=c(e.matricesTexture.uuid);break;case"LOD":o=new $O;break;case"Line":o=new ua(a(e.geometry),l(e.material));break;case"LineLoop":o=new OT(a(e.geometry),l(e.material));break;case"LineSegments":o=new js(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new UT(a(e.geometry),l(e.material));break;case"Sprite":o=new KO(l(e.material));break;case"Group":o=new qo;break;case"Bone":o=new x_;break;default:o=new Ht}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],t,i,r,s))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const y=p[m];o.animations.push(s[y])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const y=p[m],x=o.getObjectByProperty("uuid",y.object);x!==void 0&&o.addLevel(x,y.distance,y.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const FK={UVMapping:h_,CubeReflectionMapping:ca,CubeRefractionMapping:cl,EquirectangularReflectionMapping:wp,EquirectangularRefractionMapping:Mp,CubeUVReflectionMapping:mf},KI={RepeatWrapping:ul,ClampToEdgeWrapping:Di,MirroredRepeatWrapping:Hh},$I={NearestFilter:Fn,NearestMipmapNearestFilter:Tp,NearestMipmapLinearFilter:Ch,LinearFilter:Tn,LinearMipmapNearestFilter:f_,LinearMipmapLinearFilter:wo};class RU extends rr{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Qo.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(c=>{t&&t(c),s.manager.itemEnd(e)}).catch(c=>{r&&r(c)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return Qo.add(e,c),t&&t(c),s.manager.itemEnd(e),c}).catch(function(c){r&&r(c),Qo.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Qo.add(e,l),s.manager.itemStart(e)}}let z0;class ZT{static getContext(){return z0===void 0&&(z0=new(window.AudioContext||window.webkitAudioContext)),z0}static setContext(e){z0=e}}class OK extends rr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Xr(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);ZT.getContext().decodeAudioData(c,function(d){t(d)}).catch(a)}catch(c){a(c)}},i,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}const YI=new ht,qI=new ht,Hl=new ht;class UK{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new mn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new mn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Hl.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(Tc*t.fov*.5)/t.zoom;let a,l;qI.elements[12]=-r,YI.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,Hl.elements[0]=2*t.near/(l-a),Hl.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Hl),a=-o*t.aspect-s,l=o*t.aspect-s,Hl.elements[0]=2*t.near/(l-a),Hl.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Hl)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(qI),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(YI)}}class eC{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=QI(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=QI();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function QI(){return(typeof performance>"u"?Date:performance).now()}const Wl=new F,ZI=new Ai,kK=new F,jl=new F;class VK extends Ht{constructor(){super(),this.type="AudioListener",this.context=ZT.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new eC}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Wl,ZI,kK),jl.set(0,0,-1).applyQuaternion(ZI),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Wl.x,r),t.positionY.linearRampToValueAtTime(Wl.y,r),t.positionZ.linearRampToValueAtTime(Wl.z,r),t.forwardX.linearRampToValueAtTime(jl.x,r),t.forwardY.linearRampToValueAtTime(jl.y,r),t.forwardZ.linearRampToValueAtTime(jl.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(Wl.x,Wl.y,Wl.z),t.setOrientation(jl.x,jl.y,jl.z,i.x,i.y,i.z)}}class bU extends Ht{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Xl=new F,eD=new Ai,zK=new F,Jl=new F;class GK extends bU{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Xl,eD,zK),Jl.set(0,0,1).applyQuaternion(eD);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Xl.x,i),t.positionY.linearRampToValueAtTime(Xl.y,i),t.positionZ.linearRampToValueAtTime(Xl.z,i),t.orientationX.linearRampToValueAtTime(Jl.x,i),t.orientationY.linearRampToValueAtTime(Jl.y,i),t.orientationZ.linearRampToValueAtTime(Jl.z,i)}else t.setPosition(Xl.x,Xl.y,Xl.z),t.setOrientation(Jl.x,Jl.y,Jl.z)}}class HK{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class PU{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){Ai.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;Ai.multiplyQuaternionsFlat(e,o,e,t,e,i),Ai.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const tC="\\[\\]\\.:\\/",WK=new RegExp("["+tC+"]","g"),nC="[^"+tC+"]",jK="[^"+tC.replace("\\.","")+"]",XK=/((?:WC+[\/:])*)/.source.replace("WC",nC),JK=/(WCOD+)?/.source.replace("WCOD",jK),KK=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",nC),$K=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",nC),YK=new RegExp("^"+XK+JK+KK+$K+"$"),qK=["material","materials","bones","map"];class QK{constructor(e,t,i){const r=i||Gt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Gt{constructor(e,t,i){this.path=t,this.parsedPath=i||Gt.parseTrackName(t),this.node=Gt.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Gt.Composite(e,t,i):new Gt(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(WK,"")}static parseTrackName(e){const t=YK.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);qK.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=Gt.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let c=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===c){c=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[r];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Gt.Composite=QK;Gt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Gt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Gt.prototype.GetterByBindingType=[Gt.prototype._getValue_direct,Gt.prototype._getValue_array,Gt.prototype._getValue_arrayElement,Gt.prototype._getValue_toArray];Gt.prototype.SetterByBindingTypeAndVersioning=[[Gt.prototype._setValue_direct,Gt.prototype._setValue_direct_setNeedsUpdate,Gt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Gt.prototype._setValue_array,Gt.prototype._setValue_array_setNeedsUpdate,Gt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Gt.prototype._setValue_arrayElement,Gt.prototype._setValue_arrayElement_setNeedsUpdate,Gt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Gt.prototype._setValue_fromArray,Gt.prototype._setValue_fromArray_setNeedsUpdate,Gt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class ZK{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Wr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let h=0,d=arguments.length;h!==d;++h){const p=arguments[h],m=p.uuid;let y=t[m];if(y===void 0){y=l++,t[m]=y,e.push(p);for(let x=0,_=o;x!==_;++x)s[x].push(new Gt(p,i[x],r[x]))}else if(y<c){a=e[y];const x=--c,_=e[x];t[_.uuid]=y,e[y]=_,t[m]=x,e[x]=p;for(let g=0,A=o;g!==A;++g){const S=s[g],w=S[x];let R=S[y];S[y]=w,R===void 0&&(R=new Gt(p,i[g],r[g])),S[x]=R}}else e[y]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,h=t[c];if(h!==void 0&&h>=s){const d=s++,p=e[d];t[p.uuid]=h,e[h]=p,t[c]=d,e[d]=l;for(let m=0,y=r;m!==y;++m){const x=i[m],_=x[d],g=x[h];x[h]=_,x[d]=g}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],h=c.uuid,d=t[h];if(d!==void 0)if(delete t[h],d<s){const p=--s,m=e[p],y=--o,x=e[y];t[m.uuid]=d,e[d]=m,t[x.uuid]=p,e[p]=x,e.pop();for(let _=0,g=r;_!==g;++_){const A=i[_],S=A[p],w=A[y];A[d]=S,A[p]=w,A.pop()}}else{const p=--o,m=e[p];p>0&&(t[m.uuid]=d),e[d]=m,e.pop();for(let y=0,x=r;y!==x;++y){const _=i[y];_[d]=_[p],_.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,h=this.nCachedObjects_,d=new Array(c);r=s.length,i[e]=r,o.push(e),a.push(t),s.push(d);for(let p=h,m=l.length;p!==m;++p){const y=l[p];d[p]=new Gt(y,e,t)}return d}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class IU{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:fc,endingEnd:fc};for(let c=0;c!==o;++c){const h=s[c].createInterpolant(null);a[c]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=vO,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case vT:for(let h=0,d=l.length;h!==d;++h)l[h].evaluate(o),c[h].accumulateAdditive(a);break;case p_:default:for(let h=0,d=l.length;h!==d;++h)l[h].evaluate(o),c[h].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===_O;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===yO){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=dc,r.endingEnd=dc):(e?r.endingStart=this.zeroSlopeAtStart?dc:fc:r.endingStart=Cp,t?r.endingEnd=this.zeroSlopeAtEnd?dc:fc:r.endingEnd=Cp)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}const e$=new Float32Array(1);class t$ extends Po{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let h=c[l];h===void 0&&(h={},c[l]=h);for(let d=0;d!==s;++d){const p=r[d],m=p.name;let y=h[m];if(y!==void 0)++y.referenceCount,o[d]=y;else{if(y=o[d],y!==void 0){y._cacheIndex===null&&(++y.referenceCount,this._addInactiveBinding(y,l,m));continue}const x=t&&t._propertyBindings[d].binding.parsedPath;y=new PU(Gt.create(i,m,x),p.ValueTypeName,p.getValueSize()),++y.referenceCount,this._addInactiveBinding(y,l,m),o[d]=y}a[d].resultBuffer=y.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],h=e._byClipCacheIndex;c._byClipCacheIndex=h,l[h]=c,l.pop(),e._byClipCacheIndex=null;const d=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete d[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new XT(new Float32Array(2),new Float32Array(2),1,e$),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?Qh.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(i===void 0&&(o!==null?i=o.blendMode:i=p_),l!==void 0){const d=l.actionByRoot[s];if(d!==void 0&&d.blendMode===i)return d;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const h=new IU(this,o,t,i);return this._bindAction(h,c),this._addInactiveAction(h,a,s),h}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?Qh.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const h=c._cacheIndex,d=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,d._cacheIndex=h,t[h]=d,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class iC{constructor(e){this.value=e}clone(){return new iC(this.value.clone===void 0?this.value:this.value.clone())}}let n$=0;class i$ extends Po{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:n$++}),this.name="",this.usage=Ip,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class r$ extends pm{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class s${constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class DU{constructor(e,t,i=0,r=1/0){this.ray=new $c(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new Cc,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return uw(e,this,i,t),i.sort(tD),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)uw(e[r],this,i,t);return i.sort(tD),i}}function tD(n,e){return n.distance-e.distance}function uw(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const r=n.children;for(let s=0,o=r.length;s<o;s++)uw(r[s],e,t,!0)}}class hw{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(On(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class o${constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const nD=new me;class a${constructor(e=new me(1/0,1/0),t=new me(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=nD.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,nD).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const iD=new F,G0=new F;class l${constructor(e=new F,t=new F){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){iD.subVectors(e,this.start),G0.subVectors(this.end,this.start);const i=G0.dot(G0);let s=G0.dot(iD)/i;return t&&(s=On(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const rD=new F;class c$ extends Ht{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new Ct,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,h=a/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(h),Math.sin(h),1)}i.setAttribute("position",new et(r,3));const s=new ir({fog:!1,toneMapped:!1});this.cone=new js(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),rD.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(rD),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Pa=new F,H0=new ht,NA=new ht;class u$ extends js{constructor(e){const t=LU(e),i=new Ct,r=[],s=[],o=new ke(0,0,1),a=new ke(0,1,0);for(let c=0;c<t.length;c++){const h=t[c];h.parent&&h.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new et(r,3)),i.setAttribute("color",new et(s,3));const l=new ir({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");NA.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(H0.multiplyMatrices(NA,a.matrixWorld),Pa.setFromMatrixPosition(H0),r.setXYZ(o,Pa.x,Pa.y,Pa.z),H0.multiplyMatrices(NA,a.parent.matrixWorld),Pa.setFromMatrixPosition(H0),r.setXYZ(o+1,Pa.x,Pa.y,Pa.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function LU(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,LU(n.children[t]));return e}class h$ extends ti{constructor(e,t,i){const r=new _m(t,4,2),s=new Gr({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const f$=new F,sD=new ke,oD=new ke;class d$ extends Ht{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new vm(t);r.rotateY(Math.PI*.5),this.material=new Gr({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new Wt(o,3)),this.add(new ti(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");sD.copy(this.light.color),oD.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?sD:oD;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(f$.setFromMatrixPosition(this.light.matrixWorld).negate())}}class p$ extends js{constructor(e=10,t=10,i=4473924,r=8947848){i=new ke(i),r=new ke(r);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let p=0,m=0,y=-a;p<=t;p++,y+=o){l.push(-a,0,y,a,0,y),l.push(y,0,-a,y,0,a);const x=p===s?i:r;x.toArray(c,m),m+=3,x.toArray(c,m),m+=3,x.toArray(c,m),m+=3,x.toArray(c,m),m+=3}const h=new Ct;h.setAttribute("position",new et(l,3)),h.setAttribute("color",new et(c,3));const d=new ir({vertexColors:!0,toneMapped:!1});super(h,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class m$ extends js{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new ke(s),o=new ke(o);const a=[],l=[];if(t>1)for(let d=0;d<t;d++){const p=d/t*(Math.PI*2),m=Math.sin(p)*e,y=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,y);const x=d&1?s:o;l.push(x.r,x.g,x.b),l.push(x.r,x.g,x.b)}for(let d=0;d<i;d++){const p=d&1?s:o,m=e-e/i*d;for(let y=0;y<r;y++){let x=y/r*(Math.PI*2),_=Math.sin(x)*m,g=Math.cos(x)*m;a.push(_,0,g),l.push(p.r,p.g,p.b),x=(y+1)/r*(Math.PI*2),_=Math.sin(x)*m,g=Math.cos(x)*m,a.push(_,0,g),l.push(p.r,p.g,p.b)}}const c=new Ct;c.setAttribute("position",new et(a,3)),c.setAttribute("color",new et(l,3));const h=new ir({vertexColors:!0,toneMapped:!1});super(c,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const aD=new F,W0=new F,lD=new F;class g$ extends Ht{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new Ct;r.setAttribute("position",new et([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new ir({fog:!1,toneMapped:!1});this.lightPlane=new ua(r,s),this.add(this.lightPlane),r=new Ct,r.setAttribute("position",new et([0,0,0,0,0,1],3)),this.targetLine=new ua(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),aD.setFromMatrixPosition(this.light.matrixWorld),W0.setFromMatrixPosition(this.light.target.matrixWorld),lD.subVectors(W0,aD),this.lightPlane.lookAt(W0),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(W0),this.targetLine.scale.z=lD.length()}}const j0=new F,Bn=new um;class y$ extends js{constructor(e){const t=new Ct,i=new ir({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(y,x){l(y),l(x)}function l(y){r.push(0,0,0),s.push(0,0,0),o[y]===void 0&&(o[y]=[]),o[y].push(r.length/3-1)}t.setAttribute("position",new et(r,3)),t.setAttribute("color",new et(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new ke(16755200),h=new ke(16711680),d=new ke(43775),p=new ke(16777215),m=new ke(3355443);this.setColors(c,h,d,p,m)}setColors(e,t,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;Bn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Gn("c",t,e,Bn,0,0,-1),Gn("t",t,e,Bn,0,0,1),Gn("n1",t,e,Bn,-i,-r,-1),Gn("n2",t,e,Bn,i,-r,-1),Gn("n3",t,e,Bn,-i,r,-1),Gn("n4",t,e,Bn,i,r,-1),Gn("f1",t,e,Bn,-i,-r,1),Gn("f2",t,e,Bn,i,-r,1),Gn("f3",t,e,Bn,-i,r,1),Gn("f4",t,e,Bn,i,r,1),Gn("u1",t,e,Bn,i*.7,r*1.1,-1),Gn("u2",t,e,Bn,-i*.7,r*1.1,-1),Gn("u3",t,e,Bn,0,r*2,-1),Gn("cf1",t,e,Bn,-i,0,1),Gn("cf2",t,e,Bn,i,0,1),Gn("cf3",t,e,Bn,0,-r,1),Gn("cf4",t,e,Bn,0,r,1),Gn("cn1",t,e,Bn,-i,0,-1),Gn("cn2",t,e,Bn,i,0,-1),Gn("cn3",t,e,Bn,0,-r,-1),Gn("cn4",t,e,Bn,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Gn(n,e,t,i,r,s,o){j0.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,h=a.length;c<h;c++)l.setXYZ(a[c],j0.x,j0.y,j0.z)}}const X0=new Qi;class v$ extends js{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new Ct;s.setIndex(new Wt(i,1)),s.setAttribute("position",new Wt(r,3)),super(s,new ir({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&X0.setFromObject(this.object),X0.isEmpty())return;const t=X0.min,i=X0.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class _$ extends js{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Ct;s.setIndex(new Wt(i,1)),s.setAttribute("position",new et(r,3)),super(s,new ir({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class x$ extends ua{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Ct;o.setAttribute("position",new et(s,3)),o.computeBoundingSphere(),super(o,new ir({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Ct;l.setAttribute("position",new et(a,3)),l.computeBoundingSphere(),this.add(new ti(l,new Gr({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const cD=new F;let J0,FA;class A$ extends Ht{constructor(e=new F(0,0,1),t=new F(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",J0===void 0&&(J0=new Ct,J0.setAttribute("position",new et([0,0,0,0,1,0],3)),FA=new yf(0,.5,1,5,1),FA.translate(0,-.5,0)),this.position.copy(t),this.line=new ua(J0,new ir({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ti(FA,new Gr({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{cD.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(cD,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class S$ extends js{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Ct;r.setAttribute("position",new et(t,3)),r.setAttribute("color",new et(i,3));const s=new ir({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new ke,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class E${constructor(){this.type="ShapePath",this.color=new ke,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Lp,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(g){const A=[];for(let S=0,w=g.length;S<w;S++){const R=g[S],T=new bc;T.curves=R.curves,A.push(T)}return A}function i(g,A){const S=A.length;let w=!1;for(let R=S-1,T=0;T<S;R=T++){let P=A[R],B=A[T],b=B.x-P.x,I=B.y-P.y;if(Math.abs(I)>Number.EPSILON){if(I<0&&(P=A[T],b=-b,B=A[R],I=-I),g.y<P.y||g.y>B.y)continue;if(g.y===P.y){if(g.x===P.x)return!0}else{const U=I*(g.x-P.x)-b*(g.y-P.y);if(U===0)return!0;if(U<0)continue;w=!w}}else{if(g.y!==P.y)continue;if(B.x<=g.x&&g.x<=P.x||P.x<=g.x&&g.x<=B.x)return!0}}return w}const r=_o.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new bc,l.curves=a.curves,c.push(l),c;let h=!r(s[0].getPoints());h=e?!h:h;const d=[],p=[];let m=[],y=0,x;p[y]=void 0,m[y]=[];for(let g=0,A=s.length;g<A;g++)a=s[g],x=a.getPoints(),o=r(x),o=e?!o:o,o?(!h&&p[y]&&y++,p[y]={s:new bc,p:x},p[y].s.curves=a.curves,h&&y++,m[y]=[]):m[y].push({h:a,p:x[0]});if(!p[0])return t(s);if(p.length>1){let g=!1,A=0;for(let S=0,w=p.length;S<w;S++)d[S]=[];for(let S=0,w=p.length;S<w;S++){const R=m[S];for(let T=0;T<R.length;T++){const P=R[T];let B=!0;for(let b=0;b<p.length;b++)i(P.p,p[b].p)&&(S!==b&&A++,B?(B=!1,d[b].push(P)):g=!0);B&&d[S].push(P)}}A>0&&g===!1&&(m=d)}let _;for(let g=0,A=p.length;g<A;g++){l=p[g].s,c.push(l),_=m[g];for(let S=0,w=_.length;S<w;S++)l.holes.push(_[S].h)}return c}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:pf}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=pf);const BU=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:uT,AddEquation:za,AddOperation:nO,AdditiveAnimationBlendMode:vT,AdditiveBlending:wE,AgXToneMapping:aO,AlphaFormat:hO,AlwaysCompare:PO,AlwaysDepth:$F,AlwaysStencilFunc:tw,AmbientLight:SU,AnimationAction:IU,AnimationClip:Qh,AnimationLoader:RK,AnimationMixer:t$,AnimationObjectGroup:ZK,AnimationUtils:wK,ArcCurve:qO,ArrayCamera:jO,ArrowHelper:A$,AttachedBindMode:bE,Audio:bU,AudioAnalyser:HK,AudioContext:ZT,AudioListener:VK,AudioLoader:OK,AxesHelper:S$,BackSide:gr,BasicDepthPacking:AO,BasicShadowMap:IF,BatchedMesh:YO,Bone:x_,BooleanKeyframeTrack:qc,Box2:a$,Box3:Qi,Box3Helper:_$,BoxGeometry:Yc,BoxHelper:v$,BufferAttribute:Wt,BufferGeometry:Ct,BufferGeometryLoader:CU,ByteType:cO,Cache:Qo,Camera:um,CameraHelper:y$,CanvasTexture:KJ,CapsuleGeometry:E_,CatmullRomCurve3:QO,CineonToneMapping:sO,CircleGeometry:w_,ClampToEdgeWrapping:Di,Clock:eC,Color:ke,ColorKeyframeTrack:JT,ColorManagement:nn,CompressedArrayTexture:XJ,CompressedCubeTexture:JJ,CompressedTexture:A_,CompressedTextureLoader:bK,ConeGeometry:M_,ConstantAlphaFactor:XF,ConstantColorFactor:WF,CubeCamera:CT,CubeReflectionMapping:ca,CubeRefractionMapping:cl,CubeTexture:hm,CubeTextureLoader:PK,CubeUVReflectionMapping:mf,CubicBezierCurve:VT,CubicBezierCurve3:ZO,CubicInterpolant:yU,CullFaceBack:EE,CullFaceFront:PF,CullFaceFrontBack:V6,CullFaceNone:bF,Curve:Xs,CurvePath:tU,CustomBlending:DF,CustomToneMapping:oO,CylinderGeometry:yf,Cylindrical:o$,Data3DTexture:wT,DataArrayTexture:g_,DataTexture:Rc,DataTextureLoader:IK,DataUtils:j8,DecrementStencilOp:$6,DecrementWrapStencilOp:q6,DefaultLoadingManager:fh,DepthFormat:tl,DepthStencilFormat:Vc,DepthTexture:PT,DetachedBindMode:lO,DirectionalLight:QT,DirectionalLightHelper:g$,DiscreteInterpolant:vU,DisplayP3ColorSpace:m_,DodecahedronGeometry:T_,DoubleSide:vs,DstAlphaFactor:kF,DstColorFactor:zF,DynamicCopyUsage:h8,DynamicDrawUsage:Mc,DynamicReadUsage:l8,EdgesGeometry:nU,EllipseCurve:S_,EqualCompare:TO,EqualDepth:qF,EqualStencilFunc:t8,EquirectangularReflectionMapping:wp,EquirectangularRefractionMapping:Mp,Euler:cm,EventDispatcher:Po,ExtrudeGeometry:R_,FileLoader:Xr,Float16BufferAttribute:q8,Float32BufferAttribute:et,Float64BufferAttribute:Q8,FloatType:Fs,Fog:__,FogExp2:v_,FramebufferTexture:jJ,FrontSide:Eo,Frustum:fm,GLBufferAttribute:s$,GLSL1:d8,GLSL3:nw,GreaterCompare:CO,GreaterDepth:ZF,GreaterEqualCompare:bO,GreaterEqualDepth:QF,GreaterEqualStencilFunc:s8,GreaterStencilFunc:i8,GridHelper:p$,Group:qo,HalfFloatType:Wh,HemisphereLight:AU,HemisphereLightHelper:d$,IcosahedronGeometry:b_,ImageBitmapLoader:RU,ImageLoader:Op,ImageUtils:ET,IncrementStencilOp:K6,IncrementWrapStencilOp:Y6,InstancedBufferAttribute:$h,InstancedBufferGeometry:TU,InstancedInterleavedBuffer:r$,InstancedMesh:FT,Int16BufferAttribute:$8,Int32BufferAttribute:Y8,Int8BufferAttribute:X8,IntType:hT,InterleavedBuffer:pm,InterleavedBufferAttribute:hl,Interpolant:vf,InterpolateDiscrete:jh,InterpolateLinear:zc,InterpolateSmooth:Iy,InvertStencilOp:Q6,KeepStencilOp:tc,KeyframeTrack:Js,LOD:$O,LatheGeometry:ym,Layers:Cc,LessCompare:MO,LessDepth:YF,LessEqualCompare:AT,LessEqualDepth:Ep,LessEqualStencilFunc:n8,LessStencilFunc:e8,Light:wl,LightProbe:MU,Line:ua,Line3:l$,LineBasicMaterial:ir,LineCurve:zT,LineCurve3:eU,LineDashedMaterial:pU,LineLoop:OT,LineSegments:js,LinearDisplayP3ColorSpace:lm,LinearEncoding:xT,LinearFilter:Tn,LinearInterpolant:XT,LinearMipMapLinearFilter:j6,LinearMipMapNearestFilter:W6,LinearMipmapLinearFilter:wo,LinearMipmapNearestFilter:f_,LinearSRGBColorSpace:Mo,LinearToneMapping:iO,LinearTransfer:Rp,Loader:rr,LoaderUtils:xo,LoadingManager:KT,LoopOnce:yO,LoopPingPong:_O,LoopRepeat:vO,LuminanceAlphaFormat:dO,LuminanceFormat:fO,MOUSE:Zl,Material:ni,MaterialLoader:F_,MathUtils:IO,Matrix3:Lt,Matrix4:ht,MaxEquation:RE,Mesh:ti,MeshBasicMaterial:Gr,MeshDepthMaterial:IT,MeshDistanceMaterial:DT,MeshLambertMaterial:fU,MeshMatcapMaterial:dU,MeshNormalMaterial:hU,MeshPhongMaterial:cU,MeshPhysicalMaterial:Io,MeshStandardMaterial:xm,MeshToonMaterial:uU,MinEquation:CE,MirroredRepeatWrapping:Hh,MixOperation:tO,MultiplyBlending:TE,MultiplyOperation:am,NearestFilter:Fn,NearestMipMapLinearFilter:H6,NearestMipMapNearestFilter:G6,NearestMipmapLinearFilter:Ch,NearestMipmapNearestFilter:Tp,NeverCompare:wO,NeverDepth:KF,NeverStencilFunc:Z6,NoBlending:na,NoColorSpace:Vr,NoToneMapping:yo,NormalAnimationBlendMode:p_,NormalBlending:wc,NotEqualCompare:RO,NotEqualDepth:eO,NotEqualStencilFunc:r8,NumberKeyframeTrack:Yh,Object3D:Ht,ObjectLoader:NK,ObjectSpaceNormalMap:EO,OctahedronGeometry:vm,OneFactor:FF,OneMinusConstantAlphaFactor:JF,OneMinusConstantColorFactor:jF,OneMinusDstAlphaFactor:VF,OneMinusDstColorFactor:GF,OneMinusSrcAlphaFactor:pv,OneMinusSrcColorFactor:UF,OrthographicCamera:As,P3Primaries:Pp,PCFShadowMap:u_,PCFSoftShadowMap:Wd,PMREMGenerator:rw,Path:Lp,PerspectiveCamera:mn,Plane:Xo,PlaneGeometry:dm,PlaneHelper:x$,PointLight:qT,PointLightHelper:h$,Points:UT,PointsMaterial:gm,PolarGridHelper:m$,PolyhedronGeometry:El,PositionalAudio:GK,PropertyBinding:Gt,PropertyMixer:PU,QuadraticBezierCurve:GT,QuadraticBezierCurve3:HT,Quaternion:Ai,QuaternionKeyframeTrack:fl,QuaternionLinearInterpolant:_U,RED_GREEN_RGTC2_Format:ZE,RED_RGTC1_Format:gO,REVISION:pf,RGBADepthPacking:SO,RGBAFormat:fr,RGBAIntegerFormat:gT,RGBA_ASTC_10x10_Format:JE,RGBA_ASTC_10x5_Format:WE,RGBA_ASTC_10x6_Format:jE,RGBA_ASTC_10x8_Format:XE,RGBA_ASTC_12x10_Format:KE,RGBA_ASTC_12x12_Format:$E,RGBA_ASTC_4x4_Format:FE,RGBA_ASTC_5x4_Format:OE,RGBA_ASTC_5x5_Format:UE,RGBA_ASTC_6x5_Format:kE,RGBA_ASTC_6x6_Format:VE,RGBA_ASTC_8x5_Format:zE,RGBA_ASTC_8x6_Format:GE,RGBA_ASTC_8x8_Format:HE,RGBA_BPTC_Format:Py,RGBA_ETC2_EAC_Format:NE,RGBA_PVRTC_2BPPV1_Format:LE,RGBA_PVRTC_4BPPV1_Format:DE,RGBA_S3TC_DXT1_Format:Cy,RGBA_S3TC_DXT3_Format:Ry,RGBA_S3TC_DXT5_Format:by,RGB_BPTC_SIGNED_Format:YE,RGB_BPTC_UNSIGNED_Format:qE,RGB_ETC1_Format:yT,RGB_ETC2_Format:BE,RGB_PVRTC_2BPPV1_Format:IE,RGB_PVRTC_4BPPV1_Format:PE,RGB_S3TC_DXT1_Format:Ty,RGFormat:mO,RGIntegerFormat:mT,RawShaderMaterial:lU,Ray:$c,Raycaster:DU,Rec709Primaries:bp,RectAreaLight:EU,RedFormat:pO,RedIntegerFormat:pT,ReinhardToneMapping:rO,RenderTarget:BO,RepeatWrapping:ul,ReplaceStencilOp:J6,ReverseSubtractEquation:BF,RingGeometry:P_,SIGNED_RED_GREEN_RGTC2_Format:ew,SIGNED_RED_RGTC1_Format:QE,SRGBColorSpace:oi,SRGBTransfer:cn,Scene:vv,ShaderChunk:bt,ShaderLib:Ns,ShaderMaterial:To,ShadowMaterial:aU,Shape:bc,ShapeGeometry:I_,ShapePath:E$,ShapeUtils:_o,ShortType:uO,Skeleton:mm,SkeletonHelper:u$,SkinnedMesh:NT,Source:pc,Sphere:Bi,SphereGeometry:_m,Spherical:hw,SphericalHarmonics3:wU,SplineCurve:WT,SpotLight:YT,SpotLightHelper:c$,Sprite:KO,SpriteMaterial:BT,SrcAlphaFactor:dv,SrcAlphaSaturateFactor:HF,SrcColorFactor:OF,StaticCopyUsage:u8,StaticDrawUsage:Ip,StaticReadUsage:a8,StereoCamera:UK,StreamCopyUsage:f8,StreamDrawUsage:o8,StreamReadUsage:c8,StringKeyframeTrack:Qc,SubtractEquation:LF,SubtractiveBlending:ME,TOUCH:ec,TangentSpaceNormalMap:Sl,TetrahedronGeometry:D_,Texture:Sn,TextureLoader:xU,TorusGeometry:L_,TorusKnotGeometry:B_,Triangle:wr,TriangleFanDrawMode:mv,TriangleStripDrawMode:_T,TrianglesDrawMode:xO,TubeGeometry:N_,TwoPassDoubleSide:z6,UVMapping:h_,Uint16BufferAttribute:MT,Uint32BufferAttribute:TT,Uint8BufferAttribute:J8,Uint8ClampedBufferAttribute:K8,Uniform:iC,UniformsGroup:i$,UniformsLib:Be,UniformsUtils:OO,UnsignedByteType:vo,UnsignedInt248Type:el,UnsignedIntType:Yo,UnsignedShort4444Type:fT,UnsignedShort5551Type:dT,UnsignedShortType:d_,VSMShadowMap:Ds,Vector2:me,Vector3:F,Vector4:rn,VectorKeyframeTrack:qh,VideoTexture:WJ,WebGL1Renderer:XO,WebGL3DRenderTarget:L8,WebGLArrayRenderTarget:D8,WebGLCoordinateSystem:Os,WebGLCubeRenderTarget:RT,WebGLMultipleRenderTargets:B8,WebGLRenderTarget:Gs,WebGLRenderer:LT,WebGLUtils:WO,WebGPUCoordinateSystem:Xh,WireframeGeometry:oU,WrapAroundEnding:Cp,ZeroCurvatureEnding:fc,ZeroFactor:NF,ZeroSlopeEnding:dc,ZeroStencilOp:X6,_SRGBAFormat:gv,createCanvasElement:LO,sRGBEncoding:nl},Symbol.toStringTag,{value:"Module"}));var NU={exports:{}},Zc={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Zc.ConcurrentRoot=1;Zc.ContinuousEventPriority=4;Zc.DefaultEventPriority=16;Zc.DiscreteEventPriority=1;Zc.IdleEventPriority=536870912;Zc.LegacyRoot=0;NU.exports=Zc;var dh=NU.exports;function w$(n){let e;const t=new Set,i=(c,h)=>{const d=typeof c=="function"?c(e):c;if(d!==e){const p=e;e=h?d:Object.assign({},e,d),t.forEach(m=>m(e,p))}},r=()=>e,s=(c,h=r,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=h(e);function m(){const y=h(e);if(!d(p,y)){const x=p;c(p=y,x)}}return t.add(m),()=>t.delete(m)},l={setState:i,getState:r,subscribe:(c,h,d)=>h||d?s(c,h,d):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(i,r,l),l}const M$=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),uD=M$?W.useEffect:W.useLayoutEffect;function FU(n){const e=typeof n=="function"?w$(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=W.useReducer(_=>_+1,0),o=e.getState(),a=W.useRef(o),l=W.useRef(i),c=W.useRef(r),h=W.useRef(!1),d=W.useRef();d.current===void 0&&(d.current=i(o));let p,m=!1;(a.current!==o||l.current!==i||c.current!==r||h.current)&&(p=i(o),m=!r(d.current,p)),uD(()=>{m&&(d.current=p),a.current=o,l.current=i,c.current=r,h.current=!1});const y=W.useRef(o);uD(()=>{const _=()=>{try{const A=e.getState(),S=l.current(A);c.current(d.current,S)||(a.current=A,d.current=S,s())}catch{h.current=!0,s()}},g=e.subscribe(_);return e.getState()!==y.current&&_(),g},[]);const x=m?p:d.current;return W.useDebugValue(x),x};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}var OU={exports:{}},OA={exports:{}},UA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hD;function T$(){return hD||(hD=1,function(n){function e(L,k){var z=L.length;L.push(k);e:for(;0<z;){var j=z-1>>>1,te=L[j];if(0<r(te,k))L[j]=k,L[z]=te,z=j;else break e}}function t(L){return L.length===0?null:L[0]}function i(L){if(L.length===0)return null;var k=L[0],z=L.pop();if(z!==k){L[0]=z;e:for(var j=0,te=L.length,Z=te>>>1;j<Z;){var ce=2*(j+1)-1,Se=L[ce],Te=ce+1,be=L[Te];if(0>r(Se,z))Te<te&&0>r(be,Se)?(L[j]=be,L[Te]=z,j=Te):(L[j]=Se,L[ce]=z,j=ce);else if(Te<te&&0>r(be,z))L[j]=be,L[Te]=z,j=Te;else break e}}return k}function r(L,k){var z=L.sortIndex-k.sortIndex;return z!==0?z:L.id-k.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,p=3,m=!1,y=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(L){for(var k=t(c);k!==null;){if(k.callback===null)i(c);else if(k.startTime<=L)i(c),k.sortIndex=k.expirationTime,e(l,k);else break;k=t(c)}}function w(L){if(x=!1,S(L),!y)if(t(l)!==null)y=!0,Q(R);else{var k=t(c);k!==null&&se(w,k.startTime-L)}}function R(L,k){y=!1,x&&(x=!1,g(B),B=-1),m=!0;var z=p;try{for(S(k),d=t(l);d!==null&&(!(d.expirationTime>k)||L&&!U());){var j=d.callback;if(typeof j=="function"){d.callback=null,p=d.priorityLevel;var te=j(d.expirationTime<=k);k=n.unstable_now(),typeof te=="function"?d.callback=te:d===t(l)&&i(l),S(k)}else i(l);d=t(l)}if(d!==null)var Z=!0;else{var ce=t(c);ce!==null&&se(w,ce.startTime-k),Z=!1}return Z}finally{d=null,p=z,m=!1}}var T=!1,P=null,B=-1,b=5,I=-1;function U(){return!(n.unstable_now()-I<b)}function K(){if(P!==null){var L=n.unstable_now();I=L;var k=!0;try{k=P(!0,L)}finally{k?re():(T=!1,P=null)}}else T=!1}var re;if(typeof A=="function")re=function(){A(K)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,$=G.port2;G.port1.onmessage=K,re=function(){$.postMessage(null)}}else re=function(){_(K,0)};function Q(L){P=L,T||(T=!0,re())}function se(L,k){B=_(function(){L(n.unstable_now())},k)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(L){L.callback=null},n.unstable_continueExecution=function(){y||m||(y=!0,Q(R))},n.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<L?Math.floor(1e3/L):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(L){switch(p){case 1:case 2:case 3:var k=3;break;default:k=p}var z=p;p=k;try{return L()}finally{p=z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(L,k){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var z=p;p=L;try{return k()}finally{p=z}},n.unstable_scheduleCallback=function(L,k,z){var j=n.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?j+z:j):z=j,L){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=z+te,L={id:h++,callback:k,priorityLevel:L,startTime:z,expirationTime:te,sortIndex:-1},z>j?(L.sortIndex=z,e(c,L),t(l)===null&&L===t(c)&&(x?(g(B),B=-1):x=!0,se(w,z-j))):(L.sortIndex=te,e(l,L),y||m||(y=!0,Q(R))),L},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(L){var k=p;return function(){var z=p;p=k;try{return L.apply(this,arguments)}finally{p=z}}}}(UA)),UA}var fD;function C$(){return fD||(fD=1,OA.exports=T$()),OA.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R$=function(e){var t={},i=W,r=C$(),s=Object.assign;function o(u){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+u,v=1;v<arguments.length;v++)f+="&args[]="+encodeURIComponent(arguments[v]);return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),y=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),R=Symbol.iterator;function T(u){return u===null||typeof u!="object"?null:(u=R&&u[R]||u["@@iterator"],typeof u=="function"?u:null)}function P(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case h:return"Fragment";case c:return"Portal";case p:return"Profiler";case d:return"StrictMode";case _:return"Suspense";case g:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case y:return(u.displayName||"Context")+".Consumer";case m:return(u._context.displayName||"Context")+".Provider";case x:var f=u.render;return u=u.displayName,u||(u=f.displayName||f.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case A:return f=u.displayName||null,f!==null?f:P(u.type)||"Memo";case S:f=u._payload,u=u._init;try{return P(u(f))}catch{}}return null}function B(u){var f=u.type;switch(u.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=f.render,u=u.displayName||u.name||"",f.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P(f);case 8:return f===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function b(u){var f=u,v=u;if(u.alternate)for(;f.return;)f=f.return;else{u=f;do f=u,f.flags&4098&&(v=f.return),u=f.return;while(u)}return f.tag===3?v:null}function I(u){if(b(u)!==u)throw Error(o(188))}function U(u){var f=u.alternate;if(!f){if(f=b(u),f===null)throw Error(o(188));return f!==u?null:u}for(var v=u,E=f;;){var M=v.return;if(M===null)break;var C=M.alternate;if(C===null){if(E=M.return,E!==null){v=E;continue}break}if(M.child===C.child){for(C=M.child;C;){if(C===v)return I(M),u;if(C===E)return I(M),f;C=C.sibling}throw Error(o(188))}if(v.return!==E.return)v=M,E=C;else{for(var V=!1,q=M.child;q;){if(q===v){V=!0,v=M,E=C;break}if(q===E){V=!0,E=M,v=C;break}q=q.sibling}if(!V){for(q=C.child;q;){if(q===v){V=!0,v=C,E=M;break}if(q===E){V=!0,E=C,v=M;break}q=q.sibling}if(!V)throw Error(o(189))}}if(v.alternate!==E)throw Error(o(190))}if(v.tag!==3)throw Error(o(188));return v.stateNode.current===v?u:f}function K(u){return u=U(u),u!==null?re(u):null}function re(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var f=re(u);if(f!==null)return f;u=u.sibling}return null}function G(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){if(u.tag!==4){var f=G(u);if(f!==null)return f}u=u.sibling}return null}var $=Array.isArray,Q=e.getPublicInstance,se=e.getRootHostContext,L=e.getChildHostContext,k=e.prepareForCommit,z=e.resetAfterCommit,j=e.createInstance,te=e.appendInitialChild,Z=e.finalizeInitialChildren,ce=e.prepareUpdate,Se=e.shouldSetTextContent,Te=e.createTextInstance,be=e.scheduleTimeout,tt=e.cancelTimeout,ot=e.noTimeout,De=e.isPrimaryRenderer,Re=e.supportsMutation,H=e.supportsPersistence,ve=e.supportsHydration,de=e.getInstanceFromNode,Me=e.preparePortalMount,pe=e.getCurrentEventPriority,Je=e.detachDeletedInstance,Fe=e.supportsMicrotasks,N=e.scheduleMicrotask,D=e.supportsTestSelectors,ne=e.findFiberRoot,Ae=e.getBoundingRect,_e=e.getTextContent,ye=e.isHiddenSubtree,Qe=e.matchAccessibilityRole,Le=e.setFocusIfFocusable,Oe=e.setupIntersectionObserver,at=e.appendChild,xt=e.appendChildToContainer,Ee=e.commitTextUpdate,Ot=e.commitMount,Rt=e.commitUpdate,gt=e.insertBefore,st=e.insertInContainerBefore,Ke=e.removeChild,J=e.removeChildFromContainer,ge=e.resetTextContent,je=e.hideInstance,He=e.hideTextInstance,we=e.unhideInstance,X=e.unhideTextInstance,Ie=e.clearContainer,Ue=e.cloneInstance,ct=e.createContainerChildSet,Ze=e.appendChildToContainerChildSet,Ft=e.finalizeContainerChildren,kt=e.replaceContainerChildren,an=e.cloneHiddenInstance,vn=e.cloneHiddenTextInstance,jt=e.canHydrateInstance,wi=e.canHydrateTextInstance,Zr=e.canHydrateSuspenseInstance,Tf=e.isSuspenseInstancePending,Cf=e.isSuspenseInstanceFallback,ru=e.registerSuspenseInstanceRetry,pa=e.getNextHydratableSibling,su=e.getFirstHydratableChild,Wm=e.getFirstHydratableChildWithinContainer,jm=e.getFirstHydratableChildWithinSuspenseInstance,xx=e.hydrateInstance,Ax=e.hydrateTextInstance,Sx=e.hydrateSuspenseInstance,O=e.getNextHydratableInstanceAfterSuspenseInstance,ie=e.commitHydratedContainer,le=e.commitHydratedSuspenseInstance,ue=e.clearSuspenseBoundary,ae=e.clearSuspenseBoundaryFromContainer,Xe=e.shouldDeleteUnhydratedTailInstances,it=e.didNotMatchHydratedContainerTextInstance,ft=e.didNotMatchHydratedTextInstance,dt;function At(u){if(dt===void 0)try{throw Error()}catch(v){var f=v.stack.trim().match(/\n( *(at )?)/);dt=f&&f[1]||""}return`
`+dt+u}var _t=!1;function St(u,f){if(!u||_t)return"";_t=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(Pe){var E=Pe}Reflect.construct(u,[],f)}else{try{f.call()}catch(Pe){E=Pe}u.call(f.prototype)}else{try{throw Error()}catch(Pe){E=Pe}u()}}catch(Pe){if(Pe&&E&&typeof Pe.stack=="string"){for(var M=Pe.stack.split(`
`),C=E.stack.split(`
`),V=M.length-1,q=C.length-1;1<=V&&0<=q&&M[V]!==C[q];)q--;for(;1<=V&&0<=q;V--,q--)if(M[V]!==C[q]){if(V!==1||q!==1)do if(V--,q--,0>q||M[V]!==C[q]){var fe=`
`+M[V].replace(" at new "," at ");return u.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",u.displayName)),fe}while(1<=V&&0<=q);break}}}finally{_t=!1,Error.prepareStackTrace=v}return(u=u?u.displayName||u.name:"")?At(u):""}var En=Object.prototype.hasOwnProperty,Mi=[],fn=-1;function fi(u){return{current:u}}function pt(u){0>fn||(u.current=Mi[fn],Mi[fn]=null,fn--)}function Ye(u,f){fn++,Mi[fn]=u.current,u.current=f}var es={},Bt=fi(es),Dn=fi(!1),Ys=es;function ts(u,f){var v=u.type.contextTypes;if(!v)return es;var E=u.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===f)return E.__reactInternalMemoizedMaskedChildContext;var M={},C;for(C in v)M[C]=f[C];return E&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=f,u.__reactInternalMemoizedMaskedChildContext=M),M}function di(u){return u=u.childContextTypes,u!=null}function Vn(){pt(Dn),pt(Bt)}function qs(u,f,v){if(Bt.current!==es)throw Error(o(168));Ye(Bt,f),Ye(Dn,v)}function ou(u,f,v){var E=u.stateNode;if(f=f.childContextTypes,typeof E.getChildContext!="function")return v;E=E.getChildContext();for(var M in E)if(!(M in f))throw Error(o(108,B(u)||"Unknown",M));return s({},v,E)}function Ti(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||es,Ys=Bt.current,Ye(Bt,u),Ye(Dn,Dn.current),!0}function au(u,f,v){var E=u.stateNode;if(!E)throw Error(o(169));v?(u=ou(u,f,Ys),E.__reactInternalMemoizedMergedChildContext=u,pt(Dn),pt(Bt),Ye(Bt,u)):pt(Dn),Ye(Dn,v)}var Dr=Math.clz32?Math.clz32:qz,Xm=Math.log,Yz=Math.LN2;function qz(u){return u>>>=0,u===0?32:31-(Xm(u)/Yz|0)|0}var Jm=64,Km=4194304;function Rf(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function $m(u,f){var v=u.pendingLanes;if(v===0)return 0;var E=0,M=u.suspendedLanes,C=u.pingedLanes,V=v&268435455;if(V!==0){var q=V&~M;q!==0?E=Rf(q):(C&=V,C!==0&&(E=Rf(C)))}else V=v&~M,V!==0?E=Rf(V):C!==0&&(E=Rf(C));if(E===0)return 0;if(f!==0&&f!==E&&!(f&M)&&(M=E&-E,C=f&-f,M>=C||M===16&&(C&4194240)!==0))return f;if(E&4&&(E|=v&16),f=u.entangledLanes,f!==0)for(u=u.entanglements,f&=E;0<f;)v=31-Dr(f),M=1<<v,E|=u[v],f&=~M;return E}function Qz(u,f){switch(u){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zz(u,f){for(var v=u.suspendedLanes,E=u.pingedLanes,M=u.expirationTimes,C=u.pendingLanes;0<C;){var V=31-Dr(C),q=1<<V,fe=M[V];fe===-1?(!(q&v)||q&E)&&(M[V]=Qz(q,f)):fe<=f&&(u.expiredLanes|=q),C&=~q}}function Ex(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function wx(u){for(var f=[],v=0;31>v;v++)f.push(u);return f}function bf(u,f,v){u.pendingLanes|=f,f!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,f=31-Dr(f),u[f]=v}function eG(u,f){var v=u.pendingLanes&~f;u.pendingLanes=f,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=f,u.mutableReadLanes&=f,u.entangledLanes&=f,f=u.entanglements;var E=u.eventTimes;for(u=u.expirationTimes;0<v;){var M=31-Dr(v),C=1<<M;f[M]=0,E[M]=-1,u[M]=-1,v&=~C}}function Mx(u,f){var v=u.entangledLanes|=f;for(u=u.entanglements;v;){var E=31-Dr(v),M=1<<E;M&f|u[E]&f&&(u[E]|=f),v&=~M}}var qt=0;function H2(u){return u&=-u,1<u?4<u?u&268435455?16:536870912:4:1}var Tx=r.unstable_scheduleCallback,W2=r.unstable_cancelCallback,tG=r.unstable_shouldYield,nG=r.unstable_requestPaint,pi=r.unstable_now,Cx=r.unstable_ImmediatePriority,iG=r.unstable_UserBlockingPriority,Rx=r.unstable_NormalPriority,rG=r.unstable_IdlePriority,Ym=null,Qs=null;function sG(u){if(Qs&&typeof Qs.onCommitFiberRoot=="function")try{Qs.onCommitFiberRoot(Ym,u,void 0,(u.current.flags&128)===128)}catch{}}function oG(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var Zs=typeof Object.is=="function"?Object.is:oG,Do=null,qm=!1,bx=!1;function j2(u){Do===null?Do=[u]:Do.push(u)}function aG(u){qm=!0,j2(u)}function eo(){if(!bx&&Do!==null){bx=!0;var u=0,f=qt;try{var v=Do;for(qt=1;u<v.length;u++){var E=v[u];do E=E(!0);while(E!==null)}Do=null,qm=!1}catch(M){throw Do!==null&&(Do=Do.slice(u+1)),Tx(Cx,eo),M}finally{qt=f,bx=!1}}return null}var lG=a.ReactCurrentBatchConfig;function Qm(u,f){if(Zs(u,f))return!0;if(typeof u!="object"||u===null||typeof f!="object"||f===null)return!1;var v=Object.keys(u),E=Object.keys(f);if(v.length!==E.length)return!1;for(E=0;E<v.length;E++){var M=v[E];if(!En.call(f,M)||!Zs(u[M],f[M]))return!1}return!0}function cG(u){switch(u.tag){case 5:return At(u.type);case 16:return At("Lazy");case 13:return At("Suspense");case 19:return At("SuspenseList");case 0:case 2:case 15:return u=St(u.type,!1),u;case 11:return u=St(u.type.render,!1),u;case 1:return u=St(u.type,!0),u;default:return""}}function Ms(u,f){if(u&&u.defaultProps){f=s({},f),u=u.defaultProps;for(var v in u)f[v]===void 0&&(f[v]=u[v]);return f}return f}var Zm=fi(null),eg=null,lu=null,Px=null;function Ix(){Px=lu=eg=null}function X2(u,f,v){De?(Ye(Zm,f._currentValue),f._currentValue=v):(Ye(Zm,f._currentValue2),f._currentValue2=v)}function Dx(u){var f=Zm.current;pt(Zm),De?u._currentValue=f:u._currentValue2=f}function Lx(u,f,v){for(;u!==null;){var E=u.alternate;if((u.childLanes&f)!==f?(u.childLanes|=f,E!==null&&(E.childLanes|=f)):E!==null&&(E.childLanes&f)!==f&&(E.childLanes|=f),u===v)break;u=u.return}}function cu(u,f){eg=u,Px=lu=null,u=u.dependencies,u!==null&&u.firstContext!==null&&(u.lanes&f&&(Nr=!0),u.firstContext=null)}function ns(u){var f=De?u._currentValue:u._currentValue2;if(Px!==u)if(u={context:u,memoizedValue:f,next:null},lu===null){if(eg===null)throw Error(o(308));lu=u,eg.dependencies={lanes:0,firstContext:u}}else lu=lu.next=u;return f}var to=null,ma=!1;function Bx(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function J2(u,f){u=u.updateQueue,f.updateQueue===u&&(f.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function Lo(u,f){return{eventTime:u,lane:f,tag:0,payload:null,callback:null,next:null}}function ga(u,f){var v=u.updateQueue;v!==null&&(v=v.shared,$n!==null&&u.mode&1&&!(Nt&2)?(u=v.interleaved,u===null?(f.next=f,to===null?to=[v]:to.push(v)):(f.next=u.next,u.next=f),v.interleaved=f):(u=v.pending,u===null?f.next=f:(f.next=u.next,u.next=f),v.pending=f))}function tg(u,f,v){if(f=f.updateQueue,f!==null&&(f=f.shared,(v&4194240)!==0)){var E=f.lanes;E&=u.pendingLanes,v|=E,f.lanes=v,Mx(u,v)}}function K2(u,f){var v=u.updateQueue,E=u.alternate;if(E!==null&&(E=E.updateQueue,v===E)){var M=null,C=null;if(v=v.firstBaseUpdate,v!==null){do{var V={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};C===null?M=C=V:C=C.next=V,v=v.next}while(v!==null);C===null?M=C=f:C=C.next=f}else M=C=f;v={baseState:E.baseState,firstBaseUpdate:M,lastBaseUpdate:C,shared:E.shared,effects:E.effects},u.updateQueue=v;return}u=v.lastBaseUpdate,u===null?v.firstBaseUpdate=f:u.next=f,v.lastBaseUpdate=f}function ng(u,f,v,E){var M=u.updateQueue;ma=!1;var C=M.firstBaseUpdate,V=M.lastBaseUpdate,q=M.shared.pending;if(q!==null){M.shared.pending=null;var fe=q,Pe=fe.next;fe.next=null,V===null?C=Pe:V.next=Pe,V=fe;var qe=u.alternate;qe!==null&&(qe=qe.updateQueue,q=qe.lastBaseUpdate,q!==V&&(q===null?qe.firstBaseUpdate=Pe:q.next=Pe,qe.lastBaseUpdate=fe))}if(C!==null){var wt=M.baseState;V=0,qe=Pe=fe=null,q=C;do{var ut=q.lane,ln=q.eventTime;if((E&ut)===ut){qe!==null&&(qe=qe.next={eventTime:ln,lane:0,tag:q.tag,payload:q.payload,callback:q.callback,next:null});e:{var rt=u,zi=q;switch(ut=f,ln=v,zi.tag){case 1:if(rt=zi.payload,typeof rt=="function"){wt=rt.call(ln,wt,ut);break e}wt=rt;break e;case 3:rt.flags=rt.flags&-65537|128;case 0:if(rt=zi.payload,ut=typeof rt=="function"?rt.call(ln,wt,ut):rt,ut==null)break e;wt=s({},wt,ut);break e;case 2:ma=!0}}q.callback!==null&&q.lane!==0&&(u.flags|=64,ut=M.effects,ut===null?M.effects=[q]:ut.push(q))}else ln={eventTime:ln,lane:ut,tag:q.tag,payload:q.payload,callback:q.callback,next:null},qe===null?(Pe=qe=ln,fe=wt):qe=qe.next=ln,V|=ut;if(q=q.next,q===null){if(q=M.shared.pending,q===null)break;ut=q,q=ut.next,ut.next=null,M.lastBaseUpdate=ut,M.shared.pending=null}}while(!0);if(qe===null&&(fe=wt),M.baseState=fe,M.firstBaseUpdate=Pe,M.lastBaseUpdate=qe,f=M.shared.interleaved,f!==null){M=f;do V|=M.lane,M=M.next;while(M!==f)}else C===null&&(M.shared.lanes=0);vu|=V,u.lanes=V,u.memoizedState=wt}}function $2(u,f,v){if(u=f.effects,f.effects=null,u!==null)for(f=0;f<u.length;f++){var E=u[f],M=E.callback;if(M!==null){if(E.callback=null,E=v,typeof M!="function")throw Error(o(191,M));M.call(E)}}}var Y2=new i.Component().refs;function Nx(u,f,v,E){f=u.memoizedState,v=v(E,f),v=v==null?f:s({},f,v),u.memoizedState=v,u.lanes===0&&(u.updateQueue.baseState=v)}var ig={isMounted:function(u){return(u=u._reactInternals)?b(u)===u:!1},enqueueSetState:function(u,f,v){u=u._reactInternals;var E=or(),M=_a(u),C=Lo(E,M);C.payload=f,v!=null&&(C.callback=v),ga(u,C),f=as(u,M,E),f!==null&&tg(f,u,M)},enqueueReplaceState:function(u,f,v){u=u._reactInternals;var E=or(),M=_a(u),C=Lo(E,M);C.tag=1,C.payload=f,v!=null&&(C.callback=v),ga(u,C),f=as(u,M,E),f!==null&&tg(f,u,M)},enqueueForceUpdate:function(u,f){u=u._reactInternals;var v=or(),E=_a(u),M=Lo(v,E);M.tag=2,f!=null&&(M.callback=f),ga(u,M),f=as(u,E,v),f!==null&&tg(f,u,E)}};function q2(u,f,v,E,M,C,V){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(E,C,V):f.prototype&&f.prototype.isPureReactComponent?!Qm(v,E)||!Qm(M,C):!0}function Q2(u,f,v){var E=!1,M=es,C=f.contextType;return typeof C=="object"&&C!==null?C=ns(C):(M=di(f)?Ys:Bt.current,E=f.contextTypes,C=(E=E!=null)?ts(u,M):es),f=new f(v,C),u.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=ig,u.stateNode=f,f._reactInternals=u,E&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=M,u.__reactInternalMemoizedMaskedChildContext=C),f}function Z2(u,f,v,E){u=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(v,E),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(v,E),f.state!==u&&ig.enqueueReplaceState(f,f.state,null)}function Fx(u,f,v,E){var M=u.stateNode;M.props=v,M.state=u.memoizedState,M.refs=Y2,Bx(u);var C=f.contextType;typeof C=="object"&&C!==null?M.context=ns(C):(C=di(f)?Ys:Bt.current,M.context=ts(u,C)),M.state=u.memoizedState,C=f.getDerivedStateFromProps,typeof C=="function"&&(Nx(u,f,C,v),M.state=u.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof M.getSnapshotBeforeUpdate=="function"||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(f=M.state,typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount(),f!==M.state&&ig.enqueueReplaceState(M,M.state,null),ng(u,v,M,E),M.state=u.memoizedState),typeof M.componentDidMount=="function"&&(u.flags|=4194308)}var uu=[],hu=0,rg=null,sg=0,is=[],rs=0,bl=null,Bo=1,No="";function Pl(u,f){uu[hu++]=sg,uu[hu++]=rg,rg=u,sg=f}function eR(u,f,v){is[rs++]=Bo,is[rs++]=No,is[rs++]=bl,bl=u;var E=Bo;u=No;var M=32-Dr(E)-1;E&=~(1<<M),v+=1;var C=32-Dr(f)+M;if(30<C){var V=M-M%5;C=(E&(1<<V)-1).toString(32),E>>=V,M-=V,Bo=1<<32-Dr(f)+M|v<<M|E,No=C+u}else Bo=1<<C|v<<M|E,No=u}function Ox(u){u.return!==null&&(Pl(u,1),eR(u,1,0))}function Ux(u){for(;u===rg;)rg=uu[--hu],uu[hu]=null,sg=uu[--hu],uu[hu]=null;for(;u===bl;)bl=is[--rs],is[rs]=null,No=is[--rs],is[rs]=null,Bo=is[--rs],is[rs]=null}var Lr=null,Br=null,_n=!1,Pf=!1,Ts=null;function tR(u,f){var v=ls(5,null,null,0);v.elementType="DELETED",v.stateNode=f,v.return=u,f=u.deletions,f===null?(u.deletions=[v],u.flags|=16):f.push(v)}function nR(u,f){switch(u.tag){case 5:return f=jt(f,u.type,u.pendingProps),f!==null?(u.stateNode=f,Lr=u,Br=su(f),!0):!1;case 6:return f=wi(f,u.pendingProps),f!==null?(u.stateNode=f,Lr=u,Br=null,!0):!1;case 13:if(f=Zr(f),f!==null){var v=bl!==null?{id:Bo,overflow:No}:null;return u.memoizedState={dehydrated:f,treeContext:v,retryLane:1073741824},v=ls(18,null,null,0),v.stateNode=f,v.return=u,u.child=v,Lr=u,Br=null,!0}return!1;default:return!1}}function kx(u){return(u.mode&1)!==0&&(u.flags&128)===0}function Vx(u){if(_n){var f=Br;if(f){var v=f;if(!nR(u,f)){if(kx(u))throw Error(o(418));f=pa(v);var E=Lr;f&&nR(u,f)?tR(E,v):(u.flags=u.flags&-4097|2,_n=!1,Lr=u)}}else{if(kx(u))throw Error(o(418));u.flags=u.flags&-4097|2,_n=!1,Lr=u}}}function iR(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;Lr=u}function If(u){if(!ve||u!==Lr)return!1;if(!_n)return iR(u),_n=!0,!1;if(u.tag!==3&&(u.tag!==5||Xe(u.type)&&!Se(u.type,u.memoizedProps))){var f=Br;if(f){if(kx(u)){for(u=Br;u;)u=pa(u);throw Error(o(418))}for(;f;)tR(u,f),f=pa(f)}}if(iR(u),u.tag===13){if(!ve)throw Error(o(316));if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));Br=O(u)}else Br=Lr?pa(u.stateNode):null;return!0}function fu(){ve&&(Br=Lr=null,Pf=_n=!1)}function zx(u){Ts===null?Ts=[u]:Ts.push(u)}function Df(u,f,v){if(u=v.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(v._owner){if(v=v._owner,v){if(v.tag!==1)throw Error(o(309));var E=v.stateNode}if(!E)throw Error(o(147,u));var M=E,C=""+u;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===C?f.ref:(f=function(V){var q=M.refs;q===Y2&&(q=M.refs={}),V===null?delete q[C]:q[C]=V},f._stringRef=C,f)}if(typeof u!="string")throw Error(o(284));if(!v._owner)throw Error(o(290,u))}return u}function og(u,f){throw u=Object.prototype.toString.call(f),Error(o(31,u==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":u))}function rR(u){var f=u._init;return f(u._payload)}function sR(u){function f(oe,ee){if(u){var he=oe.deletions;he===null?(oe.deletions=[ee],oe.flags|=16):he.push(ee)}}function v(oe,ee){if(!u)return null;for(;ee!==null;)f(oe,ee),ee=ee.sibling;return null}function E(oe,ee){for(oe=new Map;ee!==null;)ee.key!==null?oe.set(ee.key,ee):oe.set(ee.index,ee),ee=ee.sibling;return oe}function M(oe,ee){return oe=Aa(oe,ee),oe.index=0,oe.sibling=null,oe}function C(oe,ee,he){return oe.index=he,u?(he=oe.alternate,he!==null?(he=he.index,he<ee?(oe.flags|=2,ee):he):(oe.flags|=2,ee)):(oe.flags|=1048576,ee)}function V(oe){return u&&oe.alternate===null&&(oe.flags|=2),oe}function q(oe,ee,he,We){return ee===null||ee.tag!==6?(ee=w1(he,oe.mode,We),ee.return=oe,ee):(ee=M(ee,he),ee.return=oe,ee)}function fe(oe,ee,he,We){var nt=he.type;return nt===h?qe(oe,ee,he.props.children,We,he.key):ee!==null&&(ee.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===S&&rR(nt)===ee.type)?(We=M(ee,he.props),We.ref=Df(oe,ee,he),We.return=oe,We):(We=Og(he.type,he.key,he.props,null,oe.mode,We),We.ref=Df(oe,ee,he),We.return=oe,We)}function Pe(oe,ee,he,We){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==he.containerInfo||ee.stateNode.implementation!==he.implementation?(ee=M1(he,oe.mode,We),ee.return=oe,ee):(ee=M(ee,he.children||[]),ee.return=oe,ee)}function qe(oe,ee,he,We,nt){return ee===null||ee.tag!==7?(ee=Ol(he,oe.mode,We,nt),ee.return=oe,ee):(ee=M(ee,he),ee.return=oe,ee)}function wt(oe,ee,he){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return ee=w1(""+ee,oe.mode,he),ee.return=oe,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case l:return he=Og(ee.type,ee.key,ee.props,null,oe.mode,he),he.ref=Df(oe,null,ee),he.return=oe,he;case c:return ee=M1(ee,oe.mode,he),ee.return=oe,ee;case S:var We=ee._init;return wt(oe,We(ee._payload),he)}if($(ee)||T(ee))return ee=Ol(ee,oe.mode,he,null),ee.return=oe,ee;og(oe,ee)}return null}function ut(oe,ee,he,We){var nt=ee!==null?ee.key:null;if(typeof he=="string"&&he!==""||typeof he=="number")return nt!==null?null:q(oe,ee,""+he,We);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case l:return he.key===nt?fe(oe,ee,he,We):null;case c:return he.key===nt?Pe(oe,ee,he,We):null;case S:return nt=he._init,ut(oe,ee,nt(he._payload),We)}if($(he)||T(he))return nt!==null?null:qe(oe,ee,he,We,null);og(oe,he)}return null}function ln(oe,ee,he,We,nt){if(typeof We=="string"&&We!==""||typeof We=="number")return oe=oe.get(he)||null,q(ee,oe,""+We,nt);if(typeof We=="object"&&We!==null){switch(We.$$typeof){case l:return oe=oe.get(We.key===null?he:We.key)||null,fe(ee,oe,We,nt);case c:return oe=oe.get(We.key===null?he:We.key)||null,Pe(ee,oe,We,nt);case S:var Dt=We._init;return ln(oe,ee,he,Dt(We._payload),nt)}if($(We)||T(We))return oe=oe.get(he)||null,qe(ee,oe,We,nt,null);og(ee,We)}return null}function rt(oe,ee,he,We){for(var nt=null,Dt=null,Mt=ee,Qt=ee=0,gi=null;Mt!==null&&Qt<he.length;Qt++){Mt.index>Qt?(gi=Mt,Mt=null):gi=Mt.sibling;var Zt=ut(oe,Mt,he[Qt],We);if(Zt===null){Mt===null&&(Mt=gi);break}u&&Mt&&Zt.alternate===null&&f(oe,Mt),ee=C(Zt,ee,Qt),Dt===null?nt=Zt:Dt.sibling=Zt,Dt=Zt,Mt=gi}if(Qt===he.length)return v(oe,Mt),_n&&Pl(oe,Qt),nt;if(Mt===null){for(;Qt<he.length;Qt++)Mt=wt(oe,he[Qt],We),Mt!==null&&(ee=C(Mt,ee,Qt),Dt===null?nt=Mt:Dt.sibling=Mt,Dt=Mt);return _n&&Pl(oe,Qt),nt}for(Mt=E(oe,Mt);Qt<he.length;Qt++)gi=ln(Mt,oe,Qt,he[Qt],We),gi!==null&&(u&&gi.alternate!==null&&Mt.delete(gi.key===null?Qt:gi.key),ee=C(gi,ee,Qt),Dt===null?nt=gi:Dt.sibling=gi,Dt=gi);return u&&Mt.forEach(function(Sa){return f(oe,Sa)}),_n&&Pl(oe,Qt),nt}function zi(oe,ee,he,We){var nt=T(he);if(typeof nt!="function")throw Error(o(150));if(he=nt.call(he),he==null)throw Error(o(151));for(var Dt=nt=null,Mt=ee,Qt=ee=0,gi=null,Zt=he.next();Mt!==null&&!Zt.done;Qt++,Zt=he.next()){Mt.index>Qt?(gi=Mt,Mt=null):gi=Mt.sibling;var Sa=ut(oe,Mt,Zt.value,We);if(Sa===null){Mt===null&&(Mt=gi);break}u&&Mt&&Sa.alternate===null&&f(oe,Mt),ee=C(Sa,ee,Qt),Dt===null?nt=Sa:Dt.sibling=Sa,Dt=Sa,Mt=gi}if(Zt.done)return v(oe,Mt),_n&&Pl(oe,Qt),nt;if(Mt===null){for(;!Zt.done;Qt++,Zt=he.next())Zt=wt(oe,Zt.value,We),Zt!==null&&(ee=C(Zt,ee,Qt),Dt===null?nt=Zt:Dt.sibling=Zt,Dt=Zt);return _n&&Pl(oe,Qt),nt}for(Mt=E(oe,Mt);!Zt.done;Qt++,Zt=he.next())Zt=ln(Mt,oe,Qt,Zt.value,We),Zt!==null&&(u&&Zt.alternate!==null&&Mt.delete(Zt.key===null?Qt:Zt.key),ee=C(Zt,ee,Qt),Dt===null?nt=Zt:Dt.sibling=Zt,Dt=Zt);return u&&Mt.forEach(function(kG){return f(oe,kG)}),_n&&Pl(oe,Qt),nt}function cs(oe,ee,he,We){if(typeof he=="object"&&he!==null&&he.type===h&&he.key===null&&(he=he.props.children),typeof he=="object"&&he!==null){switch(he.$$typeof){case l:e:{for(var nt=he.key,Dt=ee;Dt!==null;){if(Dt.key===nt){if(nt=he.type,nt===h){if(Dt.tag===7){v(oe,Dt.sibling),ee=M(Dt,he.props.children),ee.return=oe,oe=ee;break e}}else if(Dt.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===S&&rR(nt)===Dt.type){v(oe,Dt.sibling),ee=M(Dt,he.props),ee.ref=Df(oe,Dt,he),ee.return=oe,oe=ee;break e}v(oe,Dt);break}else f(oe,Dt);Dt=Dt.sibling}he.type===h?(ee=Ol(he.props.children,oe.mode,We,he.key),ee.return=oe,oe=ee):(We=Og(he.type,he.key,he.props,null,oe.mode,We),We.ref=Df(oe,ee,he),We.return=oe,oe=We)}return V(oe);case c:e:{for(Dt=he.key;ee!==null;){if(ee.key===Dt)if(ee.tag===4&&ee.stateNode.containerInfo===he.containerInfo&&ee.stateNode.implementation===he.implementation){v(oe,ee.sibling),ee=M(ee,he.children||[]),ee.return=oe,oe=ee;break e}else{v(oe,ee);break}else f(oe,ee);ee=ee.sibling}ee=M1(he,oe.mode,We),ee.return=oe,oe=ee}return V(oe);case S:return Dt=he._init,cs(oe,ee,Dt(he._payload),We)}if($(he))return rt(oe,ee,he,We);if(T(he))return zi(oe,ee,he,We);og(oe,he)}return typeof he=="string"&&he!==""||typeof he=="number"?(he=""+he,ee!==null&&ee.tag===6?(v(oe,ee.sibling),ee=M(ee,he),ee.return=oe,oe=ee):(v(oe,ee),ee=w1(he,oe.mode,We),ee.return=oe,oe=ee),V(oe)):v(oe,ee)}return cs}var du=sR(!0),oR=sR(!1),Lf={},ss=fi(Lf),Bf=fi(Lf),pu=fi(Lf);function no(u){if(u===Lf)throw Error(o(174));return u}function Gx(u,f){Ye(pu,f),Ye(Bf,u),Ye(ss,Lf),u=se(f),pt(ss),Ye(ss,u)}function mu(){pt(ss),pt(Bf),pt(pu)}function aR(u){var f=no(pu.current),v=no(ss.current);f=L(v,u.type,f),v!==f&&(Ye(Bf,u),Ye(ss,f))}function Hx(u){Bf.current===u&&(pt(ss),pt(Bf))}var wn=fi(0);function ag(u){for(var f=u;f!==null;){if(f.tag===13){var v=f.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||Tf(v)||Cf(v)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if(f.flags&128)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var Wx=[];function jx(){for(var u=0;u<Wx.length;u++){var f=Wx[u];De?f._workInProgressVersionPrimary=null:f._workInProgressVersionSecondary=null}Wx.length=0}var lg=a.ReactCurrentDispatcher,os=a.ReactCurrentBatchConfig,gu=0,Ln=null,Ui=null,mi=null,cg=!1,Nf=!1,Ff=0,uG=0;function ki(){throw Error(o(321))}function Xx(u,f){if(f===null)return!1;for(var v=0;v<f.length&&v<u.length;v++)if(!Zs(u[v],f[v]))return!1;return!0}function Jx(u,f,v,E,M,C){if(gu=C,Ln=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,lg.current=u===null||u.memoizedState===null?pG:mG,u=v(E,M),Nf){C=0;do{if(Nf=!1,Ff=0,25<=C)throw Error(o(301));C+=1,mi=Ui=null,f.updateQueue=null,lg.current=gG,u=v(E,M)}while(Nf)}if(lg.current=pg,f=Ui!==null&&Ui.next!==null,gu=0,mi=Ui=Ln=null,cg=!1,f)throw Error(o(300));return u}function Kx(){var u=Ff!==0;return Ff=0,u}function Fo(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mi===null?Ln.memoizedState=mi=u:mi=mi.next=u,mi}function io(){if(Ui===null){var u=Ln.alternate;u=u!==null?u.memoizedState:null}else u=Ui.next;var f=mi===null?Ln.memoizedState:mi.next;if(f!==null)mi=f,Ui=u;else{if(u===null)throw Error(o(310));Ui=u,u={memoizedState:Ui.memoizedState,baseState:Ui.baseState,baseQueue:Ui.baseQueue,queue:Ui.queue,next:null},mi===null?Ln.memoizedState=mi=u:mi=mi.next=u}return mi}function Il(u,f){return typeof f=="function"?f(u):f}function ug(u){var f=io(),v=f.queue;if(v===null)throw Error(o(311));v.lastRenderedReducer=u;var E=Ui,M=E.baseQueue,C=v.pending;if(C!==null){if(M!==null){var V=M.next;M.next=C.next,C.next=V}E.baseQueue=M=C,v.pending=null}if(M!==null){C=M.next,E=E.baseState;var q=V=null,fe=null,Pe=C;do{var qe=Pe.lane;if((gu&qe)===qe)fe!==null&&(fe=fe.next={lane:0,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null}),E=Pe.hasEagerState?Pe.eagerState:u(E,Pe.action);else{var wt={lane:qe,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null};fe===null?(q=fe=wt,V=E):fe=fe.next=wt,Ln.lanes|=qe,vu|=qe}Pe=Pe.next}while(Pe!==null&&Pe!==C);fe===null?V=E:fe.next=q,Zs(E,f.memoizedState)||(Nr=!0),f.memoizedState=E,f.baseState=V,f.baseQueue=fe,v.lastRenderedState=E}if(u=v.interleaved,u!==null){M=u;do C=M.lane,Ln.lanes|=C,vu|=C,M=M.next;while(M!==u)}else M===null&&(v.lanes=0);return[f.memoizedState,v.dispatch]}function hg(u){var f=io(),v=f.queue;if(v===null)throw Error(o(311));v.lastRenderedReducer=u;var E=v.dispatch,M=v.pending,C=f.memoizedState;if(M!==null){v.pending=null;var V=M=M.next;do C=u(C,V.action),V=V.next;while(V!==M);Zs(C,f.memoizedState)||(Nr=!0),f.memoizedState=C,f.baseQueue===null&&(f.baseState=C),v.lastRenderedState=C}return[C,E]}function lR(){}function cR(u,f){var v=Ln,E=io(),M=f(),C=!Zs(E.memoizedState,M);if(C&&(E.memoizedState=M,Nr=!0),E=E.queue,Uf(fR.bind(null,v,E,u),[u]),E.getSnapshot!==f||C||mi!==null&&mi.memoizedState.tag&1){if(v.flags|=2048,Of(9,hR.bind(null,v,E,M,f),void 0,null),$n===null)throw Error(o(349));gu&30||uR(v,f,M)}return M}function uR(u,f,v){u.flags|=16384,u={getSnapshot:f,value:v},f=Ln.updateQueue,f===null?(f={lastEffect:null,stores:null},Ln.updateQueue=f,f.stores=[u]):(v=f.stores,v===null?f.stores=[u]:v.push(u))}function hR(u,f,v,E){f.value=v,f.getSnapshot=E,dR(f)&&as(u,1,-1)}function fR(u,f,v){return v(function(){dR(f)&&as(u,1,-1)})}function dR(u){var f=u.getSnapshot;u=u.value;try{var v=f();return!Zs(u,v)}catch{return!0}}function $x(u){var f=Fo();return typeof u=="function"&&(u=u()),f.memoizedState=f.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Il,lastRenderedState:u},f.queue=u,u=u.dispatch=dG.bind(null,Ln,u),[f.memoizedState,u]}function Of(u,f,v,E){return u={tag:u,create:f,destroy:v,deps:E,next:null},f=Ln.updateQueue,f===null?(f={lastEffect:null,stores:null},Ln.updateQueue=f,f.lastEffect=u.next=u):(v=f.lastEffect,v===null?f.lastEffect=u.next=u:(E=v.next,v.next=u,u.next=E,f.lastEffect=u)),u}function pR(){return io().memoizedState}function fg(u,f,v,E){var M=Fo();Ln.flags|=u,M.memoizedState=Of(1|f,v,void 0,E===void 0?null:E)}function dg(u,f,v,E){var M=io();E=E===void 0?null:E;var C=void 0;if(Ui!==null){var V=Ui.memoizedState;if(C=V.destroy,E!==null&&Xx(E,V.deps)){M.memoizedState=Of(f,v,C,E);return}}Ln.flags|=u,M.memoizedState=Of(1|f,v,C,E)}function Yx(u,f){return fg(8390656,8,u,f)}function Uf(u,f){return dg(2048,8,u,f)}function mR(u,f){return dg(4,2,u,f)}function gR(u,f){return dg(4,4,u,f)}function yR(u,f){if(typeof f=="function")return u=u(),f(u),function(){f(null)};if(f!=null)return u=u(),f.current=u,function(){f.current=null}}function vR(u,f,v){return v=v!=null?v.concat([u]):null,dg(4,4,yR.bind(null,f,u),v)}function qx(){}function _R(u,f){var v=io();f=f===void 0?null:f;var E=v.memoizedState;return E!==null&&f!==null&&Xx(f,E[1])?E[0]:(v.memoizedState=[u,f],u)}function xR(u,f){var v=io();f=f===void 0?null:f;var E=v.memoizedState;return E!==null&&f!==null&&Xx(f,E[1])?E[0]:(u=u(),v.memoizedState=[u,f],u)}function hG(u,f){var v=qt;qt=v!==0&&4>v?v:4,u(!0);var E=os.transition;os.transition={};try{u(!1),f()}finally{qt=v,os.transition=E}}function AR(){return io().memoizedState}function fG(u,f,v){var E=_a(u);v={lane:E,action:v,hasEagerState:!1,eagerState:null,next:null},SR(u)?ER(f,v):(wR(u,f,v),v=or(),u=as(u,E,v),u!==null&&MR(u,f,E))}function dG(u,f,v){var E=_a(u),M={lane:E,action:v,hasEagerState:!1,eagerState:null,next:null};if(SR(u))ER(f,M);else{wR(u,f,M);var C=u.alternate;if(u.lanes===0&&(C===null||C.lanes===0)&&(C=f.lastRenderedReducer,C!==null))try{var V=f.lastRenderedState,q=C(V,v);if(M.hasEagerState=!0,M.eagerState=q,Zs(q,V))return}catch{}finally{}v=or(),u=as(u,E,v),u!==null&&MR(u,f,E)}}function SR(u){var f=u.alternate;return u===Ln||f!==null&&f===Ln}function ER(u,f){Nf=cg=!0;var v=u.pending;v===null?f.next=f:(f.next=v.next,v.next=f),u.pending=f}function wR(u,f,v){$n!==null&&u.mode&1&&!(Nt&2)?(u=f.interleaved,u===null?(v.next=v,to===null?to=[f]:to.push(f)):(v.next=u.next,u.next=v),f.interleaved=v):(u=f.pending,u===null?v.next=v:(v.next=u.next,u.next=v),f.pending=v)}function MR(u,f,v){if(v&4194240){var E=f.lanes;E&=u.pendingLanes,v|=E,f.lanes=v,Mx(u,v)}}var pg={readContext:ns,useCallback:ki,useContext:ki,useEffect:ki,useImperativeHandle:ki,useInsertionEffect:ki,useLayoutEffect:ki,useMemo:ki,useReducer:ki,useRef:ki,useState:ki,useDebugValue:ki,useDeferredValue:ki,useTransition:ki,useMutableSource:ki,useSyncExternalStore:ki,useId:ki,unstable_isNewReconciler:!1},pG={readContext:ns,useCallback:function(u,f){return Fo().memoizedState=[u,f===void 0?null:f],u},useContext:ns,useEffect:Yx,useImperativeHandle:function(u,f,v){return v=v!=null?v.concat([u]):null,fg(4194308,4,yR.bind(null,f,u),v)},useLayoutEffect:function(u,f){return fg(4194308,4,u,f)},useInsertionEffect:function(u,f){return fg(4,2,u,f)},useMemo:function(u,f){var v=Fo();return f=f===void 0?null:f,u=u(),v.memoizedState=[u,f],u},useReducer:function(u,f,v){var E=Fo();return f=v!==void 0?v(f):f,E.memoizedState=E.baseState=f,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:f},E.queue=u,u=u.dispatch=fG.bind(null,Ln,u),[E.memoizedState,u]},useRef:function(u){var f=Fo();return u={current:u},f.memoizedState=u},useState:$x,useDebugValue:qx,useDeferredValue:function(u){var f=$x(u),v=f[0],E=f[1];return Yx(function(){var M=os.transition;os.transition={};try{E(u)}finally{os.transition=M}},[u]),v},useTransition:function(){var u=$x(!1),f=u[0];return u=hG.bind(null,u[1]),Fo().memoizedState=u,[f,u]},useMutableSource:function(){},useSyncExternalStore:function(u,f,v){var E=Ln,M=Fo();if(_n){if(v===void 0)throw Error(o(407));v=v()}else{if(v=f(),$n===null)throw Error(o(349));gu&30||uR(E,f,v)}M.memoizedState=v;var C={value:v,getSnapshot:f};return M.queue=C,Yx(fR.bind(null,E,C,u),[u]),E.flags|=2048,Of(9,hR.bind(null,E,C,v,f),void 0,null),v},useId:function(){var u=Fo(),f=$n.identifierPrefix;if(_n){var v=No,E=Bo;v=(E&~(1<<32-Dr(E)-1)).toString(32)+v,f=":"+f+"R"+v,v=Ff++,0<v&&(f+="H"+v.toString(32)),f+=":"}else v=uG++,f=":"+f+"r"+v.toString(32)+":";return u.memoizedState=f},unstable_isNewReconciler:!1},mG={readContext:ns,useCallback:_R,useContext:ns,useEffect:Uf,useImperativeHandle:vR,useInsertionEffect:mR,useLayoutEffect:gR,useMemo:xR,useReducer:ug,useRef:pR,useState:function(){return ug(Il)},useDebugValue:qx,useDeferredValue:function(u){var f=ug(Il),v=f[0],E=f[1];return Uf(function(){var M=os.transition;os.transition={};try{E(u)}finally{os.transition=M}},[u]),v},useTransition:function(){var u=ug(Il)[0],f=io().memoizedState;return[u,f]},useMutableSource:lR,useSyncExternalStore:cR,useId:AR,unstable_isNewReconciler:!1},gG={readContext:ns,useCallback:_R,useContext:ns,useEffect:Uf,useImperativeHandle:vR,useInsertionEffect:mR,useLayoutEffect:gR,useMemo:xR,useReducer:hg,useRef:pR,useState:function(){return hg(Il)},useDebugValue:qx,useDeferredValue:function(u){var f=hg(Il),v=f[0],E=f[1];return Uf(function(){var M=os.transition;os.transition={};try{E(u)}finally{os.transition=M}},[u]),v},useTransition:function(){var u=hg(Il)[0],f=io().memoizedState;return[u,f]},useMutableSource:lR,useSyncExternalStore:cR,useId:AR,unstable_isNewReconciler:!1};function Qx(u,f){try{var v="",E=f;do v+=cG(E),E=E.return;while(E);var M=v}catch(C){M=`
Error generating stack: `+C.message+`
`+C.stack}return{value:u,source:f,stack:M}}function Zx(u,f){try{console.error(f.value)}catch(v){setTimeout(function(){throw v})}}var yG=typeof WeakMap=="function"?WeakMap:Map;function TR(u,f,v){v=Lo(-1,v),v.tag=3,v.payload={element:null};var E=f.value;return v.callback=function(){Pg||(Pg=!0,y1=E),Zx(u,f)},v}function CR(u,f,v){v=Lo(-1,v),v.tag=3;var E=u.type.getDerivedStateFromError;if(typeof E=="function"){var M=f.value;v.payload=function(){return E(M)},v.callback=function(){Zx(u,f)}}var C=u.stateNode;return C!==null&&typeof C.componentDidCatch=="function"&&(v.callback=function(){Zx(u,f),typeof E!="function"&&(ya===null?ya=new Set([this]):ya.add(this));var V=f.stack;this.componentDidCatch(f.value,{componentStack:V!==null?V:""})}),v}function RR(u,f,v){var E=u.pingCache;if(E===null){E=u.pingCache=new yG;var M=new Set;E.set(f,M)}else M=E.get(f),M===void 0&&(M=new Set,E.set(f,M));M.has(v)||(M.add(v),u=IG.bind(null,u,f,v),f.then(u,u))}function bR(u){do{var f;if((f=u.tag===13)&&(f=u.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return u;u=u.return}while(u!==null);return null}function PR(u,f,v,E,M){return u.mode&1?(u.flags|=65536,u.lanes=M,u):(u===f?u.flags|=65536:(u.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:(f=Lo(-1,1),f.tag=2,ga(v,f))),v.lanes|=1),u)}function ro(u){u.flags|=4}function IR(u,f){if(u!==null&&u.child===f.child)return!0;if(f.flags&16)return!1;for(u=f.child;u!==null;){if(u.flags&12854||u.subtreeFlags&12854)return!1;u=u.sibling}return!0}var kf,Vf,mg,gg;if(Re)kf=function(u,f){for(var v=f.child;v!==null;){if(v.tag===5||v.tag===6)te(u,v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===f)break;for(;v.sibling===null;){if(v.return===null||v.return===f)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},Vf=function(){},mg=function(u,f,v,E,M){if(u=u.memoizedProps,u!==E){var C=f.stateNode,V=no(ss.current);v=ce(C,v,u,E,M,V),(f.updateQueue=v)&&ro(f)}},gg=function(u,f,v,E){v!==E&&ro(f)};else if(H){kf=function(u,f,v,E){for(var M=f.child;M!==null;){if(M.tag===5){var C=M.stateNode;v&&E&&(C=an(C,M.type,M.memoizedProps,M)),te(u,C)}else if(M.tag===6)C=M.stateNode,v&&E&&(C=vn(C,M.memoizedProps,M)),te(u,C);else if(M.tag!==4){if(M.tag===22&&M.memoizedState!==null)C=M.child,C!==null&&(C.return=M),kf(u,M,!0,!0);else if(M.child!==null){M.child.return=M,M=M.child;continue}}if(M===f)break;for(;M.sibling===null;){if(M.return===null||M.return===f)return;M=M.return}M.sibling.return=M.return,M=M.sibling}};var DR=function(u,f,v,E){for(var M=f.child;M!==null;){if(M.tag===5){var C=M.stateNode;v&&E&&(C=an(C,M.type,M.memoizedProps,M)),Ze(u,C)}else if(M.tag===6)C=M.stateNode,v&&E&&(C=vn(C,M.memoizedProps,M)),Ze(u,C);else if(M.tag!==4){if(M.tag===22&&M.memoizedState!==null)C=M.child,C!==null&&(C.return=M),DR(u,M,!0,!0);else if(M.child!==null){M.child.return=M,M=M.child;continue}}if(M===f)break;for(;M.sibling===null;){if(M.return===null||M.return===f)return;M=M.return}M.sibling.return=M.return,M=M.sibling}};Vf=function(u,f){var v=f.stateNode;if(!IR(u,f)){u=v.containerInfo;var E=ct(u);DR(E,f,!1,!1),v.pendingChildren=E,ro(f),Ft(u,E)}},mg=function(u,f,v,E,M){var C=u.stateNode,V=u.memoizedProps;if((u=IR(u,f))&&V===E)f.stateNode=C;else{var q=f.stateNode,fe=no(ss.current),Pe=null;V!==E&&(Pe=ce(q,v,V,E,M,fe)),u&&Pe===null?f.stateNode=C:(C=Ue(C,Pe,v,V,E,f,u,q),Z(C,v,E,M,fe)&&ro(f),f.stateNode=C,u?ro(f):kf(C,f,!1,!1))}},gg=function(u,f,v,E){v!==E?(u=no(pu.current),v=no(ss.current),f.stateNode=Te(E,u,v,f),ro(f)):f.stateNode=u.stateNode}}else Vf=function(){},mg=function(){},gg=function(){};function zf(u,f){if(!_n)switch(u.tailMode){case"hidden":f=u.tail;for(var v=null;f!==null;)f.alternate!==null&&(v=f),f=f.sibling;v===null?u.tail=null:v.sibling=null;break;case"collapsed":v=u.tail;for(var E=null;v!==null;)v.alternate!==null&&(E=v),v=v.sibling;E===null?f||u.tail===null?u.tail=null:u.tail.sibling=null:E.sibling=null}}function Vi(u){var f=u.alternate!==null&&u.alternate.child===u.child,v=0,E=0;if(f)for(var M=u.child;M!==null;)v|=M.lanes|M.childLanes,E|=M.subtreeFlags&14680064,E|=M.flags&14680064,M.return=u,M=M.sibling;else for(M=u.child;M!==null;)v|=M.lanes|M.childLanes,E|=M.subtreeFlags,E|=M.flags,M.return=u,M=M.sibling;return u.subtreeFlags|=E,u.childLanes=v,f}function vG(u,f,v){var E=f.pendingProps;switch(Ux(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vi(f),null;case 1:return di(f.type)&&Vn(),Vi(f),null;case 3:return E=f.stateNode,mu(),pt(Dn),pt(Bt),jx(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(u===null||u.child===null)&&(If(f)?ro(f):u===null||u.memoizedState.isDehydrated&&!(f.flags&256)||(f.flags|=1024,Ts!==null&&(x1(Ts),Ts=null))),Vf(u,f),Vi(f),null;case 5:Hx(f),v=no(pu.current);var M=f.type;if(u!==null&&f.stateNode!=null)mg(u,f,M,E,v),u.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!E){if(f.stateNode===null)throw Error(o(166));return Vi(f),null}if(u=no(ss.current),If(f)){if(!ve)throw Error(o(175));u=xx(f.stateNode,f.type,f.memoizedProps,v,u,f,!Pf),f.updateQueue=u,u!==null&&ro(f)}else{var C=j(M,E,v,u,f);kf(C,f,!1,!1),f.stateNode=C,Z(C,M,E,v,u)&&ro(f)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return Vi(f),null;case 6:if(u&&f.stateNode!=null)gg(u,f,u.memoizedProps,E);else{if(typeof E!="string"&&f.stateNode===null)throw Error(o(166));if(u=no(pu.current),v=no(ss.current),If(f)){if(!ve)throw Error(o(176));if(u=f.stateNode,E=f.memoizedProps,(v=Ax(u,E,f,!Pf))&&(M=Lr,M!==null))switch(C=(M.mode&1)!==0,M.tag){case 3:it(M.stateNode.containerInfo,u,E,C);break;case 5:ft(M.type,M.memoizedProps,M.stateNode,u,E,C)}v&&ro(f)}else f.stateNode=Te(E,u,v,f)}return Vi(f),null;case 13:if(pt(wn),E=f.memoizedState,_n&&Br!==null&&f.mode&1&&!(f.flags&128)){for(u=Br;u;)u=pa(u);return fu(),f.flags|=98560,f}if(E!==null&&E.dehydrated!==null){if(E=If(f),u===null){if(!E)throw Error(o(318));if(!ve)throw Error(o(344));if(u=f.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));Sx(u,f)}else fu(),!(f.flags&128)&&(f.memoizedState=null),f.flags|=4;return Vi(f),null}return Ts!==null&&(x1(Ts),Ts=null),f.flags&128?(f.lanes=v,f):(E=E!==null,v=!1,u===null?If(f):v=u.memoizedState!==null,E&&!v&&(f.child.flags|=8192,f.mode&1&&(u===null||wn.current&1?ri===0&&(ri=3):S1())),f.updateQueue!==null&&(f.flags|=4),Vi(f),null);case 4:return mu(),Vf(u,f),u===null&&Me(f.stateNode.containerInfo),Vi(f),null;case 10:return Dx(f.type._context),Vi(f),null;case 17:return di(f.type)&&Vn(),Vi(f),null;case 19:if(pt(wn),M=f.memoizedState,M===null)return Vi(f),null;if(E=(f.flags&128)!==0,C=M.rendering,C===null)if(E)zf(M,!1);else{if(ri!==0||u!==null&&u.flags&128)for(u=f.child;u!==null;){if(C=ag(u),C!==null){for(f.flags|=128,zf(M,!1),u=C.updateQueue,u!==null&&(f.updateQueue=u,f.flags|=4),f.subtreeFlags=0,u=v,E=f.child;E!==null;)v=E,M=u,v.flags&=14680066,C=v.alternate,C===null?(v.childLanes=0,v.lanes=M,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=C.childLanes,v.lanes=C.lanes,v.child=C.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=C.memoizedProps,v.memoizedState=C.memoizedState,v.updateQueue=C.updateQueue,v.type=C.type,M=C.dependencies,v.dependencies=M===null?null:{lanes:M.lanes,firstContext:M.firstContext}),E=E.sibling;return Ye(wn,wn.current&1|2),f.child}u=u.sibling}M.tail!==null&&pi()>g1&&(f.flags|=128,E=!0,zf(M,!1),f.lanes=4194304)}else{if(!E)if(u=ag(C),u!==null){if(f.flags|=128,E=!0,u=u.updateQueue,u!==null&&(f.updateQueue=u,f.flags|=4),zf(M,!0),M.tail===null&&M.tailMode==="hidden"&&!C.alternate&&!_n)return Vi(f),null}else 2*pi()-M.renderingStartTime>g1&&v!==1073741824&&(f.flags|=128,E=!0,zf(M,!1),f.lanes=4194304);M.isBackwards?(C.sibling=f.child,f.child=C):(u=M.last,u!==null?u.sibling=C:f.child=C,M.last=C)}return M.tail!==null?(f=M.tail,M.rendering=f,M.tail=f.sibling,M.renderingStartTime=pi(),f.sibling=null,u=wn.current,Ye(wn,E?u&1|2:u&1),f):(Vi(f),null);case 22:case 23:return A1(),E=f.memoizedState!==null,u!==null&&u.memoizedState!==null!==E&&(f.flags|=8192),E&&f.mode&1?Fr&1073741824&&(Vi(f),Re&&f.subtreeFlags&6&&(f.flags|=8192)):Vi(f),null;case 24:return null;case 25:return null}throw Error(o(156,f.tag))}var _G=a.ReactCurrentOwner,Nr=!1;function sr(u,f,v,E){f.child=u===null?oR(f,null,v,E):du(f,u.child,v,E)}function LR(u,f,v,E,M){v=v.render;var C=f.ref;return cu(f,M),E=Jx(u,f,v,E,C,M),v=Kx(),u!==null&&!Nr?(f.updateQueue=u.updateQueue,f.flags&=-2053,u.lanes&=~M,Oo(u,f,M)):(_n&&v&&Ox(f),f.flags|=1,sr(u,f,E,M),f.child)}function BR(u,f,v,E,M){if(u===null){var C=v.type;return typeof C=="function"&&!E1(C)&&C.defaultProps===void 0&&v.compare===null&&v.defaultProps===void 0?(f.tag=15,f.type=C,NR(u,f,C,E,M)):(u=Og(v.type,null,E,f,f.mode,M),u.ref=f.ref,u.return=f,f.child=u)}if(C=u.child,!(u.lanes&M)){var V=C.memoizedProps;if(v=v.compare,v=v!==null?v:Qm,v(V,E)&&u.ref===f.ref)return Oo(u,f,M)}return f.flags|=1,u=Aa(C,E),u.ref=f.ref,u.return=f,f.child=u}function NR(u,f,v,E,M){if(u!==null&&Qm(u.memoizedProps,E)&&u.ref===f.ref)if(Nr=!1,(u.lanes&M)!==0)u.flags&131072&&(Nr=!0);else return f.lanes=u.lanes,Oo(u,f,M);return e1(u,f,v,E,M)}function FR(u,f,v){var E=f.pendingProps,M=E.children,C=u!==null?u.memoizedState:null;if(E.mode==="hidden")if(!(f.mode&1))f.memoizedState={baseLanes:0,cachePool:null},Ye(yu,Fr),Fr|=v;else if(v&1073741824)f.memoizedState={baseLanes:0,cachePool:null},E=C!==null?C.baseLanes:v,Ye(yu,Fr),Fr|=E;else return u=C!==null?C.baseLanes|v:v,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:u,cachePool:null},f.updateQueue=null,Ye(yu,Fr),Fr|=u,null;else C!==null?(E=C.baseLanes|v,f.memoizedState=null):E=v,Ye(yu,Fr),Fr|=E;return sr(u,f,M,v),f.child}function OR(u,f){var v=f.ref;(u===null&&v!==null||u!==null&&u.ref!==v)&&(f.flags|=512,f.flags|=2097152)}function e1(u,f,v,E,M){var C=di(v)?Ys:Bt.current;return C=ts(f,C),cu(f,M),v=Jx(u,f,v,E,C,M),E=Kx(),u!==null&&!Nr?(f.updateQueue=u.updateQueue,f.flags&=-2053,u.lanes&=~M,Oo(u,f,M)):(_n&&E&&Ox(f),f.flags|=1,sr(u,f,v,M),f.child)}function UR(u,f,v,E,M){if(di(v)){var C=!0;Ti(f)}else C=!1;if(cu(f,M),f.stateNode===null)u!==null&&(u.alternate=null,f.alternate=null,f.flags|=2),Q2(f,v,E),Fx(f,v,E,M),E=!0;else if(u===null){var V=f.stateNode,q=f.memoizedProps;V.props=q;var fe=V.context,Pe=v.contextType;typeof Pe=="object"&&Pe!==null?Pe=ns(Pe):(Pe=di(v)?Ys:Bt.current,Pe=ts(f,Pe));var qe=v.getDerivedStateFromProps,wt=typeof qe=="function"||typeof V.getSnapshotBeforeUpdate=="function";wt||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(q!==E||fe!==Pe)&&Z2(f,V,E,Pe),ma=!1;var ut=f.memoizedState;V.state=ut,ng(f,E,V,M),fe=f.memoizedState,q!==E||ut!==fe||Dn.current||ma?(typeof qe=="function"&&(Nx(f,v,qe,E),fe=f.memoizedState),(q=ma||q2(f,v,q,E,ut,fe,Pe))?(wt||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount()),typeof V.componentDidMount=="function"&&(f.flags|=4194308)):(typeof V.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=E,f.memoizedState=fe),V.props=E,V.state=fe,V.context=Pe,E=q):(typeof V.componentDidMount=="function"&&(f.flags|=4194308),E=!1)}else{V=f.stateNode,J2(u,f),q=f.memoizedProps,Pe=f.type===f.elementType?q:Ms(f.type,q),V.props=Pe,wt=f.pendingProps,ut=V.context,fe=v.contextType,typeof fe=="object"&&fe!==null?fe=ns(fe):(fe=di(v)?Ys:Bt.current,fe=ts(f,fe));var ln=v.getDerivedStateFromProps;(qe=typeof ln=="function"||typeof V.getSnapshotBeforeUpdate=="function")||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(q!==wt||ut!==fe)&&Z2(f,V,E,fe),ma=!1,ut=f.memoizedState,V.state=ut,ng(f,E,V,M);var rt=f.memoizedState;q!==wt||ut!==rt||Dn.current||ma?(typeof ln=="function"&&(Nx(f,v,ln,E),rt=f.memoizedState),(Pe=ma||q2(f,v,Pe,E,ut,rt,fe)||!1)?(qe||typeof V.UNSAFE_componentWillUpdate!="function"&&typeof V.componentWillUpdate!="function"||(typeof V.componentWillUpdate=="function"&&V.componentWillUpdate(E,rt,fe),typeof V.UNSAFE_componentWillUpdate=="function"&&V.UNSAFE_componentWillUpdate(E,rt,fe)),typeof V.componentDidUpdate=="function"&&(f.flags|=4),typeof V.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof V.componentDidUpdate!="function"||q===u.memoizedProps&&ut===u.memoizedState||(f.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||q===u.memoizedProps&&ut===u.memoizedState||(f.flags|=1024),f.memoizedProps=E,f.memoizedState=rt),V.props=E,V.state=rt,V.context=fe,E=Pe):(typeof V.componentDidUpdate!="function"||q===u.memoizedProps&&ut===u.memoizedState||(f.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||q===u.memoizedProps&&ut===u.memoizedState||(f.flags|=1024),E=!1)}return t1(u,f,v,E,C,M)}function t1(u,f,v,E,M,C){OR(u,f);var V=(f.flags&128)!==0;if(!E&&!V)return M&&au(f,v,!1),Oo(u,f,C);E=f.stateNode,_G.current=f;var q=V&&typeof v.getDerivedStateFromError!="function"?null:E.render();return f.flags|=1,u!==null&&V?(f.child=du(f,u.child,null,C),f.child=du(f,null,q,C)):sr(u,f,q,C),f.memoizedState=E.state,M&&au(f,v,!0),f.child}function kR(u){var f=u.stateNode;f.pendingContext?qs(u,f.pendingContext,f.pendingContext!==f.context):f.context&&qs(u,f.context,!1),Gx(u,f.containerInfo)}function VR(u,f,v,E,M){return fu(),zx(M),f.flags|=256,sr(u,f,v,E),f.child}var yg={dehydrated:null,treeContext:null,retryLane:0};function vg(u){return{baseLanes:u,cachePool:null}}function zR(u,f,v){var E=f.pendingProps,M=wn.current,C=!1,V=(f.flags&128)!==0,q;if((q=V)||(q=u!==null&&u.memoizedState===null?!1:(M&2)!==0),q?(C=!0,f.flags&=-129):(u===null||u.memoizedState!==null)&&(M|=1),Ye(wn,M&1),u===null)return Vx(f),u=f.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?(f.mode&1?Cf(u)?f.lanes=8:f.lanes=1073741824:f.lanes=1,null):(M=E.children,u=E.fallback,C?(E=f.mode,C=f.child,M={mode:"hidden",children:M},!(E&1)&&C!==null?(C.childLanes=0,C.pendingProps=M):C=Ug(M,E,0,null),u=Ol(u,E,v,null),C.return=f,u.return=f,C.sibling=u,f.child=C,f.child.memoizedState=vg(v),f.memoizedState=yg,u):n1(f,M));if(M=u.memoizedState,M!==null){if(q=M.dehydrated,q!==null){if(V)return f.flags&256?(f.flags&=-257,_g(u,f,v,Error(o(422)))):f.memoizedState!==null?(f.child=u.child,f.flags|=128,null):(C=E.fallback,M=f.mode,E=Ug({mode:"visible",children:E.children},M,0,null),C=Ol(C,M,v,null),C.flags|=2,E.return=f,C.return=f,E.sibling=C,f.child=E,f.mode&1&&du(f,u.child,null,v),f.child.memoizedState=vg(v),f.memoizedState=yg,C);if(!(f.mode&1))f=_g(u,f,v,null);else if(Cf(q))f=_g(u,f,v,Error(o(419)));else if(E=(v&u.childLanes)!==0,Nr||E){if(E=$n,E!==null){switch(v&-v){case 4:C=2;break;case 16:C=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:C=32;break;case 536870912:C=268435456;break;default:C=0}E=C&(E.suspendedLanes|v)?0:C,E!==0&&E!==M.retryLane&&(M.retryLane=E,as(u,E,-1))}S1(),f=_g(u,f,v,Error(o(421)))}else Tf(q)?(f.flags|=128,f.child=u.child,f=DG.bind(null,u),ru(q,f),f=null):(v=M.treeContext,ve&&(Br=jm(q),Lr=f,_n=!0,Ts=null,Pf=!1,v!==null&&(is[rs++]=Bo,is[rs++]=No,is[rs++]=bl,Bo=v.id,No=v.overflow,bl=f)),f=n1(f,f.pendingProps.children),f.flags|=4096);return f}return C?(E=HR(u,f,E.children,E.fallback,v),C=f.child,M=u.child.memoizedState,C.memoizedState=M===null?vg(v):{baseLanes:M.baseLanes|v,cachePool:null},C.childLanes=u.childLanes&~v,f.memoizedState=yg,E):(v=GR(u,f,E.children,v),f.memoizedState=null,v)}return C?(E=HR(u,f,E.children,E.fallback,v),C=f.child,M=u.child.memoizedState,C.memoizedState=M===null?vg(v):{baseLanes:M.baseLanes|v,cachePool:null},C.childLanes=u.childLanes&~v,f.memoizedState=yg,E):(v=GR(u,f,E.children,v),f.memoizedState=null,v)}function n1(u,f){return f=Ug({mode:"visible",children:f},u.mode,0,null),f.return=u,u.child=f}function GR(u,f,v,E){var M=u.child;return u=M.sibling,v=Aa(M,{mode:"visible",children:v}),!(f.mode&1)&&(v.lanes=E),v.return=f,v.sibling=null,u!==null&&(E=f.deletions,E===null?(f.deletions=[u],f.flags|=16):E.push(u)),f.child=v}function HR(u,f,v,E,M){var C=f.mode;u=u.child;var V=u.sibling,q={mode:"hidden",children:v};return!(C&1)&&f.child!==u?(v=f.child,v.childLanes=0,v.pendingProps=q,f.deletions=null):(v=Aa(u,q),v.subtreeFlags=u.subtreeFlags&14680064),V!==null?E=Aa(V,E):(E=Ol(E,C,M,null),E.flags|=2),E.return=f,v.return=f,v.sibling=E,f.child=v,E}function _g(u,f,v,E){return E!==null&&zx(E),du(f,u.child,null,v),u=n1(f,f.pendingProps.children),u.flags|=2,f.memoizedState=null,u}function WR(u,f,v){u.lanes|=f;var E=u.alternate;E!==null&&(E.lanes|=f),Lx(u.return,f,v)}function i1(u,f,v,E,M){var C=u.memoizedState;C===null?u.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:E,tail:v,tailMode:M}:(C.isBackwards=f,C.rendering=null,C.renderingStartTime=0,C.last=E,C.tail=v,C.tailMode=M)}function jR(u,f,v){var E=f.pendingProps,M=E.revealOrder,C=E.tail;if(sr(u,f,E.children,v),E=wn.current,E&2)E=E&1|2,f.flags|=128;else{if(u!==null&&u.flags&128)e:for(u=f.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&WR(u,v,f);else if(u.tag===19)WR(u,v,f);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===f)break e;for(;u.sibling===null;){if(u.return===null||u.return===f)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}E&=1}if(Ye(wn,E),!(f.mode&1))f.memoizedState=null;else switch(M){case"forwards":for(v=f.child,M=null;v!==null;)u=v.alternate,u!==null&&ag(u)===null&&(M=v),v=v.sibling;v=M,v===null?(M=f.child,f.child=null):(M=v.sibling,v.sibling=null),i1(f,!1,M,v,C);break;case"backwards":for(v=null,M=f.child,f.child=null;M!==null;){if(u=M.alternate,u!==null&&ag(u)===null){f.child=M;break}u=M.sibling,M.sibling=v,v=M,M=u}i1(f,!0,v,null,C);break;case"together":i1(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function Oo(u,f,v){if(u!==null&&(f.dependencies=u.dependencies),vu|=f.lanes,!(v&f.childLanes))return null;if(u!==null&&f.child!==u.child)throw Error(o(153));if(f.child!==null){for(u=f.child,v=Aa(u,u.pendingProps),f.child=v,v.return=f;u.sibling!==null;)u=u.sibling,v=v.sibling=Aa(u,u.pendingProps),v.return=f;v.sibling=null}return f.child}function xG(u,f,v){switch(f.tag){case 3:kR(f),fu();break;case 5:aR(f);break;case 1:di(f.type)&&Ti(f);break;case 4:Gx(f,f.stateNode.containerInfo);break;case 10:X2(f,f.type._context,f.memoizedProps.value);break;case 13:var E=f.memoizedState;if(E!==null)return E.dehydrated!==null?(Ye(wn,wn.current&1),f.flags|=128,null):v&f.child.childLanes?zR(u,f,v):(Ye(wn,wn.current&1),u=Oo(u,f,v),u!==null?u.sibling:null);Ye(wn,wn.current&1);break;case 19:if(E=(v&f.childLanes)!==0,u.flags&128){if(E)return jR(u,f,v);f.flags|=128}var M=f.memoizedState;if(M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),Ye(wn,wn.current),E)break;return null;case 22:case 23:return f.lanes=0,FR(u,f,v)}return Oo(u,f,v)}function AG(u,f){switch(Ux(f),f.tag){case 1:return di(f.type)&&Vn(),u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 3:return mu(),pt(Dn),pt(Bt),jx(),u=f.flags,u&65536&&!(u&128)?(f.flags=u&-65537|128,f):null;case 5:return Hx(f),null;case 13:if(pt(wn),u=f.memoizedState,u!==null&&u.dehydrated!==null){if(f.alternate===null)throw Error(o(340));fu()}return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 19:return pt(wn),null;case 4:return mu(),null;case 10:return Dx(f.type._context),null;case 22:case 23:return A1(),null;case 24:return null;default:return null}}var xg=!1,Dl=!1,SG=typeof WeakSet=="function"?WeakSet:Set,ze=null;function Ag(u,f){var v=u.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch(E){Ar(u,f,E)}else v.current=null}function r1(u,f,v){try{v()}catch(E){Ar(u,f,E)}}var XR=!1;function EG(u,f){for(k(u.containerInfo),ze=f;ze!==null;)if(u=ze,f=u.child,(u.subtreeFlags&1028)!==0&&f!==null)f.return=u,ze=f;else for(;ze!==null;){u=ze;try{var v=u.alternate;if(u.flags&1024)switch(u.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var E=v.memoizedProps,M=v.memoizedState,C=u.stateNode,V=C.getSnapshotBeforeUpdate(u.elementType===u.type?E:Ms(u.type,E),M);C.__reactInternalSnapshotBeforeUpdate=V}break;case 3:Re&&Ie(u.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(q){Ar(u,u.return,q)}if(f=u.sibling,f!==null){f.return=u.return,ze=f;break}ze=u.return}return v=XR,XR=!1,v}function Ll(u,f,v){var E=f.updateQueue;if(E=E!==null?E.lastEffect:null,E!==null){var M=E=E.next;do{if((M.tag&u)===u){var C=M.destroy;M.destroy=void 0,C!==void 0&&r1(f,v,C)}M=M.next}while(M!==E)}}function Gf(u,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var v=f=f.next;do{if((v.tag&u)===u){var E=v.create;v.destroy=E()}v=v.next}while(v!==f)}}function s1(u){var f=u.ref;if(f!==null){var v=u.stateNode;switch(u.tag){case 5:u=Q(v);break;default:u=v}typeof f=="function"?f(u):f.current=u}}function JR(u,f,v){if(Qs&&typeof Qs.onCommitFiberUnmount=="function")try{Qs.onCommitFiberUnmount(Ym,f)}catch{}switch(f.tag){case 0:case 11:case 14:case 15:if(u=f.updateQueue,u!==null&&(u=u.lastEffect,u!==null)){var E=u=u.next;do{var M=E,C=M.destroy;M=M.tag,C!==void 0&&(M&2||M&4)&&r1(f,v,C),E=E.next}while(E!==u)}break;case 1:if(Ag(f,v),u=f.stateNode,typeof u.componentWillUnmount=="function")try{u.props=f.memoizedProps,u.state=f.memoizedState,u.componentWillUnmount()}catch(V){Ar(f,v,V)}break;case 5:Ag(f,v);break;case 4:Re?ZR(u,f,v):H&&H&&(f=f.stateNode.containerInfo,v=ct(f),kt(f,v))}}function KR(u,f,v){for(var E=f;;)if(JR(u,E,v),E.child===null||Re&&E.tag===4){if(E===f)break;for(;E.sibling===null;){if(E.return===null||E.return===f)return;E=E.return}E.sibling.return=E.return,E=E.sibling}else E.child.return=E,E=E.child}function $R(u){var f=u.alternate;f!==null&&(u.alternate=null,$R(f)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(f=u.stateNode,f!==null&&Je(f)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function YR(u){return u.tag===5||u.tag===3||u.tag===4}function qR(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||YR(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function QR(u){if(Re){e:{for(var f=u.return;f!==null;){if(YR(f))break e;f=f.return}throw Error(o(160))}var v=f;switch(v.tag){case 5:f=v.stateNode,v.flags&32&&(ge(f),v.flags&=-33),v=qR(u),a1(u,v,f);break;case 3:case 4:f=v.stateNode.containerInfo,v=qR(u),o1(u,v,f);break;default:throw Error(o(161))}}}function o1(u,f,v){var E=u.tag;if(E===5||E===6)u=u.stateNode,f?st(v,u,f):xt(v,u);else if(E!==4&&(u=u.child,u!==null))for(o1(u,f,v),u=u.sibling;u!==null;)o1(u,f,v),u=u.sibling}function a1(u,f,v){var E=u.tag;if(E===5||E===6)u=u.stateNode,f?gt(v,u,f):at(v,u);else if(E!==4&&(u=u.child,u!==null))for(a1(u,f,v),u=u.sibling;u!==null;)a1(u,f,v),u=u.sibling}function ZR(u,f,v){for(var E=f,M=!1,C,V;;){if(!M){M=E.return;e:for(;;){if(M===null)throw Error(o(160));switch(C=M.stateNode,M.tag){case 5:V=!1;break e;case 3:C=C.containerInfo,V=!0;break e;case 4:C=C.containerInfo,V=!0;break e}M=M.return}M=!0}if(E.tag===5||E.tag===6)KR(u,E,v),V?J(C,E.stateNode):Ke(C,E.stateNode);else if(E.tag===18)V?ae(C,E.stateNode):ue(C,E.stateNode);else if(E.tag===4){if(E.child!==null){C=E.stateNode.containerInfo,V=!0,E.child.return=E,E=E.child;continue}}else if(JR(u,E,v),E.child!==null){E.child.return=E,E=E.child;continue}if(E===f)break;for(;E.sibling===null;){if(E.return===null||E.return===f)return;E=E.return,E.tag===4&&(M=!1)}E.sibling.return=E.return,E=E.sibling}}function l1(u,f){if(Re){switch(f.tag){case 0:case 11:case 14:case 15:Ll(3,f,f.return),Gf(3,f),Ll(5,f,f.return);return;case 1:return;case 5:var v=f.stateNode;if(v!=null){var E=f.memoizedProps;u=u!==null?u.memoizedProps:E;var M=f.type,C=f.updateQueue;f.updateQueue=null,C!==null&&Rt(v,C,M,u,E,f)}return;case 6:if(f.stateNode===null)throw Error(o(162));v=f.memoizedProps,Ee(f.stateNode,u!==null?u.memoizedProps:v,v);return;case 3:ve&&u!==null&&u.memoizedState.isDehydrated&&ie(f.stateNode.containerInfo);return;case 12:return;case 13:Sg(f);return;case 19:Sg(f);return;case 17:return}throw Error(o(163))}switch(f.tag){case 0:case 11:case 14:case 15:Ll(3,f,f.return),Gf(3,f),Ll(5,f,f.return);return;case 12:return;case 13:Sg(f);return;case 19:Sg(f);return;case 3:ve&&u!==null&&u.memoizedState.isDehydrated&&ie(f.stateNode.containerInfo);break;case 22:case 23:return}e:if(H){switch(f.tag){case 1:case 5:case 6:break e;case 3:case 4:f=f.stateNode,kt(f.containerInfo,f.pendingChildren);break e}throw Error(o(163))}}function Sg(u){var f=u.updateQueue;if(f!==null){u.updateQueue=null;var v=u.stateNode;v===null&&(v=u.stateNode=new SG),f.forEach(function(E){var M=LG.bind(null,u,E);v.has(E)||(v.add(E),E.then(M,M))})}}function wG(u,f){for(ze=f;ze!==null;){f=ze;var v=f.deletions;if(v!==null)for(var E=0;E<v.length;E++){var M=v[E];try{var C=u;Re?ZR(C,M,f):KR(C,M,f);var V=M.alternate;V!==null&&(V.return=null),M.return=null}catch(nt){Ar(M,f,nt)}}if(v=f.child,f.subtreeFlags&12854&&v!==null)v.return=f,ze=v;else for(;ze!==null;){f=ze;try{var q=f.flags;if(q&32&&Re&&ge(f.stateNode),q&512){var fe=f.alternate;if(fe!==null){var Pe=fe.ref;Pe!==null&&(typeof Pe=="function"?Pe(null):Pe.current=null)}}if(q&8192)switch(f.tag){case 13:if(f.memoizedState!==null){var qe=f.alternate;(qe===null||qe.memoizedState===null)&&(m1=pi())}break;case 22:var wt=f.memoizedState!==null,ut=f.alternate,ln=ut!==null&&ut.memoizedState!==null;if(v=f,Re){e:if(E=v,M=wt,C=null,Re)for(var rt=E;;){if(rt.tag===5){if(C===null){C=rt;var zi=rt.stateNode;M?je(zi):we(rt.stateNode,rt.memoizedProps)}}else if(rt.tag===6){if(C===null){var cs=rt.stateNode;M?He(cs):X(cs,rt.memoizedProps)}}else if((rt.tag!==22&&rt.tag!==23||rt.memoizedState===null||rt===E)&&rt.child!==null){rt.child.return=rt,rt=rt.child;continue}if(rt===E)break;for(;rt.sibling===null;){if(rt.return===null||rt.return===E)break e;C===rt&&(C=null),rt=rt.return}C===rt&&(C=null),rt.sibling.return=rt.return,rt=rt.sibling}}if(wt&&!ln&&v.mode&1){ze=v;for(var oe=v.child;oe!==null;){for(v=ze=oe;ze!==null;){E=ze;var ee=E.child;switch(E.tag){case 0:case 11:case 14:case 15:Ll(4,E,E.return);break;case 1:Ag(E,E.return);var he=E.stateNode;if(typeof he.componentWillUnmount=="function"){var We=E.return;try{he.props=E.memoizedProps,he.state=E.memoizedState,he.componentWillUnmount()}catch(nt){Ar(E,We,nt)}}break;case 5:Ag(E,E.return);break;case 22:if(E.memoizedState!==null){nb(v);continue}}ee!==null?(ee.return=E,ze=ee):nb(v)}oe=oe.sibling}}}switch(q&4102){case 2:QR(f),f.flags&=-3;break;case 6:QR(f),f.flags&=-3,l1(f.alternate,f);break;case 4096:f.flags&=-4097;break;case 4100:f.flags&=-4097,l1(f.alternate,f);break;case 4:l1(f.alternate,f)}}catch(nt){Ar(f,f.return,nt)}if(v=f.sibling,v!==null){v.return=f.return,ze=v;break}ze=f.return}}}function MG(u,f,v){ze=u,eb(u)}function eb(u,f,v){for(var E=(u.mode&1)!==0;ze!==null;){var M=ze,C=M.child;if(M.tag===22&&E){var V=M.memoizedState!==null||xg;if(!V){var q=M.alternate,fe=q!==null&&q.memoizedState!==null||Dl;q=xg;var Pe=Dl;if(xg=V,(Dl=fe)&&!Pe)for(ze=M;ze!==null;)V=ze,fe=V.child,V.tag===22&&V.memoizedState!==null?ib(M):fe!==null?(fe.return=V,ze=fe):ib(M);for(;C!==null;)ze=C,eb(C),C=C.sibling;ze=M,xg=q,Dl=Pe}tb(u)}else M.subtreeFlags&8772&&C!==null?(C.return=M,ze=C):tb(u)}}function tb(u){for(;ze!==null;){var f=ze;if(f.flags&8772){var v=f.alternate;try{if(f.flags&8772)switch(f.tag){case 0:case 11:case 15:Dl||Gf(5,f);break;case 1:var E=f.stateNode;if(f.flags&4&&!Dl)if(v===null)E.componentDidMount();else{var M=f.elementType===f.type?v.memoizedProps:Ms(f.type,v.memoizedProps);E.componentDidUpdate(M,v.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var C=f.updateQueue;C!==null&&$2(f,C,E);break;case 3:var V=f.updateQueue;if(V!==null){if(v=null,f.child!==null)switch(f.child.tag){case 5:v=Q(f.child.stateNode);break;case 1:v=f.child.stateNode}$2(f,V,v)}break;case 5:var q=f.stateNode;v===null&&f.flags&4&&Ot(q,f.type,f.memoizedProps,f);break;case 6:break;case 4:break;case 12:break;case 13:if(ve&&f.memoizedState===null){var fe=f.alternate;if(fe!==null){var Pe=fe.memoizedState;if(Pe!==null){var qe=Pe.dehydrated;qe!==null&&le(qe)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Dl||f.flags&512&&s1(f)}catch(wt){Ar(f,f.return,wt)}}if(f===u){ze=null;break}if(v=f.sibling,v!==null){v.return=f.return,ze=v;break}ze=f.return}}function nb(u){for(;ze!==null;){var f=ze;if(f===u){ze=null;break}var v=f.sibling;if(v!==null){v.return=f.return,ze=v;break}ze=f.return}}function ib(u){for(;ze!==null;){var f=ze;try{switch(f.tag){case 0:case 11:case 15:var v=f.return;try{Gf(4,f)}catch(fe){Ar(f,v,fe)}break;case 1:var E=f.stateNode;if(typeof E.componentDidMount=="function"){var M=f.return;try{E.componentDidMount()}catch(fe){Ar(f,M,fe)}}var C=f.return;try{s1(f)}catch(fe){Ar(f,C,fe)}break;case 5:var V=f.return;try{s1(f)}catch(fe){Ar(f,V,fe)}}}catch(fe){Ar(f,f.return,fe)}if(f===u){ze=null;break}var q=f.sibling;if(q!==null){q.return=f.return,ze=q;break}ze=f.return}}var Eg=0,wg=1,Mg=2,Tg=3,Cg=4;if(typeof Symbol=="function"&&Symbol.for){var Hf=Symbol.for;Eg=Hf("selector.component"),wg=Hf("selector.has_pseudo_class"),Mg=Hf("selector.role"),Tg=Hf("selector.test_id"),Cg=Hf("selector.text")}function c1(u){var f=de(u);if(f!=null){if(typeof f.memoizedProps["data-testname"]!="string")throw Error(o(364));return f}if(u=ne(u),u===null)throw Error(o(362));return u.stateNode.current}function u1(u,f){switch(f.$$typeof){case Eg:if(u.type===f.value)return!0;break;case wg:e:{f=f.value,u=[u,0];for(var v=0;v<u.length;){var E=u[v++],M=u[v++],C=f[M];if(E.tag!==5||!ye(E)){for(;C!=null&&u1(E,C);)M++,C=f[M];if(M===f.length){f=!0;break e}else for(E=E.child;E!==null;)u.push(E,M),E=E.sibling}}f=!1}return f;case Mg:if(u.tag===5&&Qe(u.stateNode,f.value))return!0;break;case Cg:if((u.tag===5||u.tag===6)&&(u=_e(u),u!==null&&0<=u.indexOf(f.value)))return!0;break;case Tg:if(u.tag===5&&(u=u.memoizedProps["data-testname"],typeof u=="string"&&u.toLowerCase()===f.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function h1(u){switch(u.$$typeof){case Eg:return"<"+(P(u.value)||"Unknown")+">";case wg:return":has("+(h1(u)||"")+")";case Mg:return'[role="'+u.value+'"]';case Cg:return'"'+u.value+'"';case Tg:return'[data-testname="'+u.value+'"]';default:throw Error(o(365))}}function rb(u,f){var v=[];u=[u,0];for(var E=0;E<u.length;){var M=u[E++],C=u[E++],V=f[C];if(M.tag!==5||!ye(M)){for(;V!=null&&u1(M,V);)C++,V=f[C];if(C===f.length)v.push(M);else for(M=M.child;M!==null;)u.push(M,C),M=M.sibling}}return v}function f1(u,f){if(!D)throw Error(o(363));u=c1(u),u=rb(u,f),f=[],u=Array.from(u);for(var v=0;v<u.length;){var E=u[v++];if(E.tag===5)ye(E)||f.push(E.stateNode);else for(E=E.child;E!==null;)u.push(E),E=E.sibling}return f}var TG=Math.ceil,Rg=a.ReactCurrentDispatcher,d1=a.ReactCurrentOwner,zn=a.ReactCurrentBatchConfig,Nt=0,$n=null,Yn=null,Ci=0,Fr=0,yu=fi(0),ri=0,Wf=null,vu=0,bg=0,p1=0,jf=null,_r=null,m1=0,g1=1/0;function _u(){g1=pi()+500}var Pg=!1,y1=null,ya=null,Ig=!1,va=null,Dg=0,Xf=0,v1=null,Lg=-1,Bg=0;function or(){return Nt&6?pi():Lg!==-1?Lg:Lg=pi()}function _a(u){return u.mode&1?Nt&2&&Ci!==0?Ci&-Ci:lG.transition!==null?(Bg===0&&(u=Jm,Jm<<=1,!(Jm&4194240)&&(Jm=64),Bg=u),Bg):(u=qt,u!==0?u:pe()):1}function as(u,f,v){if(50<Xf)throw Xf=0,v1=null,Error(o(185));var E=Ng(u,f);return E===null?null:(bf(E,f,v),(!(Nt&2)||E!==$n)&&(E===$n&&(!(Nt&2)&&(bg|=f),ri===4&&xa(E,Ci)),xr(E,v),f===1&&Nt===0&&!(u.mode&1)&&(_u(),qm&&eo())),E)}function Ng(u,f){u.lanes|=f;var v=u.alternate;for(v!==null&&(v.lanes|=f),v=u,u=u.return;u!==null;)u.childLanes|=f,v=u.alternate,v!==null&&(v.childLanes|=f),v=u,u=u.return;return v.tag===3?v.stateNode:null}function xr(u,f){var v=u.callbackNode;Zz(u,f);var E=$m(u,u===$n?Ci:0);if(E===0)v!==null&&W2(v),u.callbackNode=null,u.callbackPriority=0;else if(f=E&-E,u.callbackPriority!==f){if(v!=null&&W2(v),f===1)u.tag===0?aG(ob.bind(null,u)):j2(ob.bind(null,u)),Fe?N(function(){Nt===0&&eo()}):Tx(Cx,eo),v=null;else{switch(H2(E)){case 1:v=Cx;break;case 4:v=iG;break;case 16:v=Rx;break;case 536870912:v=rG;break;default:v=Rx}v=mb(v,sb.bind(null,u))}u.callbackPriority=f,u.callbackNode=v}}function sb(u,f){if(Lg=-1,Bg=0,Nt&6)throw Error(o(327));var v=u.callbackNode;if(Fl()&&u.callbackNode!==v)return null;var E=$m(u,u===$n?Ci:0);if(E===0)return null;if(E&30||E&u.expiredLanes||f)f=Fg(u,E);else{f=E;var M=Nt;Nt|=2;var C=cb();($n!==u||Ci!==f)&&(_u(),Bl(u,f));do try{bG();break}catch(q){lb(u,q)}while(!0);Ix(),Rg.current=C,Nt=M,Yn!==null?f=0:($n=null,Ci=0,f=ri)}if(f!==0){if(f===2&&(M=Ex(u),M!==0&&(E=M,f=_1(u,M))),f===1)throw v=Wf,Bl(u,0),xa(u,E),xr(u,pi()),v;if(f===6)xa(u,E);else{if(M=u.current.alternate,!(E&30)&&!CG(M)&&(f=Fg(u,E),f===2&&(C=Ex(u),C!==0&&(E=C,f=_1(u,C))),f===1))throw v=Wf,Bl(u,0),xa(u,E),xr(u,pi()),v;switch(u.finishedWork=M,u.finishedLanes=E,f){case 0:case 1:throw Error(o(345));case 2:Nl(u,_r);break;case 3:if(xa(u,E),(E&130023424)===E&&(f=m1+500-pi(),10<f)){if($m(u,0)!==0)break;if(M=u.suspendedLanes,(M&E)!==E){or(),u.pingedLanes|=u.suspendedLanes&M;break}u.timeoutHandle=be(Nl.bind(null,u,_r),f);break}Nl(u,_r);break;case 4:if(xa(u,E),(E&4194240)===E)break;for(f=u.eventTimes,M=-1;0<E;){var V=31-Dr(E);C=1<<V,V=f[V],V>M&&(M=V),E&=~C}if(E=M,E=pi()-E,E=(120>E?120:480>E?480:1080>E?1080:1920>E?1920:3e3>E?3e3:4320>E?4320:1960*TG(E/1960))-E,10<E){u.timeoutHandle=be(Nl.bind(null,u,_r),E);break}Nl(u,_r);break;case 5:Nl(u,_r);break;default:throw Error(o(329))}}}return xr(u,pi()),u.callbackNode===v?sb.bind(null,u):null}function _1(u,f){var v=jf;return u.current.memoizedState.isDehydrated&&(Bl(u,f).flags|=256),u=Fg(u,f),u!==2&&(f=_r,_r=v,f!==null&&x1(f)),u}function x1(u){_r===null?_r=u:_r.push.apply(_r,u)}function CG(u){for(var f=u;;){if(f.flags&16384){var v=f.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var E=0;E<v.length;E++){var M=v[E],C=M.getSnapshot;M=M.value;try{if(!Zs(C(),M))return!1}catch{return!1}}}if(v=f.child,f.subtreeFlags&16384&&v!==null)v.return=f,f=v;else{if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function xa(u,f){for(f&=~p1,f&=~bg,u.suspendedLanes|=f,u.pingedLanes&=~f,u=u.expirationTimes;0<f;){var v=31-Dr(f),E=1<<v;u[v]=-1,f&=~E}}function ob(u){if(Nt&6)throw Error(o(327));Fl();var f=$m(u,0);if(!(f&1))return xr(u,pi()),null;var v=Fg(u,f);if(u.tag!==0&&v===2){var E=Ex(u);E!==0&&(f=E,v=_1(u,E))}if(v===1)throw v=Wf,Bl(u,0),xa(u,f),xr(u,pi()),v;if(v===6)throw Error(o(345));return u.finishedWork=u.current.alternate,u.finishedLanes=f,Nl(u,_r),xr(u,pi()),null}function ab(u){va!==null&&va.tag===0&&!(Nt&6)&&Fl();var f=Nt;Nt|=1;var v=zn.transition,E=qt;try{if(zn.transition=null,qt=1,u)return u()}finally{qt=E,zn.transition=v,Nt=f,!(Nt&6)&&eo()}}function A1(){Fr=yu.current,pt(yu)}function Bl(u,f){u.finishedWork=null,u.finishedLanes=0;var v=u.timeoutHandle;if(v!==ot&&(u.timeoutHandle=ot,tt(v)),Yn!==null)for(v=Yn.return;v!==null;){var E=v;switch(Ux(E),E.tag){case 1:E=E.type.childContextTypes,E!=null&&Vn();break;case 3:mu(),pt(Dn),pt(Bt),jx();break;case 5:Hx(E);break;case 4:mu();break;case 13:pt(wn);break;case 19:pt(wn);break;case 10:Dx(E.type._context);break;case 22:case 23:A1()}v=v.return}if($n=u,Yn=u=Aa(u.current,null),Ci=Fr=f,ri=0,Wf=null,p1=bg=vu=0,_r=jf=null,to!==null){for(f=0;f<to.length;f++)if(v=to[f],E=v.interleaved,E!==null){v.interleaved=null;var M=E.next,C=v.pending;if(C!==null){var V=C.next;C.next=M,E.next=V}v.pending=E}to=null}return u}function lb(u,f){do{var v=Yn;try{if(Ix(),lg.current=pg,cg){for(var E=Ln.memoizedState;E!==null;){var M=E.queue;M!==null&&(M.pending=null),E=E.next}cg=!1}if(gu=0,mi=Ui=Ln=null,Nf=!1,Ff=0,d1.current=null,v===null||v.return===null){ri=1,Wf=f,Yn=null;break}e:{var C=u,V=v.return,q=v,fe=f;if(f=Ci,q.flags|=32768,fe!==null&&typeof fe=="object"&&typeof fe.then=="function"){var Pe=fe,qe=q,wt=qe.tag;if(!(qe.mode&1)&&(wt===0||wt===11||wt===15)){var ut=qe.alternate;ut?(qe.updateQueue=ut.updateQueue,qe.memoizedState=ut.memoizedState,qe.lanes=ut.lanes):(qe.updateQueue=null,qe.memoizedState=null)}var ln=bR(V);if(ln!==null){ln.flags&=-257,PR(ln,V,q,C,f),ln.mode&1&&RR(C,Pe,f),f=ln,fe=Pe;var rt=f.updateQueue;if(rt===null){var zi=new Set;zi.add(fe),f.updateQueue=zi}else rt.add(fe);break e}else{if(!(f&1)){RR(C,Pe,f),S1();break e}fe=Error(o(426))}}else if(_n&&q.mode&1){var cs=bR(V);if(cs!==null){!(cs.flags&65536)&&(cs.flags|=256),PR(cs,V,q,C,f),zx(fe);break e}}C=fe,ri!==4&&(ri=2),jf===null?jf=[C]:jf.push(C),fe=Qx(fe,q),q=V;do{switch(q.tag){case 3:q.flags|=65536,f&=-f,q.lanes|=f;var oe=TR(q,fe,f);K2(q,oe);break e;case 1:C=fe;var ee=q.type,he=q.stateNode;if(!(q.flags&128)&&(typeof ee.getDerivedStateFromError=="function"||he!==null&&typeof he.componentDidCatch=="function"&&(ya===null||!ya.has(he)))){q.flags|=65536,f&=-f,q.lanes|=f;var We=CR(q,C,f);K2(q,We);break e}}q=q.return}while(q!==null)}hb(v)}catch(nt){f=nt,Yn===v&&v!==null&&(Yn=v=v.return);continue}break}while(!0)}function cb(){var u=Rg.current;return Rg.current=pg,u===null?pg:u}function S1(){(ri===0||ri===3||ri===2)&&(ri=4),$n===null||!(vu&268435455)&&!(bg&268435455)||xa($n,Ci)}function Fg(u,f){var v=Nt;Nt|=2;var E=cb();$n===u&&Ci===f||Bl(u,f);do try{RG();break}catch(M){lb(u,M)}while(!0);if(Ix(),Nt=v,Rg.current=E,Yn!==null)throw Error(o(261));return $n=null,Ci=0,ri}function RG(){for(;Yn!==null;)ub(Yn)}function bG(){for(;Yn!==null&&!tG();)ub(Yn)}function ub(u){var f=pb(u.alternate,u,Fr);u.memoizedProps=u.pendingProps,f===null?hb(u):Yn=f,d1.current=null}function hb(u){var f=u;do{var v=f.alternate;if(u=f.return,f.flags&32768){if(v=AG(v,f),v!==null){v.flags&=32767,Yn=v;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{ri=6,Yn=null;return}}else if(v=vG(v,f,Fr),v!==null){Yn=v;return}if(f=f.sibling,f!==null){Yn=f;return}Yn=f=u}while(f!==null);ri===0&&(ri=5)}function Nl(u,f){var v=qt,E=zn.transition;try{zn.transition=null,qt=1,PG(u,f,v)}finally{zn.transition=E,qt=v}return null}function PG(u,f,v){do Fl();while(va!==null);if(Nt&6)throw Error(o(327));var E=u.finishedWork,M=u.finishedLanes;if(E===null)return null;if(u.finishedWork=null,u.finishedLanes=0,E===u.current)throw Error(o(177));u.callbackNode=null,u.callbackPriority=0;var C=E.lanes|E.childLanes;if(eG(u,C),u===$n&&(Yn=$n=null,Ci=0),!(E.subtreeFlags&2064)&&!(E.flags&2064)||Ig||(Ig=!0,mb(Rx,function(){return Fl(),null})),C=(E.flags&15990)!==0,E.subtreeFlags&15990||C){C=zn.transition,zn.transition=null;var V=qt;qt=1;var q=Nt;Nt|=4,d1.current=null,EG(u,E),wG(u,E),z(u.containerInfo),u.current=E,MG(E),nG(),Nt=q,qt=V,zn.transition=C}else u.current=E;if(Ig&&(Ig=!1,va=u,Dg=M),C=u.pendingLanes,C===0&&(ya=null),sG(E.stateNode),xr(u,pi()),f!==null)for(v=u.onRecoverableError,E=0;E<f.length;E++)v(f[E]);if(Pg)throw Pg=!1,u=y1,y1=null,u;return Dg&1&&u.tag!==0&&Fl(),C=u.pendingLanes,C&1?u===v1?Xf++:(Xf=0,v1=u):Xf=0,eo(),null}function Fl(){if(va!==null){var u=H2(Dg),f=zn.transition,v=qt;try{if(zn.transition=null,qt=16>u?16:u,va===null)var E=!1;else{if(u=va,va=null,Dg=0,Nt&6)throw Error(o(331));var M=Nt;for(Nt|=4,ze=u.current;ze!==null;){var C=ze,V=C.child;if(ze.flags&16){var q=C.deletions;if(q!==null){for(var fe=0;fe<q.length;fe++){var Pe=q[fe];for(ze=Pe;ze!==null;){var qe=ze;switch(qe.tag){case 0:case 11:case 15:Ll(8,qe,C)}var wt=qe.child;if(wt!==null)wt.return=qe,ze=wt;else for(;ze!==null;){qe=ze;var ut=qe.sibling,ln=qe.return;if($R(qe),qe===Pe){ze=null;break}if(ut!==null){ut.return=ln,ze=ut;break}ze=ln}}}var rt=C.alternate;if(rt!==null){var zi=rt.child;if(zi!==null){rt.child=null;do{var cs=zi.sibling;zi.sibling=null,zi=cs}while(zi!==null)}}ze=C}}if(C.subtreeFlags&2064&&V!==null)V.return=C,ze=V;else e:for(;ze!==null;){if(C=ze,C.flags&2048)switch(C.tag){case 0:case 11:case 15:Ll(9,C,C.return)}var oe=C.sibling;if(oe!==null){oe.return=C.return,ze=oe;break e}ze=C.return}}var ee=u.current;for(ze=ee;ze!==null;){V=ze;var he=V.child;if(V.subtreeFlags&2064&&he!==null)he.return=V,ze=he;else e:for(V=ee;ze!==null;){if(q=ze,q.flags&2048)try{switch(q.tag){case 0:case 11:case 15:Gf(9,q)}}catch(nt){Ar(q,q.return,nt)}if(q===V){ze=null;break e}var We=q.sibling;if(We!==null){We.return=q.return,ze=We;break e}ze=q.return}}if(Nt=M,eo(),Qs&&typeof Qs.onPostCommitFiberRoot=="function")try{Qs.onPostCommitFiberRoot(Ym,u)}catch{}E=!0}return E}finally{qt=v,zn.transition=f}}return!1}function fb(u,f,v){f=Qx(v,f),f=TR(u,f,1),ga(u,f),f=or(),u=Ng(u,1),u!==null&&(bf(u,1,f),xr(u,f))}function Ar(u,f,v){if(u.tag===3)fb(u,u,v);else for(;f!==null;){if(f.tag===3){fb(f,u,v);break}else if(f.tag===1){var E=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(ya===null||!ya.has(E))){u=Qx(v,u),u=CR(f,u,1),ga(f,u),u=or(),f=Ng(f,1),f!==null&&(bf(f,1,u),xr(f,u));break}}f=f.return}}function IG(u,f,v){var E=u.pingCache;E!==null&&E.delete(f),f=or(),u.pingedLanes|=u.suspendedLanes&v,$n===u&&(Ci&v)===v&&(ri===4||ri===3&&(Ci&130023424)===Ci&&500>pi()-m1?Bl(u,0):p1|=v),xr(u,f)}function db(u,f){f===0&&(u.mode&1?(f=Km,Km<<=1,!(Km&130023424)&&(Km=4194304)):f=1);var v=or();u=Ng(u,f),u!==null&&(bf(u,f,v),xr(u,v))}function DG(u){var f=u.memoizedState,v=0;f!==null&&(v=f.retryLane),db(u,v)}function LG(u,f){var v=0;switch(u.tag){case 13:var E=u.stateNode,M=u.memoizedState;M!==null&&(v=M.retryLane);break;case 19:E=u.stateNode;break;default:throw Error(o(314))}E!==null&&E.delete(f),db(u,v)}var pb;pb=function(u,f,v){if(u!==null)if(u.memoizedProps!==f.pendingProps||Dn.current)Nr=!0;else{if(!(u.lanes&v)&&!(f.flags&128))return Nr=!1,xG(u,f,v);Nr=!!(u.flags&131072)}else Nr=!1,_n&&f.flags&1048576&&eR(f,sg,f.index);switch(f.lanes=0,f.tag){case 2:var E=f.type;u!==null&&(u.alternate=null,f.alternate=null,f.flags|=2),u=f.pendingProps;var M=ts(f,Bt.current);cu(f,v),M=Jx(null,f,E,u,M,v);var C=Kx();return f.flags|=1,typeof M=="object"&&M!==null&&typeof M.render=="function"&&M.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,di(E)?(C=!0,Ti(f)):C=!1,f.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,Bx(f),M.updater=ig,f.stateNode=M,M._reactInternals=f,Fx(f,E,u,v),f=t1(null,f,E,!0,C,v)):(f.tag=0,_n&&C&&Ox(f),sr(null,f,M,v),f=f.child),f;case 16:E=f.elementType;e:{switch(u!==null&&(u.alternate=null,f.alternate=null,f.flags|=2),u=f.pendingProps,M=E._init,E=M(E._payload),f.type=E,M=f.tag=NG(E),u=Ms(E,u),M){case 0:f=e1(null,f,E,u,v);break e;case 1:f=UR(null,f,E,u,v);break e;case 11:f=LR(null,f,E,u,v);break e;case 14:f=BR(null,f,E,Ms(E.type,u),v);break e}throw Error(o(306,E,""))}return f;case 0:return E=f.type,M=f.pendingProps,M=f.elementType===E?M:Ms(E,M),e1(u,f,E,M,v);case 1:return E=f.type,M=f.pendingProps,M=f.elementType===E?M:Ms(E,M),UR(u,f,E,M,v);case 3:e:{if(kR(f),u===null)throw Error(o(387));E=f.pendingProps,C=f.memoizedState,M=C.element,J2(u,f),ng(f,E,null,v);var V=f.memoizedState;if(E=V.element,ve&&C.isDehydrated)if(C={element:E,isDehydrated:!1,cache:V.cache,transitions:V.transitions},f.updateQueue.baseState=C,f.memoizedState=C,f.flags&256){M=Error(o(423)),f=VR(u,f,E,v,M);break e}else if(E!==M){M=Error(o(424)),f=VR(u,f,E,v,M);break e}else for(ve&&(Br=Wm(f.stateNode.containerInfo),Lr=f,_n=!0,Ts=null,Pf=!1),v=oR(f,null,E,v),f.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(fu(),E===M){f=Oo(u,f,v);break e}sr(u,f,E,v)}f=f.child}return f;case 5:return aR(f),u===null&&Vx(f),E=f.type,M=f.pendingProps,C=u!==null?u.memoizedProps:null,V=M.children,Se(E,M)?V=null:C!==null&&Se(E,C)&&(f.flags|=32),OR(u,f),sr(u,f,V,v),f.child;case 6:return u===null&&Vx(f),null;case 13:return zR(u,f,v);case 4:return Gx(f,f.stateNode.containerInfo),E=f.pendingProps,u===null?f.child=du(f,null,E,v):sr(u,f,E,v),f.child;case 11:return E=f.type,M=f.pendingProps,M=f.elementType===E?M:Ms(E,M),LR(u,f,E,M,v);case 7:return sr(u,f,f.pendingProps,v),f.child;case 8:return sr(u,f,f.pendingProps.children,v),f.child;case 12:return sr(u,f,f.pendingProps.children,v),f.child;case 10:e:{if(E=f.type._context,M=f.pendingProps,C=f.memoizedProps,V=M.value,X2(f,E,V),C!==null)if(Zs(C.value,V)){if(C.children===M.children&&!Dn.current){f=Oo(u,f,v);break e}}else for(C=f.child,C!==null&&(C.return=f);C!==null;){var q=C.dependencies;if(q!==null){V=C.child;for(var fe=q.firstContext;fe!==null;){if(fe.context===E){if(C.tag===1){fe=Lo(-1,v&-v),fe.tag=2;var Pe=C.updateQueue;if(Pe!==null){Pe=Pe.shared;var qe=Pe.pending;qe===null?fe.next=fe:(fe.next=qe.next,qe.next=fe),Pe.pending=fe}}C.lanes|=v,fe=C.alternate,fe!==null&&(fe.lanes|=v),Lx(C.return,v,f),q.lanes|=v;break}fe=fe.next}}else if(C.tag===10)V=C.type===f.type?null:C.child;else if(C.tag===18){if(V=C.return,V===null)throw Error(o(341));V.lanes|=v,q=V.alternate,q!==null&&(q.lanes|=v),Lx(V,v,f),V=C.sibling}else V=C.child;if(V!==null)V.return=C;else for(V=C;V!==null;){if(V===f){V=null;break}if(C=V.sibling,C!==null){C.return=V.return,V=C;break}V=V.return}C=V}sr(u,f,M.children,v),f=f.child}return f;case 9:return M=f.type,E=f.pendingProps.children,cu(f,v),M=ns(M),E=E(M),f.flags|=1,sr(u,f,E,v),f.child;case 14:return E=f.type,M=Ms(E,f.pendingProps),M=Ms(E.type,M),BR(u,f,E,M,v);case 15:return NR(u,f,f.type,f.pendingProps,v);case 17:return E=f.type,M=f.pendingProps,M=f.elementType===E?M:Ms(E,M),u!==null&&(u.alternate=null,f.alternate=null,f.flags|=2),f.tag=1,di(E)?(u=!0,Ti(f)):u=!1,cu(f,v),Q2(f,E,M),Fx(f,E,M,v),t1(null,f,E,!0,u,v);case 19:return jR(u,f,v);case 22:return FR(u,f,v)}throw Error(o(156,f.tag))};function mb(u,f){return Tx(u,f)}function BG(u,f,v,E){this.tag=u,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ls(u,f,v,E){return new BG(u,f,v,E)}function E1(u){return u=u.prototype,!(!u||!u.isReactComponent)}function NG(u){if(typeof u=="function")return E1(u)?1:0;if(u!=null){if(u=u.$$typeof,u===x)return 11;if(u===A)return 14}return 2}function Aa(u,f){var v=u.alternate;return v===null?(v=ls(u.tag,f,u.key,u.mode),v.elementType=u.elementType,v.type=u.type,v.stateNode=u.stateNode,v.alternate=u,u.alternate=v):(v.pendingProps=f,v.type=u.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=u.flags&14680064,v.childLanes=u.childLanes,v.lanes=u.lanes,v.child=u.child,v.memoizedProps=u.memoizedProps,v.memoizedState=u.memoizedState,v.updateQueue=u.updateQueue,f=u.dependencies,v.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},v.sibling=u.sibling,v.index=u.index,v.ref=u.ref,v}function Og(u,f,v,E,M,C){var V=2;if(E=u,typeof u=="function")E1(u)&&(V=1);else if(typeof u=="string")V=5;else e:switch(u){case h:return Ol(v.children,M,C,f);case d:V=8,M|=8;break;case p:return u=ls(12,v,f,M|2),u.elementType=p,u.lanes=C,u;case _:return u=ls(13,v,f,M),u.elementType=_,u.lanes=C,u;case g:return u=ls(19,v,f,M),u.elementType=g,u.lanes=C,u;case w:return Ug(v,M,C,f);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case m:V=10;break e;case y:V=9;break e;case x:V=11;break e;case A:V=14;break e;case S:V=16,E=null;break e}throw Error(o(130,u==null?u:typeof u,""))}return f=ls(V,v,f,M),f.elementType=u,f.type=E,f.lanes=C,f}function Ol(u,f,v,E){return u=ls(7,u,E,f),u.lanes=v,u}function Ug(u,f,v,E){return u=ls(22,u,E,f),u.elementType=w,u.lanes=v,u.stateNode={},u}function w1(u,f,v){return u=ls(6,u,null,f),u.lanes=v,u}function M1(u,f,v){return f=ls(4,u.children!==null?u.children:[],u.key,f),f.lanes=v,f.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},f}function FG(u,f,v,E,M){this.tag=f,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ot,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wx(0),this.expirationTimes=wx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wx(0),this.identifierPrefix=E,this.onRecoverableError=M,ve&&(this.mutableSourceEagerHydrationData=null)}function gb(u,f,v,E,M,C,V,q,fe){return u=new FG(u,f,v,q,fe),f===1?(f=1,C===!0&&(f|=8)):f=0,C=ls(3,null,null,f),u.current=C,C.stateNode=u,C.memoizedState={element:E,isDehydrated:v,cache:null,transitions:null},Bx(C),u}function yb(u){if(!u)return es;u=u._reactInternals;e:{if(b(u)!==u||u.tag!==1)throw Error(o(170));var f=u;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(di(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(o(171))}if(u.tag===1){var v=u.type;if(di(v))return ou(u,v,f)}return f}function vb(u){var f=u._reactInternals;if(f===void 0)throw typeof u.render=="function"?Error(o(188)):(u=Object.keys(u).join(","),Error(o(268,u)));return u=K(f),u===null?null:u.stateNode}function _b(u,f){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var v=u.retryLane;u.retryLane=v!==0&&v<f?v:f}}function T1(u,f){_b(u,f),(u=u.alternate)&&_b(u,f)}function OG(u){return u=K(u),u===null?null:u.stateNode}function UG(){return null}return t.attemptContinuousHydration=function(u){if(u.tag===13){var f=or();as(u,134217728,f),T1(u,134217728)}},t.attemptHydrationAtCurrentPriority=function(u){if(u.tag===13){var f=or(),v=_a(u);as(u,v,f),T1(u,v)}},t.attemptSynchronousHydration=function(u){switch(u.tag){case 3:var f=u.stateNode;if(f.current.memoizedState.isDehydrated){var v=Rf(f.pendingLanes);v!==0&&(Mx(f,v|1),xr(f,pi()),!(Nt&6)&&(_u(),eo()))}break;case 13:var E=or();ab(function(){return as(u,1,E)}),T1(u,1)}},t.batchedUpdates=function(u,f){var v=Nt;Nt|=1;try{return u(f)}finally{Nt=v,Nt===0&&(_u(),qm&&eo())}},t.createComponentSelector=function(u){return{$$typeof:Eg,value:u}},t.createContainer=function(u,f,v,E,M,C,V){return gb(u,f,!1,null,v,E,M,C,V)},t.createHasPseudoClassSelector=function(u){return{$$typeof:wg,value:u}},t.createHydrationContainer=function(u,f,v,E,M,C,V,q,fe){return u=gb(v,E,!0,u,M,C,V,q,fe),u.context=yb(null),v=u.current,E=or(),M=_a(v),C=Lo(E,M),C.callback=f??null,ga(v,C),u.current.lanes=M,bf(u,M,E),xr(u,E),u},t.createPortal=function(u,f,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:E==null?null:""+E,children:u,containerInfo:f,implementation:v}},t.createRoleSelector=function(u){return{$$typeof:Mg,value:u}},t.createTestNameSelector=function(u){return{$$typeof:Tg,value:u}},t.createTextSelector=function(u){return{$$typeof:Cg,value:u}},t.deferredUpdates=function(u){var f=qt,v=zn.transition;try{return zn.transition=null,qt=16,u()}finally{qt=f,zn.transition=v}},t.discreteUpdates=function(u,f,v,E,M){var C=qt,V=zn.transition;try{return zn.transition=null,qt=1,u(f,v,E,M)}finally{qt=C,zn.transition=V,Nt===0&&_u()}},t.findAllNodes=f1,t.findBoundingRects=function(u,f){if(!D)throw Error(o(363));f=f1(u,f),u=[];for(var v=0;v<f.length;v++)u.push(Ae(f[v]));for(f=u.length-1;0<f;f--){v=u[f];for(var E=v.x,M=E+v.width,C=v.y,V=C+v.height,q=f-1;0<=q;q--)if(f!==q){var fe=u[q],Pe=fe.x,qe=Pe+fe.width,wt=fe.y,ut=wt+fe.height;if(E>=Pe&&C>=wt&&M<=qe&&V<=ut){u.splice(f,1);break}else if(E!==Pe||v.width!==fe.width||ut<C||wt>V){if(!(C!==wt||v.height!==fe.height||qe<E||Pe>M)){Pe>E&&(fe.width+=Pe-E,fe.x=E),qe<M&&(fe.width=M-Pe),u.splice(f,1);break}}else{wt>C&&(fe.height+=wt-C,fe.y=C),ut<V&&(fe.height=V-wt),u.splice(f,1);break}}}return u},t.findHostInstance=vb,t.findHostInstanceWithNoPortals=function(u){return u=U(u),u=u!==null?G(u):null,u===null?null:u.stateNode},t.findHostInstanceWithWarning=function(u){return vb(u)},t.flushControlled=function(u){var f=Nt;Nt|=1;var v=zn.transition,E=qt;try{zn.transition=null,qt=1,u()}finally{qt=E,zn.transition=v,Nt=f,Nt===0&&(_u(),eo())}},t.flushPassiveEffects=Fl,t.flushSync=ab,t.focusWithin=function(u,f){if(!D)throw Error(o(363));for(u=c1(u),f=rb(u,f),f=Array.from(f),u=0;u<f.length;){var v=f[u++];if(!ye(v)){if(v.tag===5&&Le(v.stateNode))return!0;for(v=v.child;v!==null;)f.push(v),v=v.sibling}}return!1},t.getCurrentUpdatePriority=function(){return qt},t.getFindAllNodesFailureDescription=function(u,f){if(!D)throw Error(o(363));var v=0,E=[];u=[c1(u),0];for(var M=0;M<u.length;){var C=u[M++],V=u[M++],q=f[V];if((C.tag!==5||!ye(C))&&(u1(C,q)&&(E.push(h1(q)),V++,V>v&&(v=V)),V<f.length))for(C=C.child;C!==null;)u.push(C,V),C=C.sibling}if(v<f.length){for(u=[];v<f.length;v++)u.push(h1(f[v]));return`findAllNodes was able to match part of the selector:
  `+(E.join(" > ")+`

No matching component was found for:
  `)+u.join(" > ")}return null},t.getPublicRootInstance=function(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return Q(u.child.stateNode);default:return u.child.stateNode}},t.injectIntoDevTools=function(u){if(u={bundleType:u.bundleType,version:u.version,rendererPackageName:u.rendererPackageName,rendererConfig:u.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:OG,findFiberByHostInstance:u.findFiberByHostInstance||UG,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")u=!1;else{var f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(f.isDisabled||!f.supportsFiber)u=!0;else{try{Ym=f.inject(u),Qs=f}catch{}u=!!f.checkDCE}}return u},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(u,f,v,E){if(!D)throw Error(o(363));u=f1(u,f);var M=Oe(u,v,E).disconnect;return{disconnect:function(){M()}}},t.registerMutableSourceForHydration=function(u,f){var v=f._getVersion;v=v(f._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[f,v]:u.mutableSourceEagerHydrationData.push(f,v)},t.runWithPriority=function(u,f){var v=qt;try{return qt=u,f()}finally{qt=v}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(u,f,v,E){var M=f.current,C=or(),V=_a(M);return v=yb(v),f.context===null?f.context=v:f.pendingContext=v,f=Lo(C,V),f.payload={element:u},E=E===void 0?null:E,E!==null&&(f.callback=E),ga(M,f),u=as(M,V,C),u!==null&&tg(u,M,V),V},t};OU.exports=R$;var b$=OU.exports;const P$=dM(b$);var UU={exports:{}},kU={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(L,k){var z=L.length;L.push(k);e:for(;0<z;){var j=z-1>>>1,te=L[j];if(0<r(te,k))L[j]=k,L[z]=te,z=j;else break e}}function t(L){return L.length===0?null:L[0]}function i(L){if(L.length===0)return null;var k=L[0],z=L.pop();if(z!==k){L[0]=z;e:for(var j=0,te=L.length,Z=te>>>1;j<Z;){var ce=2*(j+1)-1,Se=L[ce],Te=ce+1,be=L[Te];if(0>r(Se,z))Te<te&&0>r(be,Se)?(L[j]=be,L[Te]=z,j=Te):(L[j]=Se,L[ce]=z,j=ce);else if(Te<te&&0>r(be,z))L[j]=be,L[Te]=z,j=Te;else break e}}return k}function r(L,k){var z=L.sortIndex-k.sortIndex;return z!==0?z:L.id-k.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,p=3,m=!1,y=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(L){for(var k=t(c);k!==null;){if(k.callback===null)i(c);else if(k.startTime<=L)i(c),k.sortIndex=k.expirationTime,e(l,k);else break;k=t(c)}}function w(L){if(x=!1,S(L),!y)if(t(l)!==null)y=!0,Q(R);else{var k=t(c);k!==null&&se(w,k.startTime-L)}}function R(L,k){y=!1,x&&(x=!1,g(B),B=-1),m=!0;var z=p;try{for(S(k),d=t(l);d!==null&&(!(d.expirationTime>k)||L&&!U());){var j=d.callback;if(typeof j=="function"){d.callback=null,p=d.priorityLevel;var te=j(d.expirationTime<=k);k=n.unstable_now(),typeof te=="function"?d.callback=te:d===t(l)&&i(l),S(k)}else i(l);d=t(l)}if(d!==null)var Z=!0;else{var ce=t(c);ce!==null&&se(w,ce.startTime-k),Z=!1}return Z}finally{d=null,p=z,m=!1}}var T=!1,P=null,B=-1,b=5,I=-1;function U(){return!(n.unstable_now()-I<b)}function K(){if(P!==null){var L=n.unstable_now();I=L;var k=!0;try{k=P(!0,L)}finally{k?re():(T=!1,P=null)}}else T=!1}var re;if(typeof A=="function")re=function(){A(K)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,$=G.port2;G.port1.onmessage=K,re=function(){$.postMessage(null)}}else re=function(){_(K,0)};function Q(L){P=L,T||(T=!0,re())}function se(L,k){B=_(function(){L(n.unstable_now())},k)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(L){L.callback=null},n.unstable_continueExecution=function(){y||m||(y=!0,Q(R))},n.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<L?Math.floor(1e3/L):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(L){switch(p){case 1:case 2:case 3:var k=3;break;default:k=p}var z=p;p=k;try{return L()}finally{p=z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(L,k){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var z=p;p=L;try{return k()}finally{p=z}},n.unstable_scheduleCallback=function(L,k,z){var j=n.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?j+z:j):z=j,L){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=z+te,L={id:h++,callback:k,priorityLevel:L,startTime:z,expirationTime:te,sortIndex:-1},z>j?(L.sortIndex=z,e(c,L),t(l)===null&&L===t(c)&&(x?(g(B),B=-1):x=!0,se(w,z-j))):(L.sortIndex=te,e(l,L),y||m||(y=!0,Q(R))),L},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(L){var k=p;return function(){var z=p;p=k;try{return L.apply(this,arguments)}finally{p=z}}}})(kU);UU.exports=kU;var dD=UU.exports;const I$=n=>typeof n=="object"&&typeof n.then=="function",gc=[];function VU(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function zU(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const s of gc)if(VU(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,remove:()=>{const s=gc.indexOf(r);s!==-1&&gc.splice(s,1)},promise:(I$(n)?n:n(...e)).then(s=>{r.response=s,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(s=>r.error=s)};if(gc.push(r),!t)throw r.promise}const D$=(n,e,t)=>zU(n,e,!1,t),L$=(n,e,t)=>void zU(n,e,!0,t),B$=n=>{if(n===void 0||n.length===0)gc.splice(0,gc.length);else{const e=gc.find(t=>VU(n,t.keys,t.equal));e&&e.remove()}},rC={},N$=n=>void Object.assign(rC,n);function F$(n,e){function t(h,{args:d=[],attach:p,...m},y){let x=`${h[0].toUpperCase()}${h.slice(1)}`,_;if(h==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=m.object;_=ju(g,{type:h,root:y,attach:p,primitive:!0})}else{const g=rC[x];if(!g)throw new Error(`R3F: ${x} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(d))throw new Error("R3F: The args prop must be an array!");_=ju(new g(...d),{type:h,root:y,attach:p,memoizedProps:{args:d}})}return _.__r3f.attach===void 0&&(_ instanceof Ct?_.__r3f.attach="geometry":_ instanceof ni&&(_.__r3f.attach="material")),x!=="inject"&&zA(_,m),_}function i(h,d){let p=!1;if(d){var m,y;(m=d.__r3f)!=null&&m.attach?VA(h,d,d.__r3f.attach):d.isObject3D&&h.isObject3D&&(h.add(d),p=!0),p||(y=h.__r3f)==null||y.objects.push(d),d.__r3f||ju(d,{}),d.__r3f.parent=h,dw(d),Xu(d)}}function r(h,d,p){let m=!1;if(d){var y,x;if((y=d.__r3f)!=null&&y.attach)VA(h,d,d.__r3f.attach);else if(d.isObject3D&&h.isObject3D){d.parent=h,d.dispatchEvent({type:"added"});const _=h.children.filter(A=>A!==d),g=_.indexOf(p);h.children=[..._.slice(0,g),d,..._.slice(g)],m=!0}m||(x=h.__r3f)==null||x.objects.push(d),d.__r3f||ju(d,{}),d.__r3f.parent=h,dw(d),Xu(d)}}function s(h,d,p=!1){h&&[...h].forEach(m=>o(d,m,p))}function o(h,d,p){if(d){var m,y,x;if(d.__r3f&&(d.__r3f.parent=null),(m=h.__r3f)!=null&&m.objects&&(h.__r3f.objects=h.__r3f.objects.filter(w=>w!==d)),(y=d.__r3f)!=null&&y.attach)vD(h,d,d.__r3f.attach);else if(d.isObject3D&&h.isObject3D){var _;h.remove(d),(_=d.__r3f)!=null&&_.root&&j$(Ly(d),d)}const A=(x=d.__r3f)==null?void 0:x.primitive,S=!A&&(p===void 0?d.dispose!==null:p);if(!A){var g;s((g=d.__r3f)==null?void 0:g.objects,d,S),s(d.children,d,S)}if(delete d.__r3f,S&&d.dispose&&d.type!=="Scene"){const w=()=>{try{d.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?dD.unstable_scheduleCallback(dD.unstable_IdlePriority,w):w()}Xu(h)}}function a(h,d,p,m){var y;const x=(y=h.__r3f)==null?void 0:y.parent;if(!x)return;const _=t(d,p,h.__r3f.root);if(h.children){for(const g of h.children)g.__r3f&&i(_,g);h.children=h.children.filter(g=>!g.__r3f)}h.__r3f.objects.forEach(g=>i(_,g)),h.__r3f.objects=[],h.__r3f.autoRemovedBeforeAppend||o(x,h),_.parent&&(_.__r3f.autoRemovedBeforeAppend=!0),i(x,_),_.raycast&&_.__r3f.eventCount&&Ly(_).getState().internal.interaction.push(_),[m,m.alternate].forEach(g=>{g!==null&&(g.stateNode=_,g.ref&&(typeof g.ref=="function"?g.ref(_):g.ref.current=_))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:P$({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(h,d)=>{if(!d)return;const p=h.getState().scene;p.__r3f&&(p.__r3f.root=h,i(p,d))},removeChildFromContainer:(h,d)=>{d&&o(h.getState().scene,d)},insertInContainerBefore:(h,d,p)=>{if(!d||!p)return;const m=h.getState().scene;m.__r3f&&r(m,d,p)},getRootHostContext:()=>null,getChildHostContext:h=>h,finalizeInitialChildren(h){var d;return!!((d=h==null?void 0:h.__r3f)!=null?d:{}).handlers},prepareUpdate(h,d,p,m){var y;if(((y=h==null?void 0:h.__r3f)!=null?y:{}).primitive&&m.object&&m.object!==h)return[!0];{const{args:_=[],children:g,...A}=m,{args:S=[],children:w,...R}=p;if(!Array.isArray(_))throw new Error("R3F: the args prop must be an array!");if(_.some((P,B)=>P!==S[B]))return[!0];const T=KU(h,A,R,!0);return T.changes.length?[!1,T]:null}},commitUpdate(h,[d,p],m,y,x,_){d?a(h,m,x,_):zA(h,p)},commitMount(h,d,p,m){var y;const x=(y=h.__r3f)!=null?y:{};h.raycast&&x.handlers&&x.eventCount&&Ly(h).getState().internal.interaction.push(h)},getPublicInstance:h=>h,prepareForCommit:()=>null,preparePortalMount:h=>ju(h.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(h){var d;const{attach:p,parent:m}=(d=h.__r3f)!=null?d:{};p&&m&&vD(m,h,p),h.isObject3D&&(h.visible=!1),Xu(h)},unhideInstance(h,d){var p;const{attach:m,parent:y}=(p=h.__r3f)!=null?p:{};m&&y&&VA(y,h,m),(h.isObject3D&&d.visible==null||d.visible)&&(h.visible=!0),Xu(h)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():dh.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&pn.fun(performance.now)?performance.now:pn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:pn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:pn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:zA}}var pD,mD;const kA=n=>"colorSpace"in n||"outputColorSpace"in n,GU=()=>{var n;return(n=rC.ColorManagement)!=null?n:null},HU=n=>n&&n.isOrthographicCamera,O$=n=>n&&n.hasOwnProperty("current"),Am=typeof window<"u"&&((pD=window.document)!=null&&pD.createElement||((mD=window.navigator)==null?void 0:mD.product)==="ReactNative")?W.useLayoutEffect:W.useEffect;function WU(n){const e=W.useRef(n);return Am(()=>void(e.current=n),[n]),e}function U$({set:n}){return Am(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class jU extends W.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}jU.getDerivedStateFromError=()=>({error:!0});const XU="__default",gD=new Map,k$=n=>n&&!!n.memoized&&!!n.changes;function JU(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const fd=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function Ly(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const pn={obj:n=>n===Object(n)&&!pn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(pn.str(n)||pn.num(n))return n===e;const s=pn.obj(n);if(s&&i==="reference")return n===e;const o=pn.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(a in r?e:n)if(!pn.equ(n[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:n)if(n[a]!==e[a])return!1;if(pn.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function V$(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function z$(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function ju(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function fw(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const yD=/-\d+$/;function VA(n,e,t){if(pn.str(t)){if(yD.test(t)){const s=t.replace(yD,""),{target:o,key:a}=fw(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=fw(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function vD(n,e,t){var i,r;if(pn.str(t)){const{target:s,key:o}=fw(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function KU(n,{children:e,key:t,ref:i,...r},{children:s,key:o,ref:a,...l}={},c=!1){var h;const d=(h=n==null?void 0:n.__r3f)!=null?h:{},p=Object.entries(r),m=[];if(c){const x=Object.keys(l);for(let _=0;_<x.length;_++)r.hasOwnProperty(x[_])||p.unshift([x[_],XU+"remove"])}p.forEach(([x,_])=>{var g;if((g=n.__r3f)!=null&&g.primitive&&x==="object"||pn.equ(_,l[x]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(x))return m.push([x,_,!0,[]]);let A=[];x.includes("-")&&(A=x.split("-")),m.push([x,_,!1,A]);for(const S in r){const w=r[S];S.startsWith(`${x}-`)&&m.push([S,w,!1,S.split("-")])}});const y={...r};return d.memoizedProps&&d.memoizedProps.args&&(y.args=d.memoizedProps.args),d.memoizedProps&&d.memoizedProps.attach&&(y.attach=d.memoizedProps.attach),{memoized:y,changes:m}}const G$=typeof process<"u"&&!1;function zA(n,e){var t,i,r;const s=(t=n.__r3f)!=null?t:{},o=s.root,a=(i=o==null||o.getState==null?void 0:o.getState())!=null?i:{},{memoized:l,changes:c}=k$(e)?e:KU(n,e),h=s.eventCount;n.__r3f&&(n.__r3f.memoizedProps=l);for(let p=0;p<c.length;p++){let[m,y,x,_]=c[p];if(kA(n)){const w="srgb",R="srgb-linear";m==="encoding"?(m="colorSpace",y=y===3001?w:R):m==="outputEncoding"&&(m="outputColorSpace",y=y===3001?w:R)}let g=n,A=g[m];if(_.length&&(A=_.reduce((S,w)=>S[w],n),!(A&&A.set))){const[S,...w]=_.reverse();g=w.reverse().reduce((R,T)=>R[T],n),m=S}if(y===XU+"remove")if(g.constructor){let S=gD.get(g.constructor);S||(S=new g.constructor,gD.set(g.constructor,S)),y=S[m]}else y=0;if(x)y?s.handlers[m]=y:delete s.handlers[m],s.eventCount=Object.keys(s.handlers).length;else if(A&&A.set&&(A.copy||A instanceof Cc)){if(Array.isArray(y))A.fromArray?A.fromArray(y):A.set(...y);else if(A.copy&&y&&y.constructor&&(G$?A.constructor.name===y.constructor.name:A.constructor===y.constructor))A.copy(y);else if(y!==void 0){const S=A instanceof ke;!S&&A.setScalar?A.setScalar(y):A instanceof Cc&&y instanceof Cc?A.mask=y.mask:A.set(y),!GU()&&!a.linear&&S&&A.convertSRGBToLinear()}}else if(g[m]=y,g[m]instanceof Sn&&g[m].format===fr&&g[m].type===vo){const S=g[m];kA(S)&&kA(a.gl)?S.colorSpace=a.gl.outputColorSpace:S.encoding=a.gl.outputEncoding}Xu(n)}if(s.parent&&n.raycast&&h!==s.eventCount){const p=Ly(n).getState().internal,m=p.interaction.indexOf(n);m>-1&&p.interaction.splice(m,1),s.eventCount&&p.interaction.push(n)}return!(c.length===1&&c[0][0]==="onUpdate")&&c.length&&(r=n.__r3f)!=null&&r.parent&&dw(n),n}function Xu(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function dw(n){n.onUpdate==null||n.onUpdate(n)}function H$(n,e){n.manual||(HU(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function K0(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function W$(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return dh.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return dh.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return dh.ContinuousEventPriority;default:return dh.DefaultEventPriority}}function $U(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function j$(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{$U(t.capturedMap,e,i,r)})}function X$(n){function e(l){const{internal:c}=n.getState(),h=l.offsetX-c.initialClick[0],d=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(h*h+d*d))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(h=>{var d;return(d=c.__r3f)==null?void 0:d.handlers["onPointer"+h]}))}function i(l,c){const h=n.getState(),d=new Set,p=[],m=c?c(h.internal.interaction):h.internal.interaction;for(let g=0;g<m.length;g++){const A=fd(m[g]);A&&(A.raycaster.camera=void 0)}h.previousRoot||h.events.compute==null||h.events.compute(l,h);function y(g){const A=fd(g);if(!A||!A.events.enabled||A.raycaster.camera===null)return[];if(A.raycaster.camera===void 0){var S;A.events.compute==null||A.events.compute(l,A,(S=A.previousRoot)==null?void 0:S.getState()),A.raycaster.camera===void 0&&(A.raycaster.camera=null)}return A.raycaster.camera?A.raycaster.intersectObject(g,!0):[]}let x=m.flatMap(y).sort((g,A)=>{const S=fd(g.object),w=fd(A.object);return!S||!w?g.distance-A.distance:w.events.priority-S.events.priority||g.distance-A.distance}).filter(g=>{const A=K0(g);return d.has(A)?!1:(d.add(A),!0)});h.events.filter&&(x=h.events.filter(x,h));for(const g of x){let A=g.object;for(;A;){var _;(_=A.__r3f)!=null&&_.eventCount&&p.push({...g,eventObject:A}),A=A.parent}}if("pointerId"in l&&h.internal.capturedMap.has(l.pointerId))for(let g of h.internal.capturedMap.get(l.pointerId).values())d.has(K0(g.intersection))||p.push(g.intersection);return p}function r(l,c,h,d){const p=n.getState();if(l.length){const m={stopped:!1};for(const y of l){const x=fd(y.object)||p,{raycaster:_,pointer:g,camera:A,internal:S}=x,w=new F(g.x,g.y,0).unproject(A),R=I=>{var U,K;return(U=(K=S.capturedMap.get(I))==null?void 0:K.has(y.eventObject))!=null?U:!1},T=I=>{const U={intersection:y,target:c.target};S.capturedMap.has(I)?S.capturedMap.get(I).set(y.eventObject,U):S.capturedMap.set(I,new Map([[y.eventObject,U]])),c.target.setPointerCapture(I)},P=I=>{const U=S.capturedMap.get(I);U&&$U(S.capturedMap,y.eventObject,U,I)};let B={};for(let I in c){let U=c[I];typeof U!="function"&&(B[I]=U)}let b={...y,...B,pointer:g,intersections:l,stopped:m.stopped,delta:h,unprojectedPoint:w,ray:_.ray,camera:A,stopPropagation(){const I="pointerId"in c&&S.capturedMap.get(c.pointerId);if((!I||I.has(y.eventObject))&&(b.stopped=m.stopped=!0,S.hovered.size&&Array.from(S.hovered.values()).find(U=>U.eventObject===y.eventObject))){const U=l.slice(0,l.indexOf(y));s([...U,y])}},target:{hasPointerCapture:R,setPointerCapture:T,releasePointerCapture:P},currentTarget:{hasPointerCapture:R,setPointerCapture:T,releasePointerCapture:P},nativeEvent:c};if(d(b),m.stopped===!0)break}}return l}function s(l){const{internal:c}=n.getState();for(const h of c.hovered.values())if(!l.length||!l.find(d=>d.object===h.object&&d.index===h.index&&d.instanceId===h.instanceId)){const p=h.eventObject.__r3f,m=p==null?void 0:p.handlers;if(c.hovered.delete(K0(h)),p!=null&&p.eventCount){const y={...h,intersections:l};m.onPointerOut==null||m.onPointerOut(y),m.onPointerLeave==null||m.onPointerLeave(y)}}}function o(l,c){for(let h=0;h<c.length;h++){const d=c[h].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:h}=n.getState();"pointerId"in c&&h.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{h.capturedMap.has(c.pointerId)&&(h.capturedMap.delete(c.pointerId),s([]))})}}return function(h){const{onPointerMissed:d,internal:p}=n.getState();p.lastEvent.current=h;const m=l==="onPointerMove",y=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",_=i(h,m?t:void 0),g=y?e(h):0;l==="onPointerDown"&&(p.initialClick=[h.offsetX,h.offsetY],p.initialHits=_.map(S=>S.eventObject)),y&&!_.length&&g<=2&&(o(h,p.interaction),d&&d(h)),m&&s(_);function A(S){const w=S.eventObject,R=w.__r3f,T=R==null?void 0:R.handlers;if(R!=null&&R.eventCount)if(m){if(T.onPointerOver||T.onPointerEnter||T.onPointerOut||T.onPointerLeave){const P=K0(S),B=p.hovered.get(P);B?B.stopped&&S.stopPropagation():(p.hovered.set(P,S),T.onPointerOver==null||T.onPointerOver(S),T.onPointerEnter==null||T.onPointerEnter(S))}T.onPointerMove==null||T.onPointerMove(S)}else{const P=T[l];P?(!y||p.initialHits.includes(w))&&(o(h,p.interaction.filter(B=>!p.initialHits.includes(B))),P(S)):y&&p.initialHits.includes(w)&&o(h,p.interaction.filter(B=>!p.initialHits.includes(B)))}}r(_,h,g,A)}}return{handlePointer:a}}const YU=n=>!!(n!=null&&n.render),qU=W.createContext(null),J$=(n,e)=>{const t=FU((a,l)=>{const c=new F,h=new F,d=new F;function p(g=l().camera,A=h,S=l().size){const{width:w,height:R,top:T,left:P}=S,B=w/R;A instanceof F?d.copy(A):d.set(...A);const b=g.getWorldPosition(c).distanceTo(d);if(HU(g))return{width:w/g.zoom,height:R/g.zoom,top:T,left:P,factor:1,distance:b,aspect:B};{const I=g.fov*Math.PI/180,U=2*Math.tan(I/2)*b,K=U*(w/R);return{width:K,height:U,top:T,left:P,factor:w/K,distance:b,aspect:B}}}let m;const y=g=>a(A=>({performance:{...A.performance,current:g}})),x=new me;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>n(l(),g),advance:(g,A)=>e(g,A,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new eC,pointer:x,mouse:x,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=l();m&&clearTimeout(m),g.performance.current!==g.performance.min&&y(g.performance.min),m=setTimeout(()=>y(l().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:g=>a(A=>({...A,events:{...A.events,...g}})),setSize:(g,A,S,w,R)=>{const T=l().camera,P={width:g,height:A,top:w||0,left:R||0,updateStyle:S};a(B=>({size:P,viewport:{...B.viewport,...p(T,h,P)}}))},setDpr:g=>a(A=>{const S=JU(g);return{viewport:{...A.viewport,dpr:S,initialDpr:A.viewport.initialDpr||S}}}),setFrameloop:(g="always")=>{const A=l().clock;A.stop(),A.elapsedTime=0,g!=="never"&&(A.start(),A.elapsedTime=0),a(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:W.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,A,S)=>{const w=l().internal;return w.priority=w.priority+(A>0?1:0),w.subscribers.push({ref:g,priority:A,store:S}),w.subscribers=w.subscribers.sort((R,T)=>R.priority-T.priority),()=>{const R=l().internal;R!=null&&R.subscribers&&(R.priority=R.priority-(A>0?1:0),R.subscribers=R.subscribers.filter(T=>T.ref!==g))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:h,set:d}=t.getState();if(l.width!==r.width||l.height!==r.height||c.dpr!==s){var p;r=l,s=c.dpr,H$(a,l),h.setPixelRatio(c.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&h.domElement instanceof HTMLCanvasElement;h.setSize(l.width,l.height,m)}a!==o&&(o=a,d(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let $0,K$=new Set,$$=new Set,Y$=new Set;function GA(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function dd(n,e){switch(n){case"before":return GA(K$,e);case"after":return GA($$,e);case"tail":return GA(Y$,e)}}let HA,WA;function jA(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),HA=e.internal.subscribers,$0=0;$0<HA.length;$0++)WA=HA[$0],WA.ref.current(WA.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function q$(n){let e=!1,t,i,r;function s(l){i=requestAnimationFrame(s),e=!0,t=0,dd("before",l);for(const h of n.values()){var c;r=h.store.getState(),r.internal.active&&(r.frameloop==="always"||r.internal.frames>0)&&!((c=r.gl.xr)!=null&&c.isPresenting)&&(t+=jA(l,r))}if(dd("after",l),t===0)return dd("tail",l),e=!1,cancelAnimationFrame(i)}function o(l,c=1){var h;if(!l)return n.forEach(d=>o(d.store.getState()),c);(h=l.gl.xr)!=null&&h.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+c),e||(e=!0,requestAnimationFrame(s)))}function a(l,c=!0,h,d){if(c&&dd("before",l),h)jA(l,h,d);else for(const p of n.values())jA(l,p.store.getState());c&&dd("after",l)}return{loop:s,invalidate:o,advance:a}}function QU(){const n=W.useContext(qU);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function ms(n=t=>t,e){return QU()(n,e)}function Sm(n,e=0){const t=QU(),i=t.getState().internal.subscribe,r=WU(n);return Am(()=>i(r,e,t),[e,i,t]),null}const _D=new WeakMap;function ZU(n,e){return function(t,...i){let r=_D.get(t);return r||(r=new t,_D.set(t,r)),n&&n(r),Promise.all(i.map(s=>new Promise((o,a)=>r.load(s,l=>{l.scene&&Object.assign(l,V$(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`)))))).finally(()=>r.dispose==null?void 0:r.dispose())}}function Em(n,e,t,i){const r=Array.isArray(e)?e:[e],s=D$(ZU(t,i),[n,...r],{equal:pn.equ});return Array.isArray(e)?s:s[0]}Em.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return L$(ZU(t),[n,...i])};Em.clear=function(n,e){const t=Array.isArray(e)?e:[e];return B$([n,...t])};const Zh=new Map,{invalidate:xD,advance:AD}=q$(Zh),{reconciler:xv,applyProps:Gu}=F$(Zh,W$),Hu={objects:"shallow",strict:!1},Q$=(n,e)=>{const t=typeof n=="function"?n(e):n;return YU(t)?t:new LT({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function Z$(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:i,height:r,top:s,left:o,updateStyle:a=t}=e;return{width:i,height:r,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:i,height:r,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:i,height:r,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function eY(n){const e=Zh.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||J$(xD,AD),o=t||xv.createContainer(s,dh.ConcurrentRoot,null,!1,null,"",r,null);e||Zh.set(n,{fiber:o,store:s});let a,l=!1,c;return{configure(h={}){let{gl:d,size:p,scene:m,events:y,onCreated:x,shadows:_=!1,linear:g=!1,flat:A=!1,legacy:S=!1,orthographic:w=!1,frameloop:R="always",dpr:T=[1,2],performance:P,raycaster:B,camera:b,onPointerMissed:I}=h,U=s.getState(),K=U.gl;U.gl||U.set({gl:K=Q$(d,n)});let re=U.raycaster;re||U.set({raycaster:re=new DU});const{params:G,...$}=B||{};if(pn.equ($,re,Hu)||Gu(re,{...$}),pn.equ(G,re.params,Hu)||Gu(re,{params:{...re.params,...G}}),!U.camera||U.camera===c&&!pn.equ(c,b,Hu)){c=b;const z=b instanceof um,j=z?b:w?new As(0,0,0,0,.1,1e3):new mn(75,0,.1,1e3);z||(j.position.z=5,b&&Gu(j,b),!U.camera&&!(b!=null&&b.rotation)&&j.lookAt(0,0,0)),U.set({camera:j}),re.camera=j}if(!U.scene){let z;m instanceof vv?z=m:(z=new vv,m&&Gu(z,m)),U.set({scene:ju(z)})}if(!U.xr){var Q;const z=(Z,ce)=>{const Se=s.getState();Se.frameloop!=="never"&&AD(Z,!0,Se,ce)},j=()=>{const Z=s.getState();Z.gl.xr.enabled=Z.gl.xr.isPresenting,Z.gl.xr.setAnimationLoop(Z.gl.xr.isPresenting?z:null),Z.gl.xr.isPresenting||xD(Z)},te={connect(){const Z=s.getState().gl;Z.xr.addEventListener("sessionstart",j),Z.xr.addEventListener("sessionend",j)},disconnect(){const Z=s.getState().gl;Z.xr.removeEventListener("sessionstart",j),Z.xr.removeEventListener("sessionend",j)}};typeof((Q=K.xr)==null?void 0:Q.addEventListener)=="function"&&te.connect(),U.set({xr:te})}if(K.shadowMap){const z=K.shadowMap.enabled,j=K.shadowMap.type;if(K.shadowMap.enabled=!!_,pn.boo(_))K.shadowMap.type=Wd;else if(pn.str(_)){var se;const te={basic:IF,percentage:u_,soft:Wd,variance:Ds};K.shadowMap.type=(se=te[_])!=null?se:Wd}else pn.obj(_)&&Object.assign(K.shadowMap,_);(z!==K.shadowMap.enabled||j!==K.shadowMap.type)&&(K.shadowMap.needsUpdate=!0)}const L=GU();L&&("enabled"in L?L.enabled=!S:"legacyMode"in L&&(L.legacyMode=S)),l||Gu(K,{outputEncoding:g?3e3:3001,toneMapping:A?yo:uT}),U.legacy!==S&&U.set(()=>({legacy:S})),U.linear!==g&&U.set(()=>({linear:g})),U.flat!==A&&U.set(()=>({flat:A})),d&&!pn.fun(d)&&!YU(d)&&!pn.equ(d,K,Hu)&&Gu(K,d),y&&!U.events.handlers&&U.set({events:y(s)});const k=Z$(n,p);return pn.equ(k,U.size,Hu)||U.setSize(k.width,k.height,k.updateStyle,k.top,k.left),T&&U.viewport.dpr!==JU(T)&&U.setDpr(T),U.frameloop!==R&&U.setFrameloop(R),U.onPointerMissed||U.set({onPointerMissed:I}),P&&!pn.equ(P,U.performance,Hu)&&U.set(z=>({performance:{...z.performance,...P}})),a=x,l=!0,this},render(h){return l||this.configure(),xv.updateContainer(W.createElement(tY,{store:s,children:h,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){ek(n)}}}function tY({store:n,children:e,onCreated:t,rootElement:i}){return Am(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),W.createElement(qU.Provider,{value:n},e)}function ek(n,e){const t=Zh.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),xv.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),z$(r),Zh.delete(n),e&&e(n)}catch{}},500)})}}xv.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:W.version});function Hs(){return Hs=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Hs.apply(this,arguments)}function pw(n,e,t){var i,r,s,o,a;e==null&&(e=100);function l(){var h=Date.now()-o;h<e&&h>=0?i=setTimeout(l,e-h):(i=null,t||(a=n.apply(s,r),s=r=null))}var c=function(){s=this,r=arguments,o=Date.now();var h=t&&!i;return i||(i=setTimeout(l,e)),h&&(a=n.apply(s,r),s=r=null),a};return c.clear=function(){i&&(clearTimeout(i),i=null)},c.flush=function(){i&&(a=n.apply(s,r),s=r=null,clearTimeout(i),i=null)},c}pw.debounce=pw;var nY=pw;const SD=dM(nY);function iY(n){let{debounce:e,scroll:t,polyfill:i,offsetSize:r}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=i||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=W.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=W.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),c=e?typeof e=="number"?e:e.scroll:null,h=e?typeof e=="number"?e:e.resize:null,d=W.useRef(!1);W.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[p,m,y]=W.useMemo(()=>{const A=()=>{if(!l.current.element)return;const{left:S,top:w,width:R,height:T,bottom:P,right:B,x:b,y:I}=l.current.element.getBoundingClientRect(),U={left:S,top:w,width:R,height:T,bottom:P,right:B,x:b,y:I};l.current.element instanceof HTMLElement&&r&&(U.height=l.current.element.offsetHeight,U.width=l.current.element.offsetWidth),Object.freeze(U),d.current&&!aY(l.current.lastBounds,U)&&a(l.current.lastBounds=U)};return[A,h?SD(A,h):A,c?SD(A,c):A]},[a,r,c,h]);function x(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(A=>A.removeEventListener("scroll",y,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function _(){l.current.element&&(l.current.resizeObserver=new s(y),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(A=>A.addEventListener("scroll",y,{capture:!0,passive:!0})))}const g=A=>{!A||A===l.current.element||(x(),l.current.element=A,l.current.scrollContainers=tk(A),_())};return sY(y,!!t),rY(m),W.useEffect(()=>{x(),_()},[t,y,m]),W.useEffect(()=>x,[]),[g,o,p]}function rY(n){W.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function sY(n,e){W.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function tk(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...tk(n.parentElement)]}const oY=["x","y","top","bottom","left","right","width","height"],aY=(n,e)=>oY.every(t=>n[t]===e[t]);var lY=Object.defineProperty,cY=Object.defineProperties,uY=Object.getOwnPropertyDescriptors,ED=Object.getOwnPropertySymbols,hY=Object.prototype.hasOwnProperty,fY=Object.prototype.propertyIsEnumerable,wD=(n,e,t)=>e in n?lY(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,MD=(n,e)=>{for(var t in e||(e={}))hY.call(e,t)&&wD(n,t,e[t]);if(ED)for(var t of ED(e))fY.call(e,t)&&wD(n,t,e[t]);return n},dY=(n,e)=>cY(n,uY(e));function nk(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const r=nk(i,e,t);if(r)return r;i=e?null:i.sibling}}function ik(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const sC=ik(W.createContext(null));class rk extends W.Component{render(){return W.createElement(sC.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:TD,ReactCurrentDispatcher:CD}=W.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function pY(){const n=W.useContext(sC);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=W.useId();return W.useMemo(()=>{for(const i of[TD==null?void 0:TD.current,n,n==null?void 0:n.alternate]){if(!i)continue;const r=nk(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[n,e])}function mY(){var n,e;const t=pY(),[i]=W.useState(()=>new Map);i.clear();let r=t;for(;r;){const s=(n=r.type)==null?void 0:n._context;s&&s!==sC&&!i.has(s)&&i.set(s,(e=CD==null?void 0:CD.current)==null?void 0:e.readContext(ik(s))),r=r.return}return i}function gY(){const n=mY();return W.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>W.createElement(e,null,W.createElement(t.Provider,dY(MD({},i),{value:n.get(t)}))),e=>W.createElement(rk,MD({},e))),[n])}const XA={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function yY(n){const{handlePointer:e}=X$(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(XA).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,c]=XA[o];t.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=XA[s];i.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const vY=W.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:o=yY,eventSource:a,eventPrefix:l,shadows:c,linear:h,flat:d,legacy:p,orthographic:m,frameloop:y,dpr:x,performance:_,raycaster:g,camera:A,scene:S,onPointerMissed:w,onCreated:R,...T},P){W.useMemo(()=>N$(BU),[]);const B=gY(),[b,I]=iY({scroll:!0,debounce:{scroll:50,resize:0},...i}),U=W.useRef(null),K=W.useRef(null);W.useImperativeHandle(P,()=>U.current);const re=WU(w),[G,$]=W.useState(!1),[Q,se]=W.useState(!1);if(G)throw G;if(Q)throw Q;const L=W.useRef(null);Am(()=>{const z=U.current;I.width>0&&I.height>0&&z&&(L.current||(L.current=eY(z)),L.current.configure({gl:s,events:o,shadows:c,linear:h,flat:d,legacy:p,orthographic:m,frameloop:y,dpr:x,performance:_,raycaster:g,camera:A,scene:S,size:I,onPointerMissed:(...j)=>re.current==null?void 0:re.current(...j),onCreated:j=>{j.events.connect==null||j.events.connect(a?O$(a)?a.current:a:K.current),l&&j.setEvents({compute:(te,Z)=>{const ce=te[l+"X"],Se=te[l+"Y"];Z.pointer.set(ce/Z.size.width*2-1,-(Se/Z.size.height)*2+1),Z.raycaster.setFromCamera(Z.pointer,Z.camera)}}),R==null||R(j)}}),L.current.render(W.createElement(B,null,W.createElement(jU,{set:se},W.createElement(W.Suspense,{fallback:W.createElement(U$,{set:$})},e)))))}),W.useEffect(()=>{const z=U.current;if(z)return()=>ek(z)},[]);const k=a?"none":"auto";return W.createElement("div",Hs({ref:K,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:k,...r}},T),W.createElement("div",{ref:b,style:{width:"100%",height:"100%"}},W.createElement("canvas",{ref:U,style:{display:"block"}},t)))}),oC=W.forwardRef(function(e,t){return W.createElement(rk,null,W.createElement(vY,Hs({},e,{ref:t})))}),wm=new F,aC=new F,_Y=new F;function xY(n,e,t){const i=wm.setFromMatrixPosition(n.matrixWorld);i.project(e);const r=t.width/2,s=t.height/2;return[i.x*r+r,-(i.y*s)+s]}function AY(n,e){const t=wm.setFromMatrixPosition(n.matrixWorld),i=aC.setFromMatrixPosition(e.matrixWorld),r=t.sub(i),s=e.getWorldDirection(_Y);return r.angleTo(s)>Math.PI/2}function SY(n,e,t,i){const r=wm.setFromMatrixPosition(n.matrixWorld),s=r.clone();s.project(e),t.setFromCamera(s,e);const o=t.intersectObjects(i,!0);if(o.length){const a=o[0].distance;return r.distanceTo(t.ray.origin)<a}return!0}function EY(n,e){if(e instanceof As)return e.zoom;if(e instanceof mn){const t=wm.setFromMatrixPosition(n.matrixWorld),i=aC.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,s=t.distanceTo(i);return 1/(2*Math.tan(r/2)*s)}else return 1}function wY(n,e,t){if(e instanceof mn||e instanceof As){const i=wm.setFromMatrixPosition(n.matrixWorld),r=aC.setFromMatrixPosition(e.matrixWorld),s=i.distanceTo(r),o=(t[1]-t[0])/(e.far-e.near),a=t[1]-o*e.far;return Math.round(o*s+a)}}const mw=n=>Math.abs(n)<1e-10?0:n;function sk(n,e,t=""){let i="matrix3d(";for(let r=0;r!==16;r++)i+=mw(e[r]*n.elements[r])+(r!==15?",":")");return t+i}const MY=(n=>e=>sk(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),TY=(n=>(e,t)=>sk(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]);function CY(n){return n&&typeof n=="object"&&"current"in n}const RY=W.forwardRef(({children:n,eps:e=.001,style:t,className:i,prepend:r,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:c=!1,transform:h=!1,occlude:d,onOcclude:p,castShadow:m,receiveShadow:y,material:x,geometry:_,zIndexRange:g=[16777271,0],calculatePosition:A=xY,as:S="div",wrapperClass:w,pointerEvents:R="auto",...T},P)=>{const{gl:B,camera:b,scene:I,size:U,raycaster:K,events:re,viewport:G}=ms(),[$]=W.useState(()=>document.createElement(S)),Q=W.useRef(),se=W.useRef(null),L=W.useRef(0),k=W.useRef([0,0]),z=W.useRef(null),j=W.useRef(null),te=(a==null?void 0:a.current)||re.connected||B.domElement.parentNode,Z=W.useRef(null),ce=W.useRef(!1),Se=W.useMemo(()=>d&&d!=="blending"||Array.isArray(d)&&d.length&&CY(d[0]),[d]);W.useLayoutEffect(()=>{const De=B.domElement;d&&d==="blending"?(De.style.zIndex=`${Math.floor(g[0]/2)}`,De.style.position="absolute",De.style.pointerEvents="none"):(De.style.zIndex=null,De.style.position=null,De.style.pointerEvents=null)},[d]),W.useLayoutEffect(()=>{if(se.current){const De=Q.current=vF($);if(I.updateMatrixWorld(),h)$.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const Re=A(se.current,b,U);$.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${Re[0]}px,${Re[1]}px,0);transform-origin:0 0;`}return te&&(r?te.prepend($):te.appendChild($)),()=>{te&&te.removeChild($),De.unmount()}}},[te,h]),W.useLayoutEffect(()=>{w&&($.className=w)},[w]);const Te=W.useMemo(()=>h?{position:"absolute",top:0,left:0,width:U.width,height:U.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-U.height/2,left:-U.width/2,width:U.width,height:U.height},...t},[t,s,o,U,h]),be=W.useMemo(()=>({position:"absolute",pointerEvents:R}),[R]);W.useLayoutEffect(()=>{if(ce.current=!1,h){var De;(De=Q.current)==null||De.render(W.createElement("div",{ref:z,style:Te},W.createElement("div",{ref:j,style:be},W.createElement("div",{ref:P,className:i,style:t,children:n}))))}else{var Re;(Re=Q.current)==null||Re.render(W.createElement("div",{ref:P,style:Te,className:i,children:n}))}});const tt=W.useRef(!0);Sm(De=>{if(se.current){b.updateMatrixWorld(),se.current.updateWorldMatrix(!0,!1);const Re=h?k.current:A(se.current,b,U);if(h||Math.abs(L.current-b.zoom)>e||Math.abs(k.current[0]-Re[0])>e||Math.abs(k.current[1]-Re[1])>e){const H=AY(se.current,b);let ve=!1;Se&&(Array.isArray(d)?ve=d.map(Je=>Je.current):d!=="blending"&&(ve=[I]));const de=tt.current;if(ve){const Je=SY(se.current,b,K,ve);tt.current=Je&&!H}else tt.current=!H;de!==tt.current&&(p?p(!tt.current):$.style.display=tt.current?"block":"none");const Me=Math.floor(g[0]/2),pe=d?Se?[g[0],Me]:[Me-1,0]:g;if($.style.zIndex=`${wY(se.current,b,pe)}`,h){const[Je,Fe]=[U.width/2,U.height/2],N=b.projectionMatrix.elements[5]*Fe,{isOrthographicCamera:D,top:ne,left:Ae,bottom:_e,right:ye}=b,Qe=MY(b.matrixWorldInverse),Le=D?`scale(${N})translate(${mw(-(ye+Ae)/2)}px,${mw((ne+_e)/2)}px)`:`translateZ(${N}px)`;let Oe=se.current.matrixWorld;c&&(Oe=b.matrixWorldInverse.clone().transpose().copyPosition(Oe).scale(se.current.scale),Oe.elements[3]=Oe.elements[7]=Oe.elements[11]=0,Oe.elements[15]=1),$.style.width=U.width+"px",$.style.height=U.height+"px",$.style.perspective=D?"":`${N}px`,z.current&&j.current&&(z.current.style.transform=`${Le}${Qe}translate(${Je}px,${Fe}px)`,j.current.style.transform=TY(Oe,1/((l||10)/400)))}else{const Je=l===void 0?1:EY(se.current,b)*l;$.style.transform=`translate3d(${Re[0]}px,${Re[1]}px,0) scale(${Je})`}k.current=Re,L.current=b.zoom}}if(!Se&&Z.current&&!ce.current)if(h){if(z.current){const Re=z.current.children[0];if(Re!=null&&Re.clientWidth&&Re!=null&&Re.clientHeight){const{isOrthographicCamera:H}=b;if(H||_)T.scale&&(Array.isArray(T.scale)?T.scale instanceof F?Z.current.scale.copy(T.scale.clone().divideScalar(1)):Z.current.scale.set(1/T.scale[0],1/T.scale[1],1/T.scale[2]):Z.current.scale.setScalar(1/T.scale));else{const ve=(l||10)/400,de=Re.clientWidth*ve,Me=Re.clientHeight*ve;Z.current.scale.set(de,Me,1)}ce.current=!0}}}else{const Re=$.children[0];if(Re!=null&&Re.clientWidth&&Re!=null&&Re.clientHeight){const H=1/G.factor,ve=Re.clientWidth*H,de=Re.clientHeight*H;Z.current.scale.set(ve,de,1),ce.current=!0}Z.current.lookAt(De.camera.position)}});const ot=W.useMemo(()=>({vertexShader:h?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[h]);return W.createElement("group",Hs({},T,{ref:se}),d&&!Se&&W.createElement("mesh",{castShadow:m,receiveShadow:y,ref:Z},_||W.createElement("planeGeometry",null),x||W.createElement("shaderMaterial",{side:vs,vertexShader:ot.vertexShader,fragmentShader:ot.fragmentShader})))});let pd=0;const bY=FU(n=>(fh.onStart=(e,t,i)=>{n({active:!0,item:e,loaded:t,total:i,progress:(t-pd)/(i-pd)*100})},fh.onLoad=()=>{n({active:!1})},fh.onError=e=>n(t=>({errors:[...t.errors,e]})),fh.onProgress=(e,t,i)=>{t===i&&(pd=i),n({active:!0,item:e,loaded:t,total:i,progress:(t-pd)/(i-pd)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}));function ok(n){return function(e){n.forEach(function(t){typeof t=="function"?t(e):t!=null&&(t.current=e)})}}function RD(n,e){if(e===xO)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===mv||e===_T){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,r=[];if(t)if(e===mv)for(let o=1;o<=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}const PY=parseInt(pf.replace(/\D+/g,""));var IY=Object.defineProperty,DY=(n,e,t)=>e in n?IY(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,vt=(n,e,t)=>(DY(n,typeof e!="symbol"?e+"":e,t),t);const Y0=new $c,bD=new Xo,LY=Math.cos(70*(Math.PI/180)),PD=(n,e)=>(n%e+e)%e;let BY=class extends Po{constructor(e,t){super(),vt(this,"object"),vt(this,"domElement"),vt(this,"enabled",!0),vt(this,"target",new F),vt(this,"minDistance",0),vt(this,"maxDistance",1/0),vt(this,"minZoom",0),vt(this,"maxZoom",1/0),vt(this,"minPolarAngle",0),vt(this,"maxPolarAngle",Math.PI),vt(this,"minAzimuthAngle",-1/0),vt(this,"maxAzimuthAngle",1/0),vt(this,"enableDamping",!1),vt(this,"dampingFactor",.05),vt(this,"enableZoom",!0),vt(this,"zoomSpeed",1),vt(this,"enableRotate",!0),vt(this,"rotateSpeed",1),vt(this,"enablePan",!0),vt(this,"panSpeed",1),vt(this,"screenSpacePanning",!0),vt(this,"keyPanSpeed",7),vt(this,"zoomToCursor",!1),vt(this,"autoRotate",!1),vt(this,"autoRotateSpeed",2),vt(this,"reverseOrbit",!1),vt(this,"reverseHorizontalOrbit",!1),vt(this,"reverseVerticalOrbit",!1),vt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),vt(this,"mouseButtons",{LEFT:Zl.ROTATE,MIDDLE:Zl.DOLLY,RIGHT:Zl.PAN}),vt(this,"touches",{ONE:ec.ROTATE,TWO:ec.DOLLY_PAN}),vt(this,"target0"),vt(this,"position0"),vt(this,"zoom0"),vt(this,"_domElementKeyEvents",null),vt(this,"getPolarAngle"),vt(this,"getAzimuthalAngle"),vt(this,"setPolarAngle"),vt(this,"setAzimuthalAngle"),vt(this,"getDistance"),vt(this,"listenToKeyEvents"),vt(this,"stopListenToKeyEvents"),vt(this,"saveState"),vt(this,"reset"),vt(this,"update"),vt(this,"connect"),vt(this,"dispose"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>h.phi,this.getAzimuthalAngle=()=>h.theta,this.setPolarAngle=J=>{let ge=PD(J,2*Math.PI),je=h.phi;je<0&&(je+=2*Math.PI),ge<0&&(ge+=2*Math.PI);let He=Math.abs(ge-je);2*Math.PI-He<He&&(ge<je?ge+=2*Math.PI:je+=2*Math.PI),d.phi=ge-je,i.update()},this.setAzimuthalAngle=J=>{let ge=PD(J,2*Math.PI),je=h.theta;je<0&&(je+=2*Math.PI),ge<0&&(ge+=2*Math.PI);let He=Math.abs(ge-je);2*Math.PI-He<He&&(ge<je?ge+=2*Math.PI:je+=2*Math.PI),d.theta=ge-je,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=J=>{J.addEventListener("keydown",at),this._domElementKeyEvents=J},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",at),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),l=a.NONE},this.update=(()=>{const J=new F,ge=new F(0,1,0),je=new Ai().setFromUnitVectors(e.up,ge),He=je.clone().invert(),we=new F,X=new Ai,Ie=2*Math.PI;return function(){const ct=i.object.position;je.setFromUnitVectors(e.up,ge),He.copy(je).invert(),J.copy(ct).sub(i.target),J.applyQuaternion(je),h.setFromVector3(J),i.autoRotate&&l===a.NONE&&G(K()),i.enableDamping?(h.theta+=d.theta*i.dampingFactor,h.phi+=d.phi*i.dampingFactor):(h.theta+=d.theta,h.phi+=d.phi);let Ze=i.minAzimuthAngle,Ft=i.maxAzimuthAngle;isFinite(Ze)&&isFinite(Ft)&&(Ze<-Math.PI?Ze+=Ie:Ze>Math.PI&&(Ze-=Ie),Ft<-Math.PI?Ft+=Ie:Ft>Math.PI&&(Ft-=Ie),Ze<=Ft?h.theta=Math.max(Ze,Math.min(Ft,h.theta)):h.theta=h.theta>(Ze+Ft)/2?Math.max(Ze,h.theta):Math.min(Ft,h.theta)),h.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,h.phi)),h.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(m,i.dampingFactor):i.target.add(m),i.zoomToCursor&&b||i.object.isOrthographicCamera?h.radius=te(h.radius):h.radius=te(h.radius*p),J.setFromSpherical(h),J.applyQuaternion(He),ct.copy(i.target).add(J),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(d.theta*=1-i.dampingFactor,d.phi*=1-i.dampingFactor,m.multiplyScalar(1-i.dampingFactor)):(d.set(0,0,0),m.set(0,0,0));let kt=!1;if(i.zoomToCursor&&b){let an=null;if(i.object instanceof mn&&i.object.isPerspectiveCamera){const vn=J.length();an=te(vn*p);const jt=vn-an;i.object.position.addScaledVector(P,jt),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const vn=new F(B.x,B.y,0);vn.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/p)),i.object.updateProjectionMatrix(),kt=!0;const jt=new F(B.x,B.y,0);jt.unproject(i.object),i.object.position.sub(jt).add(vn),i.object.updateMatrixWorld(),an=J.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;an!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(an).add(i.object.position):(Y0.origin.copy(i.object.position),Y0.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(Y0.direction))<LY?e.lookAt(i.target):(bD.setFromNormalAndCoplanarPoint(i.object.up,i.target),Y0.intersectPlane(bD,i.target))))}else i.object instanceof As&&i.object.isOrthographicCamera&&(kt=p!==1,kt&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/p)),i.object.updateProjectionMatrix()));return p=1,b=!1,kt||we.distanceToSquared(i.object.position)>c||8*(1-X.dot(i.object.quaternion))>c?(i.dispatchEvent(r),we.copy(i.object.position),X.copy(i.object.quaternion),kt=!1,!0):!1}})(),this.connect=J=>{J===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),i.domElement=J,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",Ot),i.domElement.addEventListener("pointerdown",ne),i.domElement.addEventListener("pointercancel",ye),i.domElement.addEventListener("wheel",Oe)},this.dispose=()=>{var J,ge,je,He,we,X;(J=i.domElement)==null||J.removeEventListener("contextmenu",Ot),(ge=i.domElement)==null||ge.removeEventListener("pointerdown",ne),(je=i.domElement)==null||je.removeEventListener("pointercancel",ye),(He=i.domElement)==null||He.removeEventListener("wheel",Oe),(we=i.domElement)==null||we.ownerDocument.removeEventListener("pointermove",Ae),(X=i.domElement)==null||X.ownerDocument.removeEventListener("pointerup",_e),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",at)};const i=this,r={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,h=new hw,d=new hw;let p=1;const m=new F,y=new me,x=new me,_=new me,g=new me,A=new me,S=new me,w=new me,R=new me,T=new me,P=new F,B=new me;let b=!1;const I=[],U={};function K(){return 2*Math.PI/60/60*i.autoRotateSpeed}function re(){return Math.pow(.95,i.zoomSpeed)}function G(J){i.reverseOrbit||i.reverseHorizontalOrbit?d.theta+=J:d.theta-=J}function $(J){i.reverseOrbit||i.reverseVerticalOrbit?d.phi+=J:d.phi-=J}const Q=(()=>{const J=new F;return function(je,He){J.setFromMatrixColumn(He,0),J.multiplyScalar(-je),m.add(J)}})(),se=(()=>{const J=new F;return function(je,He){i.screenSpacePanning===!0?J.setFromMatrixColumn(He,1):(J.setFromMatrixColumn(He,0),J.crossVectors(i.object.up,J)),J.multiplyScalar(je),m.add(J)}})(),L=(()=>{const J=new F;return function(je,He){const we=i.domElement;if(we&&i.object instanceof mn&&i.object.isPerspectiveCamera){const X=i.object.position;J.copy(X).sub(i.target);let Ie=J.length();Ie*=Math.tan(i.object.fov/2*Math.PI/180),Q(2*je*Ie/we.clientHeight,i.object.matrix),se(2*He*Ie/we.clientHeight,i.object.matrix)}else we&&i.object instanceof As&&i.object.isOrthographicCamera?(Q(je*(i.object.right-i.object.left)/i.object.zoom/we.clientWidth,i.object.matrix),se(He*(i.object.top-i.object.bottom)/i.object.zoom/we.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function k(J){i.object instanceof mn&&i.object.isPerspectiveCamera||i.object instanceof As&&i.object.isOrthographicCamera?p/=J:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function z(J){i.object instanceof mn&&i.object.isPerspectiveCamera||i.object instanceof As&&i.object.isOrthographicCamera?p*=J:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function j(J){if(!i.zoomToCursor||!i.domElement)return;b=!0;const ge=i.domElement.getBoundingClientRect(),je=J.clientX-ge.left,He=J.clientY-ge.top,we=ge.width,X=ge.height;B.x=je/we*2-1,B.y=-(He/X)*2+1,P.set(B.x,B.y,1).unproject(i.object).sub(i.object.position).normalize()}function te(J){return Math.max(i.minDistance,Math.min(i.maxDistance,J))}function Z(J){y.set(J.clientX,J.clientY)}function ce(J){j(J),w.set(J.clientX,J.clientY)}function Se(J){g.set(J.clientX,J.clientY)}function Te(J){x.set(J.clientX,J.clientY),_.subVectors(x,y).multiplyScalar(i.rotateSpeed);const ge=i.domElement;ge&&(G(2*Math.PI*_.x/ge.clientHeight),$(2*Math.PI*_.y/ge.clientHeight)),y.copy(x),i.update()}function be(J){R.set(J.clientX,J.clientY),T.subVectors(R,w),T.y>0?k(re()):T.y<0&&z(re()),w.copy(R),i.update()}function tt(J){A.set(J.clientX,J.clientY),S.subVectors(A,g).multiplyScalar(i.panSpeed),L(S.x,S.y),g.copy(A),i.update()}function ot(J){j(J),J.deltaY<0?z(re()):J.deltaY>0&&k(re()),i.update()}function De(J){let ge=!1;switch(J.code){case i.keys.UP:L(0,i.keyPanSpeed),ge=!0;break;case i.keys.BOTTOM:L(0,-i.keyPanSpeed),ge=!0;break;case i.keys.LEFT:L(i.keyPanSpeed,0),ge=!0;break;case i.keys.RIGHT:L(-i.keyPanSpeed,0),ge=!0;break}ge&&(J.preventDefault(),i.update())}function Re(){if(I.length==1)y.set(I[0].pageX,I[0].pageY);else{const J=.5*(I[0].pageX+I[1].pageX),ge=.5*(I[0].pageY+I[1].pageY);y.set(J,ge)}}function H(){if(I.length==1)g.set(I[0].pageX,I[0].pageY);else{const J=.5*(I[0].pageX+I[1].pageX),ge=.5*(I[0].pageY+I[1].pageY);g.set(J,ge)}}function ve(){const J=I[0].pageX-I[1].pageX,ge=I[0].pageY-I[1].pageY,je=Math.sqrt(J*J+ge*ge);w.set(0,je)}function de(){i.enableZoom&&ve(),i.enablePan&&H()}function Me(){i.enableZoom&&ve(),i.enableRotate&&Re()}function pe(J){if(I.length==1)x.set(J.pageX,J.pageY);else{const je=Ke(J),He=.5*(J.pageX+je.x),we=.5*(J.pageY+je.y);x.set(He,we)}_.subVectors(x,y).multiplyScalar(i.rotateSpeed);const ge=i.domElement;ge&&(G(2*Math.PI*_.x/ge.clientHeight),$(2*Math.PI*_.y/ge.clientHeight)),y.copy(x)}function Je(J){if(I.length==1)A.set(J.pageX,J.pageY);else{const ge=Ke(J),je=.5*(J.pageX+ge.x),He=.5*(J.pageY+ge.y);A.set(je,He)}S.subVectors(A,g).multiplyScalar(i.panSpeed),L(S.x,S.y),g.copy(A)}function Fe(J){const ge=Ke(J),je=J.pageX-ge.x,He=J.pageY-ge.y,we=Math.sqrt(je*je+He*He);R.set(0,we),T.set(0,Math.pow(R.y/w.y,i.zoomSpeed)),k(T.y),w.copy(R)}function N(J){i.enableZoom&&Fe(J),i.enablePan&&Je(J)}function D(J){i.enableZoom&&Fe(J),i.enableRotate&&pe(J)}function ne(J){var ge,je;i.enabled!==!1&&(I.length===0&&((ge=i.domElement)==null||ge.ownerDocument.addEventListener("pointermove",Ae),(je=i.domElement)==null||je.ownerDocument.addEventListener("pointerup",_e)),Rt(J),J.pointerType==="touch"?xt(J):Qe(J))}function Ae(J){i.enabled!==!1&&(J.pointerType==="touch"?Ee(J):Le(J))}function _e(J){var ge,je,He;gt(J),I.length===0&&((ge=i.domElement)==null||ge.releasePointerCapture(J.pointerId),(je=i.domElement)==null||je.ownerDocument.removeEventListener("pointermove",Ae),(He=i.domElement)==null||He.ownerDocument.removeEventListener("pointerup",_e)),i.dispatchEvent(o),l=a.NONE}function ye(J){gt(J)}function Qe(J){let ge;switch(J.button){case 0:ge=i.mouseButtons.LEFT;break;case 1:ge=i.mouseButtons.MIDDLE;break;case 2:ge=i.mouseButtons.RIGHT;break;default:ge=-1}switch(ge){case Zl.DOLLY:if(i.enableZoom===!1)return;ce(J),l=a.DOLLY;break;case Zl.ROTATE:if(J.ctrlKey||J.metaKey||J.shiftKey){if(i.enablePan===!1)return;Se(J),l=a.PAN}else{if(i.enableRotate===!1)return;Z(J),l=a.ROTATE}break;case Zl.PAN:if(J.ctrlKey||J.metaKey||J.shiftKey){if(i.enableRotate===!1)return;Z(J),l=a.ROTATE}else{if(i.enablePan===!1)return;Se(J),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function Le(J){if(i.enabled!==!1)switch(l){case a.ROTATE:if(i.enableRotate===!1)return;Te(J);break;case a.DOLLY:if(i.enableZoom===!1)return;be(J);break;case a.PAN:if(i.enablePan===!1)return;tt(J);break}}function Oe(J){i.enabled===!1||i.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(J.preventDefault(),i.dispatchEvent(s),ot(J),i.dispatchEvent(o))}function at(J){i.enabled===!1||i.enablePan===!1||De(J)}function xt(J){switch(st(J),I.length){case 1:switch(i.touches.ONE){case ec.ROTATE:if(i.enableRotate===!1)return;Re(),l=a.TOUCH_ROTATE;break;case ec.PAN:if(i.enablePan===!1)return;H(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(i.touches.TWO){case ec.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;de(),l=a.TOUCH_DOLLY_PAN;break;case ec.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Me(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function Ee(J){switch(st(J),l){case a.TOUCH_ROTATE:if(i.enableRotate===!1)return;pe(J),i.update();break;case a.TOUCH_PAN:if(i.enablePan===!1)return;Je(J),i.update();break;case a.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;N(J),i.update();break;case a.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;D(J),i.update();break;default:l=a.NONE}}function Ot(J){i.enabled!==!1&&J.preventDefault()}function Rt(J){I.push(J)}function gt(J){delete U[J.pointerId];for(let ge=0;ge<I.length;ge++)if(I[ge].pointerId==J.pointerId){I.splice(ge,1);return}}function st(J){let ge=U[J.pointerId];ge===void 0&&(ge=new me,U[J.pointerId]=ge),ge.set(J.pageX,J.pageY)}function Ke(J){const ge=J.pointerId===I[0].pointerId?I[1]:I[0];return U[ge.pointerId]}t!==void 0&&this.connect(t),this.update()}};class lC extends rr{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new kY(t)}),this.register(function(t){return new JY(t)}),this.register(function(t){return new KY(t)}),this.register(function(t){return new $Y(t)}),this.register(function(t){return new zY(t)}),this.register(function(t){return new GY(t)}),this.register(function(t){return new HY(t)}),this.register(function(t){return new WY(t)}),this.register(function(t){return new UY(t)}),this.register(function(t){return new jY(t)}),this.register(function(t){return new VY(t)}),this.register(function(t){return new XY(t)}),this.register(function(t){return new FY(t)}),this.register(function(t){return new YY(t)}),this.register(function(t){return new qY(t)})}load(e,t,i,r){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=xo.extractUrlBase(e),this.manager.itemStart(e);const a=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Xr(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(h){t(h),s.manager.itemEnd(e)},a)}catch(h){a(h)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(xo.decodeText(new Uint8Array(e.slice(0,4)))===ak){try{o[Vt.KHR_BINARY_GLTF]=new QY(e)}catch(h){r&&r(h);return}s=JSON.parse(o[Vt.KHR_BINARY_GLTF].content)}else s=JSON.parse(xo.decodeText(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new hq(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const h=this.pluginCallbacks[c](l);a[h.name]=h,o[h.name]=!0}if(s.extensionsUsed)for(let c=0;c<s.extensionsUsed.length;++c){const h=s.extensionsUsed[c],d=s.extensionsRequired||[];switch(h){case Vt.KHR_MATERIALS_UNLIT:o[h]=new OY;break;case Vt.KHR_DRACO_MESH_COMPRESSION:o[h]=new ZY(s,this.dracoLoader);break;case Vt.KHR_TEXTURE_TRANSFORM:o[h]=new eq;break;case Vt.KHR_MESH_QUANTIZATION:o[h]=new tq;break;default:d.indexOf(h)>=0&&a[h]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function NY(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Vt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class FY{constructor(e){this.parser=e,this.name=Vt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const h=new ke(16777215);l.color!==void 0&&h.fromArray(l.color);const d=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new QT(h),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new qT(h),c.distance=d;break;case"spot":c=new YT(h),c.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,Oa(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),t.cache.add(i,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}}class OY{constructor(){this.name=Vt.KHR_MATERIALS_UNLIT}getMaterialType(){return Gr}extendParams(e,t,i){const r=[];e.color=new ke(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,3001))}return Promise.all(r)}}class UY{constructor(e){this.parser=e,this.name=Vt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class kY{constructor(e){this.parser=e,this.name=Vt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Io}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new me(a,a)}return Promise.all(s)}}class VY{constructor(e){this.parser=e,this.name=Vt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Io}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class zY{constructor(e){this.parser=e,this.name=Vt.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Io}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new ke(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];return o.sheenColorFactor!==void 0&&t.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,3001)),o.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class GY{constructor(e){this.parser=e,this.name=Vt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Io}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class HY{constructor(e){this.parser=e,this.name=Vt.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Io}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new ke(a[0],a[1],a[2]),Promise.all(s)}}class WY{constructor(e){this.parser=e,this.name=Vt.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Io}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class jY{constructor(e){this.parser=e,this.name=Vt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Io}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new ke(a[0],a[1],a[2]),o.specularColorTexture!==void 0&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,3001)),Promise.all(s)}}class XY{constructor(e){this.parser=e,this.name=Vt.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Io}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class JY{constructor(e){this.parser=e,this.name=Vt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class KY{constructor(e){this.parser=e,this.name=Vt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class $Y{constructor(e){this.parser=e,this.name=Vt.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class YY{constructor(e){this.name=Vt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=r.byteOffset||0,c=r.byteLength||0,h=r.count,d=r.byteStride,p=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(h,d,p,r.mode,r.filter).then(function(m){return m.buffer}):o.ready.then(function(){const m=new ArrayBuffer(h*d);return o.decodeGltfBuffer(new Uint8Array(m),h,d,p,r.mode,r.filter),m})})}else return null}}class qY{constructor(e){this.name=Vt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=t.meshes[i.mesh];for(const c of r.primitives)if(c.mode!==ps.TRIANGLES&&c.mode!==ps.TRIANGLE_STRIP&&c.mode!==ps.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=i.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(h=>(l[c]=h,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const h=c.pop(),d=h.isGroup?h.children:[h],p=c[0].count,m=[];for(const y of d){const x=new ht,_=new F,g=new Ai,A=new F(1,1,1),S=new FT(y.geometry,y.material,p);for(let w=0;w<p;w++)l.TRANSLATION&&_.fromBufferAttribute(l.TRANSLATION,w),l.ROTATION&&g.fromBufferAttribute(l.ROTATION,w),l.SCALE&&A.fromBufferAttribute(l.SCALE,w),S.setMatrixAt(w,x.compose(_,g,A));for(const w in l)w!=="TRANSLATION"&&w!=="ROTATION"&&w!=="SCALE"&&y.geometry.setAttribute(w,l[w]);Ht.prototype.copy.call(S,y),this.parser.assignFinalMaterial(S),m.push(S)}return h.isGroup?(h.clear(),h.add(...m),h):m[0]}))}}const ak="glTF",md=12,ID={JSON:1313821514,BIN:5130562};class QY{constructor(e){this.name=Vt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,md);if(this.header={magic:xo.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==ak)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-md,r=new DataView(e,md);let s=0;for(;s<i;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,a===ID.JSON){const l=new Uint8Array(e,md+s,o);this.content=xo.decodeText(l)}else if(a===ID.BIN){const l=md+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class ZY{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Vt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const h in o){const d=gw[h]||h.toLowerCase();a[d]=o[h]}for(const h in e.attributes){const d=gw[h]||h.toLowerCase();if(o[h]!==void 0){const p=i.accessors[e.attributes[h]],m=bh[p.componentType];c[d]=m.name,l[d]=p.normalized===!0}}return t.getDependency("bufferView",s).then(function(h){return new Promise(function(d){r.decodeDracoFile(h,function(p){for(const m in p.attributes){const y=p.attributes[m],x=l[m];x!==void 0&&(y.normalized=x)}d(p)},a,c)})})}}class eq{constructor(){this.name=Vt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class tq{constructor(){this.name=Vt.KHR_MESH_QUANTIZATION}}class lk extends vf{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,h=r-t,d=(i-t)/h,p=d*d,m=p*d,y=e*c,x=y-c,_=-2*m+3*p,g=m-p,A=1-_,S=g-p+d;for(let w=0;w!==a;w++){const R=o[x+w+a],T=o[x+w+l]*h,P=o[y+w+a],B=o[y+w]*h;s[w]=A*R+S*T+_*P+g*B}return s}}const nq=new Ai;class iq extends lk{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return nq.fromArray(s).normalize().toArray(s),s}}const ps={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},bh={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},DD={9728:Fn,9729:Tn,9984:Tp,9985:f_,9986:Ch,9987:wo},LD={33071:Di,33648:Hh,10497:ul},JA={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},gw={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...PY>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Ia={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},rq={CUBICSPLINE:void 0,LINEAR:zc,STEP:jh},KA={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function sq(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new xm({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Eo})),n.DefaultMaterial}function Kl(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Oa(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function oq(n,e,t){let i=!1,r=!1,s=!1;for(let c=0,h=e.length;c<h;c++){const d=e[c];if(d.POSITION!==void 0&&(i=!0),d.NORMAL!==void 0&&(r=!0),d.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let c=0,h=e.length;c<h;c++){const d=e[c];if(i){const p=d.POSITION!==void 0?t.getDependency("accessor",d.POSITION):n.attributes.position;o.push(p)}if(r){const p=d.NORMAL!==void 0?t.getDependency("accessor",d.NORMAL):n.attributes.normal;a.push(p)}if(s){const p=d.COLOR_0!==void 0?t.getDependency("accessor",d.COLOR_0):n.attributes.color;l.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const h=c[0],d=c[1],p=c[2];return i&&(n.morphAttributes.position=h),r&&(n.morphAttributes.normal=d),s&&(n.morphAttributes.color=p),n.morphTargetsRelative=!0,n})}function aq(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function lq(n){let e;const t=n.extensions&&n.extensions[Vt.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+$A(t.attributes):e=n.indices+":"+$A(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+$A(n.targets[i]);return e}function $A(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function yw(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function cq(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const uq=new ht;class hq{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new NY,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||r&&s<98?this.textureLoader=new xU(this.options.manager):this.textureLoader=new RU(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Xr(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};Kl(s,a,r),Oa(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,h]of o.children.entries())s(h,a.children[c])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Vt.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(xo.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const r=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const o=JA[r.type],a=bh[r.componentType],l=r.normalized===!0,c=new a(r.count*o);return Promise.resolve(new Wt(c,o,l))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=JA[r.type],c=bh[r.componentType],h=c.BYTES_PER_ELEMENT,d=h*l,p=r.byteOffset||0,m=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,y=r.normalized===!0;let x,_;if(m&&m!==d){const g=Math.floor(p/m),A="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+g+":"+r.count;let S=t.cache.get(A);S||(x=new c(a,g*m,r.count*m/h),S=new pm(x,m/h),t.cache.add(A,S)),_=new hl(S,l,p%m/h,y)}else a===null?x=new c(r.count*l):x=new c(a,p,r.count*l),_=new Wt(x,l,y);if(r.sparse!==void 0){const g=JA.SCALAR,A=bh[r.sparse.indices.componentType],S=r.sparse.indices.byteOffset||0,w=r.sparse.values.byteOffset||0,R=new A(o[1],S,r.sparse.count*g),T=new c(o[2],w,r.sparse.count*l);a!==null&&(_=new Wt(_.array.slice(),_.itemSize,_.normalized));for(let P=0,B=R.length;P<B;P++){const b=R[P];if(_.setX(b,T[P*l]),l>=2&&_.setY(b,T[P*l+1]),l>=3&&_.setZ(b,T[P*l+2]),l>=4&&_.setW(b,T[P*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return _})}loadTexture(e){const t=this.json,i=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=i.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,i){const r=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,i).then(function(h){h.flipY=!1,h.name=o.name||a.name||"",h.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(h.name=a.uri);const p=(s.samplers||{})[o.sampler]||{};return h.magFilter=DD[p.magFilter]||Tn,h.minFilter=DD[p.minFilter]||wo,h.wrapS=LD[p.wrapS]||ul,h.wrapT=LD[p.wrapT]||ul,r.associations.set(h,{textures:e}),h}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(d=>d.clone());const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=i.getDependency("bufferView",o.bufferView).then(function(d){c=!0;const p=new Blob([d],{type:o.mimeType});return l=a.createObjectURL(p),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const h=Promise.resolve(l).then(function(d){return new Promise(function(p,m){let y=p;t.isImageBitmapLoader===!0&&(y=function(x){const _=new Sn(x);_.needsUpdate=!0,p(_)}),t.load(xo.resolveURL(d,s.path),y,void 0,m)})}).then(function(d){return c===!0&&a.revokeObjectURL(l),d.userData.mimeType=o.mimeType||cq(o.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),d});return this.sourceCache[e]=h,h}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(o=o.clone(),o.channel=i.texCoord),s.extensions[Vt.KHR_TEXTURE_TRANSFORM]){const a=i.extensions!==void 0?i.extensions[Vt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Vt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return r!==void 0&&("colorSpace"in o?o.colorSpace=r===3001?"srgb":"srgb-linear":o.encoding=r),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new gm,ni.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new ir,ni.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return xm}loadMaterial(e){const t=this,i=this.json,r=this.extensions,s=i.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[Vt.KHR_MATERIALS_UNLIT]){const d=r[Vt.KHR_MATERIALS_UNLIT];o=d.getMaterialType(),c.push(d.extendParams(a,s,t))}else{const d=s.pbrMetallicRoughness||{};if(a.color=new ke(1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){const p=d.baseColorFactor;a.color.fromArray(p),a.opacity=p[3]}d.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",d.baseColorTexture,3001)),a.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,a.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=vs);const h=s.alphaMode||KA.OPAQUE;if(h===KA.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,h===KA.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==Gr&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new me(1,1),s.normalTexture.scale!==void 0)){const d=s.normalTexture.scale;a.normalScale.set(d,d)}return s.occlusionTexture!==void 0&&o!==Gr&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==Gr&&(a.emissive=new ke().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==Gr&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,3001)),Promise.all(c).then(function(){const d=new o(a);return s.name&&(d.name=s.name),Oa(d,s),t.associations.set(d,{materials:e}),s.extensions&&Kl(r,d,s),d})}createUniqueName(e){const t=Gt.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[Vt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return BD(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],h=lq(c),d=r[h];if(d)o.push(d.promise);else{let p;c.extensions&&c.extensions[Vt.KHR_DRACO_MESH_COMPRESSION]?p=s(c):p=BD(new Ct,c,t),r[h]={primitive:c,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){const t=this,i=this.json,r=this.extensions,s=i.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const h=o[l].material===void 0?sq(this.cache):this.getDependency("material",o[l].material);a.push(h)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),h=l[l.length-1],d=[];for(let m=0,y=h.length;m<y;m++){const x=h[m],_=o[m];let g;const A=c[m];if(_.mode===ps.TRIANGLES||_.mode===ps.TRIANGLE_STRIP||_.mode===ps.TRIANGLE_FAN||_.mode===void 0)g=s.isSkinnedMesh===!0?new NT(x,A):new ti(x,A),g.isSkinnedMesh===!0&&g.normalizeSkinWeights(),_.mode===ps.TRIANGLE_STRIP?g.geometry=RD(g.geometry,_T):_.mode===ps.TRIANGLE_FAN&&(g.geometry=RD(g.geometry,mv));else if(_.mode===ps.LINES)g=new js(x,A);else if(_.mode===ps.LINE_STRIP)g=new ua(x,A);else if(_.mode===ps.LINE_LOOP)g=new OT(x,A);else if(_.mode===ps.POINTS)g=new UT(x,A);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+_.mode);Object.keys(g.geometry.morphAttributes).length>0&&aq(g,s),g.name=t.createUniqueName(s.name||"mesh_"+e),Oa(g,s),_.extensions&&Kl(r,g,_),t.assignFinalMaterial(g),d.push(g)}for(let m=0,y=d.length;m<y;m++)t.associations.set(d[m],{meshes:e,primitives:m});if(d.length===1)return s.extensions&&Kl(r,d[0],s),d[0];const p=new qo;s.extensions&&Kl(r,p,s),t.associations.set(p,{meshes:e});for(let m=0,y=d.length;m<y;m++)p.add(d[m]);return p})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new mn(IO.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new As(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),Oa(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r<s;r++)i.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const s=r.pop(),o=r,a=[],l=[];for(let c=0,h=o.length;c<h;c++){const d=o[c];if(d){a.push(d);const p=new ht;s!==null&&p.fromArray(s.array,c*16),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new mm(a,l)})}loadAnimation(e){const i=this.json.animations[e],r=i.name?i.name:"animation_"+e,s=[],o=[],a=[],l=[],c=[];for(let h=0,d=i.channels.length;h<d;h++){const p=i.channels[h],m=i.samplers[p.sampler],y=p.target,x=y.node,_=i.parameters!==void 0?i.parameters[m.input]:m.input,g=i.parameters!==void 0?i.parameters[m.output]:m.output;y.node!==void 0&&(s.push(this.getDependency("node",x)),o.push(this.getDependency("accessor",_)),a.push(this.getDependency("accessor",g)),l.push(m),c.push(y))}return Promise.all([Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c)]).then(function(h){const d=h[0],p=h[1],m=h[2],y=h[3],x=h[4],_=[];for(let g=0,A=d.length;g<A;g++){const S=d[g],w=p[g],R=m[g],T=y[g],P=x[g];if(S===void 0)continue;S.updateMatrix();let B;switch(Ia[P.path]){case Ia.weights:B=Yh;break;case Ia.rotation:B=fl;break;case Ia.position:case Ia.scale:default:B=qh;break}const b=S.name?S.name:S.uuid,I=T.interpolation!==void 0?rq[T.interpolation]:zc,U=[];Ia[P.path]===Ia.weights?S.traverse(function(re){re.morphTargetInfluences&&U.push(re.name?re.name:re.uuid)}):U.push(b);let K=R.array;if(R.normalized){const re=yw(K.constructor),G=new Float32Array(K.length);for(let $=0,Q=K.length;$<Q;$++)G[$]=K[$]*re;K=G}for(let re=0,G=U.length;re<G;re++){const $=new B(U[re]+"."+Ia[P.path],w.array,K,I);T.interpolation==="CUBICSPLINE"&&($.createInterpolant=function(se){const L=this instanceof fl?iq:lk;return new L(this.times,this.values,this.getValueSize()/3,se)},$.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),_.push($)}}return new Qh(r,void 0,_)})}createNodeMesh(e){const t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const t=this.json,i=this,r=t.nodes[e],s=i._loadNodeShallow(e),o=[],a=r.children||[];for(let c=0,h=a.length;c<h;c++)o.push(i.getDependency("node",a[c]));const l=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const h=c[0],d=c[1],p=c[2];p!==null&&h.traverse(function(m){m.isSkinnedMesh&&m.bind(p,uq)});for(let m=0,y=d.length;m<y;m++)h.add(d[m]);return h})}_loadNodeShallow(e){const t=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?r.createUniqueName(s.name):"",a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let h;if(s.isBone===!0?h=new x_:c.length>1?h=new qo:c.length===1?h=c[0]:h=new Ht,h!==c[0])for(let d=0,p=c.length;d<p;d++)h.add(c[d]);if(s.name&&(h.userData.name=s.name,h.name=o),Oa(h,s),s.extensions&&Kl(i,h,s),s.matrix!==void 0){const d=new ht;d.fromArray(s.matrix),h.applyMatrix4(d)}else s.translation!==void 0&&h.position.fromArray(s.translation),s.rotation!==void 0&&h.quaternion.fromArray(s.rotation),s.scale!==void 0&&h.scale.fromArray(s.scale);return r.associations.has(h)||r.associations.set(h,{}),r.associations.get(h).nodes=e,h}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,s=new qo;i.name&&(s.name=r.createUniqueName(i.name)),Oa(s,i),i.extensions&&Kl(t,s,i);const o=i.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(r.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let h=0,d=l.length;h<d;h++)s.add(l[h]);const c=h=>{const d=new Map;for(const[p,m]of r.associations)(p instanceof ni||p instanceof Sn)&&d.set(p,m);return h.traverse(p=>{const m=r.associations.get(p);m!=null&&d.set(p,m)}),d};return r.associations=c(s),s})}}function fq(n,e,t){const i=e.attributes,r=new Qi;if(i.POSITION!==void 0){const a=t.json.accessors[i.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(r.set(new F(l[0],l[1],l[2]),new F(c[0],c[1],c[2])),a.normalized){const h=yw(bh[a.componentType]);r.min.multiplyScalar(h),r.max.multiplyScalar(h)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new F,l=new F;for(let c=0,h=s.length;c<h;c++){const d=s[c];if(d.POSITION!==void 0){const p=t.json.accessors[d.POSITION],m=p.min,y=p.max;if(m!==void 0&&y!==void 0){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(y[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(y[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(y[2]))),p.normalized){const x=yw(bh[p.componentType]);l.multiplyScalar(x)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;const o=new Bi;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}function BD(n,e,t){const i=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in i){const a=gw[o]||o.toLowerCase();a in n.attributes||r.push(s(i[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(o)}return Oa(n,e),fq(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?oq(n,e.targets,t):n})}const YA=new WeakMap;class dq extends rr{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,r){const s=new Xr(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(r)},i,r)}decodeDracoFile(e,t,i,r){const s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const c=t.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=c.name)}const i=JSON.stringify(t);if(YA.has(e)){const l=YA.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(r=l,new Promise((c,h)=>{r._callbacks[s]={resolve:c,reject:h},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),YA.set(e,{key:i,promise:a}),a}_createGeometry(e){const t=new Ct;e.index&&t.setIndex(new Wt(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],s=r.name,o=r.array,a=r.itemSize;t.setAttribute(s,new Wt(o,a))}return t}_loadLibrary(e,t){const i=new Xr(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((r,s)=>{i.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=pq.toString(),o=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const o=s.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function pq(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(h){n.onModuleLoaded=function(d){h({draco:d})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(h=>{const d=h.draco,p=new d.Decoder,m=new d.DecoderBuffer;m.Init(new Int8Array(l),l.byteLength);try{const y=t(d,p,m,c),x=y.attributes.map(_=>_.array.buffer);y.index&&x.push(y.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:y},x)}catch(y){console.error(y),self.postMessage({type:"error",id:a.id,error:y.message})}finally{d.destroy(m),d.destroy(p)}});break}};function t(o,a,l,c){const h=c.attributeIDs,d=c.attributeTypes;let p,m;const y=a.GetEncodedGeometryType(l);if(y===o.TRIANGULAR_MESH)p=new o.Mesh,m=a.DecodeBufferToMesh(l,p);else if(y===o.POINT_CLOUD)p=new o.PointCloud,m=a.DecodeBufferToPointCloud(l,p);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!m.ok()||p.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+m.error_msg());const x={index:null,attributes:[]};for(const _ in h){const g=self[d[_]];let A,S;if(c.useUniqueIDs)S=h[_],A=a.GetAttributeByUniqueId(p,S);else{if(S=a.GetAttributeId(p,o[h[_]]),S===-1)continue;A=a.GetAttribute(p,S)}x.attributes.push(r(o,a,p,_,g,A))}return y===o.TRIANGULAR_MESH&&(x.index=i(o,a,p)),o.destroy(p),x}function i(o,a,l){const h=l.num_faces()*3,d=h*4,p=o._malloc(d);a.GetTrianglesUInt32Array(l,d,p);const m=new Uint32Array(o.HEAPF32.buffer,p,h).slice();return o._free(p),{array:m,itemSize:1}}function r(o,a,l,c,h,d){const p=d.num_components(),y=l.num_points()*p,x=y*h.BYTES_PER_ELEMENT,_=s(o,h),g=o._malloc(x);a.GetAttributeDataArrayForAllPoints(l,d,_,x,g);const A=new h(o.HEAPF32.buffer,g,y).slice();return o._free(g),{name:c,array:A,itemSize:p}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let q0;const qA=()=>{if(q0)return q0;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=n;WebAssembly.validate(t)&&(r=e);let s;const o=WebAssembly.instantiate(a(r),{}).then(d=>{s=d.instance,s.exports.__wasm_call_ctors()});function a(d){const p=new Uint8Array(d.length);for(let y=0;y<d.length;++y){const x=d.charCodeAt(y);p[y]=x>96?x-71:x>64?x-65:x>47?x+4:x>46?63:62}let m=0;for(let y=0;y<d.length;++y)p[m++]=p[y]<60?i[p[y]]:(p[y]-60)*64+p[++y];return p.buffer.slice(0,m)}function l(d,p,m,y,x,_){const g=s.exports.sbrk,A=m+3&-4,S=g(A*y),w=g(x.length),R=new Uint8Array(s.exports.memory.buffer);R.set(x,w);const T=d(S,m,y,w,x.length);if(T===0&&_&&_(S,A,y),p.set(R.subarray(S,S+m*y)),g(S-g(0)),T!==0)throw new Error(`Malformed buffer data: ${T}`)}const c={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},h={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return q0={ready:o,supported:!0,decodeVertexBuffer(d,p,m,y,x){l(s.exports.meshopt_decodeVertexBuffer,d,p,m,y,s.exports[c[x]])},decodeIndexBuffer(d,p,m,y){l(s.exports.meshopt_decodeIndexBuffer,d,p,m,y)},decodeIndexSequence(d,p,m,y){l(s.exports.meshopt_decodeIndexSequence,d,p,m,y)},decodeGltfBuffer(d,p,m,y,x,_){l(s.exports[h[x]],d,p,m,y,s.exports[c[_]])}},q0},mq=()=>parseInt(pf.replace(/\D+/g,"")),ck=mq();let Q0=null,uk="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function hk(n,e,t){return i=>{t&&t(i),n&&(Q0||(Q0=new dq),Q0.setDecoderPath(typeof n=="string"?n:uk),i.setDRACOLoader(Q0)),e&&i.setMeshoptDecoder(typeof qA=="function"?qA():qA)}}function Mm(n,e=!0,t=!0,i){return Em(lC,n,hk(e,t,i))}Mm.preload=(n,e=!0,t=!0,i)=>Em.preload(lC,n,hk(e,t,i));Mm.clear=n=>Em.clear(lC,n);Mm.setDecoderPath=n=>{uk=n};const fk=W.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:r=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...c},h)=>{const d=ms(T=>T.invalidate),p=ms(T=>T.camera),m=ms(T=>T.gl),y=ms(T=>T.events),x=ms(T=>T.setEvents),_=ms(T=>T.set),g=ms(T=>T.get),A=ms(T=>T.performance),S=e||p,w=i||y.connected||m.domElement,R=W.useMemo(()=>new BY(S),[S]);return Sm(()=>{R.enabled&&R.update()},-1),W.useEffect(()=>(s&&R.connect(s===!0?w:s),R.connect(w),()=>void R.dispose()),[s,w,t,R,d]),W.useEffect(()=>{const T=b=>{d(),t&&A.regress(),o&&o(b)},P=b=>{a&&a(b)},B=b=>{l&&l(b)};return R.addEventListener("change",T),R.addEventListener("start",P),R.addEventListener("end",B),()=>{R.removeEventListener("start",P),R.removeEventListener("end",B),R.removeEventListener("change",T)}},[o,a,l,R,d,x]),W.useEffect(()=>{if(n){const T=g().controls;return _({controls:R}),()=>_({controls:T})}},[n,R]),W.createElement("primitive",Hs({ref:h,object:R,enableDamping:r},c))});var dk={exports:{}},gq="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",yq=gq,vq=yq;function pk(){}function mk(){}mk.resetWarningCache=pk;var _q=function(){function n(i,r,s,o,a,l){if(l!==vq){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:mk,resetWarningCache:pk};return t.PropTypes=t,t};dk.exports=_q();var gk=dk.exports;const QA=ck>=154?"opaque_fragment":"output_fragment";class xq extends gm{constructor(e){super(e),this.onBeforeCompile=(t,i)=>{const{isWebGL2:r}=i.capabilities;t.fragmentShader=t.fragmentShader.replace(`#include <${QA}>`,`
        ${r?`#include <${QA}>`:`#extension GL_OES_standard_derivatives : enable
#include <${QA}>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <${ck>=154?"colorspace_fragment":"encodings_fragment"}>
      `)}}}const Aq=W.forwardRef((n,e)=>{const[t]=W.useState(()=>new xq(null));return W.createElement("primitive",Hs({},n,{object:t,ref:e,attach:"material"}))});let $l,gd;const Sq=W.createContext(null),ND=new ht,FD=new F,Eq=W.forwardRef(({children:n,range:e,limit:t=1e3,...i},r)=>{const s=W.useRef(null),[o,a]=W.useState([]),[[l,c,h]]=W.useState(()=>[new Float32Array(t*3),Float32Array.from({length:t*3},()=>1),Float32Array.from({length:t},()=>1)]);W.useEffect(()=>{s.current.geometry.attributes.position.needsUpdate=!0}),Sm(()=>{for(s.current.updateMatrix(),s.current.updateMatrixWorld(),ND.copy(s.current.matrixWorld).invert(),s.current.geometry.drawRange.count=Math.min(t,e!==void 0?e:t,o.length),$l=0;$l<o.length;$l++)gd=o[$l].current,gd.getWorldPosition(FD).applyMatrix4(ND),FD.toArray(l,$l*3),s.current.geometry.attributes.position.needsUpdate=!0,gd.matrixWorldNeedsUpdate=!0,gd.color.toArray(c,$l*3),s.current.geometry.attributes.color.needsUpdate=!0,h.set([gd.size],$l),s.current.geometry.attributes.size.needsUpdate=!0});const d=W.useMemo(()=>({getParent:()=>s,subscribe:p=>(a(m=>[...m,p]),()=>a(m=>m.filter(y=>y.current!==p.current)))}),[]);return W.createElement("points",Hs({userData:{instances:o},matrixAutoUpdate:!1,ref:ok([r,s]),raycast:()=>null},i),W.createElement("bufferGeometry",null,W.createElement("bufferAttribute",{attach:"attributes-position",count:l.length/3,array:l,itemSize:3,usage:Mc}),W.createElement("bufferAttribute",{attach:"attributes-color",count:c.length/3,array:c,itemSize:3,usage:Mc}),W.createElement("bufferAttribute",{attach:"attributes-size",count:h.length,array:h,itemSize:1,usage:Mc})),W.createElement(Sq.Provider,{value:d},n))}),wq=W.forwardRef(({children:n,positions:e,colors:t,sizes:i,stride:r=3,...s},o)=>{const a=W.useRef(null);return Sm(()=>{const l=a.current.geometry.attributes;l.position.needsUpdate=!0,t&&(l.color.needsUpdate=!0),i&&(l.size.needsUpdate=!0)}),W.createElement("points",Hs({ref:ok([o,a])},s),W.createElement("bufferGeometry",null,W.createElement("bufferAttribute",{attach:"attributes-position",count:e.length/r,array:e,itemSize:r,usage:Mc}),t&&W.createElement("bufferAttribute",{attach:"attributes-color",count:t.length/r,array:t,itemSize:3,usage:Mc}),i&&W.createElement("bufferAttribute",{attach:"attributes-size",count:i.length/r,array:i,itemSize:1,usage:Mc})),n)}),Mq=W.forwardRef((n,e)=>n.positions instanceof Float32Array?W.createElement(wq,Hs({},n,{ref:e})):W.createElement(Eq,Hs({},n,{ref:e})));function cC({all:n,scene:e,camera:t}){const i=ms(({gl:o})=>o),r=ms(({camera:o})=>o),s=ms(({scene:o})=>o);return W.useLayoutEffect(()=>{const o=[];n&&(e||s).traverse(c=>{c.visible===!1&&(o.push(c),c.visible=!0)}),i.compile(e||s,t||r);const a=new RT(128);new CT(.01,1e5,a).update(i,e||s),a.dispose(),o.forEach(c=>c.visible=!1)},[]),null}const uC=()=>{const{progress:n}=bY();return Y.jsxs(RY,{center:!0,children:[Y.jsx("span",{className:"canvas-loader"}),Y.jsxs("p",{style:{fontSize:14,color:"#f1f1f1",fontWeight:800,marginTop:40},children:[n.toFixed(2),"%"]})]})},Tq=()=>{const n=Mm("public/planet/scene.gltf");return Y.jsx("primitive",{object:n.scene,scale:2,"position-y":0,"rotation-y":0})},Cq=()=>Y.jsxs(oC,{shadows:!0,frameloop:"demand",gl:{preserveDrawingBuffer:!0},camera:{fov:45,near:.1,far:200,position:[-4,3,6]},children:[Y.jsxs(W.Suspense,{fallback:Y.jsx(uC,{}),children:[Y.jsx(fk,{autoRotate:!0,enableZoom:!1,maxPolarAngle:Math.PI/2,minPolarAngle:Math.PI/2}),Y.jsx(Tq,{})]}),Y.jsx(cC,{all:!0})]}),Rq=({isMobile:n})=>{const e=Mm("public/desktop_pc/scene.gltf");return Y.jsxs("mesh",{children:[Y.jsx("hemisphereLight",{intensity:2.5,groundColor:"black"}),Y.jsx("pointLight",{intensity:1}),Y.jsx("spotLight",{position:[-20,50,10],angle:.12,penumbra:1,intensity:1,castShadow:!0,"shadow-mapSize":1024}),Y.jsx("primitive",{object:e.scene,scale:n?.7:.75,position:n?[-1,-3.1,-2.2]:[0,-3.1,-1.5],rotation:[.005,0,-.1]})]})},bq=()=>{const[n,e]=W.useState(!1);return W.useEffect(()=>{const t=window.matchMedia("(max-width: 639px)");e(t.matches);const i=r=>{e(r.matches)};return t.addEventListener("change",i),()=>{t.removeEventListener("change",i)}},[]),Y.jsxs(oC,{frameloop:"demand",shadows:!0,dpr:[1,2],camera:{position:[20,3,5],fov:25},gl:{preserveDrawingBuffer:!0},children:[Y.jsxs(W.Suspense,{fallback:Y.jsx(uC,{}),children:[Y.jsx(fk,{enableZoom:!1,maxPolarAngle:Math.PI/2,minPolarAngle:Math.PI/2}),Y.jsx(Rq,{isMobile:n})]}),Y.jsx(cC,{all:!0})]})};var yk={exports:{}},qr={},hC={};function vk(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function OD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Pq(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?OD(Object(t),!0).forEach(function(i){vk(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):OD(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}hC._defineProperty=vk;hC._objectSpread2=Pq;var _k={};function Iq(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}_k._classCallCheck=Iq;var Qr={},hn={},Ks={},fC={};function vw(n,e){return vw=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},vw(n,e)}function Dq(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}fC._isNativeReflectConstruct=Dq;fC._setPrototypeOf=vw;const dC=r3(BU);var Ml={},Lq=dC;function xk(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var i=e[0],r=e[1],s=e[2],o=e[3];return i*o-r*s}function pC(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],h=e[7],d=e[8];return i*a*d+r*l*c+s*o*h-s*a*c-r*o*d-i*l*h}function Ak(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14]}function Sk(n,e,t){for(var i=n.clone().transpose(),r=[],s=i.elements.length,o=Math.sqrt(s),a=0;a<s;a++){var l=i.elements[a],c=Math.floor(a/o),h=a%o;c!==e-1&&h!==t-1&&r.push(l)}return pC.apply(void 0,r)}function Ek(n,e){for(var t=[],i=n.toArray(),r=e.toArray(),s=0;s<i.length;s++)t[s]=i[s]+r[s];return new Lq.Matrix3().fromArray(t)}var Bq=Object.freeze({__proto__:null,determinant2:xk,determinant3:pC,determinant4:Ak,getMinor:Sk,matrixSum3:Ek});Ml.determinant2=xk;Ml.determinant3=pC;Ml.determinant4=Ak;Ml.getMinor=Sk;Ml.matrix=Bq;Ml.matrixSum3=Ek;var UD=fC,Tm=dC,ph=Ml;function Nq(n){if(Array.isArray(n))return n}function Fq(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,s=!1,o,a;try{for(t=t.call(n);!(r=(o=t.next()).done)&&(i.push(o.value),!(e&&i.length===e));r=!0);}catch(l){s=!0,a=l}finally{try{!r&&t.return!=null&&t.return()}finally{if(s)throw a}}return i}}function _w(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function wk(n,e){if(n){if(typeof n=="string")return _w(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _w(n,e)}}function Oq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qi(n,e){return Nq(n)||Fq(n,e)||wk(n,e)||Oq()}function Uq(n){if(Array.isArray(n))return _w(n)}function kq(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Vq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mk(n){return Uq(n)||kq(n)||wk(n)||Vq()}function By(n,e,t){return UD._isNativeReflectConstruct()?By=Reflect.construct:By=function(r,s,o){var a=[null];a.push.apply(a,s);var l=Function.bind.apply(r,a),c=new l;return o&&UD._setPrototypeOf(c,o.prototype),c},By.apply(null,arguments)}function Tk(n,e){var t=qi(e[0],2),i=t[0],r=t[1],s=qi(e[1],2),o=s[0],a=s[1],l=qi(e[2],2),c=l[0],h=l[1],d=qi(n,2),p=d[0],m=d[1],y=new Tm.Matrix4;return y.set(i,r,i*i+r*r,1,o,a,o*o+a*a,1,c,h,c*c+h*h,1,p,m,p*p+m*m,1),y.determinant()<=0}function O_(n){var e=qi(n[0],2),t=e[0],i=e[1],r=qi(n[1],2),s=r[0],o=r[1],a=qi(n[2],2),l=a[0],c=a[1];return ph.determinant3(t,i,1,s,o,1,l,c,1)}function Cm(n){return O_(n)===0}function mC(n){return O_(n)<0}function Ck(n){var e=qi(n[0],2),t=e[0],i=e[1],r=qi(n[1],2),s=r[0],o=r[1],a=qi(n[2],2),l=a[0],c=a[1];if(Cm(n))return null;var h=new Tm.Matrix4;h.set(1,1,1,1,t*t+i*i,t,i,1,s*s+o*o,s,o,1,l*l+c*c,l,c,1);var d=ph.getMinor(h,1,1),p=ph.getMinor(h,1,3),m=ph.getMinor(h,1,2),y=ph.getMinor(h,1,4),x=.5*(m/d),_=.5*(p/d),g=x*x+_*_+y/d;return{x:Math.abs(x)===0?0:x,y:Math.abs(_)===0?0:-_,r:Math.sqrt(g)}}function Rk(n,e){var t=Array.isArray(e[0])?e[0]:e[0].toArray(),i=qi(t,2),r=i[0],s=i[1],o=Array.isArray(e[1])?e[1]:e[1].toArray(),a=qi(o,2),l=a[0],c=a[1],h=Array.isArray(e[2])?e[2]:e[2].toArray(),d=qi(h,2),p=d[0],m=d[1],y=qi(n,2),x=y[0],_=y[1];if(Cm(e))throw new Error("Collinear points don't form a triangle");var g=r-x,A=s-_,S=l-x,w=c-_,R=p-x,T=m-_,P=ph.determinant3(g,A,g*g+A*A,S,w,S*S+w*w,R,T,R*R+T*T);return P===0?!0:mC(e)?P<0:P>0}var zq=new Tm.Vector2,Gq=new Tm.Vector2;function bk(n){var e=n.map(function(c){return Array.isArray(c)?By(Tm.Vector2,Mk(c)):c}),t=qi(e,3),i=t[0],r=t[1],s=t[2];if(Cm(n))return!1;var o=zq.subVectors(r,i),a=Gq.subVectors(s,i),l=a.cross(o);return l>0}var Hq=Object.freeze({__proto__:null,isPointInTriangle:Tk,triangleDeterminant:O_,arePointsCollinear:Cm,isTriangleClockwise:mC,getCircumcircle:Ck,isPointInCircumcircle:Rk,doThreePointsMakeARight:bk});Ks._slicedToArray=qi;Ks._toConsumableArray=Mk;Ks.arePointsCollinear=Cm;Ks.doThreePointsMakeARight=bk;Ks.getCircumcircle=Ck;Ks.isPointInCircumcircle=Rk;Ks.isPointInTriangle=Tk;Ks.isTriangleClockwise=mC;Ks.triangle=Hq;Ks.triangleDeterminant=O_;var ho=Ks,mh=dC,kD=Ml;function gC(n,e,t){return Math.max(e,Math.min(t,n))}function yC(n,e){return gC(n-Math.floor(n/e)*e,0,e)}function Pk(n,e){var t=yC(e-n,Math.PI*2);return t>Math.PI&&(t-=Math.PI*2),t}function Ik(n){return n/180*Math.PI}function Dk(n){return n*180/Math.PI}function Lk(n,e){for(var t=e.radius,i=t===void 0?1:t,r=n.length/3,s=2/r,o=Math.PI*(3-2.2360679775),a=0;a<n.length;a+=3){var l=a*s-1+s/2,c=Math.sqrt(1-Math.pow(l,2)),h=a%r*o,d=Math.cos(h)*c,p=Math.sin(h)*c;n[a]=d*i,n[a+1]=l*i,n[a+2]=p*i}}function Bk(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Number.EPSILON;return Math.abs(n.x-e.x)<t&&Math.abs(n.y-e.y)<t&&Math.abs(n.z-e.z)<t}function vC(n,e){return n.x===e.x?typeof n.z<"u"&&n.y===e.y?n.z-e.z:n.y-e.y:n.x-e.x}function Nk(n){for(var e=n.sort(vC),t=[e[0],e[1]],i=2;i<e.length;i++)for(t.push(e[i]);t.length>2&&ho.doThreePointsMakeARight(ho._toConsumableArray(t.slice(-3)));)t.splice(t.length-2,1);for(var r=[e[e.length-1],e[e.length-2]],s=e.length-3;s>=0;s--)for(r.push(e[s]);r.length>2&&ho.doThreePointsMakeARight(ho._toConsumableArray(r.slice(-3)));)r.splice(r.length-2,1);r.splice(0,1),r.splice(r.length-1,1);var o=[].concat(t,r);return o}function Fk(n,e,t){var i=ho._slicedToArray(e,2),r=i[0],s=i[1],o=ho._slicedToArray(t,2),a=o[0],l=o[1];return a+(n-r)*(l-a)/(s-r)}function Ok(n){return n*n*n*(n*(n*6-15)+10)}function Uk(n,e,t){return n*(1-t)+e*t}function _C(n,e,t){return(t-n)/(e-n)}function kk(n,e,t){var i=Math.sqrt(n*n+e*e+t*t);return[n/i,e/i,t/i]}function Vk(n,e,t){var i=n*n,r=e*e,s=t*t,o=n*Math.sqrt(1-(r+s)/2+r*s/3),a=e*Math.sqrt(1-(s+i)/2+s*i/3),l=t*Math.sqrt(1-(i+r)/2+i*r/3);return[o,a,l]}function xC(n,e){var t=new mh.Vector3().crossVectors(n,e),i=n.dot(e),r=new mh.Matrix3().identity(),s=new mh.Matrix3().set(0,-t.z,t.y,t.z,0,-t.x,-t.y,t.x,0),o=new mh.Matrix3().multiplyMatrices(s,s).multiplyScalar(1/(1+i)),a=kD.matrixSum3(kD.matrixSum3(r,s),o);return a}function zk(n,e,t){var i=Math.asin(e),r=Math.atan2(n,-t);return[i,r]}function Gk(n,e){var t=Math.sin(n),i=Math.cos(n),r=Math.sin(e)*i,s=-Math.cos(e)*i;return[r,t,s]}function Hk(n,e){var t=ho._slicedToArray(e,2),i=t[0],r=t[1],s=xC(n.normal,new mh.Vector3(0,1,0)),o=_C(i.clone().applyMatrix3(s).y,r.clone().applyMatrix3(s).y,0);return new mh.Vector3().lerpVectors(i,r,o)}function Wk(n,e){var t=e.normal.dot(n);return t}function jk(n,e){var t=ho._slicedToArray(n,3),i=t[0],r=t[1],s=t[2],o=ho._slicedToArray(e,2),a=o[0],l=o[1];return s*a*l+r*a+i}function Xk(n,e){var t=ho._slicedToArray(e,2),i=t[0],r=t[1],s=i*r,o=n/s,a=n-s*o,l=a/i,c=a%i;return[c,l,o]}function Jk(n,e){return n[0]+e[0]*n[1]}function Kk(n,e){var t=n%e,i=Math.floor(n/e);return[t,i]}var Wq=Object.freeze({__proto__:null,clamp:gC,repeat:yC,deltaAngle:Pk,degToRad:Ik,radToDeg:Dk,fibonacciOnSphere:Lk,vectorEquals:Bk,lexicographic:vC,convexHull:Nk,remap:Fk,fade:Ok,lerp:Uk,inverseLerp:_C,normalize:kk,pointOnCubeToPointOnSphere:Vk,rotateVectorOnVector:xC,pointToCoordinate:zk,coordinateToPoint:Gk,planeSegmentIntersection:Hk,pointToPlaneDistance:Wk,getIndexFrom3D:jk,get3DFromIndex:Xk,getIndexFrom2D:Jk,get2DFromIndex:Kk});hn.clamp=gC;hn.convexHull=Nk;hn.coordinateToPoint=Gk;hn.degToRad=Ik;hn.deltaAngle=Pk;hn.fade=Ok;hn.fibonacciOnSphere=Lk;hn.get2DFromIndex=Kk;hn.get3DFromIndex=Xk;hn.getIndexFrom2D=Jk;hn.getIndexFrom3D=jk;hn.inverseLerp=_C;hn.lerp=Uk;hn.lexicographic=vC;hn.misc=Wq;hn.normalize=kk;hn.planeSegmentIntersection=Hk;hn.pointOnCubeToPointOnSphere=Vk;hn.pointToCoordinate=zk;hn.pointToPlaneDistance=Wk;hn.radToDeg=Dk;hn.remap=Fk;hn.repeat=yC;hn.rotateVectorOnVector=xC;hn.vectorEquals=Bk;var Jt=hC,AC=_k,cr=hn;function VD(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function jq(n,e,t){return e&&VD(n.prototype,e),t&&VD(n,t),n}var hs=function n(e,t,i){var r=this;AC._classCallCheck(this,n),Jt._defineProperty(this,"dot2",function(s,o){return r.x*s+r.y*o}),Jt._defineProperty(this,"dot3",function(s,o,a){return r.x*s+r.y*o+r.z*a}),this.x=e,this.y=t,this.z=i},Xq=[new hs(1,1,0),new hs(-1,1,0),new hs(1,-1,0),new hs(-1,-1,0),new hs(1,0,1),new hs(-1,0,1),new hs(1,0,-1),new hs(-1,0,-1),new hs(0,1,1),new hs(0,-1,1),new hs(0,1,-1),new hs(0,-1,-1)],zD=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],Xt=new Array(512),Wn=new Array(512),$k=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var i;t&1?i=zD[t]^e&255:i=zD[t]^e>>8&255,Xt[t]=Xt[t+256]=i,Wn[t]=Wn[t+256]=Xq[i%12]}};$k(0);var Jq=.5*(Math.sqrt(3)-1),yd=(3-Math.sqrt(3))/6,Kq=1/3,oo=1/6,$q=function(e,t){var i,r,s,o=(e+t)*Jq,a=Math.floor(e+o),l=Math.floor(t+o),c=(a+l)*yd,h=e-a+c,d=t-l+c,p,m;h>d?(p=1,m=0):(p=0,m=1);var y=h-p+yd,x=d-m+yd,_=h-1+2*yd,g=d-1+2*yd;a&=255,l&=255;var A=Wn[a+Xt[l]],S=Wn[a+p+Xt[l+m]],w=Wn[a+1+Xt[l+1]],R=.5-h*h-d*d;R<0?i=0:(R*=R,i=R*R*A.dot2(h,d));var T=.5-y*y-x*x;T<0?r=0:(T*=T,r=T*T*S.dot2(y,x));var P=.5-_*_-g*g;return P<0?s=0:(P*=P,s=P*P*w.dot2(_,g)),70*(i+r+s)},Yq=function(e,t,i){var r,s,o,a,l=(e+t+i)*Kq,c=Math.floor(e+l),h=Math.floor(t+l),d=Math.floor(i+l),p=(c+h+d)*oo,m=e-c+p,y=t-h+p,x=i-d+p,_,g,A,S,w,R;m>=y?y>=x?(_=1,g=0,A=0,S=1,w=1,R=0):m>=x?(_=1,g=0,A=0,S=1,w=0,R=1):(_=0,g=0,A=1,S=1,w=0,R=1):y<x?(_=0,g=0,A=1,S=0,w=1,R=1):m<x?(_=0,g=1,A=0,S=0,w=1,R=1):(_=0,g=1,A=0,S=1,w=1,R=0);var T=m-_+oo,P=y-g+oo,B=x-A+oo,b=m-S+2*oo,I=y-w+2*oo,U=x-R+2*oo,K=m-1+3*oo,re=y-1+3*oo,G=x-1+3*oo;c&=255,h&=255,d&=255;var $=Wn[c+Xt[h+Xt[d]]],Q=Wn[c+_+Xt[h+g+Xt[d+A]]],se=Wn[c+S+Xt[h+w+Xt[d+R]]],L=Wn[c+1+Xt[h+1+Xt[d+1]]],k=.6-m*m-y*y-x*x;k<0?r=0:(k*=k,r=k*k*$.dot3(m,y,x));var z=.6-T*T-P*P-B*B;z<0?s=0:(z*=z,s=z*z*Q.dot3(T,P,B));var j=.6-b*b-I*I-U*U;j<0?o=0:(j*=j,o=j*j*se.dot3(b,I,U));var te=.6-K*K-re*re-G*G;return te<0?a=0:(te*=te,a=te*te*L.dot3(K,re,G)),32*(r+s+o+a)},qq=function(e,t){var i=Math.floor(e),r=Math.floor(t);e=e-i,t=t-r,i=i&255,r=r&255;var s=Wn[i+Xt[r]].dot2(e,t),o=Wn[i+Xt[r+1]].dot2(e,t-1),a=Wn[i+1+Xt[r]].dot2(e-1,t),l=Wn[i+1+Xt[r+1]].dot2(e-1,t-1),c=cr.fade(e);return cr.lerp(cr.lerp(s,a,c),cr.lerp(o,l,c),cr.fade(t))},Qq=function(e,t,i){var r=Math.floor(e),s=Math.floor(t),o=Math.floor(i);e=e-r,t=t-s,i=i-o,r=r&255,s=s&255,o=o&255;var a=Wn[r+Xt[s+Xt[o]]].dot3(e,t,i),l=Wn[r+Xt[s+Xt[o+1]]].dot3(e,t,i-1),c=Wn[r+Xt[s+1+Xt[o]]].dot3(e,t-1,i),h=Wn[r+Xt[s+1+Xt[o+1]]].dot3(e,t-1,i-1),d=Wn[r+1+Xt[s+Xt[o]]].dot3(e-1,t,i),p=Wn[r+1+Xt[s+Xt[o+1]]].dot3(e-1,t,i-1),m=Wn[r+1+Xt[s+1+Xt[o]]].dot3(e-1,t-1,i),y=Wn[r+1+Xt[s+1+Xt[o+1]]].dot3(e-1,t-1,i-1),x=cr.fade(e),_=cr.fade(t),g=cr.fade(i);return cr.lerp(cr.lerp(cr.lerp(a,d,x),cr.lerp(l,p,x),g),cr.lerp(cr.lerp(c,m,x),cr.lerp(h,y,x),g),_)},Yk=Object.freeze({__proto__:null,seed:$k,simplex2:$q,simplex3:Yq,perlin2:qq,perlin3:Qq}),SC=Math.PI*2,qk=function(){function n(e){AC._classCallCheck(this,n),Jt._defineProperty(this,"nextBurstTime",0),Jt._defineProperty(this,"nextFlashEndTime",0),Jt._defineProperty(this,"flashesDone",0),Jt._defineProperty(this,"isFlashing",!1),Jt._defineProperty(this,"currentCount",0),Jt._defineProperty(this,"flashIntensity",0),Jt._defineProperty(this,"isDecaying",!1),Jt._defineProperty(this,"autoBurst",!0),Jt._defineProperty(this,"decaySpeed",40),Jt._defineProperty(this,"minInterval",5e3),Jt._defineProperty(this,"maxInterval",1e4),Jt._defineProperty(this,"minDuration",50),Jt._defineProperty(this,"maxDuration",300),Jt._defineProperty(this,"count",5),Object.assign(this,e)}return jq(n,[{key:"scheduleNextBurst",value:function(t){var i=Math.random()*(this.maxInterval-this.minInterval)+this.minInterval;this.nextBurstTime=t+i/1e3,this.flashesDone=0,this.isFlashing=!1}},{key:"burst",value:function(){this.nextBurstTime=0,this.flashesDone=0,this.isFlashing=!1}},{key:"update",value:function(t,i){if(t>this.nextBurstTime&&this.currentCount===0&&(this.currentCount=Math.floor(Math.random()*this.count)+1),this.flashesDone<this.currentCount&&t>this.nextBurstTime)if(this.isFlashing)this.isFlashing&&t>this.nextFlashEndTime&&(this.isFlashing=!1,this.isDecaying=!0,this.flashesDone++,this.flashesDone>=this.currentCount&&(this.currentCount=0,this.autoBurst&&this.scheduleNextBurst(t)));else{this.isFlashing=!0,this.flashIntensity=1;var r=Math.random()*(this.maxDuration-this.minDuration)+this.minDuration;this.nextFlashEndTime=t+r/1e3}return this.isDecaying&&(this.flashIntensity-=i*this.decaySpeed,this.flashIntensity=Math.max(0,Math.min(1,this.flashIntensity)),this.flashIntensity<=0&&(this.isDecaying=!1,this.flashIntensity=0)),this.flashIntensity}}]),n}();function Zq(n){if(typeof n=="number")n=Math.abs(n);else if(typeof n=="string"){var e=n;n=0;for(var t=0;t<e.length;t++)n=(n+(t+1)*(e.charCodeAt(t)%96))%2147483647}return n===0&&(n=311),n}function GD(n){var e=Zq(n);return function(){var t=e*48271%2147483647;return e=t,t/2147483647}}var EC=function n(e){var t=this;AC._classCallCheck(this,n),Jt._defineProperty(this,"seed",0),Jt._defineProperty(this,"init",function(i){t.seed=i,t.value=GD(i)}),Jt._defineProperty(this,"value",GD(this.seed)),this.init(e)},eu=new EC(Math.random()),Qk={radius:1,center:[0,0,0]};function Zk(n,e){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:eu,i=Jt._objectSpread2(Jt._objectSpread2({},Qk),e),r=i.radius,s=i.center,o=0;o<n.length;o+=3){var a=t.value(),l=t.value(),c=Math.acos(2*l-1),h=SC*a;n[o]=Math.sin(c)*Math.cos(h)*r+s[0],n[o+1]=Math.sin(c)*Math.sin(h)*r+s[1],n[o+2]=Math.cos(c)*r+s[2]}return n}function e4(n,e){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:eu,i=Jt._objectSpread2(Jt._objectSpread2({},Qk),e),r=i.radius,s=i.center,o=0;o<n.length;o+=3){var a=Math.pow(t.value(),.3333333333333333),l=t.value()*2-1,c=t.value()*2-1,h=t.value()*2-1,d=Math.sqrt(l*l+c*c+h*h);l=a*l/d,c=a*c/d,h=a*h/d,n[o]=l*r+s[0],n[o+1]=c*r+s[1],n[o+2]=h*r+s[2]}return n}var t4={radius:1,center:[0,0]};function n4(n,e){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:eu,i=Jt._objectSpread2(Jt._objectSpread2({},t4),e),r=i.radius,s=i.center,o=0;o<n.length;o+=2){var a=r*Math.sqrt(t.value()),l=t.value()*SC;n[o]=Math.sin(l)*a+s[0],n[o+1]=Math.cos(l)*a+s[1]}return n}function i4(n,e){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:eu,i=Jt._objectSpread2(Jt._objectSpread2({},t4),e),r=i.radius,s=i.center,o=0;o<n.length;o+=2){var a=t.value()*SC;n[o]=Math.sin(a)*r+s[0],n[o+1]=Math.cos(a)*r+s[1]}return n}var eQ={sides:1,center:[0,0]};function r4(n,e){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:eu,i=Jt._objectSpread2(Jt._objectSpread2({},eQ),e),r=i.sides,s=i.center,o=typeof r=="number"?r:r[0],a=typeof r=="number"?r:r[1],l=0;l<n.length;l+=2)n[l]=(t.value()-.5)*o+s[0],n[l+1]=(t.value()-.5)*a+s[1];return n}function s4(n,e){return n}function o4(n,e){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:eu,i=Jt._objectSpread2(Jt._objectSpread2({},a4),e),r=i.sides,s=i.center,o=typeof r=="number"?r:r[0],a=typeof r=="number"?r:r[1],l=typeof r=="number"?r:r[2],c=0;c<n.length;c+=3)n[c]=(t.value()-.5)*o+s[0],n[c+1]=(t.value()-.5)*a+s[1],n[c+2]=(t.value()-.5)*l+s[2];return n}var a4={sides:1,center:[0,0,0]};function l4(n,e){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:eu,i=Jt._objectSpread2(Jt._objectSpread2({},a4),e),r=i.sides,s=i.center,o=typeof r=="number"?r:r[0],a=typeof r=="number"?r:r[1],l=typeof r=="number"?r:r[2],c=0;c<n.length;c+=3)n[c]=(t.value()-.5)*o+s[0],n[c+1]=(t.value()-.5)*a+s[1],n[c+2]=(t.value()-.5)*l+s[2];return n}var tQ=Object.freeze({__proto__:null,FlashGen:qk,Generator:EC,onSphere:Zk,inSphere:e4,inCircle:n4,onCircle:i4,inRect:r4,onRect:s4,inBox:o4,onBox:l4,noise:Yk});Qr.FlashGen=qk;Qr.Generator=EC;Qr.inBox=o4;Qr.inCircle=n4;Qr.inRect=r4;Qr.inSphere=e4;Qr.index=tQ;Qr.noise=Yk;Qr.onBox=l4;Qr.onCircle=i4;Qr.onRect=s4;Qr.onSphere=Zk;Object.defineProperty(qr,"__esModule",{value:!0});var $s=Qr;qr.FlashGen=$s.FlashGen;qr.Generator=$s.Generator;qr.inBox=$s.inBox;qr.inCircle=$s.inCircle;qr.inRect=$s.inRect;qr.inSphere=$s.inSphere;qr.noise=$s.noise;qr.onBox=$s.onBox;qr.onCircle=$s.onCircle;qr.onRect=$s.onRect;qr.onSphere=$s.onSphere;yk.exports=qr;var nQ=yk.exports;const iQ=n=>{const e=W.useRef(),[t]=W.useState(()=>nQ.inSphere(new Float32Array(5e3),{radius:1.2}));return Sm((i,r)=>{e.current&&(e.current.rotation.x-=r/10,e.current.rotation.y-=r/15)}),Y.jsx("group",{rotation:[0,0,Math.PI/4],children:Y.jsx(Mq,{ref:e,positions:t,stride:3,frustumCulled:!0,...n,children:Y.jsx(Aq,{transparent:!0,color:"#f272c8",size:.002,sizeAttenuation:!0,depthWrite:!1})})})},rQ=()=>Y.jsx("div",{className:"w-full h-auto absolute inset-0 z-[-1]",children:Y.jsxs(oC,{camera:{position:[0,0,1]},children:[Y.jsx(W.Suspense,{fallback:Y.jsx(uC,{}),children:Y.jsx(iQ,{})}),Y.jsx(cC,{all:!0})]})}),c4=W.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),U_=W.createContext({}),wC=W.createContext(null),k_=typeof document<"u",sQ=k_?W.useLayoutEffect:W.useEffect,u4=W.createContext({strict:!1}),MC=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),oQ="framerAppearId",h4="data-"+MC(oQ),f4={skipAnimations:!1,useManualTiming:!1};class HD{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function aQ(n){let e=new HD,t=new HD,i=0,r=!1,s=!1;const o=new WeakSet,a={schedule:(l,c=!1,h=!1)=>{const d=h&&r,p=d?e:t;return c&&o.add(l),p.add(l)&&d&&r&&(i=e.order.length),l},cancel:l=>{t.remove(l),o.delete(l)},process:l=>{if(r){s=!0;return}if(r=!0,[e,t]=[t,e],t.clear(),i=e.order.length,i)for(let c=0;c<i;c++){const h=e.order[c];o.has(h)&&(a.schedule(h),n()),h(l)}r=!1,s&&(s=!1,a.process(l))}};return a}const Z0=["prepare","read","update","preRender","render","postRender"],lQ=40;function d4(n,e){let t=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=Z0.reduce((d,p)=>(d[p]=aQ(()=>t=!0),d),{}),o=d=>{s[d].process(r)},a=()=>{const d=performance.now();t=!1,r.delta=i?1e3/60:Math.max(Math.min(d-r.timestamp,lQ),1),r.timestamp=d,r.isProcessing=!0,Z0.forEach(o),r.isProcessing=!1,t&&e&&(i=!1,n(a))},l=()=>{t=!0,i=!0,r.isProcessing||n(a)};return{schedule:Z0.reduce((d,p)=>{const m=s[p];return d[p]=(y,x=!1,_=!1)=>(t||l(),m.schedule(y,x,_)),d},{}),cancel:d=>Z0.forEach(p=>s[p].cancel(d)),state:r,steps:s}}const{schedule:TC,cancel:Xle}=d4(queueMicrotask,!1);function cQ(n,e,t,i){const{visualElement:r}=W.useContext(U_),s=W.useContext(u4),o=W.useContext(wC),a=W.useContext(c4).reducedMotion,l=W.useRef();i=i||s.renderer,!l.current&&i&&(l.current=i(n,{visualState:e,parent:r,props:t,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const c=l.current;W.useInsertionEffect(()=>{c&&c.update(t,o)});const h=W.useRef(!!(t[h4]&&!window.HandoffComplete));return sQ(()=>{c&&(TC.postRender(c.render),h.current&&c.animationState&&c.animationState.animateChanges())}),W.useEffect(()=>{c&&(c.updateFeatures(),!h.current&&c.animationState&&c.animationState.animateChanges(),h.current&&(h.current=!1,window.HandoffComplete=!0))}),c}function gh(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function uQ(n,e,t){return W.useCallback(i=>{i&&n.mount&&n.mount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):gh(t)&&(t.current=i))},[e])}function Up(n){return typeof n=="string"||Array.isArray(n)}function V_(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const CC=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],RC=["initial",...CC];function z_(n){return V_(n.animate)||RC.some(e=>Up(n[e]))}function p4(n){return!!(z_(n)||n.variants)}function hQ(n,e){if(z_(n)){const{initial:t,animate:i}=n;return{initial:t===!1||Up(t)?t:void 0,animate:Up(i)?i:void 0}}return n.inherit!==!1?e:{}}function fQ(n){const{initial:e,animate:t}=hQ(n,W.useContext(U_));return W.useMemo(()=>({initial:e,animate:t}),[WD(e),WD(t)])}function WD(n){return Array.isArray(n)?n.join(" "):n}const jD={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},kp={};for(const n in jD)kp[n]={isEnabled:e=>jD[n].some(t=>!!e[t])};function dQ(n){for(const e in n)kp[e]={...kp[e],...n[e]}}const m4=W.createContext({}),g4=W.createContext({}),pQ=Symbol.for("motionComponentSymbol");function mQ({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:i,Component:r}){n&&dQ(n);function s(a,l){let c;const h={...W.useContext(c4),...a,layoutId:gQ(a)},{isStatic:d}=h,p=fQ(a),m=i(a,d);if(!d&&k_){p.visualElement=cQ(r,m,h,e);const y=W.useContext(g4),x=W.useContext(u4).strict;p.visualElement&&(c=p.visualElement.loadFeatures(h,x,n,y))}return W.createElement(U_.Provider,{value:p},c&&p.visualElement?W.createElement(c,{visualElement:p.visualElement,...h}):null,t(r,a,uQ(m,p.visualElement,l),m,d,p.visualElement))}const o=W.forwardRef(s);return o[pQ]=r,o}function gQ({layoutId:n}){const e=W.useContext(m4).id;return e&&n!==void 0?e+"-"+n:n}function yQ(n){function e(i,r={}){return mQ(n(i,r))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(i,r)=>(t.has(r)||t.set(r,e(r)),t.get(r))})}const vQ=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function bC(n){return typeof n!="string"||n.includes("-")?!1:!!(vQ.indexOf(n)>-1||/[A-Z]/.test(n))}const Av={};function _Q(n){Object.assign(Av,n)}const Rm=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],tu=new Set(Rm);function y4(n,{layout:e,layoutId:t}){return tu.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Av[n]||n==="opacity")}const Ir=n=>!!(n&&n.getVelocity),xQ={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},AQ=Rm.length;function SQ(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},i,r){let s="";for(let o=0;o<AQ;o++){const a=Rm[o];if(n[a]!==void 0){const l=xQ[a]||a;s+=`${l}(${n[a]}) `}}return e&&!n.z&&(s+="translateZ(0)"),s=s.trim(),r?s=r(n,i?"":s):t&&i&&(s="none"),s}const v4=n=>e=>typeof e=="string"&&e.startsWith(n),_4=v4("--"),xw=v4("var(--"),EQ=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,wQ=(n,e)=>e&&typeof n=="number"?e.transform(n):n,dl=(n,e,t)=>Math.min(Math.max(t,n),e),nu={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},$d={...nu,transform:n=>dl(0,1,n)},ey={...nu,default:1},Yd=n=>Math.round(n*1e5)/1e5,G_=/(-)?([\d]*\.?[\d])+/g,x4=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,MQ=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function bm(n){return typeof n=="string"}const Pm=n=>({test:e=>bm(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Ba=Pm("deg"),Ao=Pm("%"),mt=Pm("px"),TQ=Pm("vh"),CQ=Pm("vw"),XD={...Ao,parse:n=>Ao.parse(n)/100,transform:n=>Ao.transform(n*100)},JD={...nu,transform:Math.round},A4={borderWidth:mt,borderTopWidth:mt,borderRightWidth:mt,borderBottomWidth:mt,borderLeftWidth:mt,borderRadius:mt,radius:mt,borderTopLeftRadius:mt,borderTopRightRadius:mt,borderBottomRightRadius:mt,borderBottomLeftRadius:mt,width:mt,maxWidth:mt,height:mt,maxHeight:mt,size:mt,top:mt,right:mt,bottom:mt,left:mt,padding:mt,paddingTop:mt,paddingRight:mt,paddingBottom:mt,paddingLeft:mt,margin:mt,marginTop:mt,marginRight:mt,marginBottom:mt,marginLeft:mt,rotate:Ba,rotateX:Ba,rotateY:Ba,rotateZ:Ba,scale:ey,scaleX:ey,scaleY:ey,scaleZ:ey,skew:Ba,skewX:Ba,skewY:Ba,distance:mt,translateX:mt,translateY:mt,translateZ:mt,x:mt,y:mt,z:mt,perspective:mt,transformPerspective:mt,opacity:$d,originX:XD,originY:XD,originZ:mt,zIndex:JD,fillOpacity:$d,strokeOpacity:$d,numOctaves:JD};function PC(n,e,t,i){const{style:r,vars:s,transform:o,transformOrigin:a}=n;let l=!1,c=!1,h=!0;for(const d in e){const p=e[d];if(_4(d)){s[d]=p;continue}const m=A4[d],y=wQ(p,m);if(tu.has(d)){if(l=!0,o[d]=y,!h)continue;p!==(m.default||0)&&(h=!1)}else d.startsWith("origin")?(c=!0,a[d]=y):r[d]=y}if(e.transform||(l||i?r.transform=SQ(n.transform,t,h,i):r.transform&&(r.transform="none")),c){const{originX:d="50%",originY:p="50%",originZ:m=0}=a;r.transformOrigin=`${d} ${p} ${m}`}}const IC=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function S4(n,e,t){for(const i in e)!Ir(e[i])&&!y4(i,t)&&(n[i]=e[i])}function RQ({transformTemplate:n},e,t){return W.useMemo(()=>{const i=IC();return PC(i,e,{enableHardwareAcceleration:!t},n),Object.assign({},i.vars,i.style)},[e])}function bQ(n,e,t){const i=n.style||{},r={};return S4(r,i,n),Object.assign(r,RQ(n,e,t)),r}function PQ(n,e,t){const i={},r=bQ(n,e,t);return n.drag&&n.dragListener!==!1&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(i.tabIndex=0),i.style=r,i}const IQ=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Sv(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||IQ.has(n)}let E4=n=>!Sv(n);function DQ(n){n&&(E4=e=>e.startsWith("on")?!Sv(e):n(e))}try{DQ(require("@emotion/is-prop-valid").default)}catch{}function LQ(n,e,t){const i={};for(const r in n)r==="values"&&typeof n.values=="object"||(E4(r)||t===!0&&Sv(r)||!e&&!Sv(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}function KD(n,e,t){return typeof n=="string"?n:mt.transform(e+t*n)}function BQ(n,e,t){const i=KD(e,n.x,n.width),r=KD(t,n.y,n.height);return`${i} ${r}`}const NQ={offset:"stroke-dashoffset",array:"stroke-dasharray"},FQ={offset:"strokeDashoffset",array:"strokeDasharray"};function OQ(n,e,t=1,i=0,r=!0){n.pathLength=1;const s=r?NQ:FQ;n[s.offset]=mt.transform(-i);const o=mt.transform(e),a=mt.transform(t);n[s.array]=`${o} ${a}`}function DC(n,{attrX:e,attrY:t,attrScale:i,originX:r,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},h,d,p){if(PC(n,c,h,p),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:m,style:y,dimensions:x}=n;m.transform&&(x&&(y.transform=m.transform),delete m.transform),x&&(r!==void 0||s!==void 0||y.transform)&&(y.transformOrigin=BQ(x,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(m.x=e),t!==void 0&&(m.y=t),i!==void 0&&(m.scale=i),o!==void 0&&OQ(m,o,a,l,!1)}const w4=()=>({...IC(),attrs:{}}),LC=n=>typeof n=="string"&&n.toLowerCase()==="svg";function UQ(n,e,t,i){const r=W.useMemo(()=>{const s=w4();return DC(s,e,{enableHardwareAcceleration:!1},LC(i),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};S4(s,n.style,n),r.style={...s,...r.style}}return r}function kQ(n=!1){return(t,i,r,{latestValues:s},o)=>{const l=(bC(t)?UQ:PQ)(i,s,o,t),h={...LQ(i,typeof t=="string",n),...l,ref:r},{children:d}=i,p=W.useMemo(()=>Ir(d)?d.get():d,[d]);return W.createElement(t,{...h,children:p})}}function M4(n,{style:e,vars:t},i,r){Object.assign(n.style,e,r&&r.getProjectionStyles(i));for(const s in t)n.style.setProperty(s,t[s])}const T4=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function C4(n,e,t,i){M4(n,e,void 0,i);for(const r in e.attrs)n.setAttribute(T4.has(r)?r:MC(r),e.attrs[r])}function BC(n,e){const{style:t}=n,i={};for(const r in t)(Ir(t[r])||e.style&&Ir(e.style[r])||y4(r,n))&&(i[r]=t[r]);return i}function R4(n,e){const t=BC(n,e);for(const i in n)if(Ir(n[i])||Ir(e[i])){const r=Rm.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;t[r]=n[i]}return t}function NC(n,e,t,i={},r={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,i,r)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,i,r)),e}function VQ(n){const e=W.useRef(null);return e.current===null&&(e.current=n()),e.current}const Ev=n=>Array.isArray(n),zQ=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),GQ=n=>Ev(n)?n[n.length-1]||0:n;function Ny(n){const e=Ir(n)?n.get():n;return zQ(e)?e.toValue():e}function HQ({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},i,r,s){const o={latestValues:WQ(i,r,s,n),renderState:e()};return t&&(o.mount=a=>t(i,a,o)),o}const b4=n=>(e,t)=>{const i=W.useContext(U_),r=W.useContext(wC),s=()=>HQ(n,e,i,r);return t?s():VQ(s)};function WQ(n,e,t,i){const r={},s=i(n,{});for(const p in s)r[p]=Ny(s[p]);let{initial:o,animate:a}=n;const l=z_(n),c=p4(n);e&&c&&!l&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=t?t.initial===!1:!1;h=h||o===!1;const d=h?a:o;return d&&typeof d!="boolean"&&!V_(d)&&(Array.isArray(d)?d:[d]).forEach(m=>{const y=NC(n,m);if(!y)return;const{transitionEnd:x,transition:_,...g}=y;for(const A in g){let S=g[A];if(Array.isArray(S)){const w=h?S.length-1:0;S=S[w]}S!==null&&(r[A]=S)}for(const A in x)r[A]=x[A]}),r}const Xn=n=>n,{schedule:bn,cancel:ha,state:bi,steps:ZA}=d4(typeof requestAnimationFrame<"u"?requestAnimationFrame:Xn,!0),jQ={useVisualState:b4({scrapeMotionValuesFromProps:R4,createRenderState:w4,onMount:(n,e,{renderState:t,latestValues:i})=>{bn.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),bn.render(()=>{DC(t,i,{enableHardwareAcceleration:!1},LC(e.tagName),n.transformTemplate),C4(e,t)})}})},XQ={useVisualState:b4({scrapeMotionValuesFromProps:BC,createRenderState:IC})};function JQ(n,{forwardMotionProps:e=!1},t,i){return{...bC(n)?jQ:XQ,preloadedFeatures:t,useRender:kQ(e),createVisualElement:i,Component:n}}function Zo(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}const P4=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function H_(n,e="page"){return{point:{x:n[e+"X"],y:n[e+"Y"]}}}const KQ=n=>e=>P4(e)&&n(e,H_(e));function ia(n,e,t,i){return Zo(n,e,KQ(t),i)}const $Q=(n,e)=>t=>e(n(t)),il=(...n)=>n.reduce($Q);function I4(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const $D=I4("dragHorizontal"),YD=I4("dragVertical");function D4(n){let e=!1;if(n==="y")e=YD();else if(n==="x")e=$D();else{const t=$D(),i=YD();t&&i?e=()=>{t(),i()}:(t&&t(),i&&i())}return e}function L4(){const n=D4(!0);return n?(n(),!1):!0}class Tl{constructor(e){this.isMounted=!1,this.node=e}update(){}}function qD(n,e){const t="pointer"+(e?"enter":"leave"),i="onHover"+(e?"Start":"End"),r=(s,o)=>{if(s.pointerType==="touch"||L4())return;const a=n.getProps();n.animationState&&a.whileHover&&n.animationState.setActive("whileHover",e),a[i]&&bn.update(()=>a[i](s,o))};return ia(n.current,t,r,{passive:!n.getProps()[i]})}class YQ extends Tl{mount(){this.unmount=il(qD(this.node,!0),qD(this.node,!1))}unmount(){}}class qQ extends Tl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=il(Zo(this.node.current,"focus",()=>this.onFocus()),Zo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const B4=(n,e)=>e?n===e?!0:B4(n,e.parentElement):!1;function eS(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,H_(t))}class QQ extends Tl{constructor(){super(...arguments),this.removeStartListeners=Xn,this.removeEndListeners=Xn,this.removeAccessibleListeners=Xn,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),s=ia(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:h,globalTapTarget:d}=this.node.getProps();bn.update(()=>{!d&&!B4(this.node.current,a.target)?h&&h(a,l):c&&c(a,l)})},{passive:!(i.onTap||i.onPointerUp)}),o=ia(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=il(s,o),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||eS("up",(l,c)=>{const{onTap:h}=this.node.getProps();h&&bn.update(()=>h(l,c))})};this.removeEndListeners(),this.removeEndListeners=Zo(this.node.current,"keyup",o),eS("down",(a,l)=>{this.startPress(a,l)})},t=Zo(this.node.current,"keydown",e),i=()=>{this.isPressing&&eS("cancel",(s,o)=>this.cancelPress(s,o))},r=Zo(this.node.current,"blur",i);this.removeAccessibleListeners=il(t,r)}}startPress(e,t){this.isPressing=!0;const{onTapStart:i,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&bn.update(()=>i(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!L4()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&bn.update(()=>i(e,t))}mount(){const e=this.node.getProps(),t=ia(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=Zo(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=il(t,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Aw=new WeakMap,tS=new WeakMap,ZQ=n=>{const e=Aw.get(n.target);e&&e(n)},eZ=n=>{n.forEach(ZQ)};function tZ({root:n,...e}){const t=n||document;tS.has(t)||tS.set(t,{});const i=tS.get(t),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(eZ,{root:n,...e})),i[r]}function nZ(n,e,t){const i=tZ(e);return Aw.set(n,t),i.observe(n),()=>{Aw.delete(n),i.unobserve(n)}}const iZ={some:0,all:1};class rZ extends Tl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:r="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:iZ[r]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),p=c?h:d;p&&p(l)};return nZ(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(sZ(e,t))&&this.startObserver()}unmount(){}}function sZ({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const oZ={inView:{Feature:rZ},tap:{Feature:QQ},focus:{Feature:qQ},hover:{Feature:YQ}};function N4(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}function aZ(n){const e={};return n.values.forEach((t,i)=>e[i]=t.get()),e}function lZ(n){const e={};return n.values.forEach((t,i)=>e[i]=t.getVelocity()),e}function W_(n,e,t){const i=n.getProps();return NC(i,e,t!==void 0?t:i.custom,aZ(n),lZ(n))}let FC=Xn;const Pc=n=>n*1e3,ra=n=>n/1e3,cZ={current:!1},F4=n=>Array.isArray(n)&&typeof n[0]=="number";function O4(n){return!!(!n||typeof n=="string"&&U4[n]||F4(n)||Array.isArray(n)&&n.every(O4))}const Pd=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,U4={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Pd([0,.65,.55,1]),circOut:Pd([.55,0,1,.45]),backIn:Pd([.31,.01,.66,-.59]),backOut:Pd([.33,1.53,.69,.99])};function k4(n){if(n)return F4(n)?Pd(n):Array.isArray(n)?n.map(k4):U4[n]}function uZ(n,e,t,{delay:i=0,duration:r,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const c={[e]:t};l&&(c.offset=l);const h=k4(a);return Array.isArray(h)&&(c.easing=h),n.animate(c,{delay:i,duration:r,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function hZ(n,{repeat:e,repeatType:t="loop"}){const i=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[i]}const V4=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,fZ=1e-7,dZ=12;function pZ(n,e,t,i,r){let s,o,a=0;do o=e+(t-e)/2,s=V4(o,i,r)-n,s>0?t=o:e=o;while(Math.abs(s)>fZ&&++a<dZ);return o}function Im(n,e,t,i){if(n===e&&t===i)return Xn;const r=s=>pZ(s,0,1,n,t);return s=>s===0||s===1?s:V4(r(s),e,i)}const mZ=Im(.42,0,1,1),gZ=Im(0,0,.58,1),z4=Im(.42,0,.58,1),yZ=n=>Array.isArray(n)&&typeof n[0]!="number",G4=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,H4=n=>e=>1-n(1-e),OC=n=>1-Math.sin(Math.acos(n)),W4=H4(OC),vZ=G4(OC),j4=Im(.33,1.53,.69,.99),UC=H4(j4),_Z=G4(UC),xZ=n=>(n*=2)<1?.5*UC(n):.5*(2-Math.pow(2,-10*(n-1))),AZ={linear:Xn,easeIn:mZ,easeInOut:z4,easeOut:gZ,circIn:OC,circInOut:vZ,circOut:W4,backIn:UC,backInOut:_Z,backOut:j4,anticipate:xZ},QD=n=>{if(Array.isArray(n)){FC(n.length===4);const[e,t,i,r]=n;return Im(e,t,i,r)}else if(typeof n=="string")return AZ[n];return n},kC=(n,e)=>t=>!!(bm(t)&&MQ.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),X4=(n,e,t)=>i=>{if(!bm(i))return i;const[r,s,o,a]=i.match(G_);return{[n]:parseFloat(r),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},SZ=n=>dl(0,255,n),nS={...nu,transform:n=>Math.round(SZ(n))},yc={test:kC("rgb","red"),parse:X4("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+nS.transform(n)+", "+nS.transform(e)+", "+nS.transform(t)+", "+Yd($d.transform(i))+")"};function EZ(n){let e="",t="",i="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const Sw={test:kC("#"),parse:EZ,transform:yc.transform},yh={test:kC("hsl","hue"),parse:X4("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+Ao.transform(Yd(e))+", "+Ao.transform(Yd(t))+", "+Yd($d.transform(i))+")"},ur={test:n=>yc.test(n)||Sw.test(n)||yh.test(n),parse:n=>yc.test(n)?yc.parse(n):yh.test(n)?yh.parse(n):Sw.parse(n),transform:n=>bm(n)?n:n.hasOwnProperty("red")?yc.transform(n):yh.transform(n)},Rn=(n,e,t)=>-t*n+t*e+n;function iS(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function wZ({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let r=0,s=0,o=0;if(!e)r=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;r=iS(l,a,n+1/3),s=iS(l,a,n),o=iS(l,a,n-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}const rS=(n,e,t)=>{const i=n*n;return Math.sqrt(Math.max(0,t*(e*e-i)+i))},MZ=[Sw,yc,yh],TZ=n=>MZ.find(e=>e.test(n));function ZD(n){const e=TZ(n);let t=e.parse(n);return e===yh&&(t=wZ(t)),t}const J4=(n,e)=>{const t=ZD(n),i=ZD(e),r={...t};return s=>(r.red=rS(t.red,i.red,s),r.green=rS(t.green,i.green,s),r.blue=rS(t.blue,i.blue,s),r.alpha=Rn(t.alpha,i.alpha,s),yc.transform(r))};function CZ(n){var e,t;return isNaN(n)&&bm(n)&&(((e=n.match(G_))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(x4))===null||t===void 0?void 0:t.length)||0)>0}const K4={regex:EQ,countKey:"Vars",token:"${v}",parse:Xn},$4={regex:x4,countKey:"Colors",token:"${c}",parse:ur.parse},Y4={regex:G_,countKey:"Numbers",token:"${n}",parse:nu.parse};function sS(n,{regex:e,countKey:t,token:i,parse:r}){const s=n.tokenised.match(e);s&&(n["num"+t]=s.length,n.tokenised=n.tokenised.replace(e,i),n.values.push(...s.map(r)))}function wv(n){const e=n.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&sS(t,K4),sS(t,$4),sS(t,Y4),t}function q4(n){return wv(n).values}function Q4(n){const{values:e,numColors:t,numVars:i,tokenised:r}=wv(n),s=e.length;return o=>{let a=r;for(let l=0;l<s;l++)l<i?a=a.replace(K4.token,o[l]):l<i+t?a=a.replace($4.token,ur.transform(o[l])):a=a.replace(Y4.token,Yd(o[l]));return a}}const RZ=n=>typeof n=="number"?0:n;function bZ(n){const e=q4(n);return Q4(n)(e.map(RZ))}const pl={test:CZ,parse:q4,createTransformer:Q4,getAnimatableNone:bZ},Z4=(n,e)=>t=>`${t>0?e:n}`;function eV(n,e){return typeof n=="number"?t=>Rn(n,e,t):ur.test(n)?J4(n,e):n.startsWith("var(")?Z4(n,e):nV(n,e)}const tV=(n,e)=>{const t=[...n],i=t.length,r=n.map((s,o)=>eV(s,e[o]));return s=>{for(let o=0;o<i;o++)t[o]=r[o](s);return t}},PZ=(n,e)=>{const t={...n,...e},i={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(i[r]=eV(n[r],e[r]));return r=>{for(const s in i)t[s]=i[s](r);return t}},nV=(n,e)=>{const t=pl.createTransformer(e),i=wv(n),r=wv(e);return i.numVars===r.numVars&&i.numColors===r.numColors&&i.numNumbers>=r.numNumbers?il(tV(i.values,r.values),t):Z4(n,e)},Vp=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i},eL=(n,e)=>t=>Rn(n,e,t);function IZ(n){return typeof n=="number"?eL:typeof n=="string"?ur.test(n)?J4:nV:Array.isArray(n)?tV:typeof n=="object"?PZ:eL}function DZ(n,e,t){const i=[],r=t||IZ(n[0]),s=n.length-1;for(let o=0;o<s;o++){let a=r(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||Xn:e;a=il(l,a)}i.push(a)}return i}function iV(n,e,{clamp:t=!0,ease:i,mixer:r}={}){const s=n.length;if(FC(s===e.length),s===1)return()=>e[0];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=DZ(e,i,r),a=o.length,l=c=>{let h=0;if(a>1)for(;h<n.length-2&&!(c<n[h+1]);h++);const d=Vp(n[h],n[h+1],c);return o[h](d)};return t?c=>l(dl(n[0],n[s-1],c)):l}function LZ(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const r=Vp(0,e,i);n.push(Rn(t,1,r))}}function BZ(n){const e=[0];return LZ(e,n.length-1),e}function NZ(n,e){return n.map(t=>t*e)}function FZ(n,e){return n.map(()=>e||z4).splice(0,n.length-1)}function Mv({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const r=yZ(i)?i.map(QD):QD(i),s={done:!1,value:e[0]},o=NZ(t&&t.length===e.length?t:BZ(e),n),a=iV(o,e,{ease:Array.isArray(r)?r:FZ(e,r)});return{calculatedDuration:n,next:l=>(s.value=a(l),s.done=l>=n,s)}}function rV(n,e){return e?n*(1e3/e):0}const OZ=5;function sV(n,e,t){const i=Math.max(e-OZ,0);return rV(t-n(i),e-i)}const oS=.001,UZ=.01,kZ=10,VZ=.05,zZ=1;function GZ({duration:n=800,bounce:e=.25,velocity:t=0,mass:i=1}){let r,s,o=1-e;o=dl(VZ,zZ,o),n=dl(UZ,kZ,ra(n)),o<1?(r=c=>{const h=c*o,d=h*n,p=h-t,m=Ew(c,o),y=Math.exp(-d);return oS-p/m*y},s=c=>{const d=c*o*n,p=d*t+t,m=Math.pow(o,2)*Math.pow(c,2)*n,y=Math.exp(-d),x=Ew(Math.pow(c,2),o);return(-r(c)+oS>0?-1:1)*((p-m)*y)/x}):(r=c=>{const h=Math.exp(-c*n),d=(c-t)*n+1;return-oS+h*d},s=c=>{const h=Math.exp(-c*n),d=(t-c)*(n*n);return h*d});const a=5/n,l=WZ(r,s,a);if(n=Pc(n),isNaN(l))return{stiffness:100,damping:10,duration:n};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:o*2*Math.sqrt(i*c),duration:n}}}const HZ=12;function WZ(n,e,t){let i=t;for(let r=1;r<HZ;r++)i=i-n(i)/e(i);return i}function Ew(n,e){return n*Math.sqrt(1-e*e)}const jZ=["duration","bounce"],XZ=["stiffness","damping","mass"];function tL(n,e){return e.some(t=>n[t]!==void 0)}function JZ(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!tL(n,XZ)&&tL(n,jZ)){const t=GZ(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function oV({keyframes:n,restDelta:e,restSpeed:t,...i}){const r=n[0],s=n[n.length-1],o={done:!1,value:r},{stiffness:a,damping:l,mass:c,duration:h,velocity:d,isResolvedFromDuration:p}=JZ({...i,velocity:-ra(i.velocity||0)}),m=d||0,y=l/(2*Math.sqrt(a*c)),x=s-r,_=ra(Math.sqrt(a/c)),g=Math.abs(x)<5;t||(t=g?.01:2),e||(e=g?.005:.5);let A;if(y<1){const S=Ew(_,y);A=w=>{const R=Math.exp(-y*_*w);return s-R*((m+y*_*x)/S*Math.sin(S*w)+x*Math.cos(S*w))}}else if(y===1)A=S=>s-Math.exp(-_*S)*(x+(m+_*x)*S);else{const S=_*Math.sqrt(y*y-1);A=w=>{const R=Math.exp(-y*_*w),T=Math.min(S*w,300);return s-R*((m+y*_*x)*Math.sinh(T)+S*x*Math.cosh(T))/S}}return{calculatedDuration:p&&h||null,next:S=>{const w=A(S);if(p)o.done=S>=h;else{let R=m;S!==0&&(y<1?R=sV(A,S,w):R=0);const T=Math.abs(R)<=t,P=Math.abs(s-w)<=e;o.done=T&&P}return o.value=o.done?s:w,o}}}function nL({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:h}){const d=n[0],p={done:!1,value:d},m=B=>a!==void 0&&B<a||l!==void 0&&B>l,y=B=>a===void 0?l:l===void 0||Math.abs(a-B)<Math.abs(l-B)?a:l;let x=t*e;const _=d+x,g=o===void 0?_:o(_);g!==_&&(x=g-d);const A=B=>-x*Math.exp(-B/i),S=B=>g+A(B),w=B=>{const b=A(B),I=S(B);p.done=Math.abs(b)<=c,p.value=p.done?g:I};let R,T;const P=B=>{m(p.value)&&(R=B,T=oV({keyframes:[p.value,y(p.value)],velocity:sV(S,B,p.value),damping:r,stiffness:s,restDelta:c,restSpeed:h}))};return P(0),{calculatedDuration:null,next:B=>{let b=!1;return!T&&R===void 0&&(b=!0,w(B),P(B)),R!==void 0&&B>R?T.next(B-R):(!b&&w(B),p)}}}let Fy;function KZ(){Fy=void 0}const Ic={now:()=>(Fy===void 0&&Ic.set(bi.isProcessing||f4.useManualTiming?bi.timestamp:performance.now()),Fy),set:n=>{Fy=n,queueMicrotask(KZ)}},$Z=n=>{const e=({timestamp:t})=>n(t);return{start:()=>bn.update(e,!0),stop:()=>ha(e),now:()=>bi.isProcessing?bi.timestamp:Ic.now()}},iL=2e4;function rL(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<iL;)e+=t,i=n.next(e);return e>=iL?1/0:e}const YZ={decay:nL,inertia:nL,tween:Mv,keyframes:Mv,spring:oV};function Tv({autoplay:n=!0,delay:e=0,driver:t=$Z,keyframes:i,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:c,onComplete:h,onUpdate:d,...p}){let m=1,y=!1,x,_;const g=()=>{_=new Promise(j=>{x=j})};g();let A;const S=YZ[r]||Mv;let w;S!==Mv&&typeof i[0]!="number"&&(w=iV([0,100],i,{clamp:!1}),i=[0,100]);const R=S({...p,keyframes:i});let T;a==="mirror"&&(T=S({...p,keyframes:[...i].reverse(),velocity:-(p.velocity||0)}));let P="idle",B=null,b=null,I=null;R.calculatedDuration===null&&s&&(R.calculatedDuration=rL(R));const{calculatedDuration:U}=R;let K=1/0,re=1/0;U!==null&&(K=U+o,re=K*(s+1)-o);let G=0;const $=j=>{if(b===null)return;m>0&&(b=Math.min(b,j)),m<0&&(b=Math.min(j-re/m,b)),B!==null?G=B:G=Math.round(j-b)*m;const te=G-e*(m>=0?1:-1),Z=m>=0?te<0:te>re;G=Math.max(te,0),P==="finished"&&B===null&&(G=re);let ce=G,Se=R;if(s){const ot=Math.min(G,re)/K;let De=Math.floor(ot),Re=ot%1;!Re&&ot>=1&&(Re=1),Re===1&&De--,De=Math.min(De,s+1),!!(De%2)&&(a==="reverse"?(Re=1-Re,o&&(Re-=o/K)):a==="mirror"&&(Se=T)),ce=dl(0,1,Re)*K}const Te=Z?{done:!1,value:i[0]}:Se.next(ce);w&&(Te.value=w(Te.value));let{done:be}=Te;!Z&&U!==null&&(be=m>=0?G>=re:G<=0);const tt=B===null&&(P==="finished"||P==="running"&&be);return d&&d(Te.value),tt&&L(),Te},Q=()=>{A&&A.stop(),A=void 0},se=()=>{P="idle",Q(),x(),g(),b=I=null},L=()=>{P="finished",h&&h(),Q(),x()},k=()=>{if(y)return;A||(A=t($));const j=A.now();l&&l(),B!==null?b=j-B:(!b||P==="finished")&&(b=j),P==="finished"&&g(),I=b,B=null,P="running",A.start()};n&&k();const z={then(j,te){return _.then(j,te)},get time(){return ra(G)},set time(j){j=Pc(j),G=j,B!==null||!A||m===0?B=j:b=A.now()-j/m},get duration(){const j=R.calculatedDuration===null?rL(R):R.calculatedDuration;return ra(j)},get speed(){return m},set speed(j){j===m||!A||(m=j,z.time=ra(G))},get state(){return P},play:k,pause:()=>{P="paused",B=G},stop:()=>{y=!0,P!=="idle"&&(P="idle",c&&c(),se())},cancel:()=>{I!==null&&$(I),se()},complete:()=>{P="finished"},sample:j=>(b=0,$(j))};return z}function qZ(n){let e;return()=>(e===void 0&&(e=n()),e)}const QZ=qZ(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),ZZ=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),ty=10,eee=2e4,tee=(n,e)=>e.type==="spring"||n==="backgroundColor"||!O4(e.ease);function nee(n,e,{onUpdate:t,onComplete:i,...r}){if(!(QZ()&&ZZ.has(e)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let o=!1,a,l,c=!1;const h=()=>{l=new Promise(S=>{a=S})};h();let{keyframes:d,duration:p=300,ease:m,times:y}=r;if(tee(e,r)){const S=Tv({...r,repeat:0,delay:0});let w={done:!1,value:d[0]};const R=[];let T=0;for(;!w.done&&T<eee;)w=S.sample(T),R.push(w.value),T+=ty;y=void 0,d=R,p=T-ty,m="linear"}const x=uZ(n.owner.current,e,d,{...r,duration:p,ease:m,times:y}),_=()=>{c=!1,x.cancel()},g=()=>{c=!0,bn.update(_),a(),h()};return x.onfinish=()=>{c||(n.set(hZ(d,r)),i&&i(),g())},{then(S,w){return l.then(S,w)},attachTimeline(S){return x.timeline=S,x.onfinish=null,Xn},get time(){return ra(x.currentTime||0)},set time(S){x.currentTime=Pc(S)},get speed(){return x.playbackRate},set speed(S){x.playbackRate=S},get duration(){return ra(p)},play:()=>{o||(x.play(),ha(_))},pause:()=>x.pause(),stop:()=>{if(o=!0,x.playState==="idle")return;const{currentTime:S}=x;if(S){const w=Tv({...r,autoplay:!1});n.setWithVelocity(w.sample(S-ty).value,w.sample(S).value,ty)}g()},complete:()=>{c||x.finish()},cancel:g}}function iee({keyframes:n,delay:e,onUpdate:t,onComplete:i}){const r=()=>(t&&t(n[n.length-1]),i&&i(),{time:0,speed:1,duration:0,play:Xn,pause:Xn,stop:Xn,then:s=>(s(),Promise.resolve()),cancel:Xn,complete:Xn});return e?Tv({keyframes:[0,1],duration:0,delay:e,onComplete:r}):r()}const ree={type:"spring",stiffness:500,damping:25,restSpeed:10},see=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),oee={type:"keyframes",duration:.8},aee={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},lee=(n,{keyframes:e})=>e.length>2?oee:tu.has(n)?n.startsWith("scale")?see(e[1]):ree:aee,ww=(n,e)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(pl.test(e)||e==="0")&&!e.startsWith("url(")),cee=new Set(["brightness","contrast","saturate","opacity"]);function uee(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(G_)||[];if(!i)return n;const r=t.replace(i,"");let s=cee.has(e)?1:0;return i!==t&&(s*=100),e+"("+s+r+")"}const hee=/([a-z-]*)\(.*?\)/g,Mw={...pl,getAnimatableNone:n=>{const e=n.match(hee);return e?e.map(uee).join(" "):n}},fee={...A4,color:ur,backgroundColor:ur,outlineColor:ur,fill:ur,stroke:ur,borderColor:ur,borderTopColor:ur,borderRightColor:ur,borderBottomColor:ur,borderLeftColor:ur,filter:Mw,WebkitFilter:Mw},VC=n=>fee[n];function aV(n,e){let t=VC(n);return t!==Mw&&(t=pl),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const lV=n=>/^0[^.\s]+$/.test(n);function dee(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||lV(n)}function pee(n,e,t,i){const r=ww(e,t);let s;Array.isArray(t)?s=[...t]:s=[null,t];const o=i.from!==void 0?i.from:n.get();let a;const l=[];for(let c=0;c<s.length;c++)s[c]===null&&(s[c]=c===0?o:s[c-1]),dee(s[c])&&l.push(c),typeof s[c]=="string"&&s[c]!=="none"&&s[c]!=="0"&&(a=s[c]);if(r&&l.length&&a)for(let c=0;c<l.length;c++){const h=l[c];s[h]=aV(e,a)}return s}function mee({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...h}){return!!Object.keys(h).length}function zC(n,e){return n[e]||n.default||n}const GC=(n,e,t,i={})=>r=>{const s=zC(i,n)||{},o=s.delay||i.delay||0;let{elapsed:a=0}=i;a=a-Pc(o);const l=pee(e,n,t,s),c=l[0],h=l[l.length-1],d=ww(n,c),p=ww(n,h);let m={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:y=>{e.set(y),s.onUpdate&&s.onUpdate(y)},onComplete:()=>{r(),s.onComplete&&s.onComplete()}};if(mee(s)||(m={...m,...lee(n,m)}),m.duration&&(m.duration=Pc(m.duration)),m.repeatDelay&&(m.repeatDelay=Pc(m.repeatDelay)),!d||!p||cZ.current||s.type===!1||f4.skipAnimations)return iee(m);if(!i.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const y=nee(e,n,m);if(y)return y}return Tv(m)};function Cv(n){return!!(Ir(n)&&n.add)}const cV=n=>/^\-?\d*\.?\d+$/.test(n);function HC(n,e){n.indexOf(e)===-1&&n.push(e)}function WC(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class jC{constructor(){this.subscriptions=[]}add(e){return HC(this.subscriptions,e),()=>WC(this.subscriptions,e)}notify(e,t,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const sL=30,gee=n=>!isNaN(parseFloat(n));class yee{constructor(e,t={}){this.version="11.0.3",this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,r=!0)=>{const s=Ic.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.canTrackVelocity=gee(this.current),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Ic.now()}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new jC);const i=this.events[e].add(t);return e==="change"?()=>{i(),bn.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ic.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>sL)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,sL);return rV(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ef(n,e){return new yee(n,e)}const uV=n=>e=>e.test(n),vee={test:n=>n==="auto",parse:n=>n},hV=[nu,mt,Ao,Ba,CQ,TQ,vee],vd=n=>hV.find(uV(n)),_ee=[...hV,ur,pl],xee=n=>_ee.find(uV(n));function Aee(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,ef(t))}function See(n,e){const t=W_(n,e);let{transitionEnd:i={},transition:r={},...s}=t?n.makeTargetAnimatable(t,!1):{};s={...s,...i};for(const o in s){const a=GQ(s[o]);Aee(n,o,a)}}function Eee(n,e,t){var i,r;const s=Object.keys(e).filter(a=>!n.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const l=s[a],c=e[l];let h=null;Array.isArray(c)&&(h=c[0]),h===null&&(h=(r=(i=t[l])!==null&&i!==void 0?i:n.readValue(l))!==null&&r!==void 0?r:e[l]),h!=null&&(typeof h=="string"&&(cV(h)||lV(h))?h=parseFloat(h):!xee(h)&&pl.test(c)&&(h=aV(l,c)),n.addValue(l,ef(h,{owner:n})),t[l]===void 0&&(t[l]=h),h!==null&&n.setBaseTarget(l,h))}}function wee(n,e){return e?(e[n]||e.default||e).from:void 0}function Mee(n,e,t){const i={};for(const r in n){const s=wee(r,e);if(s!==void 0)i[r]=s;else{const o=t.getValue(r);o&&(i[r]=o.get())}}return i}function Tee({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function Cee(n,e){const t=n.get();if(Array.isArray(e)){for(let i=0;i<e.length;i++)if(e[i]!==t)return!0}else return t!==e}function fV(n,e,{delay:t=0,transitionOverride:i,type:r}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:o,...a}=n.makeTargetAnimatable(e);const l=n.getValue("willChange");i&&(s=i);const c=[],h=r&&n.animationState&&n.animationState.getState()[r];for(const d in a){const p=n.getValue(d),m=a[d];if(!p||m===void 0||h&&Tee(h,d))continue;const y={delay:t,elapsed:0,...zC(s||{},d)};if(window.HandoffAppearAnimations){const g=n.getProps()[h4];if(g){const A=window.HandoffAppearAnimations(g,d,p,bn);A!==null&&(y.elapsed=A,y.isHandoff=!0)}}let x=!y.isHandoff&&!Cee(p,m);if(y.type==="spring"&&(p.getVelocity()||y.velocity)&&(x=!1),p.animation&&(x=!1),x)continue;p.start(GC(d,p,m,n.shouldReduceMotion&&tu.has(d)?{type:!1}:y));const _=p.animation;Cv(l)&&(l.add(d),_.then(()=>l.remove(d))),c.push(_)}return o&&Promise.all(c).then(()=>{o&&See(n,o)}),c}function Tw(n,e,t={}){const i=W_(n,e,t.custom);let{transition:r=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(r=t.transitionOverride);const s=i?()=>Promise.all(fV(n,i,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:h,staggerDirection:d}=r;return Ree(n,e,c+l,h,d,t)}:()=>Promise.resolve(),{when:a}=r;if(a){const[l,c]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>c())}else return Promise.all([s(),o(t.delay)])}function Ree(n,e,t=0,i=0,r=1,s){const o=[],a=(n.variantChildren.size-1)*i,l=r===1?(c=0)=>c*i:(c=0)=>a-c*i;return Array.from(n.variantChildren).sort(bee).forEach((c,h)=>{c.notify("AnimationStart",e),o.push(Tw(c,e,{...s,delay:t+l(h)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function bee(n,e){return n.sortNodePosition(e)}function Pee(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>Tw(n,s,t));i=Promise.all(r)}else if(typeof e=="string")i=Tw(n,e,t);else{const r=typeof e=="function"?W_(n,e,t.custom):e;i=Promise.all(fV(n,r,t))}return i.then(()=>n.notify("AnimationComplete",e))}const Iee=[...CC].reverse(),Dee=CC.length;function Lee(n){return e=>Promise.all(e.map(({animation:t,options:i})=>Pee(n,t,i)))}function Bee(n){let e=Lee(n);const t=Fee();let i=!0;const r=(l,c)=>{const h=W_(n,c);if(h){const{transition:d,transitionEnd:p,...m}=h;l={...l,...m,...p}}return l};function s(l){e=l(n)}function o(l,c){const h=n.getProps(),d=n.getVariantContext(!0)||{},p=[],m=new Set;let y={},x=1/0;for(let g=0;g<Dee;g++){const A=Iee[g],S=t[A],w=h[A]!==void 0?h[A]:d[A],R=Up(w),T=A===c?S.isActive:null;T===!1&&(x=g);let P=w===d[A]&&w!==h[A]&&R;if(P&&i&&n.manuallyAnimateOnMount&&(P=!1),S.protectedKeys={...y},!S.isActive&&T===null||!w&&!S.prevProp||V_(w)||typeof w=="boolean")continue;let b=Nee(S.prevProp,w)||A===c&&S.isActive&&!P&&R||g>x&&R,I=!1;const U=Array.isArray(w)?w:[w];let K=U.reduce(r,{});T===!1&&(K={});const{prevResolvedValues:re={}}=S,G={...re,...K},$=Q=>{b=!0,m.has(Q)&&(I=!0,m.delete(Q)),S.needsAnimating[Q]=!0};for(const Q in G){const se=K[Q],L=re[Q];if(y.hasOwnProperty(Q))continue;let k=!1;Ev(se)&&Ev(L)?k=!N4(se,L):k=se!==L,k?se!==void 0?$(Q):m.add(Q):se!==void 0&&m.has(Q)?$(Q):S.protectedKeys[Q]=!0}S.prevProp=w,S.prevResolvedValues=K,S.isActive&&(y={...y,...K}),i&&n.blockInitialAnimation&&(b=!1),b&&(!P||I)&&p.push(...U.map(Q=>({animation:Q,options:{type:A,...l}})))}if(m.size){const g={};m.forEach(A=>{const S=n.getBaseTarget(A);S!==void 0&&(g[A]=S)}),p.push({animation:g})}let _=!!p.length;return i&&(h.initial===!1||h.initial===h.animate)&&!n.manuallyAnimateOnMount&&(_=!1),i=!1,_?e(p):Promise.resolve()}function a(l,c,h){var d;if(t[l].isActive===c)return Promise.resolve();(d=n.variantChildren)===null||d===void 0||d.forEach(m=>{var y;return(y=m.animationState)===null||y===void 0?void 0:y.setActive(l,c)}),t[l].isActive=c;const p=o(h,l);for(const m in t)t[m].protectedKeys={};return p}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>t}}function Nee(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!N4(e,n):!1}function Yl(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Fee(){return{animate:Yl(!0),whileInView:Yl(),whileHover:Yl(),whileTap:Yl(),whileDrag:Yl(),whileFocus:Yl(),exit:Yl()}}class Oee extends Tl{constructor(e){super(e),e.animationState||(e.animationState=Bee(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),V_(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let Uee=0;class kee extends Tl{constructor(){super(...arguments),this.id=Uee++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:i}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e,{custom:i??this.node.getProps().custom});t&&!e&&s.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Vee={animation:{Feature:Oee},exit:{Feature:kee}},oL=(n,e)=>Math.abs(n-e);function zee(n,e){const t=oL(n.x,e.x),i=oL(n.y,e.y);return Math.sqrt(t**2+i**2)}class dV{constructor(e,t,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=lS(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=zee(d.offset,{x:0,y:0})>=3;if(!p&&!m)return;const{point:y}=d,{timestamp:x}=bi;this.history.push({...y,timestamp:x});const{onStart:_,onMove:g}=this.handlers;p||(_&&_(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,d)},this.handlePointerMove=(d,p)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=aS(p,this.transformPagePoint),bn.update(this.updatePoint,!0)},this.handlePointerUp=(d,p)=>{this.end();const{onEnd:m,onSessionEnd:y,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=lS(d.type==="pointercancel"?this.lastMoveEventInfo:aS(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(d,_),y&&y(d,_)},!P4(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=i,this.contextWindow=r||window;const o=H_(e),a=aS(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=bi;this.history=[{...l,timestamp:c}];const{onSessionStart:h}=t;h&&h(e,lS(a,this.history)),this.removeListeners=il(ia(this.contextWindow,"pointermove",this.handlePointerMove),ia(this.contextWindow,"pointerup",this.handlePointerUp),ia(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ha(this.updatePoint)}}function aS(n,e){return e?{point:e(n.point)}:n}function aL(n,e){return{x:n.x-e.x,y:n.y-e.y}}function lS({point:n},e){return{point:n,delta:aL(n,pV(e)),offset:aL(n,Gee(e)),velocity:Hee(e,.1)}}function Gee(n){return n[0]}function pV(n){return n[n.length-1]}function Hee(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const r=pV(n);for(;t>=0&&(i=n[t],!(r.timestamp-i.timestamp>Pc(e)));)t--;if(!i)return{x:0,y:0};const s=ra(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Jr(n){return n.max-n.min}function Cw(n,e=0,t=.01){return Math.abs(n-e)<=t}function lL(n,e,t,i=.5){n.origin=i,n.originPoint=Rn(e.min,e.max,n.origin),n.scale=Jr(t)/Jr(e),(Cw(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=Rn(t.min,t.max,n.origin)-n.originPoint,(Cw(n.translate)||isNaN(n.translate))&&(n.translate=0)}function qd(n,e,t,i){lL(n.x,e.x,t.x,i?i.originX:void 0),lL(n.y,e.y,t.y,i?i.originY:void 0)}function cL(n,e,t){n.min=t.min+e.min,n.max=n.min+Jr(e)}function Wee(n,e,t){cL(n.x,e.x,t.x),cL(n.y,e.y,t.y)}function uL(n,e,t){n.min=e.min-t.min,n.max=n.min+Jr(e)}function Qd(n,e,t){uL(n.x,e.x,t.x),uL(n.y,e.y,t.y)}function jee(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?Rn(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?Rn(t,n,i.max):Math.min(n,t)),n}function hL(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function Xee(n,{top:e,left:t,bottom:i,right:r}){return{x:hL(n.x,t,r),y:hL(n.y,e,i)}}function fL(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function Jee(n,e){return{x:fL(n.x,e.x),y:fL(n.y,e.y)}}function Kee(n,e){let t=.5;const i=Jr(n),r=Jr(e);return r>i?t=Vp(e.min,e.max-i,n.min):i>r&&(t=Vp(n.min,n.max-r,e.min)),dl(0,1,t)}function $ee(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Rw=.35;function Yee(n=Rw){return n===!1?n=0:n===!0&&(n=Rw),{x:dL(n,"left","right"),y:dL(n,"top","bottom")}}function dL(n,e,t){return{min:pL(n,e),max:pL(n,t)}}function pL(n,e){return typeof n=="number"?n:n[e]||0}const mL=()=>({translate:0,scale:1,origin:0,originPoint:0}),vh=()=>({x:mL(),y:mL()}),gL=()=>({min:0,max:0}),Hn=()=>({x:gL(),y:gL()});function ds(n){return[n("x"),n("y")]}function mV({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function qee({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function Qee(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function cS(n){return n===void 0||n===1}function bw({scale:n,scaleX:e,scaleY:t}){return!cS(n)||!cS(e)||!cS(t)}function ic(n){return bw(n)||gV(n)||n.z||n.rotate||n.rotateX||n.rotateY}function gV(n){return yL(n.x)||yL(n.y)}function yL(n){return n&&n!=="0%"}function Rv(n,e,t){const i=n-t,r=e*i;return t+r}function vL(n,e,t,i,r){return r!==void 0&&(n=Rv(n,r,i)),Rv(n,t,i)+e}function Pw(n,e=0,t=1,i,r){n.min=vL(n.min,e,t,i,r),n.max=vL(n.max,e,t,i,r)}function yV(n,{x:e,y:t}){Pw(n.x,e.translate,e.scale,e.originPoint),Pw(n.y,t.translate,t.scale,t.originPoint)}function Zee(n,e,t,i=!1){const r=t.length;if(!r)return;e.x=e.y=1;let s,o;for(let a=0;a<r;a++){s=t[a],o=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&_h(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,yV(n,o)),i&&ic(s.latestValues)&&_h(n,s.latestValues))}e.x=_L(e.x),e.y=_L(e.y)}function _L(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function Ua(n,e){n.min=n.min+e,n.max=n.max+e}function xL(n,e,[t,i,r]){const s=e[r]!==void 0?e[r]:.5,o=Rn(n.min,n.max,s);Pw(n,e[t],e[i],o,e.scale)}const ete=["x","scaleX","originX"],tte=["y","scaleY","originY"];function _h(n,e){xL(n.x,e,ete),xL(n.y,e,tte)}function vV(n,e){return mV(Qee(n.getBoundingClientRect(),e))}function nte(n,e,t){const i=vV(n,t),{scroll:r}=e;return r&&(Ua(i.x,r.offset.x),Ua(i.y,r.offset.y)),i}const _V=({current:n})=>n?n.ownerDocument.defaultView:null,ite=new WeakMap;class rte{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Hn(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=h=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(H_(h,"page").point)},s=(h,d)=>{const{drag:p,dragPropagation:m,onDragStart:y}=this.getProps();if(p&&!m&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=D4(p),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ds(_=>{let g=this.getAxisMotionValue(_).get()||0;if(Ao.test(g)){const{projection:A}=this.visualElement;if(A&&A.layout){const S=A.layout.layoutBox[_];S&&(g=Jr(S)*(parseFloat(g)/100))}}this.originPoint[_]=g}),y&&bn.update(()=>y(h,d),!1,!0);const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},o=(h,d)=>{const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:y,onDrag:x}=this.getProps();if(!p&&!this.openGlobalLock)return;const{offset:_}=d;if(m&&this.currentDirection===null){this.currentDirection=ste(_),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",d.point,_),this.updateAxis("y",d.point,_),this.visualElement.render(),x&&x(h,d)},a=(h,d)=>this.stop(h,d),l=()=>ds(h=>{var d;return this.getAnimationState(h)==="paused"&&((d=this.getAxisMotionValue(h).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new dV(e,{onSessionStart:r,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:_V(this.visualElement)})}stop(e,t){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&bn.update(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:r}=this.getProps();if(!i||!ny(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=jee(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&gh(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=Xee(r.layoutBox,t):this.constraints=!1,this.elastic=Yee(i),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&ds(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=$ee(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!gh(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=nte(i,r.root,this.visualElement.getTransformPagePoint());let o=Jee(r.layout.layoutBox,s);if(t){const a=t(qee(o));this.hasMutatedConstraints=!!a,a&&(o=mV(a))}return o}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=ds(h=>{if(!ny(h,t,this.currentDirection))return;let d=l&&l[h]||{};o&&(d={min:0,max:0});const p=r?200:1e6,m=r?40:1e7,y={type:"inertia",velocity:i?e[h]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(h,y)});return Promise.all(c).then(a)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return i.start(GC(e,i,0,t))}stopAnimation(){ds(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ds(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),i=this.visualElement.getProps(),r=i[t];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){ds(t=>{const{drag:i}=this.getProps();if(!ny(t,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[t];s.set(e[t]-Rn(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!gh(t)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};ds(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();r[o]=Kee({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),ds(o=>{if(!ny(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Rn(l,c,r[o]))})}addListeners(){if(!this.visualElement.current)return;ite.set(this.visualElement,this);const e=this.visualElement.current,t=ia(e,"pointerdown",l=>{const{drag:c,dragListener:h=!0}=this.getProps();c&&h&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();gh(l)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),i();const o=Zo(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(ds(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=l[h].translate,d.set(d.get()+l[h].translate))}),this.visualElement.render())});return()=>{o(),t(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=Rw,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function ny(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function ste(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class ote extends Tl{constructor(e){super(e),this.removeGroupControls=Xn,this.removeListeners=Xn,this.controls=new rte(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Xn}unmount(){this.removeGroupControls(),this.removeListeners()}}const AL=n=>(e,t)=>{n&&bn.update(()=>n(e,t))};class ate extends Tl{constructor(){super(...arguments),this.removePointerDownListener=Xn}onPointerDown(e){this.session=new dV(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:_V(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:AL(e),onStart:AL(t),onMove:i,onEnd:(s,o)=>{delete this.session,r&&bn.update(()=>r(s,o))}}}mount(){this.removePointerDownListener=ia(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function lte(){const n=W.useContext(wC);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:i}=n,r=W.useId();return W.useEffect(()=>i(r),[]),!e&&t?[!1,()=>t&&t(r)]:[!0]}const Oy={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function SL(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const _d={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(mt.test(n))n=parseFloat(n);else return n;const t=SL(n,e.target.x),i=SL(n,e.target.y);return`${t}% ${i}%`}},cte={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,r=pl.parse(n);if(r.length>5)return i;const s=pl.createTransformer(n),o=typeof r[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;r[0+o]/=a,r[1+o]/=l;const c=Rn(a,l,.5);return typeof r[2+o]=="number"&&(r[2+o]/=c),typeof r[3+o]=="number"&&(r[3+o]/=c),s(r)}};class ute extends Bc.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;_Q(hte),s&&(t.group&&t.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Oy.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:r,isPresent:s}=this.props,o=i.projection;return o&&(o.isPresent=s,r||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||bn.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),TC.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function xV(n){const[e,t]=lte(),i=W.useContext(m4);return Bc.createElement(ute,{...n,layoutGroup:i,switchLayoutGroup:W.useContext(g4),isPresent:e,safeToRemove:t})}const hte={borderRadius:{..._d,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:_d,borderTopRightRadius:_d,borderBottomLeftRadius:_d,borderBottomRightRadius:_d,boxShadow:cte},AV=["TopLeft","TopRight","BottomLeft","BottomRight"],fte=AV.length,EL=n=>typeof n=="string"?parseFloat(n):n,wL=n=>typeof n=="number"||mt.test(n);function dte(n,e,t,i,r,s){r?(n.opacity=Rn(0,t.opacity!==void 0?t.opacity:1,pte(i)),n.opacityExit=Rn(e.opacity!==void 0?e.opacity:1,0,mte(i))):s&&(n.opacity=Rn(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,i));for(let o=0;o<fte;o++){const a=`border${AV[o]}Radius`;let l=ML(e,a),c=ML(t,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||wL(l)===wL(c)?(n[a]=Math.max(Rn(EL(l),EL(c),i),0),(Ao.test(c)||Ao.test(l))&&(n[a]+="%")):n[a]=c}(e.rotate||t.rotate)&&(n.rotate=Rn(e.rotate||0,t.rotate||0,i))}function ML(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const pte=SV(0,.5,W4),mte=SV(.5,.95,Xn);function SV(n,e,t){return i=>i<n?0:i>e?1:t(Vp(n,e,i))}function TL(n,e){n.min=e.min,n.max=e.max}function fs(n,e){TL(n.x,e.x),TL(n.y,e.y)}function CL(n,e,t,i,r){return n-=e,n=Rv(n,1/t,i),r!==void 0&&(n=Rv(n,1/r,i)),n}function gte(n,e=0,t=1,i=.5,r,s=n,o=n){if(Ao.test(e)&&(e=parseFloat(e),e=Rn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Rn(s.min,s.max,i);n===s&&(a-=e),n.min=CL(n.min,e,t,a,r),n.max=CL(n.max,e,t,a,r)}function RL(n,e,[t,i,r],s,o){gte(n,e[t],e[i],e[r],e.scale,s,o)}const yte=["x","scaleX","originX"],vte=["y","scaleY","originY"];function bL(n,e,t,i){RL(n.x,e,yte,t?t.x:void 0,i?i.x:void 0),RL(n.y,e,vte,t?t.y:void 0,i?i.y:void 0)}function PL(n){return n.translate===0&&n.scale===1}function EV(n){return PL(n.x)&&PL(n.y)}function _te(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function wV(n,e){return Math.round(n.x.min)===Math.round(e.x.min)&&Math.round(n.x.max)===Math.round(e.x.max)&&Math.round(n.y.min)===Math.round(e.y.min)&&Math.round(n.y.max)===Math.round(e.y.max)}function IL(n){return Jr(n.x)/Jr(n.y)}class xte{constructor(){this.members=[]}add(e){HC(this.members,e),e.scheduleRender()}remove(e){if(WC(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let i;for(let r=t;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function DL(n,e,t){let i="";const r=n.x.translate/e.x,s=n.y.translate/e.y;if((r||s)&&(i=`translate3d(${r}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:l,rotateX:c,rotateY:h}=t;l&&(i+=`rotate(${l}deg) `),c&&(i+=`rotateX(${c}deg) `),h&&(i+=`rotateY(${h}deg) `)}const o=n.x.scale*e.x,a=n.y.scale*e.y;return(o!==1||a!==1)&&(i+=`scale(${o}, ${a})`),i||"none"}const Ate=(n,e)=>n.depth-e.depth;class Ste{constructor(){this.children=[],this.isDirty=!1}add(e){HC(this.children,e),this.isDirty=!0}remove(e){WC(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Ate),this.isDirty=!1,this.children.forEach(e)}}function Ete(n,e){const t=Ic.now(),i=({timestamp:r})=>{const s=r-t;s>=e&&(ha(i),n(s-e))};return bn.read(i,!0),()=>ha(i)}function wte(n){window.MotionDebug&&window.MotionDebug.record(n)}function Mte(n){return n instanceof SVGElement&&n.tagName!=="svg"}function Tte(n,e,t){const i=Ir(n)?n:ef(n);return i.start(GC("",i,e,t)),i.animation}const LL=["","X","Y","Z"],Cte={visibility:"hidden"},BL=1e3;let Rte=0;const rc={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function MV({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},a=e==null?void 0:e()){this.id=Rte++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,rc.totalNodes=rc.resolvedTargetDeltas=rc.recalculatedProjection=0,this.nodes.forEach(Ite),this.nodes.forEach(Fte),this.nodes.forEach(Ote),this.nodes.forEach(Dte),wte(rc)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Ste)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new jC),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Mte(o),this.instance=o;const{layoutId:l,layout:c,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),n){let d;const p=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=Ete(p,250),Oy.hasAnimatedSinceResize&&(Oy.hasAnimatedSinceResize=!1,this.nodes.forEach(FL))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:p,hasRelativeTargetChanged:m,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||h.getDefaultTransition()||Gte,{onLayoutAnimationStart:_,onLayoutAnimationComplete:g}=h.getProps(),A=!this.targetLayout||!wV(this.targetLayout,y)||m,S=!p&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||S||p&&(A||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,S);const w={...zC(x,"layout"),onPlay:_,onComplete:g};(h.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w)}else p||FL(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ha(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Ute),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(NL);return}this.isUpdating||this.nodes.forEach(Bte),this.isUpdating=!1,this.nodes.forEach(Nte),this.nodes.forEach(bte),this.nodes.forEach(Pte),this.clearAllSnapshots();const a=Ic.now();bi.delta=dl(0,1e3/60,a-bi.timestamp),bi.timestamp=a,bi.isProcessing=!0,ZA.update.process(bi),ZA.preRender.process(bi),ZA.render.process(bi),bi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,TC.read(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(Lte),this.sharedNodes.forEach(kte)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,bn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){bn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Hn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:i(this.instance),offset:t(this.instance)})}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!EV(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;o&&(a||ic(this.latestValues)||h)&&(r(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),Hte(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Hn();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(Ua(a.x,l.offset.x),Ua(a.y,l.offset.y)),a}removeElementScroll(o){const a=Hn();fs(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:h,options:d}=c;if(c!==this.root&&h&&d.layoutScroll){if(h.isRoot){fs(a,o);const{scroll:p}=this.root;p&&(Ua(a.x,-p.offset.x),Ua(a.y,-p.offset.y))}Ua(a.x,h.offset.x),Ua(a.y,h.offset.y)}}return a}applyTransform(o,a=!1){const l=Hn();fs(l,o);for(let c=0;c<this.path.length;c++){const h=this.path[c];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&_h(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),ic(h.latestValues)&&_h(l,h.latestValues)}return ic(this.latestValues)&&_h(l,this.latestValues),l}removeTransform(o){const a=Hn();fs(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!ic(c.latestValues))continue;bw(c.latestValues)&&c.updateSnapshot();const h=Hn(),d=c.measurePageBox();fs(h,d),bL(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return ic(this.latestValues)&&bL(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==bi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:p}=this.options;if(!(!this.layout||!(d||p))){if(this.resolvedRelativeTargetAt=bi.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Hn(),this.relativeTargetOrigin=Hn(),Qd(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),fs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Hn(),this.targetWithTransforms=Hn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Wee(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):fs(this.target,this.layout.layoutBox),yV(this.target,this.targetDelta)):fs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Hn(),this.relativeTargetOrigin=Hn(),Qd(this.relativeTargetOrigin,this.target,m.target),fs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}rc.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||bw(this.parent.latestValues)||gV(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===bi.timestamp&&(c=!1),c)return;const{layout:h,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||d))return;fs(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;Zee(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Hn());const{target:y}=a;if(!y){this.projectionTransform&&(this.projectionDelta=vh(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=vh(),this.projectionDeltaWithTransform=vh());const x=this.projectionTransform;qd(this.projectionDelta,this.layoutCorrected,y,this.latestValues),this.projectionTransform=DL(this.projectionDelta,this.treeScale),(this.projectionTransform!==x||this.treeScale.x!==p||this.treeScale.y!==m)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),rc.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},h={...this.latestValues},d=vh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=Hn(),m=l?l.source:void 0,y=this.layout?this.layout.source:void 0,x=m!==y,_=this.getStack(),g=!_||_.members.length<=1,A=!!(x&&!g&&this.options.crossfade===!0&&!this.path.some(zte));this.animationProgress=0;let S;this.mixTargetDelta=w=>{const R=w/1e3;OL(d.x,o.x,R),OL(d.y,o.y,R),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Qd(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Vte(this.relativeTarget,this.relativeTargetOrigin,p,R),S&&_te(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=Hn()),fs(S,this.relativeTarget)),x&&(this.animationValues=h,dte(h,c,this.latestValues,R,A,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ha(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=bn.update(()=>{Oy.hasAnimatedSinceResize=!0,this.currentAnimation=Tte(0,BL,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(BL),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:h}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&TV(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Hn();const d=Jr(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const p=Jr(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}fs(a,l),_h(a,h),qd(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new xte),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const c={};for(let h=0;h<LL.length;h++){const d="rotate"+LL[h];l[d]&&(c[d]=l[d],o.setStaticValue(d,0))}o.render();for(const h in c)o.setStaticValue(h,c[h]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Cte;const c={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Ny(o==null?void 0:o.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=Ny(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!ic(this.latestValues)&&(x.transform=h?h({},""):"none",this.hasProjected=!1),x}const p=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=DL(this.projectionDeltaWithTransform,this.treeScale,p),h&&(c.transform=h(p,c.transform));const{x:m,y}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=d===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const x in Av){if(p[x]===void 0)continue;const{correct:_,applyTo:g}=Av[x],A=c.transform==="none"?p[x]:_(p[x],d);if(g){const S=g.length;for(let w=0;w<S;w++)c[g[w]]=A}else c[x]=A}return this.options.layoutId&&(c.pointerEvents=d===this?Ny(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(NL),this.root.sharedNodes.clear()}}}function bte(n){n.updateLayout()}function Pte(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=n.layout,{animationType:s}=n.options,o=t.source!==n.layout.source;s==="size"?ds(d=>{const p=o?t.measuredBox[d]:t.layoutBox[d],m=Jr(p);p.min=i[d].min,p.max=p.min+m}):TV(s,t.layoutBox,i)&&ds(d=>{const p=o?t.measuredBox[d]:t.layoutBox[d],m=Jr(i[d]);p.max=p.min+m,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[d].max=n.relativeTarget[d].min+m)});const a=vh();qd(a,i,t.layoutBox);const l=vh();o?qd(l,n.applyTransform(r,!0),t.measuredBox):qd(l,i,t.layoutBox);const c=!EV(a);let h=!1;if(!n.resumeFrom){const d=n.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:p,layout:m}=d;if(p&&m){const y=Hn();Qd(y,t.layoutBox,p.layoutBox);const x=Hn();Qd(x,i,m.layoutBox),wV(y,x)||(h=!0),d.options.layoutRoot&&(n.relativeTarget=x,n.relativeTargetOrigin=y,n.relativeParent=d)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:h})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function Ite(n){rc.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function Dte(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function Lte(n){n.clearSnapshot()}function NL(n){n.clearMeasurements()}function Bte(n){n.isLayoutDirty=!1}function Nte(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function FL(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function Fte(n){n.resolveTargetDelta()}function Ote(n){n.calcProjection()}function Ute(n){n.resetRotation()}function kte(n){n.removeLeadSnapshot()}function OL(n,e,t){n.translate=Rn(e.translate,0,t),n.scale=Rn(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function UL(n,e,t,i){n.min=Rn(e.min,t.min,i),n.max=Rn(e.max,t.max,i)}function Vte(n,e,t,i){UL(n.x,e.x,t.x,i),UL(n.y,e.y,t.y,i)}function zte(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const Gte={duration:.45,ease:[.4,0,.1,1]},kL=n=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(n),VL=kL("applewebkit/")&&!kL("chrome/")?Math.round:Xn;function zL(n){n.min=VL(n.min),n.max=VL(n.max)}function Hte(n){zL(n.x),zL(n.y)}function TV(n,e,t){return n==="position"||n==="preserve-aspect"&&!Cw(IL(e),IL(t),.2)}const Wte=MV({attachResizeListener:(n,e)=>Zo(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),uS={current:void 0},CV=MV({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!uS.current){const n=new Wte({});n.mount(window),n.setOptions({layoutScroll:!0}),uS.current=n}return uS.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),jte={pan:{Feature:ate},drag:{Feature:ote,ProjectionNode:CV,MeasureLayout:xV}},Xte=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function Jte(n){const e=Xte.exec(n);if(!e)return[,];const[,t,i]=e;return[t,i]}function Iw(n,e,t=1){const[i,r]=Jte(n);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const o=s.trim();return cV(o)?parseFloat(o):o}else return xw(r)?Iw(r,e,t+1):r}function Kte(n,{...e},t){const i=n.current;if(!(i instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),n.values.forEach(r=>{const s=r.get();if(!xw(s))return;const o=Iw(s,i);o&&r.set(o)});for(const r in e){const s=e[r];if(!xw(s))continue;const o=Iw(s,i);o&&(e[r]=o,t||(t={}),t[r]===void 0&&(t[r]=s))}return{target:e,transitionEnd:t}}const $te=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),RV=n=>$te.has(n),Yte=n=>Object.keys(n).some(RV),GL=n=>n===nu||n===mt,HL=(n,e)=>parseFloat(n.split(", ")[e]),WL=(n,e)=>(t,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/);if(r)return HL(r[1],e);{const s=i.match(/^matrix\((.+)\)$/);return s?HL(s[1],n):0}},qte=new Set(["x","y","z"]),Qte=Rm.filter(n=>!qte.has(n));function Zte(n){const e=[];return Qte.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e.length&&n.render(),e}const tf={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:WL(4,13),y:WL(5,14)};tf.translateX=tf.x;tf.translateY=tf.y;const ene=(n,e,t)=>{const i=e.measureViewportBox(),r=e.current,s=getComputedStyle(r),{display:o}=s,a={};o==="none"&&e.setStaticValue("display",n.display||"block"),t.forEach(c=>{a[c]=tf[c](i,s)}),e.render();const l=e.measureViewportBox();return t.forEach(c=>{const h=e.getValue(c);h&&h.jump(a[c]),n[c]=tf[c](l,s)}),n},tne=(n,e,t={},i={})=>{e={...e},i={...i};const r=Object.keys(e).filter(RV);let s=[],o=!1;const a=[];if(r.forEach(l=>{const c=n.getValue(l);if(!n.hasValue(l))return;let h=t[l],d=vd(h);const p=e[l];let m;if(Ev(p)){const y=p.length,x=p[0]===null?1:0;h=p[x],d=vd(h);for(let _=x;_<y&&p[_]!==null;_++)m?FC(vd(p[_])===m):m=vd(p[_])}else m=vd(p);if(d!==m)if(GL(d)&&GL(m)){const y=c.get();typeof y=="string"&&c.set(parseFloat(y)),typeof p=="string"?e[l]=parseFloat(p):Array.isArray(p)&&m===mt&&(e[l]=p.map(parseFloat))}else d!=null&&d.transform&&(m!=null&&m.transform)&&(h===0||p===0)?h===0?c.set(m.transform(h)):e[l]=d.transform(p):(o||(s=Zte(n),o=!0),a.push(l),i[l]=i[l]!==void 0?i[l]:e[l],c.jump(p))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,c=ene(e,n,a);return s.length&&s.forEach(([h,d])=>{n.getValue(h).set(d)}),n.render(),k_&&l!==null&&window.scrollTo({top:l}),{target:c,transitionEnd:i}}else return{target:e,transitionEnd:i}};function nne(n,e,t,i){return Yte(e)?tne(n,e,t,i):{target:e,transitionEnd:i}}const ine=(n,e,t,i)=>{const r=Kte(n,e,i);return e=r.target,i=r.transitionEnd,nne(n,e,t,i)},Dw={current:null},bV={current:!1};function rne(){if(bV.current=!0,!!k_)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>Dw.current=n.matches;n.addListener(e),e()}else Dw.current=!1}function sne(n,e,t){const{willChange:i}=e;for(const r in e){const s=e[r],o=t[r];if(Ir(s))n.addValue(r,s),Cv(i)&&i.add(r);else if(Ir(o))n.addValue(r,ef(s,{owner:n})),Cv(i)&&i.remove(r);else if(o!==s)if(n.hasValue(r)){const a=n.getValue(r);!a.hasAnimated&&a.set(s)}else{const a=n.getStaticValue(r);n.addValue(r,ef(a!==void 0?a:s,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const jL=new WeakMap,PV=Object.keys(kp),one=PV.length,XL=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],ane=RC.length;class lne{constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:r,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>bn.render(this.render,!1,!0);const{latestValues:a,renderState:l}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=t.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.isControllingVariants=z_(t),this.isVariantNode=p4(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...h}=this.scrapeMotionValuesFromProps(t,{});for(const d in h){const p=h[d];a[d]!==void 0&&Ir(p)&&(p.set(a[d],!1),Cv(c)&&c.add(d))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,jL.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),bV.current||rne(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Dw.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){jL.delete(this.current),this.projection&&this.projection.unmount(),ha(this.notifyUpdate),ha(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const i=tu.has(e),r=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&bn.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},i,r,s){let o,a;for(let l=0;l<one;l++){const c=PV[l],{isEnabled:h,Feature:d,ProjectionNode:p,MeasureLayout:m}=kp[c];p&&(o=p),h(t)&&(!this.features[c]&&d&&(this.features[c]=new d(this)),m&&(a=m))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:c,drag:h,dragConstraints:d,layoutScroll:p,layoutRoot:m}=t;this.projection.setOptions({layoutId:l,layout:c,alwaysMeasureLayout:!!h||d&&gh(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:s,layoutScroll:p,layoutRoot:m})}return a}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Hn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<XL.length;i++){const r=XL[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s=e["on"+r];s&&(this.propEventSubscriptions[r]=this.on(r,s))}this.prevMotionValues=sne(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const t={};for(let i=0;i<ane;i++){const r=RC[i],s=this.props[r];(Up(s)||s===!1)&&(t[r]=s)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=ef(t,{owner:this}),this.addValue(e,i)),i}readValue(e){var t;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(t=this.getBaseTargetFromProps(this.props,e))!==null&&t!==void 0?t:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:i}=this.props,r=typeof i=="string"||typeof i=="object"?(t=NC(this.props,i))===null||t===void 0?void 0:t[e]:void 0;if(i&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Ir(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new jC),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class IV extends lne{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...i},r){const s=Mee(i,e||{},this);if(r){Eee(this,i,s);const o=ine(this,i,s,t);t=o.transitionEnd,i=o.target}return{transition:e,transitionEnd:t,...i}}}function cne(n){return window.getComputedStyle(n)}class une extends IV{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(tu.has(t)){const i=VC(t);return i&&i.default||0}else{const i=cne(e),r=(_4(t)?i.getPropertyValue(t):i[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return vV(e,t)}build(e,t,i,r){PC(e,t,i,r.transformTemplate)}scrapeMotionValuesFromProps(e,t){return BC(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ir(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,i,r){M4(e,t,i,r)}}class hne extends IV{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(tu.has(t)){const i=VC(t);return i&&i.default||0}return t=T4.has(t)?t:MC(t),e.getAttribute(t)}measureInstanceViewportBox(){return Hn()}scrapeMotionValuesFromProps(e,t){return R4(e,t)}build(e,t,i,r){DC(e,t,i,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,i,r){C4(e,t,i,r)}mount(e){this.isSVGTag=LC(e.tagName),super.mount(e)}}const fne=(n,e)=>bC(n)?new hne(e,{enableHardwareAcceleration:!1}):new une(e,{enableHardwareAcceleration:!0}),dne={layout:{ProjectionNode:CV,MeasureLayout:xV}},pne={...Vee,...oZ,...jte,...dne},ci=yQ((n,e)=>JQ(n,e,pne,fne)),Jn={paddingX:"sm:px-16 px-6",paddingY:"sm:py-16 py-6",padding:"sm:px-16 px-6 sm:py-16 py-10",heroHeadText:"font-black text-white lg:text-[80px] sm:text-[60px] xs:text-[50px] text-[40px] lg:leading-[98px] mt-2",heroSubText:"text-[#dfd9ff] font-medium lg:text-[30px] sm:text-[26px] xs:text-[20px] text-[16px] lg:leading-[40px]",sectionHeadText:"text-white font-black md:text-[60px] sm:text-[50px] xs:text-[40px] text-[30px]",sectionSubText:"sm:text-[18px] text-[14px] text-secondary uppercase tracking-wider"},mne=()=>Y.jsxs("section",{className:"relative w-full h-screen mx-auto",children:[Y.jsxs("div",{className:`${Jn.paddingX} absolute inset-0 top-[120px] max-w-7xl mx-auto flex flex-row items-start gap-5`,children:[Y.jsxs("div",{className:"flex flex-col justify-center items-center mt-5",children:[Y.jsx("div",{className:"w-5 h-5 rounded-full bg-[#915eff]"}),Y.jsx("div",{className:"w-1 sm:h-80 h-40 violet-gradient"})]}),Y.jsxs("div",{children:[Y.jsxs("h1",{className:`${Jn.heroHeadText}`,children:["Hola, soy ",Y.jsx("span",{className:"text-[#915eff]",children:"Daniel"})]}),Y.jsxs("p",{className:`${Jn.heroSubText} mt-2 text-white-100`,children:["Llevo tus ideas a la realidad, impulsando ",Y.jsx("br",{className:"sm:block hidden"})," ","tu negocio y acercándote a tus objetivos."]})]})]}),Y.jsx(bq,{}),Y.jsx("div",{className:"absolute xs:bottom-10 bottom-32 w-full flex justify-center items-center",children:Y.jsx("a",{href:"#conóceme",children:Y.jsx("div",{className:"w-[35px] h-[64px] rounded-3xl border-4 border-secondary flex justify-center items-start p-2 ",children:Y.jsx(ci.div,{animate:{y:[0,24,0]},transition:{duration:2,repeat:1/0,repeatType:"loop"},className:"w-3 h-3 rounded-full bg-secondary mb-1"})})})})]}),ml=n=>({hidden:{y:-50,opacity:0},show:{y:0,opacity:1,transition:{type:"spring",duration:1,delay:n}}}),j_=(n,e,t,i)=>({hidden:{x:n==="left"?100:n==="right"?-100:0,y:n==="up"?100:n==="down"?-100:0,opacity:0},show:{x:0,y:0,opacity:1,transition:{type:e,delay:t,duration:i,ease:"easeOut"}}}),JL=(n,e,t,i)=>({hidden:{x:n==="left"?"-100%":n==="right"?"100%":0,y:n==="up"||n==="down"?"100%":0},show:{x:0,y:0,transition:{type:e,delay:t,duration:i,ease:"easeOut"}}}),gne="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='500'%20zoomAndPan='magnify'%20viewBox='0%200%20375%20374.999991'%20height='500'%20preserveAspectRatio='xMidYMid%20meet'%20version='1.0'%3e%3cdefs%3e%3cclipPath%20id='2db2ba7d47'%3e%3cpath%20d='M%2095.050781%2089.417969%20L%20291.550781%2089.417969%20L%20291.550781%20285.917969%20L%2095.050781%20285.917969%20Z%20M%2095.050781%2089.417969%20'%20clip-rule='nonzero'/%3e%3c/clipPath%3e%3cclipPath%20id='6c4393f8ca'%3e%3cpath%20d='M%2095.050781%20113%20L%20120%20113%20L%20120%20139%20L%2095.050781%20139%20Z%20M%2095.050781%20113%20'%20clip-rule='nonzero'/%3e%3c/clipPath%3e%3cclipPath%20id='e1b926373b'%3e%3cpath%20d='M%2095.050781%20236%20L%20120%20236%20L%20120%20261%20L%2095.050781%20261%20Z%20M%2095.050781%20236%20'%20clip-rule='nonzero'/%3e%3c/clipPath%3e%3c/defs%3e%3crect%20x='-37.5'%20width='450'%20fill='%23ffffff'%20y='-37.499999'%20height='449.999989'%20fill-opacity='1'/%3e%3crect%20x='-37.5'%20width='450'%20fill='%2341c1ba'%20y='-37.499999'%20height='449.999989'%20fill-opacity='1'/%3e%3cpath%20fill='%23ffffff'%20d='M%20193.074219%20236.476562%20L%20119.523438%20236.476562%20L%20119.523438%20211.960938%20L%20193.074219%20211.960938%20C%20206.613281%20211.960938%20217.59375%20200.980469%20217.59375%20187.441406%20C%20217.59375%20173.902344%20206.613281%20162.921875%20193.074219%20162.921875%20L%20119.523438%20162.921875%20L%20119.523438%20138.40625%20L%20193.074219%20138.40625%20C%20220.152344%20138.40625%20242.109375%20160.363281%20242.109375%20187.441406%20C%20242.109375%20214.519531%20220.152344%20236.476562%20193.074219%20236.476562%20'%20fill-opacity='1'%20fill-rule='nonzero'/%3e%3cpath%20fill='%23f4f6fc'%20d='M%20144.039062%20260.996094%20L%20119.523438%20236.476562%20L%20144.039062%20236.476562%20L%20144.039062%20260.996094%20'%20fill-opacity='1'%20fill-rule='nonzero'/%3e%3cpath%20fill='%23f4f6fc'%20d='M%20144.039062%20138.40625%20L%20119.523438%20138.40625%20L%20144.039062%20113.886719%20L%20144.039062%20138.40625%20'%20fill-opacity='1'%20fill-rule='nonzero'/%3e%3cg%20clip-path='url(%232db2ba7d47)'%3e%3cpath%20fill='%23ffffff'%20d='M%20193.074219%20285.511719%20L%2095.003906%20285.511719%20L%2095.003906%20260.996094%20L%20193.074219%20260.996094%20C%20233.691406%20260.996094%20266.632812%20228.058594%20266.632812%20187.441406%20C%20266.632812%20146.824219%20233.691406%20113.886719%20193.074219%20113.886719%20L%2095.003906%20113.886719%20L%2095.003906%2089.371094%20L%20193.074219%2089.371094%20C%20247.234375%2089.371094%20291.148438%20133.285156%20291.148438%20187.441406%20C%20291.148438%20241.597656%20247.234375%20285.511719%20193.074219%20285.511719%20'%20fill-opacity='1'%20fill-rule='nonzero'/%3e%3c/g%3e%3cg%20clip-path='url(%236c4393f8ca)'%3e%3cpath%20fill='%23f4f6fc'%20d='M%20119.523438%20138.40625%20L%2095.003906%20113.886719%20L%20119.523438%20113.886719%20L%20119.523438%20138.40625%20'%20fill-opacity='1'%20fill-rule='nonzero'/%3e%3c/g%3e%3cg%20clip-path='url(%23e1b926373b)'%3e%3cpath%20fill='%23f4f6fc'%20d='M%20119.523438%20260.996094%20L%2095.003906%20260.996094%20L%20119.523438%20236.476562%20L%20119.523438%20260.996094%20'%20fill-opacity='1'%20fill-rule='nonzero'/%3e%3c/g%3e%3c/svg%3e",yne="/assets/youtube-FWEj1Kd4.png",vne="data:image/svg+xml,%3csvg%20width='20'%20height='12'%20viewBox='0%200%2020%2012'%20fill='%23FFF'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9%202L19%202C19.2652%202%2019.5196%201.89464%2019.7071%201.70711C19.8946%201.51957%2020%201.26522%2020%201C20%200.734784%2019.8946%200.480429%2019.7071%200.292892C19.5196%200.105356%2019.2652%200%2019%200L9%200C8.73478%200%208.48043%200.105356%208.29289%200.292892C8.10536%200.480429%208%200.734784%208%201C8%201.26522%208.10536%201.51957%208.29289%201.70711C8.48043%201.89464%208.73478%202%209%202ZM19%2010L1%2010C0.734784%2010%200.480429%2010.1054%200.292892%2010.2929C0.105356%2010.4804%200%2010.7348%200%2011C0%2011.2652%200.105356%2011.5196%200.292892%2011.7071C0.480429%2011.8946%200.734784%2012%201%2012L19%2012C19.2652%2012%2019.5196%2011.8946%2019.7071%2011.7071C19.8946%2011.5196%2020%2011.2652%2020%2011C20%2010.7348%2019.8946%2010.4804%2019.7071%2010.2929C19.5196%2010.1054%2019.2652%2010%2019%2010V10ZM1%207L19%207C19.2652%207%2019.5196%206.89464%2019.7071%206.70711C19.8946%206.51957%2020%206.26522%2020%206C20%205.73478%2019.8946%205.48043%2019.7071%205.29289C19.5196%205.10536%2019.2652%205%2019%205L1%205C0.734784%205%200.480429%205.10536%200.292892%205.29289C0.105356%205.48043%200%205.73478%200%206C0%206.26522%200.105356%206.51957%200.292892%206.70711C0.480429%206.89464%200.734784%207%201%207Z'%20fill='%23FFFFFF'/%3e%3c/svg%3e",_ne="data:image/svg+xml,%3csvg%20width='18'%20height='18'%20viewBox='0%200%2018%2018'%20fill='%23FFF'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M10.4099%209L16.7099%202.71C16.8982%202.5217%2017.004%202.2663%2017.004%202C17.004%201.7337%2016.8982%201.47831%2016.7099%201.29C16.5216%201.1017%2016.2662%200.995911%2015.9999%200.995911C15.7336%200.995911%2015.4782%201.1017%2015.2899%201.29L8.99994%207.59L2.70994%201.29C2.52164%201.1017%202.26624%200.995911%201.99994%200.995911C1.73364%200.995911%201.47824%201.1017%201.28994%201.29C1.10164%201.47831%200.995847%201.7337%200.995847%202C0.995847%202.2663%201.10164%202.5217%201.28994%202.71L7.58994%209L1.28994%2015.29C1.19621%2015.383%201.12182%2015.4936%201.07105%2015.6154C1.02028%2015.7373%200.994141%2015.868%200.994141%2016C0.994141%2016.132%201.02028%2016.2627%201.07105%2016.3846C1.12182%2016.5064%201.19621%2016.617%201.28994%2016.71C1.3829%2016.8037%201.4935%2016.8781%201.61536%2016.9289C1.73722%2016.9797%201.86793%2017.0058%201.99994%2017.0058C2.13195%2017.0058%202.26266%2016.9797%202.38452%2016.9289C2.50638%2016.8781%202.61698%2016.8037%202.70994%2016.71L8.99994%2010.41L15.2899%2016.71C15.3829%2016.8037%2015.4935%2016.8781%2015.6154%2016.9289C15.7372%2016.9797%2015.8679%2017.0058%2015.9999%2017.0058C16.132%2017.0058%2016.2627%2016.9797%2016.3845%2016.9289C16.5064%2016.8781%2016.617%2016.8037%2016.7099%2016.71C16.8037%2016.617%2016.8781%2016.5064%2016.9288%2016.3846C16.9796%2016.2627%2017.0057%2016.132%2017.0057%2016C17.0057%2015.868%2016.9796%2015.7373%2016.9288%2015.6154C16.8781%2015.4936%2016.8037%2015.383%2016.7099%2015.29L10.4099%209Z'%20fill='%23FFFFFF'/%3e%3c/svg%3e",xne="/assets/banda_sonora-metTGgwJ.png",Ane="/assets/doblaje_adr-uwvC5A63.png",Sne="/assets/grabación_multitrack-3QIRMI0K.png",Ene="/assets/sonido_directo-GrgwR6Iw.png",wne="/assets/geezy--L48lsIv.jpg",Mne="/assets/unitec-J1KqQdRC.png",Tne="/assets/perfil-dGRRyebm.jpeg",KL=[{id:"conóceme",title:"Conóceme"},{id:"proyectos",title:"Proyectos"},{id:"experiencia",title:"Experiencia"},{id:"contacto",title:"Contacto"}],Cne=[{title:"Grabación en Estudio Multitrack",icon:Sne},{title:"Sonido Directo y Postproducción",icon:Ene},{title:"Diseño de banda sonora",icon:xne},{title:"Doblaje y ADR",icon:Ane}],Rne=[{title:"Productor Musical",company_name:"Geezy Music",icon:wne,iconBg:"#383E56",date:"Septiembre 2019 - Diciembre 2022",points:["Colaborar con productores musicales nacionales llevando a cabo el manejo de multitracks y stems para crear canciones con el estándar de calidad.","Producir canciones originales a artistas locales, desde la planeación, grabación, mezcla y masterización.","Componer y producir música instrumental o beats usando Ableton Live 10, para plataformas como Youtube y Beatstars."]},{title:"Estudiante de Tecnología en Producción de Sonido",company_name:"CORPORACIÓN UNIVERSITARIA UNITEC",icon:Mne,iconBg:"#383E56",date:"Septiembre 2021 - Presente",points:["Desarrollar la identidad sonora de una empresa local a través de la creación de dos cuñas radiales, un Jingle y un audio logo.","Grabar el sonido directo para más de seis proyectos audiovisuales, como microfonista, sonidista y director de sonido.","Realizar doblaje y ADR para documentales y cortos animados.","Diseñar y mezclar la banda sonora para cortometrajes, documentales y miniseries."]}],bne=[{testimonial:"I thought it was impossible to make a website as beautiful as our product, but Rick proved me wrong.",name:"Sara Lee",designation:"CFO",company:"Acme Co",image:"https://randomuser.me/api/portraits/women/4.jpg"},{testimonial:"I've never met a web developer who truly cares about their clients' success like Rick does.",name:"Chris Brown",designation:"COO",company:"DEF Corp",image:"https://randomuser.me/api/portraits/men/5.jpg"},{testimonial:"After Rick optimized our website, our traffic increased by 50%. We can't thank them enough!",name:"Lisa Wang",designation:"CTO",company:"456 Enterprises",image:"https://randomuser.me/api/portraits/women/6.jpg"}];var $L={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DV=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},Pne=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=n[t++],o=n[t++],a=n[t++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],o=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},LV={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const s=n[r],o=r+1<n.length,a=o?n[r+1]:0,l=r+2<n.length,c=l?n[r+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),i.push(t[h],t[d],t[p],t[m])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(DV(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Pne(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const s=t[n.charAt(r++)],a=r<n.length?t[n.charAt(r)]:0;++r;const c=r<n.length?t[n.charAt(r)]:64;++r;const d=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||a==null||c==null||d==null)throw new Ine;const p=s<<2|a>>4;if(i.push(p),c!==64){const m=a<<4&240|c>>2;if(i.push(m),d!==64){const y=c<<6&192|d;i.push(y)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Ine extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Dne=function(n){const e=DV(n);return LV.encodeByteArray(e,!0)},bv=function(n){return Dne(n).replace(/\./g,"")},Lne=function(n){try{return LV.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bne(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nne=()=>Bne().__FIREBASE_DEFAULTS__,Fne=()=>{if(typeof process>"u"||typeof $L>"u")return;const n=$L.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},One=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Lne(n[1]);return e&&JSON.parse(e)},XC=()=>{try{return Nne()||Fne()||One()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Une=n=>{var e,t;return(t=(e=XC())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},kne=n=>{const e=Une(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},BV=()=>{var n;return(n=XC())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vne{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zne(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[bv(JSON.stringify(t)),bv(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pv(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Gne(){var n;const e=(n=XC())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Hne(){return!Gne()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function NV(){try{return typeof indexedDB=="object"}catch{return!1}}function Wne(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jne="FirebaseError";class _f extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=jne,Object.setPrototypeOf(this,_f.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,FV.prototype.create)}}class FV{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?Xne(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new _f(r,a,i)}}function Xne(n,e){return n.replace(Jne,(t,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const Jne=/\{\$([^}]+)}/g;function Lw(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const s=n[r],o=e[r];if(YL(s)&&YL(o)){if(!Lw(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function YL(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kne(n){return n&&n._delegate?n._delegate:n}class zp{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ne{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Vne;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qne(e))try{this.getOrInitializeService({instanceIdentifier:sc})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=sc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=sc){return this.instances.has(e)}getOptions(e=sc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,t){var i;const r=this.normalizeInstanceIdentifier(t),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Yne(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=sc){return this.component?this.component.multipleInstances?e:sc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Yne(n){return n===sc?void 0:n}function qne(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qne{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new $ne(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Kt||(Kt={}));const Zne={debug:Kt.DEBUG,verbose:Kt.VERBOSE,info:Kt.INFO,warn:Kt.WARN,error:Kt.ERROR,silent:Kt.SILENT},eie=Kt.INFO,tie={[Kt.DEBUG]:"log",[Kt.VERBOSE]:"log",[Kt.INFO]:"info",[Kt.WARN]:"warn",[Kt.ERROR]:"error"},nie=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),r=tie[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class OV{constructor(e){this.name=e,this._logLevel=eie,this._logHandler=nie,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Kt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Zne[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Kt.DEBUG,...e),this._logHandler(this,Kt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Kt.VERBOSE,...e),this._logHandler(this,Kt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Kt.INFO,...e),this._logHandler(this,Kt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Kt.WARN,...e),this._logHandler(this,Kt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Kt.ERROR,...e),this._logHandler(this,Kt.ERROR,...e)}}const iie=(n,e)=>e.some(t=>n instanceof t);let qL,QL;function rie(){return qL||(qL=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sie(){return QL||(QL=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const UV=new WeakMap,Bw=new WeakMap,kV=new WeakMap,hS=new WeakMap,JC=new WeakMap;function oie(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(rl(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&UV.set(t,n)}).catch(()=>{}),JC.set(e,n),e}function aie(n){if(Bw.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Bw.set(n,e)}let Nw={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Bw.get(n);if(e==="objectStoreNames")return n.objectStoreNames||kV.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return rl(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function lie(n){Nw=n(Nw)}function cie(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(fS(this),e,...t);return kV.set(i,e.sort?e.sort():[e]),rl(i)}:sie().includes(n)?function(...e){return n.apply(fS(this),e),rl(UV.get(this))}:function(...e){return rl(n.apply(fS(this),e))}}function uie(n){return typeof n=="function"?cie(n):(n instanceof IDBTransaction&&aie(n),iie(n,rie())?new Proxy(n,Nw):n)}function rl(n){if(n instanceof IDBRequest)return oie(n);if(hS.has(n))return hS.get(n);const e=uie(n);return e!==n&&(hS.set(n,e),JC.set(e,n)),e}const fS=n=>JC.get(n);function hie(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(n,e),a=rl(o);return i&&o.addEventListener("upgradeneeded",l=>{i(rl(o.result),l.oldVersion,l.newVersion,rl(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const fie=["get","getKey","getAll","getAllKeys","count"],die=["put","add","delete","clear"],dS=new Map;function ZL(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(dS.get(e))return dS.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=die.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||fie.includes(t)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),r&&l.done]))[0]};return dS.set(e,s),s}lie(n=>({...n,get:(e,t,i)=>ZL(e,t)||n.get(e,t,i),has:(e,t)=>!!ZL(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pie{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(mie(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function mie(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Fw="@firebase/app",eB="0.9.26";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc=new OV("@firebase/app"),gie="@firebase/app-compat",yie="@firebase/analytics-compat",vie="@firebase/analytics",_ie="@firebase/app-check-compat",xie="@firebase/app-check",Aie="@firebase/auth",Sie="@firebase/auth-compat",Eie="@firebase/database",wie="@firebase/database-compat",Mie="@firebase/functions",Tie="@firebase/functions-compat",Cie="@firebase/installations",Rie="@firebase/installations-compat",bie="@firebase/messaging",Pie="@firebase/messaging-compat",Iie="@firebase/performance",Die="@firebase/performance-compat",Lie="@firebase/remote-config",Bie="@firebase/remote-config-compat",Nie="@firebase/storage",Fie="@firebase/storage-compat",Oie="@firebase/firestore",Uie="@firebase/firestore-compat",kie="firebase",Vie="10.7.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow="[DEFAULT]",zie={[Fw]:"fire-core",[gie]:"fire-core-compat",[vie]:"fire-analytics",[yie]:"fire-analytics-compat",[xie]:"fire-app-check",[_ie]:"fire-app-check-compat",[Aie]:"fire-auth",[Sie]:"fire-auth-compat",[Eie]:"fire-rtdb",[wie]:"fire-rtdb-compat",[Mie]:"fire-fn",[Tie]:"fire-fn-compat",[Cie]:"fire-iid",[Rie]:"fire-iid-compat",[bie]:"fire-fcm",[Pie]:"fire-fcm-compat",[Iie]:"fire-perf",[Die]:"fire-perf-compat",[Lie]:"fire-rc",[Bie]:"fire-rc-compat",[Nie]:"fire-gcs",[Fie]:"fire-gcs-compat",[Oie]:"fire-fst",[Uie]:"fire-fst-compat","fire-js":"fire-js",[kie]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv=new Map,Uw=new Map;function Gie(n,e){try{n.container.addComponent(e)}catch(t){Hc.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Dv(n){const e=n.name;if(Uw.has(e))return Hc.debug(`There were multiple attempts to register component ${e}.`),!1;Uw.set(e,n);for(const t of Iv.values())Gie(t,n);return!0}function Hie(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wie={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},sl=new FV("app","Firebase",Wie);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jie{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new zp("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw sl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xie=Vie;function VV(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Ow,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw sl.create("bad-app-name",{appName:String(r)});if(t||(t=BV()),!t)throw sl.create("no-options");const s=Iv.get(r);if(s){if(Lw(t,s.options)&&Lw(i,s.config))return s;throw sl.create("duplicate-app",{appName:r})}const o=new Qne(r);for(const l of Uw.values())o.addComponent(l);const a=new jie(t,i,o);return Iv.set(r,a),a}function Jie(n=Ow){const e=Iv.get(n);if(!e&&n===Ow&&BV())return VV();if(!e)throw sl.create("no-app",{appName:n});return e}function Ph(n,e,t){var i;let r=(i=zie[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hc.warn(a.join(" "));return}Dv(new zp(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kie="firebase-heartbeat-database",$ie=1,Gp="firebase-heartbeat-store";let pS=null;function zV(){return pS||(pS=hie(Kie,$ie,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Gp)}catch(t){console.warn(t)}}}}).catch(n=>{throw sl.create("idb-open",{originalErrorMessage:n.message})})),pS}async function Yie(n){try{return await(await zV()).transaction(Gp).objectStore(Gp).get(GV(n))}catch(e){if(e instanceof _f)Hc.warn(e.message);else{const t=sl.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Hc.warn(t.message)}}}async function tB(n,e){try{const i=(await zV()).transaction(Gp,"readwrite");await i.objectStore(Gp).put(e,GV(n)),await i.done}catch(t){if(t instanceof _f)Hc.warn(t.message);else{const i=sl.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Hc.warn(i.message)}}}function GV(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qie=1024,Qie=30*24*60*60*1e3;class Zie{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new tre(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=nB();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Qie}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=nB(),{heartbeatsToSend:i,unsentEntries:r}=ere(this._heartbeatsCache.heartbeats),s=bv(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function nB(){return new Date().toISOString().substring(0,10)}function ere(n,e=qie){const t=[];let i=n.slice();for(const r of n){const s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),iB(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),iB(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class tre{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return NV()?Wne().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Yie(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return tB(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return tB(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function iB(n){return bv(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nre(n){Dv(new zp("platform-logger",e=>new pie(e),"PRIVATE")),Dv(new zp("heartbeat",e=>new Zie(e),"PRIVATE")),Ph(Fw,eB,n),Ph(Fw,eB,"esm2017"),Ph("fire-js","")}nre("");var ire="firebase",rre="10.7.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ph(ire,rre,"app");var sre=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ve,KC=KC||{},Et=sre||self;function X_(n){var e=typeof n;return e=e!="object"?e:n?Array.isArray(n)?"array":e:"null",e=="array"||e=="object"&&typeof n.length=="number"}function Dm(n){var e=typeof n;return e=="object"&&n!=null||e=="function"}function ore(n){return Object.prototype.hasOwnProperty.call(n,mS)&&n[mS]||(n[mS]=++are)}var mS="closure_uid_"+(1e9*Math.random()>>>0),are=0;function lre(n,e,t){return n.call.apply(n.bind,arguments)}function cre(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(e,r)}}return function(){return n.apply(e,arguments)}}function Zi(n,e,t){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Zi=lre:Zi=cre,Zi.apply(null,arguments)}function iy(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function Ei(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(i,r,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[r].apply(i,o)}}function Cl(){this.s=this.s,this.o=this.o}var ure=0;Cl.prototype.s=!1;Cl.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),ure!=0)&&ore(this)};Cl.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const HV=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if(typeof n=="string")return typeof e!="string"||e.length!=1?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function $C(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function rB(n,e){for(let t=1;t<arguments.length;t++){const i=arguments[t];if(X_(i)){const r=n.length||0,s=i.length||0;n.length=r+s;for(let o=0;o<s;o++)n[r+o]=i[o]}else n.push(i)}}function er(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}er.prototype.h=function(){this.defaultPrevented=!0};var hre=function(){if(!Et.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{const t=()=>{};Et.addEventListener("test",t,e),Et.removeEventListener("test",t,e)}catch{}return n}();function Hp(n){return/^[\s\xa0]*$/.test(n)}function J_(){var n=Et.navigator;return n&&(n=n.userAgent)?n:""}function co(n){return J_().indexOf(n)!=-1}function YC(n){return YC[" "](n),n}YC[" "]=function(){};function fre(n,e){var t=rse;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}var dre=co("Opera"),nf=co("Trident")||co("MSIE"),WV=co("Edge"),kw=WV||nf,jV=co("Gecko")&&!(J_().toLowerCase().indexOf("webkit")!=-1&&!co("Edge"))&&!(co("Trident")||co("MSIE"))&&!co("Edge"),pre=J_().toLowerCase().indexOf("webkit")!=-1&&!co("Edge");function XV(){var n=Et.document;return n?n.documentMode:void 0}var Vw;e:{var gS="",yS=function(){var n=J_();if(jV)return/rv:([^\);]+)(\)|;)/.exec(n);if(WV)return/Edge\/([\d\.]+)/.exec(n);if(nf)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n);if(pre)return/WebKit\/(\S+)/.exec(n);if(dre)return/(?:Version)[ \/]?(\S+)/.exec(n)}();if(yS&&(gS=yS?yS[1]:""),nf){var vS=XV();if(vS!=null&&vS>parseFloat(gS)){Vw=String(vS);break e}}Vw=gS}var zw;if(Et.document&&nf){var sB=XV();zw=sB||parseInt(Vw,10)||void 0}else zw=void 0;var mre=zw;function Wp(n,e){if(er.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(jV){e:{try{YC(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else t=="mouseover"?e=n.fromElement:t=="mouseout"&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType=typeof n.pointerType=="string"?n.pointerType:gre[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Wp.$.h.call(this)}}Ei(Wp,er);var gre={2:"touch",3:"pen",4:"mouse"};Wp.prototype.h=function(){Wp.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Lm="closure_listenable_"+(1e6*Math.random()|0),yre=0;function vre(n,e,t,i,r){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.la=r,this.key=++yre,this.fa=this.ia=!1}function K_(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function qC(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function _re(n,e){for(const t in n)e.call(void 0,n[t],t,n)}function JV(n){const e={};for(const t in n)e[t]=n[t];return e}const oB="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function KV(n,e){let t,i;for(let r=1;r<arguments.length;r++){i=arguments[r];for(t in i)n[t]=i[t];for(let s=0;s<oB.length;s++)t=oB[s],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function $_(n){this.src=n,this.g={},this.h=0}$_.prototype.add=function(n,e,t,i,r){var s=n.toString();n=this.g[s],n||(n=this.g[s]=[],this.h++);var o=Hw(n,e,i,r);return-1<o?(e=n[o],t||(e.ia=!1)):(e=new vre(e,this.src,s,!!i,r),e.ia=t,n.push(e)),e};function Gw(n,e){var t=e.type;if(t in n.g){var i=n.g[t],r=HV(i,e),s;(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(K_(e),n.g[t].length==0&&(delete n.g[t],n.h--))}}function Hw(n,e,t,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==i)return r}return-1}var QC="closure_lm_"+(1e6*Math.random()|0),_S={};function $V(n,e,t,i,r){if(i&&i.once)return qV(n,e,t,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)$V(n,e[s],t,i,r);return null}return t=t2(t),n&&n[Lm]?n.O(e,t,Dm(i)?!!i.capture:!!i,r):YV(n,e,t,!1,i,r)}function YV(n,e,t,i,r,s){if(!e)throw Error("Invalid event type");var o=Dm(r)?!!r.capture:!!r,a=e2(n);if(a||(n[QC]=a=new $_(n)),t=a.add(e,t,i,o,s),t.proxy)return t;if(i=xre(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)hre||(r=o),r===void 0&&(r=!1),n.addEventListener(e.toString(),i,r);else if(n.attachEvent)n.attachEvent(ZV(e.toString()),i);else if(n.addListener&&n.removeListener)n.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return t}function xre(){function n(t){return e.call(n.src,n.listener,t)}const e=Are;return n}function qV(n,e,t,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)qV(n,e[s],t,i,r);return null}return t=t2(t),n&&n[Lm]?n.P(e,t,Dm(i)?!!i.capture:!!i,r):YV(n,e,t,!0,i,r)}function QV(n,e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)QV(n,e[s],t,i,r);else i=Dm(i)?!!i.capture:!!i,t=t2(t),n&&n[Lm]?(n=n.i,e=String(e).toString(),e in n.g&&(s=n.g[e],t=Hw(s,t,i,r),-1<t&&(K_(s[t]),Array.prototype.splice.call(s,t,1),s.length==0&&(delete n.g[e],n.h--)))):n&&(n=e2(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Hw(e,t,i,r)),(t=-1<n?e[n]:null)&&ZC(t))}function ZC(n){if(typeof n!="number"&&n&&!n.fa){var e=n.src;if(e&&e[Lm])Gw(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(ZV(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=e2(e))?(Gw(t,n),t.h==0&&(t.src=null,e[QC]=null)):K_(n)}}}function ZV(n){return n in _S?_S[n]:_S[n]="on"+n}function Are(n,e){if(n.fa)n=!0;else{e=new Wp(e,this);var t=n.listener,i=n.la||n.src;n.ia&&ZC(n),n=t.call(i,e)}return n}function e2(n){return n=n[QC],n instanceof $_?n:null}var xS="__closure_events_fn_"+(1e9*Math.random()>>>0);function t2(n){return typeof n=="function"?n:(n[xS]||(n[xS]=function(e){return n.handleEvent(e)}),n[xS])}function Si(){Cl.call(this),this.i=new $_(this),this.S=this,this.J=null}Ei(Si,Cl);Si.prototype[Lm]=!0;Si.prototype.removeEventListener=function(n,e,t,i){QV(this,n,e,t,i)};function Ni(n,e){var t,i=n.J;if(i)for(t=[];i;i=i.J)t.push(i);if(n=n.S,i=e.type||e,typeof e=="string")e=new er(e,n);else if(e instanceof er)e.target=e.target||n;else{var r=e;e=new er(i,n),KV(e,r)}if(r=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];r=ry(o,i,!0,e)&&r}if(o=e.g=n,r=ry(o,i,!0,e)&&r,r=ry(o,i,!1,e)&&r,t)for(s=0;s<t.length;s++)o=e.g=t[s],r=ry(o,i,!1,e)&&r}Si.prototype.N=function(){if(Si.$.N.call(this),this.i){var n=this.i,e;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)K_(t[i]);delete n.g[e],n.h--}}this.J=null};Si.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)};Si.prototype.P=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};function ry(n,e,t,i){if(e=n.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==t){var a=o.listener,l=o.la||o.src;o.ia&&Gw(n.i,o),r=a.call(l,i)!==!1&&r}}return r&&!i.defaultPrevented}var n2=Et.JSON.stringify;class Sre{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function Ere(){var n=i2;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}class wre{constructor(){this.h=this.g=null}add(e,t){const i=e9.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}}var e9=new Sre(()=>new Mre,n=>n.reset());class Mre{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Tre(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function Cre(n){Et.setTimeout(()=>{throw n},0)}let jp,Xp=!1,i2=new wre,t9=()=>{const n=Et.Promise.resolve(void 0);jp=()=>{n.then(Rre)}};var Rre=()=>{for(var n;n=Ere();){try{n.h.call(n.g)}catch(t){Cre(t)}var e=e9;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Xp=!1};function Y_(n,e){Si.call(this),this.h=n||1,this.g=e||Et,this.j=Zi(this.qb,this),this.l=Date.now()}Ei(Y_,Si);Ve=Y_.prototype;Ve.ga=!1;Ve.T=null;Ve.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ni(this,"tick"),this.ga&&(r2(this),this.start()))}};Ve.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function r2(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}Ve.N=function(){Y_.$.N.call(this),r2(this),delete this.g};function s2(n,e,t){if(typeof n=="function")t&&(n=Zi(n,t));else if(n&&typeof n.handleEvent=="function")n=Zi(n.handleEvent,n);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Et.setTimeout(n,e||0)}function n9(n){n.g=s2(()=>{n.g=null,n.i&&(n.i=!1,n9(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}class bre extends Cl{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:n9(this)}N(){super.N(),this.g&&(Et.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jp(n){Cl.call(this),this.h=n,this.g={}}Ei(Jp,Cl);var aB=[];function i9(n,e,t,i){Array.isArray(t)||(t&&(aB[0]=t.toString()),t=aB);for(var r=0;r<t.length;r++){var s=$V(e,t[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function r9(n){qC(n.g,function(e,t){this.g.hasOwnProperty(t)&&ZC(e)},n),n.g={}}Jp.prototype.N=function(){Jp.$.N.call(this),r9(this)};Jp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function q_(){this.g=!0}q_.prototype.Ea=function(){this.g=!1};function Pre(n,e,t,i,r,s){n.info(function(){if(n.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var h=c[0];c=c[1];var d=h.split("_");o=2<=d.length&&d[1]=="type"?o+(h+"="+c+"&"):o+(h+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+`
`+t+`
`+o})}function Ire(n,e,t,i,r,s,o){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+`
`+t+`
`+s+" "+o})}function xh(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+Lre(n,t)+(i?" "+i:"")})}function Dre(n,e){n.info(function(){return"TIMEOUT: "+e})}q_.prototype.info=function(){};function Lre(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t){for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<r.length;o++)r[o]=""}}}}return n2(t)}catch{return e}}var iu={},lB=null;function Q_(){return lB=lB||new Si}iu.Ta="serverreachability";function s9(n){er.call(this,iu.Ta,n)}Ei(s9,er);function Kp(n){const e=Q_();Ni(e,new s9(e))}iu.STAT_EVENT="statevent";function o9(n,e){er.call(this,iu.STAT_EVENT,n),this.stat=e}Ei(o9,er);function pr(n){const e=Q_();Ni(e,new o9(e,n))}iu.Ua="timingevent";function a9(n,e){er.call(this,iu.Ua,n),this.size=e}Ei(a9,er);function Bm(n,e){if(typeof n!="function")throw Error("Fn must not be null and must be a function");return Et.setTimeout(function(){n()},e)}var Z_={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},l9={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function o2(){}o2.prototype.h=null;function cB(n){return n.h||(n.h=n.i())}function c9(){}var Nm={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function a2(){er.call(this,"d")}Ei(a2,er);function l2(){er.call(this,"c")}Ei(l2,er);var Ww;function ex(){}Ei(ex,o2);ex.prototype.g=function(){return new XMLHttpRequest};ex.prototype.i=function(){return{}};Ww=new ex;function Fm(n,e,t,i){this.l=n,this.j=e,this.m=t,this.W=i||1,this.U=new Jp(this),this.P=Bre,n=kw?125:void 0,this.V=new Y_(n),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new u9}function u9(){this.i=null,this.g="",this.h=!1}var Bre=45e3,h9={},jw={};Ve=Fm.prototype;Ve.setTimeout=function(n){this.P=n};function Xw(n,e,t){n.L=1,n.A=nx(fa(e)),n.u=t,n.S=!0,f9(n,null)}function f9(n,e){n.G=Date.now(),Om(n),n.B=fa(n.A);var t=n.B,i=n.W;Array.isArray(i)||(i=[String(i)]),x9(t.i,"t",i),n.o=0,t=n.l.J,n.h=new u9,n.g=z9(n.l,t?e:null,!n.u),0<n.O&&(n.M=new bre(Zi(n.Pa,n,n.g),n.O)),i9(n.U,n.g,"readystatechange",n.nb),e=n.I?JV(n.I):{},n.u?(n.v||(n.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.B,n.v,n.u,e)):(n.v="GET",n.g.ha(n.B,n.v,null,e)),Kp(),Pre(n.j,n.v,n.B,n.m,n.W,n.u)}Ve.nb=function(n){n=n.target;const e=this.M;e&&fo(n)==3?e.l():this.Pa(n)};Ve.Pa=function(n){try{if(n==this.g)e:{const h=fo(this.g);var e=this.g.Ia();const d=this.g.da();if(!(3>h)&&(h!=3||kw||this.g&&(this.h.h||this.g.ja()||dB(this.g)))){this.J||h!=4||e==7||(e==8||0>=d?Kp(3):Kp(2)),tx(this);var t=this.g.da();this.ca=t;t:if(d9(this)){var i=dB(this.g);n="";var r=i.length,s=fo(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vc(this),Zd(this);var o="";break t}this.h.i=new Et.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.length=0,this.h.g+=n,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=t==200,Ire(this.j,this.v,this.B,this.m,this.W,h,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Hp(a)){var c=a;break t}}c=null}if(t=c)xh(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Jw(this,t);else{this.i=!1,this.s=3,pr(12),vc(this),Zd(this);break e}}this.S?(p9(this,h,o),kw&&this.i&&h==3&&(i9(this.U,this.V,"tick",this.mb),this.V.start())):(xh(this.j,this.m,o,null),Jw(this,o)),h==4&&vc(this),this.i&&!this.J&&(h==4?O9(this.l,this):(this.i=!1,Om(this)))}else tse(this.g),t==400&&0<o.indexOf("Unknown SID")?(this.s=3,pr(12)):(this.s=0,pr(13)),vc(this),Zd(this)}}}catch{}finally{}};function d9(n){return n.g?n.v=="GET"&&n.L!=2&&n.l.Ha:!1}function p9(n,e,t){let i=!0,r;for(;!n.J&&n.o<t.length;)if(r=Nre(n,t),r==jw){e==4&&(n.s=4,pr(14),i=!1),xh(n.j,n.m,null,"[Incomplete Response]");break}else if(r==h9){n.s=4,pr(15),xh(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}else xh(n.j,n.m,r,null),Jw(n,r);d9(n)&&n.o!=0&&(n.h.g=n.h.g.slice(n.o),n.o=0),e!=4||t.length!=0||n.h.h||(n.s=1,pr(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.ba&&(n.ba=!0,e=n.l,e.g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),p2(e),e.M=!0,pr(11))):(xh(n.j,n.m,t,"[Invalid Chunked Response]"),vc(n),Zd(n))}Ve.mb=function(){if(this.g){var n=fo(this.g),e=this.g.ja();this.o<e.length&&(tx(this),p9(this,n,e),this.i&&n!=4&&Om(this))}};function Nre(n,e){var t=n.o,i=e.indexOf(`
`,t);return i==-1?jw:(t=Number(e.substring(t,i)),isNaN(t)?h9:(i+=1,i+t>e.length?jw:(e=e.slice(i,i+t),n.o=i+t,e)))}Ve.cancel=function(){this.J=!0,vc(this)};function Om(n){n.Y=Date.now()+n.P,m9(n,n.P)}function m9(n,e){if(n.C!=null)throw Error("WatchDog timer not null");n.C=Bm(Zi(n.lb,n),e)}function tx(n){n.C&&(Et.clearTimeout(n.C),n.C=null)}Ve.lb=function(){this.C=null;const n=Date.now();0<=n-this.Y?(Dre(this.j,this.B),this.L!=2&&(Kp(),pr(17)),vc(this),this.s=2,Zd(this)):m9(this,this.Y-n)};function Zd(n){n.l.H==0||n.J||O9(n.l,n)}function vc(n){tx(n);var e=n.M;e&&typeof e.sa=="function"&&e.sa(),n.M=null,r2(n.V),r9(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function Jw(n,e){try{var t=n.l;if(t.H!=0&&(t.g==n||Kw(t.i,n))){if(!n.K&&Kw(t.i,n)&&t.H==3){try{var i=t.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var r=i;if(r[0]==0){e:if(!t.u){if(t.g)if(t.g.G+3e3<n.G)Nv(t),ox(t);else break e;d2(t),pr(18)}}else t.Fa=r[1],0<t.Fa-t.V&&37500>r[2]&&t.G&&t.A==0&&!t.v&&(t.v=Bm(Zi(t.ib,t),6e3));if(1>=E9(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else _c(t,11)}else if((n.K||t.g==n)&&Nv(t),!Hp(e))for(r=t.Ja.g.parse(e),e=0;e<r.length;e++){let c=r[e];if(t.V=c[0],c=c[1],t.H==2)if(c[0]=="c"){t.K=c[1],t.pa=c[2];const h=c[3];h!=null&&(t.ra=h,t.l.info("VER="+t.ra));const d=c[4];d!=null&&(t.Ga=d,t.l.info("SVER="+t.Ga));const p=c[5];p!=null&&typeof p=="number"&&0<p&&(i=1.5*p,t.L=i,t.l.info("backChannelRequestTimeoutMs_="+i)),i=t;const m=n.g;if(m){const y=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(y){var s=i.i;s.g||y.indexOf("spdy")==-1&&y.indexOf("quic")==-1&&y.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(c2(s,s.h),s.h=null))}if(i.F){const x=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;x&&(i.Da=x,gn(i.I,i.F,x))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms")),i=t;var o=n;if(i.wa=V9(i,i.J?i.pa:null,i.Y),o.K){w9(i.i,o);var a=o,l=i.L;l&&a.setTimeout(l),a.C&&(tx(a),Om(a)),i.g=o}else N9(i);0<t.j.length&&ax(t)}else c[0]!="stop"&&c[0]!="close"||_c(t,7);else t.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?_c(t,7):f2(t):c[0]!="noop"&&t.h&&t.h.Aa(c),t.A=0)}}Kp(4)}catch{}}function Fre(n){if(n.Z&&typeof n.Z=="function")return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if(typeof n=="string")return n.split("");if(X_(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}e=[],t=0;for(i in n)e[t++]=n[i];return e}function Ore(n){if(n.ta&&typeof n.ta=="function")return n.ta();if(!n.Z||typeof n.Z!="function"){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(X_(n)||typeof n=="string"){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const i in n)e[t++]=i;return e}}}function g9(n,e){if(n.forEach&&typeof n.forEach=="function")n.forEach(e,void 0);else if(X_(n)||typeof n=="string")Array.prototype.forEach.call(n,e,void 0);else for(var t=Ore(n),i=Fre(n),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],t&&t[s],n)}var y9=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ure(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),r=null;if(0<=i){var s=n[t].substring(0,i);r=n[t].substring(i+1)}else s=n[t];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function Dc(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Dc){this.h=n.h,Lv(this,n.j),this.s=n.s,this.g=n.g,Bv(this,n.m),this.l=n.l;var e=n.i,t=new $p;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),uB(this,t),this.o=n.o}else n&&(e=String(n).match(y9))?(this.h=!1,Lv(this,e[1]||"",!0),this.s=Id(e[2]||""),this.g=Id(e[3]||"",!0),Bv(this,e[4]),this.l=Id(e[5]||"",!0),uB(this,e[6]||"",!0),this.o=Id(e[7]||"")):(this.h=!1,this.i=new $p(null,this.h))}Dc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Dd(e,hB,!0),":");var t=this.g;return(t||e=="file")&&(n.push("//"),(e=this.s)&&n.push(Dd(e,hB,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.m,t!=null&&n.push(":",String(t))),(t=this.l)&&(this.g&&t.charAt(0)!="/"&&n.push("/"),n.push(Dd(t,t.charAt(0)=="/"?zre:Vre,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Dd(t,Hre)),n.join("")};function fa(n){return new Dc(n)}function Lv(n,e,t){n.j=t?Id(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Bv(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function uB(n,e,t){e instanceof $p?(n.i=e,Wre(n.i,n.h)):(t||(e=Dd(e,Gre)),n.i=new $p(e,n.h))}function gn(n,e,t){n.i.set(e,t)}function nx(n){return gn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Id(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Dd(n,e,t){return typeof n=="string"?(n=encodeURI(n).replace(e,kre),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function kre(n){return n=n.charCodeAt(0),"%"+(n>>4&15).toString(16)+(n&15).toString(16)}var hB=/[#\/\?@]/g,Vre=/[#\?:]/g,zre=/[#\?]/g,Gre=/[#\?@]/g,Hre=/#/g;function $p(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Rl(n){n.g||(n.g=new Map,n.h=0,n.i&&Ure(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}Ve=$p.prototype;Ve.add=function(n,e){Rl(this),this.i=null,n=xf(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this};function v9(n,e){Rl(n),e=xf(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function _9(n,e){return Rl(n),e=xf(n,e),n.g.has(e)}Ve.forEach=function(n,e){Rl(this),this.g.forEach(function(t,i){t.forEach(function(r){n.call(e,r,i,this)},this)},this)};Ve.ta=function(){Rl(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let i=0;i<e.length;i++){const r=n[i];for(let s=0;s<r.length;s++)t.push(e[i])}return t};Ve.Z=function(n){Rl(this);let e=[];if(typeof n=="string")_9(this,n)&&(e=e.concat(this.g.get(xf(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e};Ve.set=function(n,e){return Rl(this),this.i=null,n=xf(this,n),_9(this,n)&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this};Ve.get=function(n,e){return n?(n=this.Z(n),0<n.length?String(n[0]):e):e};function x9(n,e,t){v9(n,e),0<t.length&&(n.i=null,n.g.set(xf(n,e),$C(t)),n.h+=t.length)}Ve.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var i=e[t];const s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;o[i]!==""&&(r+="="+encodeURIComponent(String(o[i]))),n.push(r)}}return this.i=n.join("&")};function xf(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Wre(n,e){e&&!n.j&&(Rl(n),n.i=null,n.g.forEach(function(t,i){var r=i.toLowerCase();i!=r&&(v9(this,i),x9(this,r,t))},n)),n.j=e}var jre=class{constructor(n,e){this.g=n,this.map=e}};function A9(n){this.l=n||Xre,Et.PerformanceNavigationTiming?(n=Et.performance.getEntriesByType("navigation"),n=0<n.length&&(n[0].nextHopProtocol=="hq"||n[0].nextHopProtocol=="h2")):n=!!(Et.g&&Et.g.Ka&&Et.g.Ka()&&Et.g.Ka().dc),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Xre=10;function S9(n){return n.h?!0:n.g?n.g.size>=n.j:!1}function E9(n){return n.h?1:n.g?n.g.size:0}function Kw(n,e){return n.h?n.h==e:n.g?n.g.has(e):!1}function c2(n,e){n.g?n.g.add(e):n.h=e}function w9(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}A9.prototype.cancel=function(){if(this.i=M9(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const n of this.g.values())n.cancel();this.g.clear()}};function M9(n){if(n.h!=null)return n.i.concat(n.h.F);if(n.g!=null&&n.g.size!==0){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return $C(n.i)}var Jre=class{stringify(n){return Et.JSON.stringify(n,void 0)}parse(n){return Et.JSON.parse(n,void 0)}};function Kre(){this.g=new Jre}function $re(n,e,t){const i=t||"";try{g9(n,function(r,s){let o=r;Dm(r)&&(o=n2(r)),e.push(i+s+"="+encodeURIComponent(o))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function Yre(n,e){const t=new q_;if(Et.Image){const i=new Image;i.onload=iy(sy,t,i,"TestLoadImage: loaded",!0,e),i.onerror=iy(sy,t,i,"TestLoadImage: error",!1,e),i.onabort=iy(sy,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=iy(sy,t,i,"TestLoadImage: timeout",!1,e),Et.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}function sy(n,e,t,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function ix(n){this.l=n.ec||null,this.j=n.ob||!1}Ei(ix,o2);ix.prototype.g=function(){return new rx(this.l,this.j)};ix.prototype.i=function(n){return function(){return n}}({});function rx(n,e){Si.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=u2,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ei(rx,Si);var u2=0;Ve=rx.prototype;Ve.open=function(n,e){if(this.readyState!=u2)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Yp(this)};Ve.send=function(n){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Et).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};Ve.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Um(this)),this.readyState=u2};Ve.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Yp(this)),this.g&&(this.readyState=3,Yp(this),this.g)))if(this.responseType==="arraybuffer")n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Et.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;T9(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))};function T9(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}Ve.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Um(this):Yp(this),this.readyState==3&&T9(this)}};Ve.Za=function(n){this.g&&(this.response=this.responseText=n,Um(this))};Ve.Ya=function(n){this.g&&(this.response=n,Um(this))};Ve.ka=function(){this.g&&Um(this)};function Um(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Yp(n)}Ve.setRequestHeader=function(n,e){this.v.append(n,e)};Ve.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""};Ve.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)t=t.value,n.push(t[0]+": "+t[1]),t=e.next();return n.join(`\r
`)};function Yp(n){n.onreadystatechange&&n.onreadystatechange.call(n)}Object.defineProperty(rx.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(n){this.m=n?"include":"same-origin"}});var qre=Et.JSON.parse;function kn(n){Si.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=C9,this.L=this.M=!1}Ei(kn,Si);var C9="",Qre=/^https?$/i,Zre=["POST","PUT"];Ve=kn.prototype;Ve.Oa=function(n){this.M=n};Ve.ha=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ww.g(),this.C=this.u?cB(this.u):cB(Ww),this.g.onreadystatechange=Zi(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){fB(this,s);return}if(n=t||"",t=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)t.set(r,i[r]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(const s of i.keys())t.set(s,i.get(s));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(t.keys()).find(s=>s.toLowerCase()=="content-type"),r=Et.FormData&&n instanceof Et.FormData,!(0<=HV(Zre,e))||i||r||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of t)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{P9(this),0<this.B&&((this.L=ese(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Zi(this.ua,this)):this.A=s2(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){fB(this,s)}};function ese(n){return nf&&typeof n.timeout=="number"&&n.ontimeout!==void 0}Ve.ua=function(){typeof KC<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ni(this,"timeout"),this.abort(8))};function fB(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,R9(n),sx(n)}function R9(n){n.F||(n.F=!0,Ni(n,"complete"),Ni(n,"error"))}Ve.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ni(this,"complete"),Ni(this,"abort"),sx(this))};Ve.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),sx(this,!0)),kn.$.N.call(this)};Ve.La=function(){this.s||(this.G||this.v||this.l?b9(this):this.kb())};Ve.kb=function(){b9(this)};function b9(n){if(n.h&&typeof KC<"u"&&(!n.C[1]||fo(n)!=4||n.da()!=2)){if(n.v&&fo(n)==4)s2(n.La,0,n);else if(Ni(n,"readystatechange"),fo(n)==4){n.h=!1;try{const o=n.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=o===0){var r=String(n.I).match(y9)[1]||null;!r&&Et.self&&Et.self.location&&(r=Et.self.location.protocol.slice(0,-1)),i=!Qre.test(r?r.toLowerCase():"")}t=i}if(t)Ni(n,"complete"),Ni(n,"success");else{n.m=6;try{var s=2<fo(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",R9(n)}}finally{sx(n)}}}}function sx(n,e){if(n.g){P9(n);const t=n.g,i=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Ni(n,"ready");try{t.onreadystatechange=i}catch{}}}function P9(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Et.clearTimeout(n.A),n.A=null)}Ve.isActive=function(){return!!this.g};function fo(n){return n.g?n.g.readyState:0}Ve.da=function(){try{return 2<fo(this)?this.g.status:-1}catch{return-1}};Ve.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};Ve.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&e.indexOf(n)==0&&(e=e.substring(n.length)),qre(e)}};function dB(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case C9:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function tse(n){const e={};n=(n.g&&2<=fo(n)&&n.g.getAllResponseHeaders()||"").split(`\r
`);for(let i=0;i<n.length;i++){if(Hp(n[i]))continue;var t=Tre(n[i]);const r=t[0];if(t=t[1],typeof t!="string")continue;t=t.trim();const s=e[r]||[];e[r]=s,s.push(t)}_re(e,function(i){return i.join(", ")})}Ve.Ia=function(){return this.m};Ve.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function I9(n){let e="";return qC(n,function(t,i){e+=i,e+=":",e+=t,e+=`\r
`}),e}function h2(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=I9(t),typeof n=="string"?t!=null&&encodeURIComponent(String(t)):gn(n,e,t))}function xd(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function D9(n){this.Ga=0,this.j=[],this.l=new q_,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=xd("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=xd("baseRetryDelayMs",5e3,n),this.hb=xd("retryDelaySeedMs",1e4,n),this.eb=xd("forwardChannelMaxRetries",2,n),this.xa=xd("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new A9(n&&n.concurrentRequestLimit),this.Ja=new Kre,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}Ve=D9.prototype;Ve.ra=8;Ve.H=1;function f2(n){if(L9(n),n.H==3){var e=n.W++,t=fa(n.I);if(gn(t,"SID",n.K),gn(t,"RID",e),gn(t,"TYPE","terminate"),km(n,t),e=new Fm(n,n.l,e),e.L=2,e.A=nx(fa(t)),t=!1,Et.navigator&&Et.navigator.sendBeacon)try{t=Et.navigator.sendBeacon(e.A.toString(),"")}catch{}!t&&Et.Image&&(new Image().src=e.A,t=!0),t||(e.g=z9(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Om(e)}k9(n)}function ox(n){n.g&&(p2(n),n.g.cancel(),n.g=null)}function L9(n){ox(n),n.u&&(Et.clearTimeout(n.u),n.u=null),Nv(n),n.i.cancel(),n.m&&(typeof n.m=="number"&&Et.clearTimeout(n.m),n.m=null)}function ax(n){if(!S9(n.i)&&!n.m){n.m=!0;var e=n.Na;jp||t9(),Xp||(jp(),Xp=!0),i2.add(e,n),n.C=0}}function nse(n,e){return E9(n.i)>=n.i.j-(n.m?1:0)?!1:n.m?(n.j=e.F.concat(n.j),!0):n.H==1||n.H==2||n.C>=(n.cb?0:n.eb)?!1:(n.m=Bm(Zi(n.Na,n,e),U9(n,n.C)),n.C++,!0)}Ve.Na=function(n){if(this.m)if(this.m=null,this.H==1){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const r=new Fm(this,this.l,n);let s=this.s;if(this.U&&(s?(s=JV(s),KV(s,this.U)):s=this.U),this.o!==null||this.O||(r.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){t:{var i=this.j[t];if("__data__"in i.map&&(i=i.map.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=t;break e}if(e===4096||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=B9(this,r,e),t=fa(this.I),gn(t,"RID",n),gn(t,"CVER",22),this.F&&gn(t,"X-HTTP-Session-Id",this.F),km(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(I9(s)))+"&"+e:this.o&&h2(t,this.o,s)),c2(this.i,r),this.bb&&gn(t,"TYPE","init"),this.P?(gn(t,"$req",e),gn(t,"SID","null"),r.aa=!0,Xw(r,t,null)):Xw(r,t,e),this.H=2}}else this.H==3&&(n?pB(this,n):this.j.length==0||S9(this.i)||pB(this))};function pB(n,e){var t;e?t=e.m:t=n.W++;const i=fa(n.I);gn(i,"SID",n.K),gn(i,"RID",t),gn(i,"AID",n.V),km(n,i),n.o&&n.s&&h2(i,n.o,n.s),t=new Fm(n,n.l,t,n.C+1),n.o===null&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=B9(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),c2(n.i,t),Xw(t,i,e)}function km(n,e){n.na&&qC(n.na,function(t,i){gn(e,i,t)}),n.h&&g9({},function(t,i){gn(e,i,t)})}function B9(n,e,t){t=Math.min(n.j.length,t);var i=n.h?Zi(n.h.Va,n.h,n):null;e:{var r=n.j;let s=-1;for(;;){const o=["count="+t];s==-1?0<t?(s=r[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<t;l++){let c=r[l].g;const h=r[l].map;if(c-=s,0>c)s=Math.max(0,r[l].g-100),a=!1;else try{$re(h,o,"req"+c+"_")}catch{i&&i(h)}}if(a){i=o.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,i}function N9(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;jp||t9(),Xp||(jp(),Xp=!0),i2.add(e,n),n.A=0}}function d2(n){return n.g||n.u||3<=n.A?!1:(n.ba++,n.u=Bm(Zi(n.Ma,n),U9(n,n.A)),n.A++,!0)}Ve.Ma=function(){if(this.u=null,F9(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Bm(Zi(this.jb,this),n)}};Ve.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,pr(10),ox(this),F9(this))};function p2(n){n.B!=null&&(Et.clearTimeout(n.B),n.B=null)}function F9(n){n.g=new Fm(n,n.l,"rpc",n.ba),n.o===null&&(n.g.I=n.s),n.g.O=0;var e=fa(n.wa);gn(e,"RID","rpc"),gn(e,"SID",n.K),gn(e,"AID",n.V),gn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&gn(e,"TO",n.qa),gn(e,"TYPE","xmlhttp"),km(n,e),n.o&&n.s&&h2(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.A=nx(fa(e)),t.u=null,t.S=!0,f9(t,n)}Ve.ib=function(){this.v!=null&&(this.v=null,ox(this),d2(this),pr(19))};function Nv(n){n.v!=null&&(Et.clearTimeout(n.v),n.v=null)}function O9(n,e){var t=null;if(n.g==e){Nv(n),p2(n),n.g=null;var i=2}else if(Kw(n.i,e))t=e.F,w9(n.i,e),i=1;else return;if(n.H!=0){if(e.i)if(i==1){t=e.u?e.u.length:0,e=Date.now()-e.G;var r=n.C;i=Q_(),Ni(i,new a9(i,t)),ax(n)}else N9(n);else if(r=e.s,r==3||r==0&&0<e.ca||!(i==1&&nse(n,e)||i==2&&d2(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),r){case 1:_c(n,5);break;case 4:_c(n,10);break;case 3:_c(n,6);break;default:_c(n,2)}}}function U9(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function _c(n,e){if(n.l.info("Error code "+e),e==2){var t=null;n.h&&(t=null);var i=Zi(n.pb,n);t||(t=new Dc("//www.google.com/images/cleardot.gif"),Et.location&&Et.location.protocol=="http"||Lv(t,"https"),nx(t)),Yre(t.toString(),i)}else pr(2);n.H=0,n.h&&n.h.za(e),k9(n),L9(n)}Ve.pb=function(n){n?(this.l.info("Successfully pinged google.com"),pr(2)):(this.l.info("Failed to ping google.com"),pr(1))};function k9(n){if(n.H=0,n.ma=[],n.h){const e=M9(n.i);(e.length!=0||n.j.length!=0)&&(rB(n.ma,e),rB(n.ma,n.j),n.i.i.length=0,$C(n.j),n.j.length=0),n.h.ya()}}function V9(n,e,t){var i=t instanceof Dc?fa(t):new Dc(t);if(i.g!="")e&&(i.g=e+"."+i.g),Bv(i,i.m);else{var r=Et.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new Dc(null);i&&Lv(s,i),e&&(s.g=e),r&&Bv(s,r),t&&(s.l=t),i=s}return t=n.F,e=n.Da,t&&e&&gn(i,t,e),gn(i,"VER",n.ra),km(n,i),i}function z9(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n.Ha&&!n.va?new kn(new ix({ob:t})):new kn(n.va),e.Oa(n.J),e}Ve.isActive=function(){return!!this.h&&this.h.isActive(this)};function G9(){}Ve=G9.prototype;Ve.Ba=function(){};Ve.Aa=function(){};Ve.za=function(){};Ve.ya=function(){};Ve.isActive=function(){return!0};Ve.Va=function(){};function Fv(){if(nf&&!(10<=Number(mre)))throw Error("Environmental error: no available transport.")}Fv.prototype.g=function(n,e){return new Kr(n,e)};function Kr(n,e){Si.call(this),this.g=new D9(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Hp(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Hp(e)&&(this.g.F=e,n=this.h,n!==null&&e in n&&(n=this.h,e in n&&delete n[e])),this.j=new Af(this)}Ei(Kr,Si);Kr.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;pr(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=V9(n,null,n.Y),ax(n)};Kr.prototype.close=function(){f2(this.g)};Kr.prototype.u=function(n){var e=this.g;if(typeof n=="string"){var t={};t.__data__=n,n=t}else this.v&&(t={},t.__data__=n2(n),n=t);e.j.push(new jre(e.fb++,n)),e.H==3&&ax(e)};Kr.prototype.N=function(){this.g.h=null,delete this.j,f2(this.g),delete this.g,Kr.$.N.call(this)};function H9(n){a2.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=e!==null&&n in e?e[n]:void 0),this.data=e}else this.data=n}Ei(H9,a2);function W9(){l2.call(this),this.status=1}Ei(W9,l2);function Af(n){this.g=n}Ei(Af,G9);Af.prototype.Ba=function(){Ni(this.g,"a")};Af.prototype.Aa=function(n){Ni(this.g,new H9(n))};Af.prototype.za=function(n){Ni(this.g,new W9)};Af.prototype.ya=function(){Ni(this.g,"b")};function ise(){this.blockSize=-1}function Ws(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Ei(Ws,ise);Ws.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function AS(n,e,t){t||(t=0);var i=Array(16);if(typeof e=="string")for(var r=0;16>r;++r)i[r]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(r=0;16>r;++r)i[r]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;e=n.g[0],t=n.g[1],r=n.g[2];var s=n.g[3],o=e+(s^t&(r^s))+i[0]+3614090360&4294967295;e=t+(o<<7&4294967295|o>>>25),o=s+(r^e&(t^r))+i[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(t^s&(e^t))+i[2]+606105819&4294967295,r=s+(o<<17&4294967295|o>>>15),o=t+(e^r&(s^e))+i[3]+3250441966&4294967295,t=r+(o<<22&4294967295|o>>>10),o=e+(s^t&(r^s))+i[4]+4118548399&4294967295,e=t+(o<<7&4294967295|o>>>25),o=s+(r^e&(t^r))+i[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(t^s&(e^t))+i[6]+2821735955&4294967295,r=s+(o<<17&4294967295|o>>>15),o=t+(e^r&(s^e))+i[7]+4249261313&4294967295,t=r+(o<<22&4294967295|o>>>10),o=e+(s^t&(r^s))+i[8]+1770035416&4294967295,e=t+(o<<7&4294967295|o>>>25),o=s+(r^e&(t^r))+i[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(t^s&(e^t))+i[10]+4294925233&4294967295,r=s+(o<<17&4294967295|o>>>15),o=t+(e^r&(s^e))+i[11]+2304563134&4294967295,t=r+(o<<22&4294967295|o>>>10),o=e+(s^t&(r^s))+i[12]+1804603682&4294967295,e=t+(o<<7&4294967295|o>>>25),o=s+(r^e&(t^r))+i[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(t^s&(e^t))+i[14]+2792965006&4294967295,r=s+(o<<17&4294967295|o>>>15),o=t+(e^r&(s^e))+i[15]+1236535329&4294967295,t=r+(o<<22&4294967295|o>>>10),o=e+(r^s&(t^r))+i[1]+4129170786&4294967295,e=t+(o<<5&4294967295|o>>>27),o=s+(t^r&(e^t))+i[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^t&(s^e))+i[11]+643717713&4294967295,r=s+(o<<14&4294967295|o>>>18),o=t+(s^e&(r^s))+i[0]+3921069994&4294967295,t=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(t^r))+i[5]+3593408605&4294967295,e=t+(o<<5&4294967295|o>>>27),o=s+(t^r&(e^t))+i[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^t&(s^e))+i[15]+3634488961&4294967295,r=s+(o<<14&4294967295|o>>>18),o=t+(s^e&(r^s))+i[4]+3889429448&4294967295,t=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(t^r))+i[9]+568446438&4294967295,e=t+(o<<5&4294967295|o>>>27),o=s+(t^r&(e^t))+i[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^t&(s^e))+i[3]+4107603335&4294967295,r=s+(o<<14&4294967295|o>>>18),o=t+(s^e&(r^s))+i[8]+1163531501&4294967295,t=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(t^r))+i[13]+2850285829&4294967295,e=t+(o<<5&4294967295|o>>>27),o=s+(t^r&(e^t))+i[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^t&(s^e))+i[7]+1735328473&4294967295,r=s+(o<<14&4294967295|o>>>18),o=t+(s^e&(r^s))+i[12]+2368359562&4294967295,t=r+(o<<20&4294967295|o>>>12),o=e+(t^r^s)+i[5]+4294588738&4294967295,e=t+(o<<4&4294967295|o>>>28),o=s+(e^t^r)+i[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^t)+i[11]+1839030562&4294967295,r=s+(o<<16&4294967295|o>>>16),o=t+(r^s^e)+i[14]+4259657740&4294967295,t=r+(o<<23&4294967295|o>>>9),o=e+(t^r^s)+i[1]+2763975236&4294967295,e=t+(o<<4&4294967295|o>>>28),o=s+(e^t^r)+i[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^t)+i[7]+4139469664&4294967295,r=s+(o<<16&4294967295|o>>>16),o=t+(r^s^e)+i[10]+3200236656&4294967295,t=r+(o<<23&4294967295|o>>>9),o=e+(t^r^s)+i[13]+681279174&4294967295,e=t+(o<<4&4294967295|o>>>28),o=s+(e^t^r)+i[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^t)+i[3]+3572445317&4294967295,r=s+(o<<16&4294967295|o>>>16),o=t+(r^s^e)+i[6]+76029189&4294967295,t=r+(o<<23&4294967295|o>>>9),o=e+(t^r^s)+i[9]+3654602809&4294967295,e=t+(o<<4&4294967295|o>>>28),o=s+(e^t^r)+i[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^t)+i[15]+530742520&4294967295,r=s+(o<<16&4294967295|o>>>16),o=t+(r^s^e)+i[2]+3299628645&4294967295,t=r+(o<<23&4294967295|o>>>9),o=e+(r^(t|~s))+i[0]+4096336452&4294967295,e=t+(o<<6&4294967295|o>>>26),o=s+(t^(e|~r))+i[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~t))+i[14]+2878612391&4294967295,r=s+(o<<15&4294967295|o>>>17),o=t+(s^(r|~e))+i[5]+4237533241&4294967295,t=r+(o<<21&4294967295|o>>>11),o=e+(r^(t|~s))+i[12]+1700485571&4294967295,e=t+(o<<6&4294967295|o>>>26),o=s+(t^(e|~r))+i[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~t))+i[10]+4293915773&4294967295,r=s+(o<<15&4294967295|o>>>17),o=t+(s^(r|~e))+i[1]+2240044497&4294967295,t=r+(o<<21&4294967295|o>>>11),o=e+(r^(t|~s))+i[8]+1873313359&4294967295,e=t+(o<<6&4294967295|o>>>26),o=s+(t^(e|~r))+i[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~t))+i[6]+2734768916&4294967295,r=s+(o<<15&4294967295|o>>>17),o=t+(s^(r|~e))+i[13]+1309151649&4294967295,t=r+(o<<21&4294967295|o>>>11),o=e+(r^(t|~s))+i[4]+4149444226&4294967295,e=t+(o<<6&4294967295|o>>>26),o=s+(t^(e|~r))+i[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~t))+i[2]+718787259&4294967295,r=s+(o<<15&4294967295|o>>>17),o=t+(s^(r|~e))+i[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,n.g[2]=n.g[2]+r&4294967295,n.g[3]=n.g[3]+s&4294967295}Ws.prototype.j=function(n,e){e===void 0&&(e=n.length);for(var t=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(r==0)for(;s<=t;)AS(this,n,s),s+=this.blockSize;if(typeof n=="string"){for(;s<e;)if(i[r++]=n.charCodeAt(s++),r==this.blockSize){AS(this,i),r=0;break}}else for(;s<e;)if(i[r++]=n[s++],r==this.blockSize){AS(this,i),r=0;break}}this.h=r,this.i+=e};Ws.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=t&255,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var i=0;32>i;i+=8)n[t++]=this.g[e]>>>i&255;return n};function on(n,e){this.h=e;for(var t=[],i=!0,r=n.length-1;0<=r;r--){var s=n[r]|0;i&&s==e||(t[r]=s,i=!1)}this.g=t}var rse={};function m2(n){return-128<=n&&128>n?fre(n,function(e){return new on([e|0],0>e?-1:0)}):new on([n|0],0>n?-1:0)}function po(n){if(isNaN(n)||!isFinite(n))return Ih;if(0>n)return Ii(po(-n));for(var e=[],t=1,i=0;n>=t;i++)e[i]=n/t|0,t*=$w;return new on(e,0)}function j9(n,e){if(n.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(n.charAt(0)=="-")return Ii(j9(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=po(Math.pow(e,8)),i=Ih,r=0;r<n.length;r+=8){var s=Math.min(8,n.length-r),o=parseInt(n.substring(r,r+s),e);8>s?(s=po(Math.pow(e,s)),i=i.R(s).add(po(o))):(i=i.R(t),i=i.add(po(o)))}return i}var $w=4294967296,Ih=m2(0),Yw=m2(1),mB=m2(16777216);Ve=on.prototype;Ve.ea=function(){if(_s(this))return-Ii(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var i=this.D(t);n+=(0<=i?i:$w+i)*e,e*=$w}return n};Ve.toString=function(n){if(n=n||10,2>n||36<n)throw Error("radix out of range: "+n);if(ea(this))return"0";if(_s(this))return"-"+Ii(this).toString(n);for(var e=po(Math.pow(n,6)),t=this,i="";;){var r=Uv(t,e).g;t=Ov(t,r.R(e));var s=((0<t.g.length?t.g[0]:t.h)>>>0).toString(n);if(t=r,ea(t))return s+i;for(;6>s.length;)s="0"+s;i=s+i}};Ve.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h};function ea(n){if(n.h!=0)return!1;for(var e=0;e<n.g.length;e++)if(n.g[e]!=0)return!1;return!0}function _s(n){return n.h==-1}Ve.X=function(n){return n=Ov(this,n),_s(n)?-1:ea(n)?0:1};function Ii(n){for(var e=n.g.length,t=[],i=0;i<e;i++)t[i]=~n.g[i];return new on(t,~n.h).add(Yw)}Ve.abs=function(){return _s(this)?Ii(this):this};Ve.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0,r=0;r<=e;r++){var s=i+(this.D(r)&65535)+(n.D(r)&65535),o=(s>>>16)+(this.D(r)>>>16)+(n.D(r)>>>16);i=o>>>16,s&=65535,o&=65535,t[r]=o<<16|s}return new on(t,t[t.length-1]&-2147483648?-1:0)};function Ov(n,e){return n.add(Ii(e))}Ve.R=function(n){if(ea(this)||ea(n))return Ih;if(_s(this))return _s(n)?Ii(this).R(Ii(n)):Ii(Ii(this).R(n));if(_s(n))return Ii(this.R(Ii(n)));if(0>this.X(mB)&&0>n.X(mB))return po(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],i=0;i<2*e;i++)t[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<n.g.length;r++){var s=this.D(i)>>>16,o=this.D(i)&65535,a=n.D(r)>>>16,l=n.D(r)&65535;t[2*i+2*r]+=o*l,oy(t,2*i+2*r),t[2*i+2*r+1]+=s*l,oy(t,2*i+2*r+1),t[2*i+2*r+1]+=o*a,oy(t,2*i+2*r+1),t[2*i+2*r+2]+=s*a,oy(t,2*i+2*r+2)}for(i=0;i<e;i++)t[i]=t[2*i+1]<<16|t[2*i];for(i=e;i<2*e;i++)t[i]=0;return new on(t,0)};function oy(n,e){for(;(n[e]&65535)!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Ad(n,e){this.g=n,this.h=e}function Uv(n,e){if(ea(e))throw Error("division by zero");if(ea(n))return new Ad(Ih,Ih);if(_s(n))return e=Uv(Ii(n),e),new Ad(Ii(e.g),Ii(e.h));if(_s(e))return e=Uv(n,Ii(e)),new Ad(Ii(e.g),e.h);if(30<n.g.length){if(_s(n)||_s(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Yw,i=e;0>=i.X(n);)t=gB(t),i=gB(i);var r=Wu(t,1),s=Wu(i,1);for(i=Wu(i,2),t=Wu(t,2);!ea(i);){var o=s.add(i);0>=o.X(n)&&(r=r.add(t),s=o),i=Wu(i,1),t=Wu(t,1)}return e=Ov(n,r.R(e)),new Ad(r,e)}for(r=Ih;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),i=Math.ceil(Math.log(t)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),s=po(t),o=s.R(e);_s(o)||0<o.X(n);)t-=i,s=po(t),o=s.R(e);ea(s)&&(s=Yw),r=r.add(s),n=Ov(n,o)}return new Ad(r,n)}Ve.gb=function(n){return Uv(this,n).h};Ve.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)&n.D(i);return new on(t,this.h&n.h)};Ve.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)|n.D(i);return new on(t,this.h|n.h)};Ve.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)^n.D(i);return new on(t,this.h^n.h)};function gB(n){for(var e=n.g.length+1,t=[],i=0;i<e;i++)t[i]=n.D(i)<<1|n.D(i-1)>>>31;return new on(t,n.h)}function Wu(n,e){var t=e>>5;e%=32;for(var i=n.g.length-t,r=[],s=0;s<i;s++)r[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new on(r,n.h)}Fv.prototype.createWebChannel=Fv.prototype.g;Kr.prototype.send=Kr.prototype.u;Kr.prototype.open=Kr.prototype.m;Kr.prototype.close=Kr.prototype.close;Z_.NO_ERROR=0;Z_.TIMEOUT=8;Z_.HTTP_ERROR=6;l9.COMPLETE="complete";c9.EventType=Nm;Nm.OPEN="a";Nm.CLOSE="b";Nm.ERROR="c";Nm.MESSAGE="d";Si.prototype.listen=Si.prototype.O;kn.prototype.listenOnce=kn.prototype.P;kn.prototype.getLastError=kn.prototype.Sa;kn.prototype.getLastErrorCode=kn.prototype.Ia;kn.prototype.getStatus=kn.prototype.da;kn.prototype.getResponseJson=kn.prototype.Wa;kn.prototype.getResponseText=kn.prototype.ja;kn.prototype.send=kn.prototype.ha;kn.prototype.setWithCredentials=kn.prototype.Oa;Ws.prototype.digest=Ws.prototype.l;Ws.prototype.reset=Ws.prototype.reset;Ws.prototype.update=Ws.prototype.j;on.prototype.add=on.prototype.add;on.prototype.multiply=on.prototype.R;on.prototype.modulo=on.prototype.gb;on.prototype.compare=on.prototype.X;on.prototype.toNumber=on.prototype.ea;on.prototype.toString=on.prototype.toString;on.prototype.getBits=on.prototype.D;on.fromNumber=po;on.fromString=j9;var sse=function(){return new Fv},ose=function(){return Q_()},SS=Z_,ase=l9,lse=iu,yB={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ay=c9,cse=kn,use=Ws,Dh=on;const vB="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ki.UNAUTHENTICATED=new Ki(null),Ki.GOOGLE_CREDENTIALS=new Ki("google-credentials-uid"),Ki.FIRST_PARTY=new Ki("first-party-uid"),Ki.MOCK_USER=new Ki("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sf="10.7.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wc=new OV("@firebase/firestore");function Sd(){return Wc.logLevel}function Ge(n,...e){if(Wc.logLevel<=Kt.DEBUG){const t=e.map(g2);Wc.debug(`Firestore (${Sf}): ${n}`,...t)}}function Co(n,...e){if(Wc.logLevel<=Kt.ERROR){const t=e.map(g2);Wc.error(`Firestore (${Sf}): ${n}`,...t)}}function rf(n,...e){if(Wc.logLevel<=Kt.WARN){const t=e.map(g2);Wc.warn(`Firestore (${Sf}): ${n}`,...t)}}function g2(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(n="Unexpected state"){const e=`FIRESTORE (${Sf}) INTERNAL ASSERTION FAILED: `+n;throw Co(e),new Error(e)}function ii(n,e){n||It()}function en(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class lt extends _f{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X9{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hse{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ki.UNAUTHENTICATED))}shutdown(){}}class fse{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class dse{constructor(e){this.t=e,this.currentUser=Ki.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let i=this.i;const r=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve();let s=new ol;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ol,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{Ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ol)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(Ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ii(typeof i.accessToken=="string"),new X9(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ii(e===null||typeof e=="string"),new Ki(e)}}class pse{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Ki.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class mse{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new pse(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ki.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gse{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yse{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const i=s=>{s.error!=null&&Ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Ge("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{Ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):Ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ii(typeof t.token=="string"),this.R=t.token,new gse(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vse(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _se{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=vse(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%e.length))}return i}}function tn(n,e){return n<e?-1:n>e?1:0}function sf(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new lt(Ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new lt(Ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new lt(Ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new lt(Ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Pr.fromMillis(Date.now())}static fromDate(e){return Pr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new Pr(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?tn(this.nanoseconds,e.nanoseconds):tn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Tt(e)}static min(){return new Tt(new Pr(0,0))}static max(){return new Tt(new Pr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,t,i){t===void 0?t=0:t>e.length&&It(),i===void 0?i=e.length-t:i>e.length-t&&It(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return qp.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof qp?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const s=e.get(r),o=t.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Un extends qp{construct(e,t,i){return new Un(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new lt(Ne.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new Un(t)}static emptyPath(){return new Un([])}}const xse=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dr extends qp{construct(e,t,i){return new dr(e,t,i)}static isValidIdentifier(e){return xse.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new dr(["__name__"])}static fromServerFormat(e){const t=[];let i="",r=0;const s=()=>{if(i.length===0)throw new lt(Ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new lt(Ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new lt(Ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new lt(Ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dr(t)}static emptyPath(){return new dr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.path=e}static fromPath(e){return new yt(Un.fromString(e))}static fromName(e){return new yt(Un.fromString(e).popFirst(5))}static empty(){return new yt(Un.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Un.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Un.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new yt(new Un(e.slice()))}}function Ase(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Tt.fromTimestamp(i===1e9?new Pr(t+1,0):new Pr(t,i));return new gl(r,yt.empty(),e)}function Sse(n){return new gl(n.readTime,n.key,-1)}class gl{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new gl(Tt.min(),yt.empty(),-1)}static max(){return new gl(Tt.max(),yt.empty(),-1)}}function Ese(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=yt.comparator(n.documentKey,e.documentKey),t!==0?t:tn(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wse="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Mse{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y2(n){if(n.code!==Ne.FAILED_PRECONDITION||n.message!==wse)throw n;Ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&It(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new xe((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof xe?t:xe.resolve(t)}catch(t){return xe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):xe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):xe.reject(t)}static resolve(e){return new xe((t,i)=>{t(e)})}static reject(e){return new xe((t,i)=>{i(e)})}static waitFor(e){return new xe((t,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&t()},l=>i(l))}),o=!0,s===r&&t()})}static or(e){let t=xe.resolve(!1);for(const i of e)t=t.next(r=>r?xe.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new xe((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(h=>{o[c]=h,++a,a===s&&i(o)},h=>r(h))}})}static doWhile(e,t){return new xe((i,r)=>{const s=()=>{e()===!0?t().next(()=>{s()},r):i()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new ol,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new ep(e,t.error)):this.V.resolve()},this.transaction.onerror=i=>{const r=_2(i.target.error);this.V.reject(new ep(e,r))}}static open(e,t,i,r){try{return new v2(t,e.transaction(r,i))}catch(s){throw new ep(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Ge("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Cse(t)}}class xc{constructor(e,t,i){this.name=e,this.version=t,this.p=i,xc.S(Pv())===12.2&&Co("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ge("SimpleDb","Removing database:",e),ac(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!NV())return!1;if(xc.C())return!0;const e=Pv(),t=xc.S(e),i=0<t&&t<10,r=xc.v(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static v(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}async O(e){return this.db||(Ge("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,i)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=s=>{const o=s.target.result;t(o)},r.onblocked=()=>{i(new ep(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=s=>{const o=s.target.error;o.name==="VersionError"?i(new lt(Ne.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?i(new lt(Ne.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):i(new ep(e,o))},r.onupgradeneeded=s=>{Ge("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.N(o,r.transaction,s.oldVersion,this.version).next(()=>{Ge("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=t=>this.B(t)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,r){const s=t==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(e);const a=v2.open(this.db,e,s?"readonly":"readwrite",i),l=r(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),xe.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(Ge("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Tse{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return ac(this.k.delete())}}class ep extends lt{constructor(e,t){super(Ne.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Vm(n){return n.name==="IndexedDbTransactionError"}class Cse{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(Ge("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(Ge("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),ac(i)}add(e){return Ge("SimpleDb","ADD",this.store.name,e,e),ac(this.store.add(e))}get(e){return ac(this.store.get(e)).next(t=>(t===void 0&&(t=null),Ge("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ge("SimpleDb","DELETE",this.store.name,e),ac(this.store.delete(e))}count(){return Ge("SimpleDb","COUNT",this.store.name),ac(this.store.count())}W(e,t){const i=this.options(e,t),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){const s=r.getAll(i.range);return new xe((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(i),o=[];return this.G(s,(a,l)=>{o.push(l)}).next(()=>o)}}j(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new xe((r,s)=>{i.onerror=o=>{s(o.target.error)},i.onsuccess=o=>{r(o.target.result)}})}H(e,t){Ge("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.J=!1;const r=this.cursor(i);return this.G(r,(s,o,a)=>a.delete())}Y(e,t){let i;t?i=e:(i={},t=e);const r=this.cursor(i);return this.G(r,t)}Z(e){const t=this.cursor({});return new xe((i,r)=>{t.onerror=s=>{const o=_2(s.target.error);r(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():i()}):i()}})}G(e,t){const i=[];return new xe((r,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void r();const l=new Tse(a),c=t(a.primaryKey,a.value,l);if(c instanceof xe){const h=c.catch(d=>(l.done(),xe.reject(d)));i.push(h)}l.isDone?r():l.$===null?a.continue():a.continue(l.$)}}).next(()=>xe.waitFor(i))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.J?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ac(n){return new xe((e,t)=>{n.onsuccess=i=>{const r=i.target.result;e(r)},n.onerror=i=>{const r=_2(i.target.error);t(r)}})}let _B=!1;function _2(n){const e=xc.S(Pv());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new lt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return _B||(_B=!0,setTimeout(()=>{throw i},0)),i}}return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.se(i),this.oe=i=>t.writeSequenceNumber(i))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}x2._e=-1;function lx(n){return n==null}function qw(n){return n===0&&1/n==-1/0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xB(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function cx(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Rse(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,t){this.comparator=e,this.root=t||Pi.EMPTY}insert(e,t){return new Kn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pi.BLACK,null,null))}remove(e){return new Kn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ly(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ly(this.root,e,this.comparator,!1)}getReverseIterator(){return new ly(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ly(this.root,e,this.comparator,!0)}}class ly{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pi{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??Pi.RED,this.left=r??Pi.EMPTY,this.right=s??Pi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new Pi(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Pi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return Pi.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw It();const e=this.left.check();if(e!==this.right.check())throw It();return e+(this.isRed()?0:1)}}Pi.EMPTY=null,Pi.RED=!0,Pi.BLACK=!1;Pi.EMPTY=new class{constructor(){this.size=0}get key(){throw It()}get value(){throw It()}get color(){throw It()}get left(){throw It()}get right(){throw It()}copy(e,t,i,r,s){return this}insert(e,t,i){return new Pi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e){this.comparator=e,this.data=new Kn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new AB(this.data.getIterator())}getIteratorFrom(e){return new AB(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Fi)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Fi(this.comparator);return t.data=e,t}}class AB{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e){this.fields=e,e.sort(dr.comparator)}static empty(){return new Wa([])}unionWith(e){let t=new Fi(dr.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Wa(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return sf(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J9 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new J9("Invalid base64 string: "+s):s}}(e);return new nr(t)}static fromUint8Array(e){const t=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new nr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return tn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nr.EMPTY_BYTE_STRING=new nr("");const bse=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yl(n){if(ii(!!n),typeof n=="string"){let e=0;const t=bse.exec(n);if(ii(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Zn(n.seconds),nanos:Zn(n.nanos)}}function Zn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function jc(n){return typeof n=="string"?nr.fromBase64String(n):nr.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A2(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function S2(n){const e=n.mapValue.fields.__previous_value__;return A2(e)?S2(e):e}function Qp(n){const e=yl(n.mapValue.fields.__local_write_time__.timestampValue);return new Pr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pse{constructor(e,t,i,r,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Zp{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Zp("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Zp&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Xc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?A2(n)?4:Ise(n)?9007199254740991:10:It()}function Ro(n,e){if(n===e)return!0;const t=Xc(n);if(t!==Xc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Qp(n).isEqual(Qp(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=yl(r.timestampValue),a=yl(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(r,s){return jc(r.bytesValue).isEqual(jc(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return Zn(r.geoPointValue.latitude)===Zn(s.geoPointValue.latitude)&&Zn(r.geoPointValue.longitude)===Zn(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Zn(r.integerValue)===Zn(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=Zn(r.doubleValue),a=Zn(s.doubleValue);return o===a?qw(o)===qw(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return sf(n.arrayValue.values||[],e.arrayValue.values||[],Ro);case 10:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(xB(o)!==xB(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Ro(o[l],a[l])))return!1;return!0}(n,e);default:return It()}}function em(n,e){return(n.values||[]).find(t=>Ro(t,e))!==void 0}function of(n,e){if(n===e)return 0;const t=Xc(n),i=Xc(e);if(t!==i)return tn(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return tn(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Zn(s.integerValue||s.doubleValue),l=Zn(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return SB(n.timestampValue,e.timestampValue);case 4:return SB(Qp(n),Qp(e));case 5:return tn(n.stringValue,e.stringValue);case 6:return function(s,o){const a=jc(s),l=jc(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=tn(a[c],l[c]);if(h!==0)return h}return tn(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=tn(Zn(s.latitude),Zn(o.latitude));return a!==0?a:tn(Zn(s.longitude),Zn(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const h=of(a[c],l[c]);if(h)return h}return tn(a.length,l.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===cy.mapValue&&o===cy.mapValue)return 0;if(s===cy.mapValue)return 1;if(o===cy.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const p=tn(l[d],h[d]);if(p!==0)return p;const m=of(a[l[d]],c[h[d]]);if(m!==0)return m}return tn(l.length,h.length)}(n.mapValue,e.mapValue);default:throw It()}}function SB(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return tn(n,e);const t=yl(n),i=yl(e),r=tn(t.seconds,i.seconds);return r!==0?r:tn(t.nanos,i.nanos)}function af(n){return Qw(n)}function Qw(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=yl(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return jc(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return yt.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",r=!0;for(const s of t.values||[])r?r=!1:i+=",",i+=Qw(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${Qw(t.fields[o])}`;return r+"}"}(n.mapValue):It()}function Zw(n){return!!n&&"integerValue"in n}function E2(n){return!!n&&"arrayValue"in n}function EB(n){return!!n&&"nullValue"in n}function wB(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ES(n){return!!n&&"mapValue"in n}function tp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return cx(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=tp(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=tp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Ise(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e){this.value=e}static empty(){return new uo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!ES(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tp(t)}setAll(e){let t=dr.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,i,r),i={},r=[],t=a.popLast()}o?i[a.lastSegment()]=tp(o):r.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){const t=this.field(e.popLast());ES(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ro(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];ES(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){cx(t,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new uo(tp(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,t,i,r,s,o,a){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Yi(e,0,Tt.min(),Tt.min(),Tt.min(),uo.empty(),0)}static newFoundDocument(e,t,i,r){return new Yi(e,1,t,Tt.min(),i,r,0)}static newNoDocument(e,t){return new Yi(e,2,t,Tt.min(),Tt.min(),uo.empty(),0)}static newUnknownDocument(e,t){return new Yi(e,3,t,Tt.min(),Tt.min(),uo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Tt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=uo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=uo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Tt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Yi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e,t){this.position=e,this.inclusive=t}}function MB(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const s=e[r],o=n.position[r];if(s.field.isKeyField()?i=yt.comparator(yt.fromName(o.referenceValue),t.key):i=of(o,t.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function TB(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ro(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e,t="asc"){this.field=e,this.dir=t}}function Dse(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K9{}class ai extends K9{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new Bse(e,t,i):t==="array-contains"?new Ose(e,i):t==="in"?new Use(e,i):t==="not-in"?new kse(e,i):t==="array-contains-any"?new Vse(e,i):new ai(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new Nse(e,i):new Fse(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(of(t,this.value)):t!==null&&Xc(this.value)===Xc(t)&&this.matchesComparison(of(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return It()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class bo extends K9{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new bo(e,t)}matches(e){return $9(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function $9(n){return n.op==="and"}function Y9(n){return Lse(n)&&$9(n)}function Lse(n){for(const e of n.filters)if(e instanceof bo)return!1;return!0}function eM(n){if(n instanceof ai)return n.field.canonicalString()+n.op.toString()+af(n.value);if(Y9(n))return n.filters.map(e=>eM(e)).join(",");{const e=n.filters.map(t=>eM(t)).join(",");return`${n.op}(${e})`}}function q9(n,e){return n instanceof ai?function(i,r){return r instanceof ai&&i.op===r.op&&i.field.isEqual(r.field)&&Ro(i.value,r.value)}(n,e):n instanceof bo?function(i,r){return r instanceof bo&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&q9(o,r.filters[a]),!0):!1}(n,e):void It()}function Q9(n){return n instanceof ai?function(t){return`${t.field.canonicalString()} ${t.op} ${af(t.value)}`}(n):n instanceof bo?function(t){return t.op.toString()+" {"+t.getFilters().map(Q9).join(" ,")+"}"}(n):"Filter"}class Bse extends ai{constructor(e,t,i){super(e,t,i),this.key=yt.fromName(i.referenceValue)}matches(e){const t=yt.comparator(e.key,this.key);return this.matchesComparison(t)}}class Nse extends ai{constructor(e,t){super(e,"in",t),this.keys=Z9("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Fse extends ai{constructor(e,t){super(e,"not-in",t),this.keys=Z9("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Z9(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>yt.fromName(i.referenceValue))}class Ose extends ai{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return E2(t)&&em(t.arrayValue,this.value)}}class Use extends ai{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&em(this.value.arrayValue,t)}}class kse extends ai{constructor(e,t){super(e,"not-in",t)}matches(e){if(em(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!em(this.value.arrayValue,t)}}class Vse extends ai{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!E2(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>em(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zse{constructor(e,t=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function CB(n,e=null,t=[],i=[],r=null,s=null,o=null){return new zse(n,e,t,i,r,s,o)}function w2(n){const e=en(n);if(e.ce===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>eM(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),lx(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>af(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>af(i)).join(",")),e.ce=t}return e.ce}function M2(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Dse(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!q9(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!TB(n.startAt,e.startAt)&&TB(n.endAt,e.endAt)}function tM(n){return yt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e,t=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Gse(n,e,t,i,r,s,o,a){return new ux(n,e,t,i,r,s,o,a)}function ez(n){return new ux(n)}function RB(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Hse(n){return n.collectionGroup!==null}function np(n){const e=en(n);if(e.le===null){e.le=[];const t=new Set;for(const s of e.explicitOrderBy)e.le.push(s),t.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Fi(dr.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.le.push(new Vv(s,i))}),t.has(dr.keyField().canonicalString())||e.le.push(new Vv(dr.keyField(),i))}return e.le}function So(n){const e=en(n);return e.he||(e.he=Wse(e,np(n))),e.he}function Wse(n,e){if(n.limitType==="F")return CB(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new Vv(r.field,s)});const t=n.endAt?new kv(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new kv(n.startAt.position,n.startAt.inclusive):null;return CB(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function nM(n,e,t){return new ux(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function hx(n,e){return M2(So(n),So(e))&&n.limitType===e.limitType}function tz(n){return`${w2(So(n))}|lt:${n.limitType}`}function Ju(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>Q9(r)).join(", ")}]`),lx(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>af(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>af(r)).join(",")),`Target(${i})`}(So(n))}; limitType=${n.limitType})`}function fx(n,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):yt.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,e)&&function(i,r){for(const s of np(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(n,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(n,e)&&function(i,r){return!(i.startAt&&!function(o,a,l){const c=MB(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,np(i),r)||i.endAt&&!function(o,a,l){const c=MB(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,np(i),r))}(n,e)}function jse(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function nz(n){return(e,t)=>{let i=!1;for(const r of np(n)){const s=Xse(r,e,t);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function Xse(n,e,t){const i=n.field.isKeyField()?yt.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?of(l,c):It()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return It()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){cx(this.inner,(t,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return Rse(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jse=new Kn(yt.comparator);function vl(){return Jse}const iz=new Kn(yt.comparator);function Ld(...n){let e=iz;for(const t of n)e=e.insert(t.key,t);return e}function Kse(n){let e=iz;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Ac(){return ip()}function rz(){return ip()}function ip(){return new Ef(n=>n.toString(),(n,e)=>n.isEqual(e))}const $se=new Fi(yt.comparator);function $t(...n){let e=$se;for(const t of n)e=e.add(t);return e}const Yse=new Fi(tn);function qse(){return Yse}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qse(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qw(e)?"-0":e}}function Zse(n){return{integerValue:""+n}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(){this._=void 0}}function eoe(n,e,t){return n instanceof iM?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&A2(s)&&(s=S2(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof zv?sz(n,e):n instanceof Gv?oz(n,e):function(r,s){const o=noe(r,s),a=bB(o)+bB(r.Ie);return Zw(o)&&Zw(r.Ie)?Zse(a):Qse(r.serializer,a)}(n,e)}function toe(n,e,t){return n instanceof zv?sz(n,e):n instanceof Gv?oz(n,e):t}function noe(n,e){return n instanceof rM?function(i){return Zw(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class iM extends dx{}class zv extends dx{constructor(e){super(),this.elements=e}}function sz(n,e){const t=az(e);for(const i of n.elements)t.some(r=>Ro(r,i))||t.push(i);return{arrayValue:{values:t}}}class Gv extends dx{constructor(e){super(),this.elements=e}}function oz(n,e){let t=az(e);for(const i of n.elements)t=t.filter(r=>!Ro(r,i));return{arrayValue:{values:t}}}class rM extends dx{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function bB(n){return Zn(n.integerValue||n.doubleValue)}function az(n){return E2(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function ioe(n,e){return n.field.isEqual(e.field)&&function(i,r){return i instanceof zv&&r instanceof zv||i instanceof Gv&&r instanceof Gv?sf(i.elements,r.elements,Ro):i instanceof rM&&r instanceof rM?Ro(i.Ie,r.Ie):i instanceof iM&&r instanceof iM}(n.transform,e.transform)}class Lc{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Lc}static exists(e){return new Lc(void 0,e)}static updateTime(e){return new Lc(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Uy(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class T2{}function lz(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new soe(n.key,Lc.none()):new C2(n.key,n.data,Lc.none());{const t=n.data,i=uo.empty();let r=new Fi(dr.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new px(n.key,i,new Wa(r.toArray()),Lc.none())}}function roe(n,e,t){n instanceof C2?function(r,s,o){const a=r.value.clone(),l=IB(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof px?function(r,s,o){if(!Uy(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=IB(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(cz(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function rp(n,e,t,i){return n instanceof C2?function(s,o,a,l){if(!Uy(s.precondition,o))return a;const c=s.value.clone(),h=DB(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,i):n instanceof px?function(s,o,a,l){if(!Uy(s.precondition,o))return a;const c=DB(s.fieldTransforms,l,o),h=o.data;return h.setAll(cz(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(n,e,t,i):function(s,o,a){return Uy(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function PB(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&sf(i,r,(s,o)=>ioe(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class C2 extends T2{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class px extends T2{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function cz(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function IB(n,e,t){const i=new Map;ii(n.length===t.length);for(let r=0;r<t.length;r++){const s=n[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,toe(o,a,t[r]))}return i}function DB(n,e,t){const i=new Map;for(const r of n){const s=r.transform,o=t.data.field(r.field);i.set(r.field,eoe(s,o,e))}return i}class soe extends T2{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ooe{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&roe(s,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=rp(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=rp(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=rz();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(r.key)?null:a;const l=lz(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(Tt.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),$t())}isEqual(e){return this.batchId===e.batchId&&sf(this.mutations,e.mutations,(t,i)=>PB(t,i))&&sf(this.baseMutations,e.baseMutations,(t,i)=>PB(t,i))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aoe{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class loe{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qn,zt;function uz(n){if(n===void 0)return Co("GRPC error has no .code"),Ne.UNKNOWN;switch(n){case Qn.OK:return Ne.OK;case Qn.CANCELLED:return Ne.CANCELLED;case Qn.UNKNOWN:return Ne.UNKNOWN;case Qn.DEADLINE_EXCEEDED:return Ne.DEADLINE_EXCEEDED;case Qn.RESOURCE_EXHAUSTED:return Ne.RESOURCE_EXHAUSTED;case Qn.INTERNAL:return Ne.INTERNAL;case Qn.UNAVAILABLE:return Ne.UNAVAILABLE;case Qn.UNAUTHENTICATED:return Ne.UNAUTHENTICATED;case Qn.INVALID_ARGUMENT:return Ne.INVALID_ARGUMENT;case Qn.NOT_FOUND:return Ne.NOT_FOUND;case Qn.ALREADY_EXISTS:return Ne.ALREADY_EXISTS;case Qn.PERMISSION_DENIED:return Ne.PERMISSION_DENIED;case Qn.FAILED_PRECONDITION:return Ne.FAILED_PRECONDITION;case Qn.ABORTED:return Ne.ABORTED;case Qn.OUT_OF_RANGE:return Ne.OUT_OF_RANGE;case Qn.UNIMPLEMENTED:return Ne.UNIMPLEMENTED;case Qn.DATA_LOSS:return Ne.DATA_LOSS;default:return It()}}(zt=Qn||(Qn={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function coe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uoe=new Dh([4294967295,4294967295],0);function LB(n){const e=coe().encode(n),t=new use;return t.update(e),new Uint8Array(t.digest())}function BB(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Dh([t,i],0),new Dh([r,s],0)]}class R2{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Bd(`Invalid padding: ${t}`);if(i<0)throw new Bd(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Bd(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Bd(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ee=Dh.fromNumber(this.Te)}de(e,t,i){let r=e.add(t.multiply(Dh.fromNumber(i)));return r.compare(uoe)===1&&(r=new Dh([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=LB(e),[i,r]=BB(t);for(let s=0;s<this.hashCount;s++){const o=this.de(i,r,s);if(!this.Ae(o))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new R2(s,r,t);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const t=LB(e),[i,r]=BB(t);for(let s=0;s<this.hashCount;s++){const o=this.de(i,r,s);this.Re(o)}}Re(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Bd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,zm.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new mx(Tt.min(),r,new Kn(tn),vl(),$t())}}class zm{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new zm(i,t,$t(),$t(),$t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(e,t,i,r){this.Ve=e,this.removedTargetIds=t,this.key=i,this.me=r}}class hz{constructor(e,t){this.targetId=e,this.fe=t}}class fz{constructor(e,t,i=nr.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class NB{constructor(){this.ge=0,this.pe=OB(),this.ye=nr.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=$t(),t=$t(),i=$t();return this.pe.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:It()}}),new zm(this.ye,this.we,e,t,i)}Fe(){this.Se=!1,this.pe=OB()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,ii(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class hoe{constructor(e){this.Le=e,this.ke=new Map,this.qe=vl(),this.Qe=FB(),this.Ke=new Kn(tn)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,t=>{const i=this.ze(t);switch(e.state){case 0:this.je(t)&&i.Ce(e.resumeToken);break;case 1:i.Ne(),i.be||i.Fe(),i.Ce(e.resumeToken);break;case 2:i.Ne(),i.be||this.removeTarget(t);break;case 3:this.je(t)&&(i.Be(),i.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),i.Ce(e.resumeToken));break;default:It()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach((i,r)=>{this.je(r)&&t(r)})}Je(e){const t=e.targetId,i=e.fe.count,r=this.Ye(t);if(r){const s=r.target;if(tM(s))if(i===0){const o=new yt(s.path);this.We(t,o,Yi.newNoDocument(o,Tt.min()))}else ii(i===1);else{const o=this.Ze(t);if(o!==i){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,c)}}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=t;let o,a;try{o=jc(i).toUint8Array()}catch(l){if(l instanceof J9)return rf("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new R2(o,r,s)}catch(l){return rf(l instanceof Bd?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,t,i){return t.fe.count===i-this.rt(e,t.targetId)?0:2}rt(e,t){const i=this.Le.getRemoteKeysForTarget(t);let r=0;return i.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(t,s,null),r++)}),r}it(e){const t=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&tM(a.target)){const l=new yt(a.target.path);this.qe.get(l)!==null||this.st(o,l)||this.We(o,l,Yi.newNoDocument(l,e))}s.De&&(t.set(o,s.ve()),s.Fe())}});let i=$t();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));const r=new mx(e,t,this.Ke,this.qe,i);return this.qe=vl(),this.Qe=FB(),this.Ke=new Kn(tn),r}Ue(e,t){if(!this.je(e))return;const i=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,i),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,i){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),i&&(this.qe=this.qe.insert(t,i))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new NB,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new Fi(tn),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||Ge("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new NB),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function FB(){return new Kn(yt.comparator)}function OB(){return new Kn(yt.comparator)}const foe={asc:"ASCENDING",desc:"DESCENDING"},doe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},poe={and:"AND",or:"OR"};class moe{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function sM(n,e){return n.useProto3Json||lx(e)?e:{value:e}}function goe(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yoe(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Lh(n){return ii(!!n),Tt.fromTimestamp(function(t){const i=yl(t);return new Pr(i.seconds,i.nanos)}(n))}function voe(n,e){return oM(n,e).canonicalString()}function oM(n,e){const t=function(r){return new Un(["projects",r.projectId,"databases",r.database])}(n).child("documents");return e===void 0?t:t.child(e)}function dz(n){const e=Un.fromString(n);return ii(vz(e)),e}function wS(n,e){const t=dz(e);if(t.get(1)!==n.databaseId.projectId)throw new lt(Ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new lt(Ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new yt(mz(t))}function pz(n,e){return voe(n.databaseId,e)}function _oe(n){const e=dz(n);return e.length===4?Un.emptyPath():mz(e)}function UB(n){return new Un(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function mz(n){return ii(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function xoe(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:It()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(ii(h===void 0||typeof h=="string"),nr.fromBase64String(h||"")):(ii(h===void 0||h instanceof Uint8Array),nr.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?Ne.UNKNOWN:uz(c.code);return new lt(h,c.message||"")}(o);t=new fz(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=wS(n,i.document.name),s=Lh(i.document.updateTime),o=i.document.createTime?Lh(i.document.createTime):Tt.min(),a=new uo({mapValue:{fields:i.document.fields}}),l=Yi.newFoundDocument(r,s,o,a),c=i.targetIds||[],h=i.removedTargetIds||[];t=new ky(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=wS(n,i.document),s=i.readTime?Lh(i.readTime):Tt.min(),o=Yi.newNoDocument(r,s),a=i.removedTargetIds||[];t=new ky([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=wS(n,i.document),s=i.removedTargetIds||[];t=new ky([],s,r,null)}else{if(!("filter"in e))return It();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new loe(r,s),a=i.targetId;t=new hz(a,o)}}return t}function Aoe(n,e){return{documents:[pz(n,e.path)]}}function Soe(n,e){const t={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=pz(n,r);const s=function(c){if(c.length!==0)return yz(bo.create(c,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:Ku(p.field),direction:Moe(p.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=sM(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:t,parent:r}}function Eoe(n){let e=_oe(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){ii(i===1);const h=t.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(d){const p=gz(d);return p instanceof bo&&Y9(p)?p.getFilters():[p]}(t.where));let o=[];t.orderBy&&(o=function(d){return d.map(p=>function(y){return new Vv($u(y.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(t.orderBy));let a=null;t.limit&&(a=function(d){let p;return p=typeof d=="object"?d.value:d,lx(p)?null:p}(t.limit));let l=null;t.startAt&&(l=function(d){const p=!!d.before,m=d.values||[];return new kv(m,p)}(t.startAt));let c=null;return t.endAt&&(c=function(d){const p=!d.before,m=d.values||[];return new kv(m,p)}(t.endAt)),Gse(e,r,o,s,a,"F",l,c)}function woe(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return It()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function gz(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=$u(t.unaryFilter.field);return ai.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=$u(t.unaryFilter.field);return ai.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=$u(t.unaryFilter.field);return ai.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=$u(t.unaryFilter.field);return ai.create(o,"!=",{nullValue:"NULL_VALUE"});default:return It()}}(n):n.fieldFilter!==void 0?function(t){return ai.create($u(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return It()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return bo.create(t.compositeFilter.filters.map(i=>gz(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return It()}}(t.compositeFilter.op))}(n):It()}function Moe(n){return foe[n]}function Toe(n){return doe[n]}function Coe(n){return poe[n]}function Ku(n){return{fieldPath:n.canonicalString()}}function $u(n){return dr.fromServerFormat(n.fieldPath)}function yz(n){return n instanceof ai?function(t){if(t.op==="=="){if(wB(t.value))return{unaryFilter:{field:Ku(t.field),op:"IS_NAN"}};if(EB(t.value))return{unaryFilter:{field:Ku(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(wB(t.value))return{unaryFilter:{field:Ku(t.field),op:"IS_NOT_NAN"}};if(EB(t.value))return{unaryFilter:{field:Ku(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ku(t.field),op:Toe(t.op),value:t.value}}}(n):n instanceof bo?function(t){const i=t.getFilters().map(r=>yz(r));return i.length===1?i[0]:{compositeFilter:{op:Coe(t.op),filters:i}}}(n):It()}function vz(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,t,i,r,s=Tt.min(),o=Tt.min(),a=nr.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ja(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ja(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ja(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ja(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Roe{constructor(e){this.ct=e}}function boe(n){const e=Eoe({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?nM(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Poe{constructor(){this._n=new Ioe}addToCollectionParentIndex(e,t){return this._n.add(t),xe.resolve()}getCollectionParents(e,t){return xe.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return xe.resolve()}deleteFieldIndex(e,t){return xe.resolve()}deleteAllFieldIndexes(e){return xe.resolve()}createTargetIndexes(e,t){return xe.resolve()}getDocumentsMatchingTarget(e,t){return xe.resolve(null)}getIndexType(e,t){return xe.resolve(0)}getFieldIndexes(e,t){return xe.resolve([])}getNextCollectionGroupToUpdate(e){return xe.resolve(null)}getMinOffset(e,t){return xe.resolve(gl.min())}getMinOffsetFromCollectionGroup(e,t){return xe.resolve(gl.min())}updateCollectionGroup(e,t,i){return xe.resolve()}updateIndexEntries(e,t){return xe.resolve()}}class Ioe{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Fi(Un.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Fi(Un.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new lf(0)}static Bn(){return new lf(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Doe{constructor(){this.changes=new Ef(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Yi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?xe.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Loe{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Boe{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&rp(i.mutation,r,Wa.empty(),Pr.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,$t()).next(()=>i))}getLocalViewOfDocuments(e,t,i=$t()){const r=Ac();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=Ld();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const i=Ac();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,$t()))}populateOverlays(e,t,i){const r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,i,r){let s=vl();const o=ip(),a=function(){return ip()}();return t.forEach((l,c)=>{const h=i.get(c.key);r.has(c.key)&&(h===void 0||h.mutation instanceof px)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),rp(h.mutation,c,h.mutation.getFieldMask(),Pr.now())):o.set(c.key,Wa.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),t.forEach((c,h)=>{var d;return a.set(c,new Loe(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,t){const i=ip();let r=new Kn((o,a)=>o-a),s=$t();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(c===null)return;let h=i.get(l)||Wa.empty();h=a.applyToLocalView(c,h),i.set(l,h);const d=(r.get(a.batchId)||$t()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=rz();h.forEach(p=>{if(!s.has(p)){const m=lz(t.get(p),i.get(p));m!==null&&d.set(p,m),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return xe.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return function(o){return yt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Hse(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):xe.resolve(Ac());let a=-1,l=s;return o.next(c=>xe.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?xe.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,$t())).next(h=>({batchId:a,changes:Kse(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new yt(t)).next(i=>{let r=Ld();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const s=t.collectionGroup;let o=Ld();return this.indexManager.getCollectionParents(e,s).next(a=>xe.forEach(a,l=>{const c=function(d,p){return new ux(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,i,r).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,s,r))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Yi.newInvalidDocument(h)))});let a=Ld();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&rp(h.mutation,c,Wa.empty(),Pr.now()),fx(t,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Noe{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return xe.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(r){return{id:r.id,version:r.version,createTime:Lh(r.createTime)}}(t)),xe.resolve()}getNamedQuery(e,t){return xe.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(r){return{name:r.name,query:boe(r.bundledQuery),readTime:Lh(r.readTime)}}(t)),xe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Foe{constructor(){this.overlays=new Kn(yt.comparator),this.hr=new Map}getOverlay(e,t){return xe.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Ac();return xe.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.ht(e,t,s)}),xe.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.hr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(i)),xe.resolve()}getOverlaysForCollection(e,t,i){const r=Ac(),s=t.length+1,o=new yt(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return xe.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new Kn((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>i){let h=s.get(c.largestBatchId);h===null&&(h=Ac(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Ac(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=r)););return xe.resolve(a)}ht(e,t,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.hr.get(r.largestBatchId).delete(i.key);this.hr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new aoe(t,i));let s=this.hr.get(t);s===void 0&&(s=$t(),this.hr.set(t,s)),this.hr.set(t,s.add(i.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(){this.Pr=new Fi(vi.Ir),this.Tr=new Fi(vi.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const i=new vi(e,t);this.Pr=this.Pr.add(i),this.Tr=this.Tr.add(i)}dr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Ar(new vi(e,t))}Rr(e,t){e.forEach(i=>this.removeReference(i,t))}Vr(e){const t=new yt(new Un([])),i=new vi(t,e),r=new vi(t,e+1),s=[];return this.Tr.forEachInRange([i,r],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new yt(new Un([])),i=new vi(t,e),r=new vi(t,e+1);let s=$t();return this.Tr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new vi(e,0),i=this.Pr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class vi{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return yt.comparator(e.key,t.key)||tn(e.pr,t.pr)}static Er(e,t){return tn(e.pr,t.pr)||yt.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ooe{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Fi(vi.Ir)}checkEmpty(e){return xe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new ooe(s,t,i,r);this.mutationQueue.push(o);for(const a of r)this.wr=this.wr.add(new vi(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return xe.resolve(o)}lookupMutationBatch(e,t){return xe.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=this.br(i),s=r<0?0:r;return xe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return xe.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new vi(t,0),r=new vi(t,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([i,r],o=>{const a=this.Sr(o.pr);s.push(a)}),xe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Fi(tn);return t.forEach(r=>{const s=new vi(r,0),o=new vi(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{i=i.add(a.pr)})}),xe.resolve(this.Dr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let s=i;yt.isDocumentKey(s)||(s=s.child(""));const o=new vi(new yt(s),0);let a=new Fi(tn);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.pr)),!0)},o),xe.resolve(this.Dr(a))}Dr(e){const t=[];return e.forEach(i=>{const r=this.Sr(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){ii(this.Cr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.wr;return xe.forEach(t.mutations,r=>{const s=new vi(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.wr=i})}Mn(e){}containsKey(e,t){const i=new vi(t,0),r=this.wr.firstAfterOrEqual(i);return xe.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,xe.resolve()}Cr(e,t){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uoe{constructor(e){this.vr=e,this.docs=function(){return new Kn(yt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.vr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return xe.resolve(i?i.document.mutableCopy():Yi.newInvalidDocument(t))}getEntries(e,t){let i=vl();return t.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Yi.newInvalidDocument(r))}),xe.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=vl();const o=t.path,a=new yt(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Ese(Sse(h),i)<=0||(r.has(h.key)||fx(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return xe.resolve(s)}getAllFromCollectionGroup(e,t,i,r){It()}Fr(e,t){return xe.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new koe(this)}getSize(e){return xe.resolve(this.size)}}class koe extends Doe{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(i)}),xe.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Voe{constructor(e){this.persistence=e,this.Mr=new Ef(t=>w2(t),M2),this.lastRemoteSnapshotVersion=Tt.min(),this.highestTargetId=0,this.Or=0,this.Nr=new b2,this.targetCount=0,this.Br=lf.Nn()}forEachTarget(e,t){return this.Mr.forEach((i,r)=>t(r)),xe.resolve()}getLastRemoteSnapshotVersion(e){return xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return xe.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),xe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Or&&(this.Or=t),xe.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new lf(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,xe.resolve()}updateTargetData(e,t){return this.qn(t),xe.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,xe.resolve()}removeTargets(e,t,i){let r=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=t&&i.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),xe.waitFor(s).next(()=>r)}getTargetCount(e){return xe.resolve(this.targetCount)}getTargetData(e,t){const i=this.Mr.get(t)||null;return xe.resolve(i)}addMatchingKeys(e,t,i){return this.Nr.dr(t,i),xe.resolve()}removeMatchingKeys(e,t,i){this.Nr.Rr(t,i);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),xe.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),xe.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Nr.gr(t);return xe.resolve(i)}containsKey(e,t){return xe.resolve(this.Nr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zoe{constructor(e,t){this.Lr={},this.overlays={},this.kr=new x2(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Voe(this),this.indexManager=new Poe,this.remoteDocumentCache=function(r){return new Uoe(r)}(i=>this.referenceDelegate.Kr(i)),this.serializer=new Roe(t),this.$r=new Noe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Foe,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Lr[e.toKey()];return i||(i=new Ooe(t,this.referenceDelegate),this.Lr[e.toKey()]=i),i}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,i){Ge("MemoryPersistence","Starting transaction:",e);const r=new Goe(this.kr.next());return this.referenceDelegate.Ur(),i(r).next(s=>this.referenceDelegate.Wr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gr(e,t){return xe.or(Object.values(this.Lr).map(i=>()=>i.containsKey(e,t)))}}class Goe extends Mse{constructor(e){super(),this.currentSequenceNumber=e}}class P2{constructor(e){this.persistence=e,this.zr=new b2,this.jr=null}static Hr(e){return new P2(e)}get Jr(){if(this.jr)return this.jr;throw It()}addReference(e,t,i){return this.zr.addReference(i,t),this.Jr.delete(i.toString()),xe.resolve()}removeReference(e,t,i){return this.zr.removeReference(i,t),this.Jr.add(i.toString()),xe.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),xe.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(r=>this.Jr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Jr.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xe.forEach(this.Jr,i=>{const r=yt.fromPath(i);return this.Yr(e,r).next(s=>{s||t.removeEntry(r,Tt.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(i=>{i?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return xe.or([()=>xe.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.qi=i,this.Qi=r}static Ki(e,t){let i=$t(),r=$t();for(const s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new I2(e,t.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hoe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Woe{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Hne()?8:xc.v(Pv())>0?6:4}()}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,i,r){const s={result:null};return this.ji(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,t,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Hoe;return this.Ji(e,t,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,t,o,a.size)})}).next(()=>s.result)}Yi(e,t,i,r){return i.documentReadCount<this.Wi?(Sd()<=Kt.DEBUG&&Ge("QueryEngine","SDK will not create cache indexes for query:",Ju(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),xe.resolve()):(Sd()<=Kt.DEBUG&&Ge("QueryEngine","Query:",Ju(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Gi*r?(Sd()<=Kt.DEBUG&&Ge("QueryEngine","The SDK decides to create cache indexes for query:",Ju(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,So(t))):xe.resolve())}ji(e,t){if(RB(t))return xe.resolve(null);let i=So(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=nM(t,null,"F"),i=So(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=$t(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.Zi(t,a);return this.Xi(t,c,o,l.readTime)?this.ji(e,nM(t,null,"F")):this.es(e,c,t,l)}))})))}Hi(e,t,i,r){return RB(t)||r.isEqual(Tt.min())?xe.resolve(null):this.zi.getDocuments(e,i).next(s=>{const o=this.Zi(t,s);return this.Xi(t,o,i,r)?xe.resolve(null):(Sd()<=Kt.DEBUG&&Ge("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ju(t)),this.es(e,o,t,Ase(r,-1)).next(a=>a))})}Zi(e,t){let i=new Fi(nz(e));return t.forEach((r,s)=>{fx(e,s)&&(i=i.add(s))}),i}Xi(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ji(e,t,i){return Sd()<=Kt.DEBUG&&Ge("QueryEngine","Using full collection scan to execute query:",Ju(t)),this.zi.getDocumentsMatchingQuery(e,t,gl.min(),i)}es(e,t,i,r){return this.zi.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class joe{constructor(e,t,i,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new Kn(tn),this.rs=new Ef(s=>w2(s),M2),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(i)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Boe(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}}function Xoe(n,e,t,i){return new joe(n,e,t,i)}async function _z(n,e){const t=en(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t._s(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=$t();for(const c of r){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(i,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}function xz(n){const e=en(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function Joe(n,e){const t=en(n),i=e.snapshotVersion;let r=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.os.newChangeBuffer({trackRemovals:!0});r=t.ns;const a=[];e.targetChanges.forEach((h,d)=>{const p=r.get(d);if(!p)return;a.push(t.Qr.removeMatchingKeys(s,h.removedDocuments,d).next(()=>t.Qr.addMatchingKeys(s,h.addedDocuments,d)));let m=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(nr.EMPTY_BYTE_STRING,Tt.min()).withLastLimboFreeSnapshotVersion(Tt.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,i)),r=r.insert(d,m),function(x,_,g){return x.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:g.addedDocuments.size+g.modifiedDocuments.size+g.removedDocuments.size>0}(p,m,h)&&a.push(t.Qr.updateTargetData(s,m))});let l=vl(),c=$t();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(Koe(s,o,e.documentUpdates).next(h=>{l=h.cs,c=h.ls})),!i.isEqual(Tt.min())){const h=t.Qr.getLastRemoteSnapshotVersion(s).next(d=>t.Qr.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(h)}return xe.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.ns=r,s))}function Koe(n,e,t){let i=$t(),r=$t();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=vl();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(Tt.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Ge("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:r}})}function $oe(n,e){const t=en(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Qr.getTargetData(i,e).next(s=>s?(r=s,xe.resolve(r)):t.Qr.allocateTargetId(i).next(o=>(r=new ja(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.Qr.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.ns.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.ns=t.ns.insert(i.targetId,i),t.rs.set(e,i.targetId)),i})}async function aM(n,e,t){const i=en(n),r=i.ns.get(e),s=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Vm(o))throw o;Ge("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.ns=i.ns.remove(e),i.rs.delete(r.target)}function kB(n,e,t){const i=en(n);let r=Tt.min(),s=$t();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=en(l),p=d.rs.get(h);return p!==void 0?xe.resolve(d.ns.get(p)):d.Qr.getTargetData(c,h)}(i,o,So(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.ts.getDocumentsMatchingQuery(o,e,t?r:Tt.min(),t?s:$t())).next(a=>(Yoe(i,jse(e),a),{documents:a,hs:s})))}function Yoe(n,e,t){let i=n.ss.get(e)||Tt.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.ss.set(e,i)}class VB{constructor(){this.activeTargetIds=qse()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qoe{constructor(){this.no=new VB,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,i){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new VB,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qoe{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zB{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Ge("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Ge("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uy=null;function MS(){return uy===null?uy=function(){return 268435456+Math.round(2147483648*Math.random())}():uy++,"0x"+uy.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zoe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eae{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji="WebChannelConnection";class tae extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=i+"://"+t.host,this.po=`projects/${r}/databases/${s}`,this.yo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get wo(){return!1}So(t,i,r,s,o){const a=MS(),l=this.bo(t,i.toUriEncodedString());Ge("RestConnection",`Sending RPC '${t}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,s,o),this.Co(t,l,c,r).then(h=>(Ge("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw rf("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",l,"request:",r),h})}vo(t,i,r,s,o,a){return this.So(t,i,r,s,o)}Do(t,i,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Sf}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>t[o]=s),r&&r.headers.forEach((s,o)=>t[o]=s)}bo(t,i){const r=Zoe[t];return`${this.fo}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,i,r){const s=MS();return new Promise((o,a)=>{const l=new cse;l.setWithCredentials(!0),l.listenOnce(ase.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case SS.NO_ERROR:const h=l.getResponseJson();Ge(Ji,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case SS.TIMEOUT:Ge(Ji,`RPC '${e}' ${s} timed out`),a(new lt(Ne.DEADLINE_EXCEEDED,"Request time out"));break;case SS.HTTP_ERROR:const d=l.getStatus();if(Ge(Ji,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const y=function(_){const g=_.toLowerCase().replace(/_/g,"-");return Object.values(Ne).indexOf(g)>=0?g:Ne.UNKNOWN}(m.status);a(new lt(y,m.message))}else a(new lt(Ne.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new lt(Ne.UNAVAILABLE,"Connection failed."));break;default:It()}}finally{Ge(Ji,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(r);Ge(Ji,`RPC '${e}' ${s} sending request:`,r),l.send(t,"POST",c,i,15)})}Fo(e,t,i){const r=MS(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=sse(),a=ose(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,t,i),l.encodeInitMessageHeaders=!0;const h=s.join("");Ge(Ji,`Creating RPC '${e}' stream ${r}: ${h}`,l);const d=o.createWebChannel(h,l);let p=!1,m=!1;const y=new eae({lo:_=>{m?Ge(Ji,`Not sending because RPC '${e}' stream ${r} is closed:`,_):(p||(Ge(Ji,`Opening RPC '${e}' stream ${r} transport.`),d.open(),p=!0),Ge(Ji,`RPC '${e}' stream ${r} sending:`,_),d.send(_))},ho:()=>d.close()}),x=(_,g,A)=>{_.listen(g,S=>{try{A(S)}catch(w){setTimeout(()=>{throw w},0)}})};return x(d,ay.EventType.OPEN,()=>{m||Ge(Ji,`RPC '${e}' stream ${r} transport opened.`)}),x(d,ay.EventType.CLOSE,()=>{m||(m=!0,Ge(Ji,`RPC '${e}' stream ${r} transport closed`),y.Vo())}),x(d,ay.EventType.ERROR,_=>{m||(m=!0,rf(Ji,`RPC '${e}' stream ${r} transport errored:`,_),y.Vo(new lt(Ne.UNAVAILABLE,"The operation could not be completed")))}),x(d,ay.EventType.MESSAGE,_=>{var g;if(!m){const A=_.data[0];ii(!!A);const S=A,w=S.error||((g=S[0])===null||g===void 0?void 0:g.error);if(w){Ge(Ji,`RPC '${e}' stream ${r} received error:`,w);const R=w.status;let T=function(b){const I=Qn[b];if(I!==void 0)return uz(I)}(R),P=w.message;T===void 0&&(T=Ne.INTERNAL,P="Unknown error status: "+R+" with message "+w.message),m=!0,y.Vo(new lt(T,P)),d.close()}else Ge(Ji,`RPC '${e}' stream ${r} received:`,A),y.mo(A)}}),x(a,lse.STAT_EVENT,_=>{_.stat===yB.PROXY?Ge(Ji,`RPC '${e}' stream ${r} detected buffering proxy`):_.stat===yB.NOPROXY&&Ge(Ji,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{y.Ro()},0),y}}function TS(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Az(n){return new moe(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sz{constructor(e,t,i=1e3,r=1.5,s=6e4){this.oi=e,this.timerId=t,this.Mo=i,this.xo=r,this.Oo=s,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),i=Math.max(0,Date.now()-this.Lo),r=Math.max(0,t-i);r>0&&Ge("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.No} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nae{constructor(e,t,i,r,s,o,a,l){this.oi=e,this.$o=i,this.Uo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Sz(e,t)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,t){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():t&&t.code===Ne.RESOURCE_EXHAUSTED?(Co(t.toString()),Co("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):t&&t.code===Ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(t)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Wo===t&&this.o_(i,r)},i=>{e(()=>{const r=new lt(Ne.UNKNOWN,"Fetching auth token failed: "+i.message);return this.__(r)})})}o_(e,t){const i=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po(()=>{i(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(r=>{i(()=>this.__(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(e){return Ge("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget(()=>this.Wo===e?t():(Ge("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class iae extends nae{constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=xoe(this.serializer,e),i=function(s){if(!("targetChange"in s))return Tt.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Tt.min():o.readTime?Lh(o.readTime):Tt.min()}(e);return this.listener.u_(t,i)}c_(e){const t={};t.database=UB(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=tM(l)?{documents:Aoe(s,l)}:{query:Soe(s,l).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=yoe(s,o.resumeToken);const c=sM(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Tt.min())>0){a.readTime=goe(s,o.snapshotVersion.toTimestamp());const c=sM(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const i=woe(this.serializer,e);i&&(t.labels=i),this.t_(t)}l_(e){const t={};t.database=UB(this.serializer),t.removeTarget=e,this.t_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rae extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new lt(Ne.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,i,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,oM(t,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new lt(Ne.UNKNOWN,s.toString())})}vo(e,t,i,r,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,oM(t,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new lt(Ne.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class sae{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Co(t),this.g_=!1):Ge("OnlineStateTracker",t)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oae{constructor(e,t,i,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(o=>{i.enqueueAndForget(async()=>{Hm(this)&&(Ge("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=en(l);c.v_.add(4),await Gm(c),c.x_.set("Unknown"),c.v_.delete(4),await gx(c)}(this))})}),this.x_=new sae(i,r)}}async function gx(n){if(Hm(n))for(const e of n.F_)await e(!0)}async function Gm(n){for(const e of n.F_)await e(!1)}function Ez(n,e){const t=en(n);t.C_.has(e.targetId)||(t.C_.set(e.targetId,e),B2(t)?L2(t):wf(t).Jo()&&D2(t,e))}function wz(n,e){const t=en(n),i=wf(t);t.C_.delete(e),i.Jo()&&Mz(t,e),t.C_.size===0&&(i.Jo()?i.Xo():Hm(t)&&t.x_.set("Unknown"))}function D2(n,e){if(n.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Tt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}wf(n).c_(e)}function Mz(n,e){n.O_.Oe(e),wf(n).l_(e)}function L2(n){n.O_=new hoe({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>n.C_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),wf(n).start(),n.x_.p_()}function B2(n){return Hm(n)&&!wf(n).Ho()&&n.C_.size>0}function Hm(n){return en(n).v_.size===0}function Tz(n){n.O_=void 0}async function aae(n){n.C_.forEach((e,t)=>{D2(n,e)})}async function lae(n,e){Tz(n),B2(n)?(n.x_.S_(e),L2(n)):n.x_.set("Unknown")}async function cae(n,e,t){if(n.x_.set("Online"),e instanceof fz&&e.state===2&&e.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.C_.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.C_.delete(a),r.O_.removeTarget(a))}(n,e)}catch(i){Ge("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await GB(n,i)}else if(e instanceof ky?n.O_.$e(e):e instanceof hz?n.O_.Je(e):n.O_.Ge(e),!t.isEqual(Tt.min()))try{const i=await xz(n.localStore);t.compareTo(i)>=0&&await function(s,o){const a=s.O_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.C_.get(c);h&&s.C_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.C_.get(l);if(!h)return;s.C_.set(l,h.withResumeToken(nr.EMPTY_BYTE_STRING,h.snapshotVersion)),Mz(s,l);const d=new ja(h.target,l,c,h.sequenceNumber);D2(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(i){Ge("RemoteStore","Failed to raise snapshot:",i),await GB(n,i)}}async function GB(n,e,t){if(!Vm(e))throw e;n.v_.add(1),await Gm(n),n.x_.set("Offline"),t||(t=()=>xz(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Ge("RemoteStore","Retrying IndexedDB access"),await t(),n.v_.delete(1),await gx(n)})}async function HB(n,e){const t=en(n);t.asyncQueue.verifyOperationInProgress(),Ge("RemoteStore","RemoteStore received new credentials");const i=Hm(t);t.v_.add(3),await Gm(t),i&&t.x_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.v_.delete(3),await gx(t)}async function uae(n,e){const t=en(n);e?(t.v_.delete(2),await gx(t)):e||(t.v_.add(2),await Gm(t),t.x_.set("Unknown"))}function wf(n){return n.N_||(n.N_=function(t,i,r){const s=en(t);return s.R_(),new iae(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Po:aae.bind(null,n),To:lae.bind(null,n),u_:cae.bind(null,n)}),n.F_.push(async e=>{e?(n.N_.Zo(),B2(n)?L2(n):n.x_.set("Unknown")):(await n.N_.stop(),Tz(n))})),n.N_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new ol,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,s){const o=Date.now()+i,a=new N2(e,t,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new lt(Ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cz(n,e){if(Co("AsyncQueue",`${e}: ${n}`),Vm(n))return new lt(Ne.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e){this.comparator=e?(t,i)=>e(t,i)||yt.comparator(t.key,i.key):(t,i)=>yt.comparator(t.key,i.key),this.keyedMap=Ld(),this.sortedSet=new Kn(this.comparator)}static emptySet(e){return new Bh(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Bh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Bh;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WB{constructor(){this.L_=new Kn(yt.comparator)}track(e){const t=e.doc.key,i=this.L_.get(t);i?e.type!==0&&i.type===3?this.L_=this.L_.insert(t,e):e.type===3&&i.type!==1?this.L_=this.L_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.L_=this.L_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.L_=this.L_.remove(t):e.type===1&&i.type===2?this.L_=this.L_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):It():this.L_=this.L_.insert(t,e)}k_(){const e=[];return this.L_.inorderTraversal((t,i)=>{e.push(i)}),e}}class cf{constructor(e,t,i,r,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,i,r,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new cf(e,t,Bh.emptySet(t),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hx(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hae{constructor(){this.q_=void 0,this.Q_=[]}}class fae{constructor(){this.queries=new Ef(e=>tz(e),hx),this.onlineState="Unknown",this.K_=new Set}}async function dae(n,e){const t=en(n),i=e.query;let r=!1,s=t.queries.get(i);if(s||(r=!0,s=new hae),r)try{s.q_=await t.onListen(i)}catch(o){const a=Cz(o,`Initialization of query '${Ju(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.Q_.push(e),e.U_(t.onlineState),s.q_&&e.W_(s.q_)&&F2(t)}async function pae(n,e){const t=en(n),i=e.query;let r=!1;const s=t.queries.get(i);if(s){const o=s.Q_.indexOf(e);o>=0&&(s.Q_.splice(o,1),r=s.Q_.length===0)}if(r)return t.queries.delete(i),t.onUnlisten(i)}function mae(n,e){const t=en(n);let i=!1;for(const r of e){const s=r.query,o=t.queries.get(s);if(o){for(const a of o.Q_)a.W_(r)&&(i=!0);o.q_=r}}i&&F2(t)}function gae(n,e,t){const i=en(n),r=i.queries.get(e);if(r)for(const s of r.Q_)s.onError(t);i.queries.delete(e)}function F2(n){n.K_.forEach(e=>{e.next()})}class yae{constructor(e,t,i){this.query=e,this.G_=t,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=i||{}}W_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new cf(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.z_?this.H_(e)&&(this.G_.next(e),t=!0):this.J_(e,this.onlineState)&&(this.Y_(e),t=!0),this.j_=e,t}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}J_(e,t){if(!e.fromCache)return!0;const i=t!=="Offline";return(!this.options.Z_||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}H_(e){if(e.docChanges.length>0)return!0;const t=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Y_(e){e=cf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rz{constructor(e){this.key=e}}class bz{constructor(e){this.key=e}}class vae{constructor(e,t){this.query=e,this.oa=t,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=$t(),this.mutatedKeys=$t(),this.ua=nz(e),this.ca=new Bh(this.ua)}get la(){return this.oa}ha(e,t){const i=t?t.Pa:new WB,r=t?t.ca:this.ca;let s=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,d)=>{const p=r.get(h),m=fx(this.query,d)?d:null,y=!!p&&this.mutatedKeys.has(p.key),x=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let _=!1;p&&m?p.data.isEqual(m.data)?y!==x&&(i.track({type:3,doc:m}),_=!0):this.Ia(p,m)||(i.track({type:2,doc:m}),_=!0,(l&&this.ua(m,l)>0||c&&this.ua(m,c)<0)&&(a=!0)):!p&&m?(i.track({type:0,doc:m}),_=!0):p&&!m&&(i.track({type:1,doc:p}),_=!0,(l||c)&&(a=!0)),_&&(m?(o=o.add(m),s=x?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),i.track({type:1,doc:h})}return{ca:o,Pa:i,Xi:a,mutatedKeys:s}}Ia(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const s=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const o=e.Pa.k_();o.sort((h,d)=>function(m,y){const x=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return It()}};return x(m)-x(y)}(h.type,d.type)||this.ua(h.doc,d.doc)),this.Ta(i),r=r!=null&&r;const a=t&&!r?this.Ea():[],l=this.aa.size===0&&this.current&&!r?1:0,c=l!==this._a;return this._a=l,o.length!==0||c?{snapshot:new cf(this.query,e.ca,s,o,e.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new WB,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(t=>this.oa=this.oa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.oa=this.oa.delete(t)),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=$t(),this.ca.forEach(i=>{this.Aa(i.key)&&(this.aa=this.aa.add(i.key))});const t=[];return e.forEach(i=>{this.aa.has(i)||t.push(new bz(i))}),this.aa.forEach(i=>{e.has(i)||t.push(new Rz(i))}),t}Ra(e){this.oa=e.hs,this.aa=$t();const t=this.ha(e.documents);return this.applyChanges(t,!0)}Va(){return cf.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}}class _ae{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class xae{constructor(e){this.key=e,this.ma=!1}}class Aae{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new Ef(a=>tz(a),hx),this.pa=new Map,this.ya=new Set,this.wa=new Kn(yt.comparator),this.Sa=new Map,this.ba=new b2,this.Da={},this.Ca=new Map,this.va=lf.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}}async function Sae(n,e){const t=bae(n);let i,r;const s=t.ga.get(e);if(s)i=s.targetId,t.sharedClientState.addLocalQueryTarget(i),r=s.view.Va();else{const o=await $oe(t.localStore,So(e)),a=t.sharedClientState.addLocalQueryTarget(o.targetId);i=o.targetId,r=await Eae(t,e,i,a==="current",o.resumeToken),t.isPrimaryClient&&Ez(t.remoteStore,o)}return r}async function Eae(n,e,t,i,r){n.Ma=(d,p,m)=>async function(x,_,g,A){let S=_.view.ha(g);S.Xi&&(S=await kB(x.localStore,_.query,!1).then(({documents:P})=>_.view.ha(P,S)));const w=A&&A.targetChanges.get(_.targetId),R=A&&A.targetMismatches.get(_.targetId)!=null,T=_.view.applyChanges(S,x.isPrimaryClient,w,R);return XB(x,_.targetId,T.da),T.snapshot}(n,d,p,m);const s=await kB(n.localStore,e,!0),o=new vae(e,s.hs),a=o.ha(s.documents),l=zm.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),c=o.applyChanges(a,n.isPrimaryClient,l);XB(n,t,c.da);const h=new _ae(e,t,o);return n.ga.set(e,h),n.pa.has(t)?n.pa.get(t).push(e):n.pa.set(t,[e]),c.snapshot}async function wae(n,e){const t=en(n),i=t.ga.get(e),r=t.pa.get(i.targetId);if(r.length>1)return t.pa.set(i.targetId,r.filter(s=>!hx(s,e))),void t.ga.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||await aM(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),wz(t.remoteStore,i.targetId),lM(t,i.targetId)}).catch(y2)):(lM(t,i.targetId),await aM(t.localStore,i.targetId,!0))}async function Pz(n,e){const t=en(n);try{const i=await Joe(t.localStore,e);e.targetChanges.forEach((r,s)=>{const o=t.Sa.get(s);o&&(ii(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.ma=!0:r.modifiedDocuments.size>0?ii(o.ma):r.removedDocuments.size>0&&(ii(o.ma),o.ma=!1))}),await Dz(t,i,e)}catch(i){await y2(i)}}function jB(n,e,t){const i=en(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const r=[];i.ga.forEach((s,o)=>{const a=o.view.U_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=en(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const p of d.Q_)p.U_(a)&&(c=!0)}),c&&F2(l)}(i.eventManager,e),r.length&&i.fa.u_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Mae(n,e,t){const i=en(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.Sa.get(e),s=r&&r.key;if(s){let o=new Kn(yt.comparator);o=o.insert(s,Yi.newNoDocument(s,Tt.min()));const a=$t().add(s),l=new mx(Tt.min(),new Map,new Kn(tn),o,a);await Pz(i,l),i.wa=i.wa.remove(s),i.Sa.delete(e),O2(i)}else await aM(i.localStore,e,!1).then(()=>lM(i,e,t)).catch(y2)}function lM(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.pa.get(e))n.ga.delete(i),t&&n.fa.xa(i,t);n.pa.delete(e),n.isPrimaryClient&&n.ba.Vr(e).forEach(i=>{n.ba.containsKey(i)||Iz(n,i)})}function Iz(n,e){n.ya.delete(e.path.canonicalString());const t=n.wa.get(e);t!==null&&(wz(n.remoteStore,t),n.wa=n.wa.remove(e),n.Sa.delete(t),O2(n))}function XB(n,e,t){for(const i of t)i instanceof Rz?(n.ba.addReference(i.key,e),Tae(n,i)):i instanceof bz?(Ge("SyncEngine","Document no longer in limbo: "+i.key),n.ba.removeReference(i.key,e),n.ba.containsKey(i.key)||Iz(n,i.key)):It()}function Tae(n,e){const t=e.key,i=t.path.canonicalString();n.wa.get(t)||n.ya.has(i)||(Ge("SyncEngine","New document in limbo: "+t),n.ya.add(i),O2(n))}function O2(n){for(;n.ya.size>0&&n.wa.size<n.maxConcurrentLimboResolutions;){const e=n.ya.values().next().value;n.ya.delete(e);const t=new yt(Un.fromString(e)),i=n.va.next();n.Sa.set(i,new xae(t)),n.wa=n.wa.insert(t,i),Ez(n.remoteStore,new ja(So(ez(t.path)),i,"TargetPurposeLimboResolution",x2._e))}}async function Dz(n,e,t){const i=en(n),r=[],s=[],o=[];i.ga.isEmpty()||(i.ga.forEach((a,l)=>{o.push(i.Ma(l,e,t).then(c=>{if((c||t)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){r.push(c);const h=I2.Ki(l.targetId,c);s.push(h)}}))}),await Promise.all(o),i.fa.u_(r),await async function(l,c){const h=en(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>xe.forEach(c,p=>xe.forEach(p.qi,m=>h.persistence.referenceDelegate.addReference(d,p.targetId,m)).next(()=>xe.forEach(p.Qi,m=>h.persistence.referenceDelegate.removeReference(d,p.targetId,m)))))}catch(d){if(!Vm(d))throw d;Ge("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const p=d.targetId;if(!d.fromCache){const m=h.ns.get(p),y=m.snapshotVersion,x=m.withLastLimboFreeSnapshotVersion(y);h.ns=h.ns.insert(p,x)}}}(i.localStore,s))}async function Cae(n,e){const t=en(n);if(!t.currentUser.isEqual(e)){Ge("SyncEngine","User change. New user:",e.toKey());const i=await _z(t.localStore,e);t.currentUser=e,function(s,o){s.Ca.forEach(a=>{a.forEach(l=>{l.reject(new lt(Ne.CANCELLED,o))})}),s.Ca.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Dz(t,i.us)}}function Rae(n,e){const t=en(n),i=t.Sa.get(e);if(i&&i.ma)return $t().add(i.key);{let r=$t();const s=t.pa.get(e);if(!s)return r;for(const o of s){const a=t.ga.get(o);r=r.unionWith(a.view.la)}return r}}function bae(n){const e=en(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Pz.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Rae.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Mae.bind(null,e),e.fa.u_=mae.bind(null,e.eventManager),e.fa.xa=gae.bind(null,e.eventManager),e}class JB{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Az(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Xoe(this.persistence,new Woe,e.initialUser,this.serializer)}createPersistence(e){return new zoe(P2.Hr,this.serializer)}createSharedClientState(e){return new qoe}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Pae{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>jB(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Cae.bind(null,this.syncEngine),await uae(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new fae}()}createDatastore(e){const t=Az(e.databaseInfo.databaseId),i=function(s){return new tae(s)}(e.databaseInfo);return function(s,o,a,l){return new rae(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,r,s,o,a){return new oae(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>jB(this.syncEngine,t,0),function(){return zB.D()?new zB:new Qoe}())}createSyncEngine(e,t){return function(r,s,o,a,l,c,h){const d=new Aae(r,s,o,a,l,c);return h&&(d.Fa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(i){const r=en(i);Ge("RemoteStore","RemoteStore shutting down."),r.v_.add(5),await Gm(r),r.M_.shutdown(),r.x_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iae{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Co("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dae{constructor(e,t,i,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Ki.UNAUTHENTICATED,this.clientId=_se.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async s=>{Ge("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(i,s=>(Ge("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new lt(Ne.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ol;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Cz(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function CS(n,e){n.asyncQueue.verifyOperationInProgress(),Ge("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async r=>{i.isEqual(r)||(await _z(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function KB(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Bae(n);Ge("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>HB(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>HB(e.remoteStore,r)),n._onlineComponents=e}function Lae(n){return n.name==="FirebaseError"?n.code===Ne.FAILED_PRECONDITION||n.code===Ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}async function Bae(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ge("FirestoreClient","Using user provided OfflineComponentProvider");try{await CS(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!Lae(t))throw t;rf("Error using user provided cache. Falling back to memory cache: "+t),await CS(n,new JB)}}else Ge("FirestoreClient","Using default OfflineComponentProvider"),await CS(n,new JB);return n._offlineComponents}async function Nae(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ge("FirestoreClient","Using user provided OnlineComponentProvider"),await KB(n,n._uninitializedComponentsProvider._online)):(Ge("FirestoreClient","Using default OnlineComponentProvider"),await KB(n,new Pae))),n._onlineComponents}async function Fae(n){const e=await Nae(n),t=e.eventManager;return t.onListen=Sae.bind(null,e.syncEngine),t.onUnlisten=wae.bind(null,e.syncEngine),t}function Oae(n,e,t={}){const i=new ol;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new Iae({next:p=>{o.enqueueAndForget(()=>pae(s,d)),p.fromCache&&l.source==="server"?c.reject(new lt(Ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new yae(a,h,{includeMetadataChanges:!0,Z_:!0});return dae(s,d)}(await Fae(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lz(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $B=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uae(n,e,t){if(!t)throw new lt(Ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function kae(n,e,t,i){if(e===!0&&i===!0)throw new lt(Ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function YB(n){if(yt.isDocumentKey(n))throw new lt(Ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Vae(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":It()}function cM(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new lt(Ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Vae(n);throw new lt(Ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qB{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new lt(Ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new lt(Ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kae("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Lz((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new lt(Ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new lt(Ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new lt(Ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class U2{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qB({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new lt(Ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new lt(Ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qB(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new hse;switch(i.type){case"firstParty":return new mse(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new lt(Ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=$B.get(t);i&&(Ge("ComponentProvider","Removing Datastore"),$B.delete(t),i.terminate())}(this),Promise.resolve()}}function zae(n,e,t,i={}){var r;const s=(n=cM(n,U2))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&rf("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=Ki.MOCK_USER;else{a=zne(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new lt(Ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ki(c)}n._authCredentials=new fse(new X9(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new yx(this.firestore,e,this._query)}}class Mf{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nh(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mf(this.firestore,e,this._key)}}class Nh extends yx{constructor(e,t,i){super(e,t,ez(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mf(this.firestore,null,new yt(e))}withConverter(e){return new Nh(this.firestore,e,this._path)}}function Bz(n,e,...t){if(n=Kne(n),Uae("collection","path",e),n instanceof U2){const i=Un.fromString(e,...t);return YB(i),new Nh(n,null,i)}{if(!(n instanceof Mf||n instanceof Nh))throw new lt(Ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Un.fromString(e,...t));return YB(i),new Nh(n.firestore,null,i)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gae{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new Sz(this,"async_queue_retry"),this._u=()=>{const t=TS();t&&Ge("AsyncQueue","Visibility state changed to "+t.visibilityState),this.jo.Ko()};const e=TS();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const t=TS();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});const t=new ol;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}async cu(){if(this.eu.length!==0){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!Vm(e))throw e;Ge("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo(()=>this.cu())}}uu(e){const t=this.Xa.then(()=>(this.iu=!0,e().catch(i=>{this.ru=i,this.iu=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw Co("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.iu=!1,i))));return this.Xa=t,t}enqueueAfterDelay(e,t,i){this.au(),this.ou.indexOf(e)>-1&&(t=0);const r=N2.createAndSchedule(this,e,t,i,s=>this.lu(s));return this.nu.push(r),r}au(){this.ru&&It()}verifyOperationInProgress(){}async hu(){let e;do e=this.Xa,await e;while(e!==this.Xa)}Pu(e){for(const t of this.nu)if(t.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.nu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){const t=this.nu.indexOf(e);this.nu.splice(t,1)}}class Nz extends U2{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=function(){return new Gae}(),this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Fz(this),this._firestoreClient.terminate()}}function Hae(n,e){const t=typeof n=="object"?n:Jie(),i=typeof n=="string"?n:e||"(default)",r=Hie(t,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=kne("firestore");s&&zae(r,...s)}return r}function Wae(n){return n._firestoreClient||Fz(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Fz(n){var e,t,i;const r=n._freezeSettings(),s=function(a,l,c,h){return new Pse(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Lz(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._firestoreClient=new Dae(n._authCredentials,n._appCheckCredentials,n._queue,s),!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hv(nr.fromBase64String(e))}catch(t){throw new lt(Ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Hv(nr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oz{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new lt(Ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jae{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new lt(Ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new lt(Ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return tn(this._lat,e._lat)||tn(this._long,e._long)}}const Xae=new RegExp("[~\\*/\\[\\]]");function Jae(n,e,t){if(e.search(Xae)>=0)throw QB(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Oz(...e.split("."))._internalPath}catch{throw QB(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function QB(n,e,t,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new lt(Ne.INVALID_ARGUMENT,a+n+l)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uz{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Mf(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Kae(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(kz("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Kae extends Uz{data(){return super.data()}}function kz(n,e){return typeof e=="string"?Jae(n,e):e instanceof Oz?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $ae(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new lt(Ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Yae{convertValue(e,t="none"){switch(Xc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Zn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(jc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw It()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return cx(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertGeoPoint(e){return new jae(Zn(e.latitude),Zn(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=S2(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Qp(e));default:return null}}convertTimestamp(e){const t=yl(e);return new Pr(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Un.fromString(e);ii(vz(i));const r=new Zp(i.get(1),i.get(3)),s=new yt(i.popFirst(5));return r.isEqual(t)||Co(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qae extends Uz{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Vy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(kz("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Vy extends qae{data(e={}){return super.data(e)}}class Qae{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new hy(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Vy(this._firestore,this._userDataWriter,i.key,i,new hy(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new lt(Ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const l=new Vy(r._firestore,r._userDataWriter,a.doc.key,a.doc,new hy(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Vy(r._firestore,r._userDataWriter,a.doc.key,a.doc,new hy(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:Zae(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Zae(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return It()}}class ele extends Yae{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hv(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mf(this.firestore,null,t)}}function Vz(n){n=cM(n,yx);const e=cM(n.firestore,Nz),t=Wae(e),i=new ele(e);return $ae(n._query),Oae(t,n._query).then(r=>new Qae(e,i,n,r))}(function(e,t=!0){(function(r){Sf=r})(Xie),Dv(new zp("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new Nz(new dse(i.getProvider("auth-internal")),new yse(i.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new lt(Ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zp(c.options.projectId,h)}(o,r),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ph(vB,"4.4.1",e),Ph(vB,"4.4.1","esm2017")})();const tle={apiKey:"AIzaSyDwn_v9WUL1_9NDxWgPGwApbRt5bqaLw5E",authDomain:"portafolio-daniel-gomez.firebaseapp.com",projectId:"portafolio-daniel-gomez",storageBucket:"portafolio-daniel-gomez.appspot.com",messagingSenderId:"291461463470",appId:"1:291461463470:web:0fe05f5623d3b7b8fe9c3f",measurementId:"G-0ZT44RTZT5"},nle=VV(tle),zz=Hae(nle),ile=Bz(zz,"projects"),rle=Bz(zz,"curriculum"),sle=()=>{const[n,e]=W.useState([]),t=async()=>{const r=(await Vz(rle)).docs.map((s,o)=>{const{link:a,title:l,icon:c}=s.data();return{index:o,link:a,title:l,icon:c}});e(r)};return W.useEffect(()=>{t()},[]),Y.jsx(Y.Fragment,{children:n.map(i=>Y.jsxs("button",{className:"bg-tertiary py-3 px-8 max-sm:px-4 outline-none w-fit max-sm:w-full max-sm:text-sm text-base text-white font-bold shadow-md shadow-primary rounded-xl transition duration-200 hover:bg-[#73ffff] hover:text-tertiary border-2 border-[#73ffff] hover:border-tertiary flex justify-center items-center gap-2",children:[Y.jsx("a",{href:i.link,target:"_blank",download:!0,children:i.title}),Y.jsx("img",{src:i.icon,alt:i.title,className:"w-7 h-auto"})]},i.title))})};var ole=Object.defineProperty,ale=Object.defineProperties,lle=Object.getOwnPropertyDescriptors,ZB=Object.getOwnPropertySymbols,cle=Object.prototype.hasOwnProperty,ule=Object.prototype.propertyIsEnumerable,e3=(n,e,t)=>e in n?ole(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ed=(n,e)=>{for(var t in e||(e={}))cle.call(e,t)&&e3(n,t,e[t]);if(ZB)for(var t of ZB(e))ule.call(e,t)&&e3(n,t,e[t]);return n},wd=(n,e)=>ale(n,lle(e)),k2=class extends W.Component{constructor(n){super(n),this.ref=Bc.createRef(),this.state={style:{}};const e={reverse:!1,max:35,perspective:1e3,easing:"cubic-bezier(.03,.98,.52,.99)",scale:"1.1",speed:"1000",transition:!0,axis:null,reset:!0};this.width=null,this.height=null,this.left=null,this.top=null,this.transitionTimeout=null,this.updateCall=null,this.element=null,this.settings=Object.assign({},e,this.props.options),this.reverse=this.settings.reverse?-1:1,this.onMouseEnter=this.onMouseEnter.bind(this,this.props.onMouseEnter),this.onMouseMove=this.onMouseMove.bind(this,this.props.onMouseMove),this.onMouseLeave=this.onMouseLeave.bind(this,this.props.onMouseLeave)}componentDidMount(){this.element=this.ref.current,setTimeout(()=>{this.element.parentElement.querySelector(":hover")===this.element&&this.onMouseEnter()},0)}componentWillUnmount(){clearTimeout(this.transitionTimeout),cancelAnimationFrame(this.updateCall)}onMouseEnter(n=()=>{},e){return this.updateElementPosition(),this.setState(Object.assign({},this.state,{style:wd(Ed({},this.state.style),{willChange:"transform"})})),this.setTransition(),n(e)}reset(){window.requestAnimationFrame(()=>{this.setState(Object.assign({},this.state,{style:wd(Ed({},this.state.style),{transform:`perspective(${this.settings.perspective}px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)`})}))})}onMouseMove(n=()=>{},e){return e.persist(),this.updateCall!==null&&window.cancelAnimationFrame(this.updateCall),this.event=e,this.updateCall=requestAnimationFrame(this.update.bind(this,e)),n(e)}setTransition(){clearTimeout(this.transitionTimeout),this.setState(Object.assign({},this.state,{style:wd(Ed({},this.state.style),{transition:`${this.settings.speed}ms ${this.settings.easing}`})})),this.transitionTimeout=setTimeout(()=>{this.setState(Object.assign({},this.state,{style:wd(Ed({},this.state.style),{transition:""})}))},this.settings.speed)}onMouseLeave(n=()=>{},e){return this.setTransition(),this.settings.reset&&this.reset(),n(e)}getValues(n){const e=(n.nativeEvent.clientX-this.left)/this.width,t=(n.nativeEvent.clientY-this.top)/this.height,i=Math.min(Math.max(e,0),1),r=Math.min(Math.max(t,0),1),s=(this.reverse*(this.settings.max/2-i*this.settings.max)).toFixed(2),o=(this.reverse*(r*this.settings.max-this.settings.max/2)).toFixed(2),a=i*100,l=r*100;return{tiltX:s,tiltY:o,percentageX:a,percentageY:l}}updateElementPosition(){const n=this.element.getBoundingClientRect();this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this.left=n.left,this.top=n.top}update(n){const e=this.getValues(n);this.setState(Object.assign({},this.state,{style:wd(Ed({},this.state.style),{transform:`perspective(${this.settings.perspective}px) rotateX(${this.settings.axis==="x"?0:e.tiltY}deg) rotateY(${this.settings.axis==="y"?0:e.tiltX}deg) scale3d(${this.settings.scale}, ${this.settings.scale}, ${this.settings.scale})`})})),this.updateCall=null}render(){const n=Object.assign({},this.props.style,this.state.style);return Y.jsx("div",{style:n,ref:this.ref,className:this.props.className,onMouseEnter:this.onMouseEnter,onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave,children:this.props.children})}};const hle=({color:n="currentColor",size:e=24,className:t,...i})=>Bc.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:e,height:e,fill:n,...i,className:"remixicon "+(t||"")},Bc.createElement("path",{d:"M4.00098 3H20.001C20.5533 3 21.001 3.44772 21.001 4V20C21.001 20.5523 20.5533 21 20.001 21H4.00098C3.44869 21 3.00098 20.5523 3.00098 20V4C3.00098 3.44772 3.44869 3 4.00098 3ZM5.00098 5V19H19.001V5H5.00098ZM7.50098 9C6.67255 9 6.00098 8.32843 6.00098 7.5C6.00098 6.67157 6.67255 6 7.50098 6C8.3294 6 9.00098 6.67157 9.00098 7.5C9.00098 8.32843 8.3294 9 7.50098 9ZM6.50098 10H8.50098V17.5H6.50098V10ZM12.001 10.4295C12.5854 9.86534 13.2665 9.5 14.001 9.5C16.072 9.5 17.501 11.1789 17.501 13.25V17.5H15.501V13.25C15.501 12.2835 14.7175 11.5 13.751 11.5C12.7845 11.5 12.001 12.2835 12.001 13.25V17.5H10.001V10H12.001V10.4295Z"})),fle=()=>Y.jsxs(ci.section,{variants:ml(0),initial:"hidden",whileInView:"show",viewport:{once:!0,amount:.25},className:`${Jn.padding} max-w-7xl mx-auto relative z-0`,children:[Y.jsx("span",{className:"hash-span",id:"conóceme",children:" "}),Y.jsxs(ci.div,{children:[Y.jsx("p",{className:`${Jn.sectionSubText}`,children:"Introducción"}),Y.jsx("h2",{className:`${Jn.sectionHeadText}`,children:"¿Quién soy?"})]}),Y.jsxs("div",{className:"flex flex-row gap-8 max-lg:gap-0 max-sm:flex-col items-start",children:[Y.jsxs("div",{className:"flex flex-col justify-start items-start ",children:[Y.jsxs("div",{className:"mb-8",children:[Y.jsxs("p",{className:"mt-4 text-secondary text-[17px] max-w-3xl leading-[30px]",children:["Soy Daniel Iván, aunque mis amigos me llaman Dani, empecé en la producción de sonido cuando tenía 15 años, utilizando Ableton Live 9, ahora con 20 años de edad"," ",Y.jsx("span",{className:"text-[#73ffff]",children:"me especializo en la creación de bandas sonoras para proyectos audiovisuales y branding sonoro para empresas locales"}),"."]}),Y.jsxs("p",{className:"mt-4 text-secondary text-[17px] max-w-3xl leading-[30px]",children:["Algunos de mis logros incluyen"," ",Y.jsx("span",{className:"text-[#73ffff]",children:"colaborar para la miniserie ¨La Llave de la Vida¨ como diseñador sonoro, musicalizador, microfonista y sonidista"}),", Fue un gran desafío que amplió tanto mis habilidades técnicas como las de trabajo en equipo."]}),Y.jsxs("p",{className:"mt-4 text-secondary text-[17px] max-w-3xl leading-[30px]",children:["Soy aprendiz autodidacta,"," ",Y.jsx("span",{className:"text-[#73ffff]",children:"he pasado desde tocar la guitarra a mezclar en 5.1, todo gracias a vídeos de YouTube"}),", simultáneamente, me convertí en desarrollador web con formaciones online."]}),Y.jsxs("p",{className:"mt-4 text-secondary text-[17px] max-w-3xl leading-[30px]",children:["Mi objetivo es"," ",Y.jsx("span",{className:"text-[#73ffff]",children:"contribuir a la creación de producciones musicales y audiovisuales"}),", impulsándolas a nivel global mediante la aplicación de mis conocimientos y las herramientas tecnológicas."]})]}),Y.jsxs("div",{className:"flex flex-row max-xs:flex-col gap-6 w-full justify-start max-sm:justify-between items-center",children:[Y.jsx(sle,{}),Y.jsx("button",{className:"bg-tertiary py-3 px-8 max-sm:px-4 outline-none w-fit max-sm:text-sm text-base text-white font-bold shadow-md shadow-primary rounded-xl transition duration-200 hover:bg-[#73ffff] hover:text-tertiary border-2 border-[#73ffff] hover:border-tertiary",children:Y.jsx("a",{href:"https://www.linkedin.com/in/gomezdanielivan/",target:"_blank",children:Y.jsx(hle,{className:"w-7 h-auto"})})})]})]}),Y.jsx(k2,{options:{max:45,scale:1,speed:450},children:Y.jsx("div",{className:"w-[300px] h-[300px] overflow-hidden max-lg:hidden block rounded-full shadow-xl shadow-[#52525211]",children:Y.jsx("img",{src:Tne,alt:"foto de perfil de Daniel Gomez",className:"w-full h-auto block"})})})]}),Y.jsxs("div",{children:[Y.jsx("div",{className:"mt-12",children:Y.jsx("h3",{className:" font-black text-white lg:text-[30px] sm:text-[26px] xs:text-[20px] text-[16px] lg:leading-[40px]",children:"Mis Habilidades."})}),Y.jsx(ci.div,{variants:ml(.5),className:"mt-10 flex flex-wrap justify-start gap-10",children:Cne.map((n,e)=>Y.jsx(Vle,{index:e,...n},n.title))})]})]});var vx={},Gz={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=r(s,i(a)))}return s}function i(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)e.call(s,a)&&s[a]&&(o=r(o,a));return o}function r(s,o){return o?s?s+" "+o:s+o:s}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(Gz);var Hz=Gz.exports;vx.__esModule=!0;vx.default=void 0;var dle=V2(W),Da=V2(gk),ple=V2(Hz);function V2(n){return n&&n.__esModule?n:{default:n}}const Wz=({animate:n=!0,className:e="",layout:t="2-columns",lineColor:i="#FFF",children:r})=>(typeof window=="object"&&document.documentElement.style.setProperty("--line-color",i),dle.default.createElement("div",{className:(0,ple.default)(e,"vertical-timeline",{"vertical-timeline--animate":n,"vertical-timeline--two-columns":t==="2-columns","vertical-timeline--one-column-left":t==="1-column"||t==="1-column-left","vertical-timeline--one-column-right":t==="1-column-right"})},r));Wz.propTypes={children:Da.default.oneOfType([Da.default.arrayOf(Da.default.node),Da.default.node]).isRequired,className:Da.default.string,animate:Da.default.bool,layout:Da.default.oneOf(["1-column-left","1-column","2-columns","1-column-right"]),lineColor:Da.default.string};var mle=Wz;vx.default=mle;var _x={};function uM(){return uM=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},uM.apply(this,arguments)}function gle(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,hM(n,e)}function hM(n,e){return hM=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},hM(n,e)}function yle(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}var fM=new Map,fy=new WeakMap,t3=0,jz=void 0;function vle(n){jz=n}function _le(n){return n?(fy.has(n)||(t3+=1,fy.set(n,t3.toString())),fy.get(n)):"0"}function xle(n){return Object.keys(n).sort().filter(function(e){return n[e]!==void 0}).map(function(e){return e+"_"+(e==="root"?_le(n.root):n[e])}).toString()}function Ale(n){var e=xle(n),t=fM.get(e);if(!t){var i=new Map,r,s=new IntersectionObserver(function(o){o.forEach(function(a){var l,c=a.isIntersecting&&r.some(function(h){return a.intersectionRatio>=h});n.trackVisibility&&typeof a.isVisible>"u"&&(a.isVisible=c),(l=i.get(a.target))==null||l.forEach(function(h){h(c,a)})})},n);r=s.thresholds||(Array.isArray(n.threshold)?n.threshold:[n.threshold||0]),t={id:e,observer:s,elements:i},fM.set(e,t)}return t}function z2(n,e,t,i){if(t===void 0&&(t={}),i===void 0&&(i=jz),typeof window.IntersectionObserver>"u"&&i!==void 0){var r=n.getBoundingClientRect();return e(i,{isIntersecting:i,target:n,intersectionRatio:typeof t.threshold=="number"?t.threshold:0,time:0,boundingClientRect:r,intersectionRect:r,rootBounds:r}),function(){}}var s=Ale(t),o=s.id,a=s.observer,l=s.elements,c=l.get(n)||[];return l.has(n)||l.set(n,c),c.push(e),a.observe(n),function(){c.splice(c.indexOf(e),1),c.length===0&&(l.delete(n),a.unobserve(n)),l.size===0&&(a.disconnect(),fM.delete(o))}}var Sle=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function n3(n){return typeof n.children!="function"}var Wv=function(n){gle(e,n);function e(i){var r;return r=n.call(this,i)||this,r.node=null,r._unobserveCb=null,r.handleNode=function(s){r.node&&(r.unobserve(),!s&&!r.props.triggerOnce&&!r.props.skip&&r.setState({inView:!!r.props.initialInView,entry:void 0})),r.node=s||null,r.observeNode()},r.handleChange=function(s,o){s&&r.props.triggerOnce&&r.unobserve(),n3(r.props)||r.setState({inView:s,entry:o}),r.props.onChange&&r.props.onChange(s,o)},r.state={inView:!!i.initialInView,entry:void 0},r}var t=e.prototype;return t.componentDidUpdate=function(r){(r.rootMargin!==this.props.rootMargin||r.root!==this.props.root||r.threshold!==this.props.threshold||r.skip!==this.props.skip||r.trackVisibility!==this.props.trackVisibility||r.delay!==this.props.delay)&&(this.unobserve(),this.observeNode())},t.componentWillUnmount=function(){this.unobserve(),this.node=null},t.observeNode=function(){if(!(!this.node||this.props.skip)){var r=this.props,s=r.threshold,o=r.root,a=r.rootMargin,l=r.trackVisibility,c=r.delay,h=r.fallbackInView;this._unobserveCb=z2(this.node,this.handleChange,{threshold:s,root:o,rootMargin:a,trackVisibility:l,delay:c},h)}},t.unobserve=function(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)},t.render=function(){if(!n3(this.props)){var r=this.state,s=r.inView,o=r.entry;return this.props.children({inView:s,entry:o,ref:this.handleNode})}var a=this.props,l=a.children,c=a.as,h=yle(a,Sle);return W.createElement(c||"div",uM({ref:this.handleNode},h),l)},e}(W.Component);Wv.displayName="InView";Wv.defaultProps={threshold:0,triggerOnce:!1,initialInView:!1};function Ele(n){var e=n===void 0?{}:n,t=e.threshold,i=e.delay,r=e.trackVisibility,s=e.rootMargin,o=e.root,a=e.triggerOnce,l=e.skip,c=e.initialInView,h=e.fallbackInView,d=W.useRef(),p=W.useState({inView:!!c}),m=p[0],y=p[1],x=W.useCallback(function(g){d.current!==void 0&&(d.current(),d.current=void 0),!l&&g&&(d.current=z2(g,function(A,S){y({inView:A,entry:S}),S.isIntersecting&&a&&d.current&&(d.current(),d.current=void 0)},{root:o,rootMargin:s,threshold:t,trackVisibility:r,delay:i},h))},[Array.isArray(t)?t.toString():t,o,s,a,l,r,h,i]);W.useEffect(function(){!d.current&&m.entry&&!a&&!l&&y({inView:!!c})});var _=[x,m.inView,m.entry];return _.ref=_[0],_.inView=_[1],_.entry=_[2],_}const wle=Object.freeze(Object.defineProperty({__proto__:null,InView:Wv,default:Wv,defaultFallbackInView:vle,observe:z2,useInView:Ele},Symbol.toStringTag,{value:"Module"})),Mle=r3(wle);_x.__esModule=!0;_x.default=void 0;var La=G2(W),xn=G2(gk),dy=G2(Hz),Tle=Mle;function G2(n){return n&&n.__esModule?n:{default:n}}const Xz=({children:n="",className:e="",contentArrowStyle:t=null,contentStyle:i=null,date:r="",dateClassName:s="",icon:o=null,iconClassName:a="",iconOnClick:l=null,onTimelineElementClick:c=null,iconStyle:h=null,id:d="",position:p="",style:m=null,textClassName:y="",intersectionObserverProps:x={rootMargin:"0px 0px -40px 0px",triggerOnce:!0},visible:_=!1})=>La.default.createElement(Tle.InView,x,({inView:g,ref:A})=>La.default.createElement("div",{ref:A,id:d,className:(0,dy.default)(e,"vertical-timeline-element",{"vertical-timeline-element--left":p==="left","vertical-timeline-element--right":p==="right","vertical-timeline-element--no-children":n===""}),style:m},La.default.createElement(La.default.Fragment,null,La.default.createElement("span",{style:h,onClick:l,className:(0,dy.default)(a,"vertical-timeline-element-icon",{"bounce-in":g||_,"is-hidden":!(g||_)})},o),La.default.createElement("div",{style:i,onClick:c,className:(0,dy.default)(y,"vertical-timeline-element-content",{"bounce-in":g||_,"is-hidden":!(g||_)})},La.default.createElement("div",{style:t,className:"vertical-timeline-element-content-arrow"}),n,La.default.createElement("span",{className:(0,dy.default)(s,"vertical-timeline-element-date")},r)))));Xz.propTypes={children:xn.default.oneOfType([xn.default.arrayOf(xn.default.node),xn.default.node]),className:xn.default.string,contentArrowStyle:xn.default.shape({}),contentStyle:xn.default.shape({}),date:xn.default.node,dateClassName:xn.default.string,icon:xn.default.element,iconClassName:xn.default.string,iconStyle:xn.default.shape({}),iconOnClick:xn.default.func,onTimelineElementClick:xn.default.func,id:xn.default.string,position:xn.default.string,style:xn.default.shape({}),textClassName:xn.default.string,visible:xn.default.bool,intersectionObserverProps:xn.default.shape({root:xn.default.object,rootMargin:xn.default.string,threshold:xn.default.number,triggerOnce:xn.default.bool})};var Cle=Xz;_x.default=Cle;var Jz={VerticalTimeline:vx.default,VerticalTimelineElement:_x.default};const Rle=()=>Y.jsxs(ci.section,{variants:ml(0),initial:"hidden",whileInView:"show",viewport:{once:!0,amount:.25},className:`${Jn.padding} max-w-7xl mx-auto relative z-0`,children:[Y.jsx("span",{className:"hash-span",id:"experiencia",children:" "}),Y.jsxs(ci.div,{children:[Y.jsx("p",{className:`${Jn.sectionSubText}`,children:"Mis logros hasta el momento"}),Y.jsx("h2",{className:`${Jn.sectionHeadText}`,children:"Experiencia de Trabajo"})]}),Y.jsx("div",{className:"mt-20 flex flex-col",children:Y.jsx(Jz.VerticalTimeline,{children:Rne.map((n,e)=>Y.jsx(kle,{experience:n},e))})})]}),ble=({index:n,name:e,description:t,tags:i,image:r,source_code_link:s,subname:o})=>Y.jsx(ci.div,{variants:j_("up","spring",n*.5,.75),children:Y.jsxs(k2,{options:{max:45,scale:1,speed:450},className:"bg-tertiary p-5 rounded-2xl sm:w-[360px] w-full",children:[Y.jsxs("div",{className:"relative w-full h-[230px]",children:[Y.jsx("img",{src:r,alt:e,className:"w-full h-full object-cover rounded-2xl"}),Y.jsx("div",{className:"absolute inset-0 justify-end m-3 card-img_hover",children:Y.jsx("div",{className:"black-gradient w-10 h-10 rounded-full flex justify-center items-center cursor-pointer",onClick:()=>window.open(s,"_blank"),children:Y.jsx("img",{src:yne,alt:"youtube",className:"w-1/2 h-1/2 object-contain"})})})]}),Y.jsxs("div",{className:"mt-5 ",children:[Y.jsx("h3",{className:"text-white font-semibold text-[24px]",children:e}),Y.jsx("h4",{className:"text-white font-light text-[18px]",children:o}),Y.jsx("p",{className:"mt-2 text-secondary text-base",children:t})]}),Y.jsx("div",{className:"mt-4 flex flex-wrap  gap-2",children:i.map(a=>Y.jsxs("p",{className:`text-[14px] ${a.color}`,children:["#",a.name]},a.name))})]})}),Ple=()=>{const[n,e]=W.useState([]),t=async()=>{const r=(await Vz(ile)).docs.map((s,o)=>{const{name:a,description:l,tags:c,image:h,source_code_link:d,subname:p}=s.data();return{index:o,name:a,description:l,tags:c,image:h,source_code_link:d,subname:p}});e(r)};return W.useEffect(()=>{t()},[]),Y.jsxs(ci.section,{variants:ml(0),initial:"hidden",whileInView:"show",viewport:{once:!0,amount:.25},className:`${Jn.padding} max-w-7xl mx-auto relative z-0`,children:[Y.jsx("span",{className:"hash-span",id:"proyectos",children:" "}),Y.jsxs(ci.div,{children:[Y.jsx("p",{className:`${Jn.sectionSubText}`,children:"Mi Trabajo"}),Y.jsx("h2",{className:`${Jn.sectionHeadText}`,children:"Proyectos Destacados."})]}),Y.jsx("div",{className:"w-full flex",children:Y.jsxs(ci.p,{variants:j_("","",.1,1),className:"mt-3 text-secondary text-[17px] max-w-3xl leading-[30px]",children:["En mi trayectoria, he tenido el privilegio de participar en proyectos que van más allá de las expectativas. Cada experiencia ha sido una oportunidad única para aplicar mi creatividad y habilidades, brindando resultados que destacan por su calidad y originalidad. De la conceptualización a la ejecución,"," ",Y.jsx("span",{className:"text-[#73ffff]",children:"cada proyecto representa un compromiso con la excelencia y la innovación"}),"."]})}),Y.jsx(ci.div,{variants:ml(.5),className:"mt-20 flex flex-wrap md:w-full  gap-7",children:n.map((i,r)=>Y.jsx(ble,{...i},`project-${r}`))})]})},Ile=({index:n,testimonial:e,name:t,designation:i,company:r,image:s})=>Y.jsxs(ci.div,{variants:j_("","spring",n*.5,.75),className:"bg-black-200 p-10 rounded-3xl w-[320px] max-[639px]:w-full",children:[Y.jsx("p",{className:"text-white font-black text-[48px]",children:"''"}),Y.jsxs("div",{className:"mt-1",children:[Y.jsx("p",{className:"text-white tracking-wider text-[18px]",children:e}),Y.jsxs("div",{className:"mt-7 flex justify-between items-center gap-1",children:[Y.jsxs("div",{className:"flex-1 flex flex-col",children:[Y.jsxs("p",{className:"text-white font-medium text-[16px]",children:[Y.jsx("span",{className:"blue-text-gradient",children:"@"})," ",t]}),Y.jsxs("p",{className:"mt-1 text-secondary text-[14px]",children:[i," of ",r]})]}),Y.jsx("img",{src:s,alt:`feedback-by-${t}`,className:"w-10 h-10 rounded-full object-cover"})]})]})]}),Dle=()=>Y.jsxs(ci.section,{variants:ml(0),initial:"hidden",whileInView:"show",viewport:{once:!0,amount:.25},className:`${Jn.padding} max-w-7xl mx-auto relative z-0`,children:[Y.jsx("span",{className:"hash-span",children:" "}),Y.jsxs("div",{className:"mt-12 bg-black-100 rounded-[20px]",children:[Y.jsx("div",{className:`${Jn.padding} bg-tertiary rounded-2xl min-h-[300px]`,children:Y.jsxs(ci.div,{children:[Y.jsx("p",{className:`${Jn.heroSubText}`,children:"What others say"}),Y.jsx("h2",{className:`${Jn.heroHeadText}`,children:"Comentarios"})]})}),Y.jsx(ci.div,{variants:ml(.5),className:`${Jn.paddingX} -mt-10 pb-14 flex flex-wrap gap-7`,children:bne.map((n,e)=>Y.jsx(Ile,{index:e,...n},n.name))})]})]}),tm={_origin:"https://api.emailjs.com"},Lle=(n,e="https://api.emailjs.com")=>{tm._userID=n,tm._origin=e},Kz=(n,e,t)=>{if(!n)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class i3{constructor(e){this.status=e?e.status:0,this.text=e?e.responseText:"Network Error"}}const $z=(n,e,t={})=>new Promise((i,r)=>{const s=new XMLHttpRequest;s.addEventListener("load",({target:o})=>{const a=new i3(o);a.status===200||a.text==="OK"?i(a):r(a)}),s.addEventListener("error",({target:o})=>{r(new i3(o))}),s.open("POST",tm._origin+n,!0),Object.keys(t).forEach(o=>{s.setRequestHeader(o,t[o])}),s.send(e)}),Ble=(n,e,t,i)=>{const r=i||tm._userID;return Kz(r,n,e),$z("/api/v1.0/email/send",JSON.stringify({lib_version:"3.12.1",user_id:r,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"})},Nle=n=>{let e;if(typeof n=="string"?e=document.querySelector(n):e=n,!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return e},Fle=(n,e,t,i)=>{const r=i||tm._userID,s=Nle(t);Kz(r,n,e);const o=new FormData(s);return o.append("lib_version","3.12.1"),o.append("service_id",n),o.append("template_id",e),o.append("user_id",r),$z("/api/v1.0/email/send-form",o)},Ole={init:Lle,send:Ble,sendForm:Fle},Ule=()=>{const n=W.useRef(null),[e,t]=W.useState({name:"",email:"",message:""}),[i,r]=W.useState(!1),s=a=>{const{name:l,value:c}=a.target;t({...e,[l]:c})},o=a=>{if(a.preventDefault(),e.name===""||e.email===""||e.message===""){alert("Por favor, completa todos los campos antes de enviar el formulario. :)");return}r(!0),Ole.send("service_ta4hxfw","template_fussyyg",{from_name:e.name,to_name:"Daniel Gómez",from_email:e.email,to_email:"danielivgho5@gmail.com",message:e.message},"DnpZZqAJ0_ZS9UCh9").then(()=>{r(!1),alert("¡Gracias, estaré contigo tan pronto sea posible!"),t({name:"",email:"",message:""})},l=>{r(!1),console.log(l),alert("Ups, algo salió mal...")})};return Y.jsxs(ci.section,{variants:ml(0),initial:"hidden",whileInView:"show",viewport:{once:!0,amount:.25},className:`${Jn.padding} max-w-7xl mx-auto relative z-0`,children:[Y.jsx("span",{className:"hash-span",id:"contacto",children:" "}),Y.jsxs("div",{className:"xl:mt-12 xl:flex-row flex-col-reverse flex gap-10 overflow-hidden ",children:[Y.jsxs(ci.div,{variants:JL("left","tween",.2,1),className:"flex-[0.75] bg-black-100 p-8 rounded-2xl",children:[Y.jsx("p",{className:`${Jn.heroSubText}`,children:"Encantado de ayudarte."}),Y.jsx("h3",{className:`${Jn.heroHeadText}`,children:"Contáctame."}),Y.jsxs("form",{ref:n,onSubmit:o,className:"mt-12 flex flex-col gap-8",children:[Y.jsxs("label",{className:"flex flex-col",children:[Y.jsx("span",{className:"text-white font-medium mb-4",children:"Tu nombre"}),Y.jsx("input",{type:"text",name:"name",value:e.name,onChange:s,placeholder:"¿Cuál es tu nombre?",className:"bg-tertiary py-4 px-6 placeholder:text-secondary text-white rounded-lg outlined-none border-none font-medium"})]}),Y.jsxs("label",{className:"flex flex-col",children:[Y.jsx("span",{className:"text-white font-medium mb-4",children:"Tu correo electrónico"}),Y.jsx("input",{type:"email",name:"email",value:e.email,onChange:s,placeholder:"¿Cuál es tu correo electrónico?",className:"bg-tertiary py-4 px-6 placeholder:text-secondary text-white rounded-lg outlined-none border-none font-medium"})]}),Y.jsxs("label",{className:"flex flex-col",children:[Y.jsx("span",{className:"text-white font-medium mb-4",children:"Tu mensaje"}),Y.jsx("textarea",{rows:7,name:"message",value:e.message,onChange:s,placeholder:"¿Qué estás pensando?",className:"bg-tertiary py-4 px-6 placeholder:text-secondary text-white rounded-lg outlined-none border-none font-medium"})]}),Y.jsx("button",{type:"submit",className:"bg-tertiary py-3 px-8 outline-none w-fit text-white font-bold shadow-md shadow-primary rounded-xl",children:i?"Enviando":"Enviar"})]})]}),Y.jsx(ci.div,{variants:JL("right","tween",.2,1),className:"xl:flex-1 xl:h-auto md:h-[550px] h-[350px]",children:Y.jsx(Cq,{})})]})]})},kle=({experience:n})=>Y.jsxs(Jz.VerticalTimelineElement,{contentStyle:{background:"#1d1836",color:"#fff"},contentArrowStyle:{borderRight:"7px solid #232631"},date:n.date,iconStyle:{background:n.iconBg},icon:Y.jsx("div",{className:"flex justify-center items-center w-full h-full",children:Y.jsx("img",{src:n.icon,alt:n.company_name,className:"w-[70%] h-[70%] object-contain rounded-full "})}),children:[Y.jsxs("div",{children:[Y.jsx("h3",{className:"text-white text-[24px] font-bold",children:n.title}),Y.jsx("p",{className:"text-secondary text-[16px] font-semibold",style:{margin:0},children:n.company_name})]}),Y.jsx("ul",{className:"mt-5 list-disc ml-5 space-y-2",children:n.points.map((e,t)=>Y.jsx("li",{className:"text-white text-[14px] pl-1 tracking-wider",children:e},`experience-points-${t}`))})]}),Vle=({index:n,title:e,icon:t})=>Y.jsx(k2,{options:{max:45,scale:1,speed:450},className:" w-full sm:w-[250px]",children:Y.jsx(ci.div,{variants:j_("right","spring",.5*n,.75),className:"w-full green-pink-gradient p-[1px] rounded-[20px] shadow-card",children:Y.jsxs("div",{className:"bg-tertiary rounded-[20px] py-5 px-8 min-h-[280px] flex justify-evenly items-center flex-col",children:[Y.jsx("img",{src:t,alt:e,className:"w-16 h-16 object-contain "}),Y.jsx("h3",{className:"text-white text-[20px] font-semibold text-center",children:e})]})})}),zle=()=>{const[n,e]=W.useState(""),[t,i]=W.useState(!1);return Y.jsx("nav",{className:`${Jn.paddingX} w-full flex items-center py-5 fixed top-0 z-20 bg-primary`,children:Y.jsxs("div",{className:"w-full flex justify-between max-w-7xl mx-auto",children:[Y.jsxs(U6,{to:"/",className:"flex items-center max-[997px]:items-start max-md:items-center  max-[262px]:items-start gap-3",onClick:()=>{e(""),window.scrollTo(0,0)},children:[Y.jsx("img",{src:gne,alt:"logo",className:"w-9 h-9 object-contain rounded-full"}),Y.jsxs("p",{className:"text-white text-[18px] font-semibold cursor-pointer flex max-md:flex-col mr-10 max-md:mr-8 ",children:["Daniel Gómez  ",Y.jsx("span",{className:"md:block hidden",children:"|  Productor de Sonido y Desarrollador Web"})]})]}),Y.jsx("ul",{className:"list-none hidden sm:flex  max-md:items-center max-[997px]:items-start  items-center flex-row gap-10",children:KL.map(r=>Y.jsx("li",{className:`${n===r.title?"text-white":"text-secondary"} hover:text-white text-[18px] font-medium cursor-pointer`,onClick:()=>{e(r.title)},children:Y.jsx("a",{href:`#${r.id}`,children:r.title})},r.id))}),Y.jsxs("div",{className:"sm:hidden flex flex-1 justify-end items-center",children:[Y.jsx("img",{src:t?_ne:vne,alt:"menu icon",className:"w-[28px] h-[28px] object-contain cursor-pointer",onClick:()=>{i(!t)}}),Y.jsx("div",{className:`${t?"flex":"hidden"} p-6 black-gradient absolute top-20 right-0 mx-4 my-2 min-w-[140px] z-10 rounded-xl`,children:Y.jsx("ul",{className:"list-none flex justify-end items-start flex-col gap-4",children:KL.map(r=>Y.jsx("li",{className:`${n===r.title?"text-white":"text-secondary"} font-poppins font-medium cursor-pointer text-[16px]`,onClick:()=>{i(!t),e(r.title)},children:Y.jsx("a",{href:`#${r.id}`,children:r.title})},r.id))})})]})]})})},Gle=()=>Y.jsx(N6,{children:Y.jsxs("div",{className:"relative z-0 bg-primary",children:[Y.jsxs("div",{className:"bg-hero-pattern bg-cover bg-no-repeat bg-center",children:[Y.jsx(zle,{}),Y.jsx(mne,{})]}),Y.jsx(fle,{}),Y.jsx(Ple,{}),Y.jsx(Rle,{}),Y.jsx(Dle,{}),Y.jsxs("div",{className:"relative z-0",children:[Y.jsx(Ule,{}),Y.jsx(rQ,{})]})]})});RS.createRoot(document.getElementById("root")).render(Y.jsx(Bc.StrictMode,{children:Y.jsx(Gle,{})}));
